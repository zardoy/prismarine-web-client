import{a as q,F as te,j as H}from"./jsx-runtime-37f7df21.js";import{r,a as Z}from"./index-f1f2c4b1.js";import{a as K,c as ne,p as re,i as $,o as oe}from"./floating-ui.dom-9b6a618e.js";import{r as se}from"./index-c74c9f7f.js";import{B as ie}from"./Button-171a86dd.js";import"./SharedHudVars-63c800bd.js";import"./PixelartIcon-62975882.js";const le=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:o,padding:i}=typeof e=="function"?e(n):e;return o&&t(o)?o.current!=null?K({element:o.current,padding:i}).fn(n):{}:o?K({element:o,padding:i}).fn(n):{}}}};var D=typeof document<"u"?r.useLayoutEffect:r.useEffect;function L(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,o,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!L(e[o],t[o]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(t,i[o]))return!1;for(o=n;o--!==0;){const u=i[o];if(!(u==="_owner"&&e.$$typeof)&&!L(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function J(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function z(e,t){const n=J(e);return Math.round(t*n)/n}function G(e){const t=r.useRef(e);return D(()=>{t.current=e}),t}function ae(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:i,elements:{reference:u,floating:f}={},transform:m=!0,whileElementsMounted:l,open:d}=e,[a,y]=r.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,P]=r.useState(o);L(h,o)||P(o);const[C,E]=r.useState(null),[b,R]=r.useState(null),w=r.useCallback(p=>{p!=v.current&&(v.current=p,E(p))},[E]),x=r.useCallback(p=>{p!==g.current&&(g.current=p,R(p))},[R]),s=u||C,c=f||b,v=r.useRef(null),g=r.useRef(null),_=r.useRef(a),I=G(l),M=G(i),T=r.useCallback(()=>{if(!v.current||!g.current)return;const p={placement:t,strategy:n,middleware:h};M.current&&(p.platform=M.current),ne(v.current,g.current,p).then(k=>{const O={...k,isPositioned:!0};B.current&&!L(_.current,O)&&(_.current=O,se.flushSync(()=>{y(O)}))})},[h,t,n,M]);D(()=>{d===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,y(p=>({...p,isPositioned:!1})))},[d]);const B=r.useRef(!1);D(()=>(B.current=!0,()=>{B.current=!1}),[]),D(()=>{if(s&&(v.current=s),c&&(g.current=c),s&&c){if(I.current)return I.current(s,c,T);T()}},[s,c,T,I]);const F=r.useMemo(()=>({reference:v,floating:g,setReference:w,setFloating:x}),[w,x]),S=r.useMemo(()=>({reference:s,floating:c}),[s,c]),V=r.useMemo(()=>{const p={position:n,left:0,top:0};if(!S.floating)return p;const k=z(S.floating,a.x),O=z(S.floating,a.y);return m?{...p,transform:"translate("+k+"px, "+O+"px)",...J(S.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:k,top:O}},[n,m,S.floating,a.x,a.y]);return r.useMemo(()=>({...a,update:T,refs:F,elements:S,floatingStyles:V}),[a,T,F,S,V])}const fe=Z["useInsertionEffect".toString()],ce=fe||(e=>e());function ue(e){const t=r.useRef(()=>{});return ce(()=>{t.current=e}),r.useCallback(function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t.current==null?void 0:t.current(...o)},[])}var U=typeof document<"u"?r.useLayoutEffect:r.useEffect;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},A.apply(this,arguments)}let W=!1,de=0;const N=()=>"floating-ui-"+de++;function me(){const[e,t]=r.useState(()=>W?N():void 0);return U(()=>{e==null&&t(N())},[]),r.useEffect(()=>{W||(W=!0)},[]),e}const pe=Z["useId".toString()],ee=pe||me,ge=r.forwardRef(function(t,n){let{context:{placement:o,elements:{floating:i},middlewareData:{arrow:u}},width:f=14,height:m=7,tipRadius:l=0,strokeWidth:d=0,staticOffset:a,stroke:y,d:h,style:{transform:P,...C}={},...E}=t;const b=ee();if(!i)return null;d*=2;const R=d/2,w=f/2*(l/-8+1),x=m/2*l/4,[s,c]=o.split("-"),v=re.isRTL(i),g=!!h,_=s==="top"||s==="bottom",I=a&&c==="end"?"bottom":"top";let M=a&&c==="end"?"right":"left";a&&v&&(M=c==="end"?"left":"right");const T=(u==null?void 0:u.x)!=null?a||u.x:"",B=(u==null?void 0:u.y)!=null?a||u.y:"",F=h||"M0,0"+(" H"+f)+(" L"+(f-w)+","+(m-x))+(" Q"+f/2+","+m+" "+w+","+(m-x))+" Z",S={top:g?"rotate(180deg)":"",left:g?"rotate(90deg)":"rotate(-90deg)",bottom:g?"":"rotate(180deg)",right:g?"rotate(-90deg)":"rotate(90deg)"}[s];return r.createElement("svg",A({},E,{"aria-hidden":!0,ref:n,width:g?f:f+d,height:f,viewBox:"0 0 "+f+" "+(m>f?m:f),style:{position:"absolute",pointerEvents:"none",[M]:T,[I]:B,[s]:_||g?"100%":"calc(100% - "+d/2+"px)",transform:""+S+(P??""),...C}}),d>0&&r.createElement("path",{clipPath:"url(#"+b+")",fill:"none",stroke:y,strokeWidth:d+(h?0:1),d:F}),r.createElement("path",{stroke:d&&!h?E.fill:"none",d:F}),r.createElement("clipPath",{id:b},r.createElement("rect",{x:-R,y:R*(g?-1:1),width:f+d,height:f})))});function he(){const e=new Map;return{emit(t,n){var o;(o=e.get(t))==null||o.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(i=>i!==n))||[])}}}const ye=r.createContext(null),Re=()=>r.useContext(ye);function we(e){var t;e===void 0&&(e={});const{open:n=!1,onOpenChange:o,nodeId:i}=e,[u,f]=r.useState(null),m=((t=e.elements)==null?void 0:t.reference)||u,l=ae(e),d=Re(),a=ue((s,c)=>{s&&(h.current.openEvent=c),o==null||o(s,c)}),y=r.useRef(null),h=r.useRef({}),P=r.useState(()=>he())[0],C=ee(),E=r.useCallback(s=>{const c=$(s)?{getBoundingClientRect:()=>s.getBoundingClientRect(),contextElement:s}:s;l.refs.setReference(c)},[l.refs]),b=r.useCallback(s=>{($(s)||s===null)&&(y.current=s,f(s)),($(l.refs.reference.current)||l.refs.reference.current===null||s!==null&&!$(s))&&l.refs.setReference(s)},[l.refs]),R=r.useMemo(()=>({...l.refs,setReference:b,setPositionReference:E,domReference:y}),[l.refs,b,E]),w=r.useMemo(()=>({...l.elements,domReference:m}),[l.elements,m]),x=r.useMemo(()=>({...l,refs:R,elements:w,dataRef:h,nodeId:i,floatingId:C,events:P,open:n,onOpenChange:a}),[l,i,C,P,n,a,R,w]);return U(()=>{const s=d==null?void 0:d.nodesRef.current.find(c=>c.id===i);s&&(s.context=x)}),r.useMemo(()=>({...l,context:x,refs:R,elements:w}),[l,R,w,x])}const xe=7,Se=0,Ee=({initialTooltip:e,...t})=>{const{localStorageKey:n="firstTimeTooltip",offset:o=0}=e,[i,u]=r.useState(n?localStorage[n]!=="false":!0);r.useEffect(()=>{let a;function y(){n&&(localStorage[n]="false",u(!1))}return i&&n&&(a=setTimeout(()=>{y()},1e4)),()=>{a&&clearTimeout(a),y()}},[]);const f=r.useRef(null),{refs:m,floatingStyles:l,context:d}=we({middleware:[le({element:f}),oe(xe+Se+o)],placement:e.placement});return q(te,{children:[H(ie,{...t,rootRef:m.setReference}),q("div",{ref:m.setFloating,style:{...l,background:"rgba(0, 0, 0, 0.3)",fontSize:8,pointerEvents:"none",userSelect:"text",padding:"2px 4px",opacity:i?1:0,transition:"opacity 0.3s ease-in-out",textShadow:"1px 1px 2px BLACK",zIndex:11},children:[e.content,H(ge,{ref:f,context:d,style:{opacity:.7}})]})]})};try{ButtonWithTooltip.displayName="ButtonWithTooltip",ButtonWithTooltip.__docgenInfo={description:"",displayName:"ButtonWithTooltip",props:{initialTooltip:{defaultValue:null,description:"",name:"initialTooltip",required:!0,type:{name:"{ content: string; placement?: Placement | undefined; localStorageKey?: string | null | undefined; offset?: number | undefined; }"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"string"}},inScreen:{defaultValue:null,description:"",name:"inScreen",required:!1,type:{name:"boolean"}},rootRef:{defaultValue:null,description:"",name:"rootRef",required:!1,type:{name:"Ref<HTMLButtonElement>"}}}}}catch{}const Oe={component:Ee},j={args:{label:"test",initialTooltip:{content:"hi there",localStorageKey:null}}};var X,Y,Q;j.parameters={...j.parameters,docs:{...(X=j.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    label: 'test',
    initialTooltip: {
      content: 'hi there',
      localStorageKey: null
    }
  }
}`,...(Q=(Y=j.parameters)==null?void 0:Y.docs)==null?void 0:Q.source}}};const Ie=["Primary"];export{j as Primary,Ie as __namedExportsOrder,Oe as default};
//# sourceMappingURL=ButtonWithTooltip.stories-204dd563.js.map
