{"version":3,"file":"BreathBar.stories-713fce00.js","sources":["../../src/react/BreathBar.tsx"],"sourcesContent":["import { useRef, useEffect } from 'react'\nimport SharedHudVars from './SharedHudVars'\nimport './BreathBar.css'\n\nexport type BreathBarProps = {\n  oxygen: number,\n}\n\nexport default ({\n  oxygen,\n}: BreathBarProps) => {\n  const breathRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    const breathbar = breathRef.current\n    if (breathbar && oxygen < 20) {\n      breathbar.style.display = 'flex'\n      breathbar.classList.toggle('low', oxygen <= 5)\n\n      const breaths = breathbar.children\n\n      for (const breath of breaths) {\n        breath.classList.remove('full')\n        breath.classList.remove('half')\n      }\n\n      for (let i = 0; i < Math.ceil(oxygen / 2); i++) {\n        if (i >= breaths.length) break\n\n        if (oxygen % 2 !== 0 && Math.ceil(oxygen / 2) === i + 1) {\n          breaths[i].classList.add('half')\n        } else {\n          breaths[i].classList.add('full')\n        }\n      }\n    } else if (breathbar && oxygen >= 20) {\n      breathbar.style.display = 'none'\n    }\n  }, [oxygen])\n\n  return <SharedHudVars>\n    <div ref={breathRef} className='breathbar'>\n      {\n        Array.from({ length: 10 }, () => 0)\n          .map((num, index) => <div\n            key={`breath-${index}`}\n            className='breath'\n          />)\n      }\n    </div>\n  </SharedHudVars>\n}\n"],"names":["BreathBar$1","oxygen","breathRef","useRef","useEffect","breathbar","breaths","breath","i","jsx","SharedHudVars","num","index"],"mappings":"sIAQA,MAAAA,EAAA,CAAA,CAAgB,OAAAC,CAEhB,IAAA,CACE,MAAAC,EAAAC,SAAA,IAAA,EAEAC,OAAAA,EAAAA,UAAA,IAAA,CACE,MAAAC,EAAAH,EAAA,QACA,GAAAG,GAAAJ,EAAA,GAAA,CACEI,EAAA,MAAA,QAAA,OACAA,EAAA,UAAA,OAAA,MAAAJ,GAAA,CAAA,EAEA,MAAAK,EAAAD,EAAA,SAEA,UAAAE,KAAAD,EACEC,EAAA,UAAA,OAAA,MAAA,EACAA,EAAA,UAAA,OAAA,MAAA,EAGF,QAAAC,EAAA,EAAAA,EAAA,KAAA,KAAAP,EAAA,CAAA,GACE,EAAAO,GAAAF,EAAA,QADFE,IAGEP,EAAA,IAAA,GAAA,KAAA,KAAAA,EAAA,CAAA,IAAAO,EAAA,EACEF,EAAAE,CAAA,EAAA,UAAA,IAAA,MAAA,EAEAF,EAAAE,CAAA,EAAA,UAAA,IAAA,MAAA,CAEJ,MAAAH,GAAAJ,GAAA,KAEAI,EAAA,MAAA,QAAA,OACF,EAAA,CAAAJ,CAAA,CAAA,EAGFQ,EAAAC,EAAA,CAAA,SAAAD,EAAA,MAAA,CAAA,IAAAP,EAAA,UAAA,YAAA,SAAA,MAAA,KAAA,CAAA,OAAA,IAAA,IAAA,CAAA,EAAA,IAAA,CAAAS,EAAAC,IAAAH,EAI6B,MAAC,CAAA,UAAA,QAEV,EAAA,UAAAG,CAAA,EADU,CAAA,CAAA,CAAA,CAAA,CAAA,CAMhC;;;;"}