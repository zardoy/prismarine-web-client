import{j as e,a as g,F as $}from"./jsx-runtime-37f7df21.js";import{R as f,r as M}from"./index-f1f2c4b1.js";import{S as ae}from"./Screen-295249d6.js";import{I as j}from"./Input-38b084ae.js";import{B as Y}from"./Button-171a86dd.js";import{S as Z}from"./Select-d805750b.js";import{u as Q,S as de}from"./Singleplayer-c0251ea1.js";import{P as T,p as se}from"./PixelartIcon-62975882.js";import"./simpleUtils-f26d34af.js";import"./SharedHudVars-63c800bd.js";import"./index-c74c9f7f.js";import"./floating-ui.dom-9b6a618e.js";import"./index.esm-b23235d8.js";import"./Tabs-928a87e0.js";import"./MessageFormattedString-24d5abea.js";import"./MessageFormatted-ac3715c5.js";import"./vanilla-66a0fdf5.js";import"./chatUtils-3faa5944.js";import"./client-6473ed4a.js";import"./errorBoundary-d5a5b903.js";const ue=({versions:t,selected:h,onChange:m,updateOptions:r,containerStyle:C})=>e(Z,{initialOptions:t,defaultValue:h,updateOptions:i=>{r==null||r(i)},onValueChange:m,containerStyle:C??{width:"190px"},getCssOnInput:i=>{if(!t||!i)return{};const s=t.map(u=>u.value.split(".").map(Number)),a=i.split(".").map(Number),c=(u,x)=>{for(let S=0;S<Math.max(u.length,x.length);S++){const b=u[S]||0,O=x[S]||0;if(b>O)return 1;if(b<O)return-1}return 0};s.sort(c);const R=s[0],l=s.at(-1);if(!(c(a,R)>=0&&c(a,l)<=0))return{border:"1px solid red"};if(!t.some(u=>u.value===i))return{border:"1px solid yellow"}}});try{SelectGameVersion.displayName="SelectGameVersion",SelectGameVersion.__docgenInfo={description:"",displayName:"SelectGameVersion",props:{versions:{defaultValue:null,description:"",name:"versions",required:!0,type:{name:"Version[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"Version"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((newValue: string) => void)"}},updateOptions:{defaultValue:null,description:"",name:"updateOptions",required:!1,type:{name:"((newSel: string) => void)"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},containerStyle:{defaultValue:null,description:"",name:"containerStyle",required:!1,type:{name:"CSSProperties"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const D=190,ce=({onBack:t,onConfirm:h,title:m="Add a Server",initialData:r,parseQs:C,onQsConnect:i,placeholders:s,accounts:a,versions:c,authenticatedAccounts:R})=>{const l=C?new URLSearchParams(window.location.search):void 0,A=l==null?void 0:l.get("name"),u=l==null?void 0:l.get("ip"),x=l==null?void 0:l.get("version"),S=l==null?void 0:l.get("proxy"),b=l==null?void 0:l.get("username"),O=l==null?void 0:l.get("lockConnect"),d=u==null?void 0:u.split(":"),v=r==null?void 0:r.ip.split(":"),[n,p]=f.useState((r==null?void 0:r.name)??A??""),[y,L]=f.useState((v==null?void 0:v[0])??(d==null?void 0:d[0])??""),[V,ee]=f.useState((v==null?void 0:v[1])??(d==null?void 0:d[1])??""),[I,re]=f.useState((r==null?void 0:r.versionOverride)??(r==null?void 0:r.version)??x??""),[E,ne]=f.useState((r==null?void 0:r.proxyOverride)??S??""),[U,te]=f.useState((r==null?void 0:r.usernameOverride)??b??""),q=O==="true",P=Q(),w=r==null?void 0:r.authenticatedAccountOverride,[N,le]=f.useState(w===!0?-2:w?a!=null&&a.includes(w)?a.indexOf(w):-2:-1),ie=N===-2,z=N===-1,oe=z?void 0:ie?!0:a==null?void 0:a[N];let B=y.includes(":")?y:`${y}:${V}`;B=B.replace(/:$/,"");const G={name:n,ip:B,versionOverride:I||void 0,proxyOverride:E||void 0,usernameOverride:U||void 0,authenticatedAccountOverride:oe};return e(ae,{title:u?"Connect to Server":m,backdrop:!0,children:e("form",{style:{display:"flex",flexDirection:"column",height:"100%"},onSubmit:o=>{o.preventDefault(),h(G)},children:g("div",{style:{display:"grid",gap:3,gridTemplateColumns:P?"1fr":"1fr 1fr"},children:[!q&&e($,{children:e("div",{style:{gridColumn:P?"":"span 2",display:"flex",justifyContent:"center"},children:e(_,{label:"Server Name",value:n,onChange:({target:{value:o}})=>p(o),placeholder:"Defaults to IP"})})}),e(_,{required:!0,label:"Server IP",value:y,disabled:q&&(d==null?void 0:d[0])!==null,onChange:({target:{value:o}})=>L(o)}),e(_,{label:"Server Port",value:V,disabled:q&&(d==null?void 0:d[1])!==null,onChange:({target:{value:o}})=>ee(o),placeholder:"25565"}),e("div",{style:{gridColumn:P?"":"span 2"},children:"Overrides:"}),g("div",{style:{display:"flex",flexDirection:"column"},children:[e("label",{style:{fontSize:12,marginBottom:1,color:"lightgray"},children:"Version Override"}),e(ue,{selected:{value:I,label:I},versions:(c==null?void 0:c.map(o=>({value:o,label:o})))??[],onChange:o=>{re(o)},placeholder:"Optional, but recommended to specify",disabled:q&&x!==null})]}),e(_,{label:"Proxy Override",value:E,disabled:q&&S!==null,onChange:({target:{value:o}})=>ne(o),placeholder:s==null?void 0:s.proxyOverride}),e(_,{label:"Username Override",value:U,disabled:!z||q&&b!==null,onChange:({target:{value:o}})=>te(o),placeholder:s==null?void 0:s.usernameOverride}),g("label",{style:{display:"flex",flexDirection:"column"},children:[e("span",{style:{fontSize:12,marginBottom:1,color:"lightgray"},children:"Account Override"}),g("select",{onChange:({target:{value:o}})=>le(Number(o)),style:{background:"gray",color:"white",height:20,fontSize:13},defaultValue:w===!0?-2:w===void 0?-1:me((a??[]).indexOf(w))??-2,children:[e("option",{value:-1,children:"Offline Account (Username)"}),a==null?void 0:a.map((o,H)=>g("option",{value:H,children:[o," (Logged In)"]},H)),e("option",{value:-2,children:"Any other MS account"})]})]}),!q&&g($,{children:[e(W,{onClick:()=>{t()},children:"Cancel"}),e(W,{type:"submit",children:"Save"})]}),u&&e("div",{style:{gridColumn:P?"":"span 2",display:"flex",justifyContent:"center"},children:e(W,{"data-test-id":"connect-qs",onClick:()=>{i==null||i(G)},children:"Connect"})})]})})})},W=({...t})=>(t.style??(t.style={}),t.style.width=D,e(Y,{...t})),_=({label:t,span:h,...m})=>g("div",{style:{display:"flex",flexDirection:"column",gridRow:h?"span 2 / span 2":void 0},children:[e("label",{style:{fontSize:12,marginBottom:1,color:"lightgray"},children:t}),e(j,{rootStyles:{width:D},...m})]}),me=t=>t===-1?void 0:t;try{AddServerOrConnect.displayName="AddServerOrConnect",AddServerOrConnect.__docgenInfo={description:"",displayName:"AddServerOrConnect",props:{onBack:{defaultValue:null,description:"",name:"onBack",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"(info: BaseServerInfo) => void"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},initialData:{defaultValue:null,description:"",name:"initialData",required:!1,type:{name:"BaseServerInfo"}},parseQs:{defaultValue:null,description:"",name:"parseQs",required:!1,type:{name:"boolean"}},onQsConnect:{defaultValue:null,description:"",name:"onQsConnect",required:!1,type:{name:"((server: BaseServerInfo) => void)"}},placeholders:{defaultValue:null,description:"",name:"placeholders",required:!1,type:{name:'Pick<BaseServerInfo, "proxyOverride" | "usernameOverride">'}},accounts:{defaultValue:null,description:"",name:"accounts",required:!1,type:{name:"string[]"}},authenticatedAccounts:{defaultValue:null,description:"",name:"authenticatedAccounts",required:!1,type:{name:"number"}},versions:{defaultValue:null,description:"",name:"versions",required:!1,type:{name:"string[]"}}}}}catch{}const F=({initialProxies:t,updateProxies:h,joinServer:m,username:r,setUsername:C,onProfileClick:i,setQuickConnectIp:s,...a})=>{const[c,R]=f.useState(t),l=n=>{R(n),h(n)},[A,u]=f.useState(""),[x,S]=f.useState(!0),[b,O]=f.useState(void 0),d=n=>{const p={transition:"filter 0.2s"};return b&&b!==n&&(p.filter="brightness(0.7)"),p},v=Q();return e(de,{...a,firstRowChildrenOverride:e("form",{style:{width:"100%",display:"flex",justifyContent:"center"},onSubmit:n=>{n.preventDefault();let p=A,y,L=!1;const V=p.split(":");V.at(-1)==="ms"&&(L=!0,V.pop()),V.length>1&&V.at(-1).includes(".")&&(y=V.at(-1),p=V.slice(0,-1).join(":")),m({ip:p,versionOverride:y,authenticatedAccountOverride:L?!0:void 0},{shouldSave:x})},children:g("div",{style:{display:"flex",gap:5,alignItems:"center",...d("quick-connect")},className:"quick-connect-row",onMouseEnter:()=>O("quick-connect"),onMouseLeave:()=>O(void 0),children:[e(j,{required:!0,placeholder:"Quick Connect IP (:version)",value:A,onChange:({target:{value:n}})=>{s==null||s(n),u(n)},width:v?120:180}),g("label",{style:{fontSize:10,display:"flex",alignItems:"center",gap:5,height:"100%",marginTop:"-1px"},children:[e("input",{type:"checkbox",checked:x,style:{borderRadius:0},onChange:({target:{checked:n}})=>S(n)})," Save"]}),e(Y,{style:{width:90},type:"submit",children:"Connect"})]})}),searchRowChildrenOverride:e("div",{style:{},children:g("div",{style:{display:"flex",gap:3,alignItems:"center"},children:[v?e(T,{iconName:se.server,styles:{fontSize:14,color:"lightgray",marginLeft:2},onClick:i}):e("span",{style:{color:"lightgray",fontSize:14},children:"Proxy:"}),e(Z,{initialOptions:c.proxies.map(n=>({value:n,label:n})),defaultValue:{value:c.selected,label:c.selected},updateOptions:n=>{l({proxies:[...c.proxies],selected:n})},containerStyle:{width:v?140:180}}),e(T,{iconName:"user",styles:{fontSize:14,color:"lightgray",marginLeft:2},onClick:i}),e(j,{rootStyles:{width:80},value:r,onChange:({target:{value:n}})=>C(n)})]})}),serversLayout:!0,onWorldAction:(n,p)=>{var y;n==="load"&&m({ip:p},{}),(y=a.onWorldAction)==null||y.call(a,n,p)},setListHovered:n=>{O(n?"server-list":void 0)},listStyle:d("server-list"),secondRowStyles:d("server-list")})};try{ServersList.displayName="ServersList",ServersList.__docgenInfo={description:"",displayName:"ServersList",props:{joinServer:{defaultValue:null,description:"",name:"joinServer",required:!0,type:{name:"(info: BaseServerInfo, additional: { shouldSave?: boolean | undefined; index?: number | undefined; }) => void"}},initialProxies:{defaultValue:null,description:"",name:"initialProxies",required:!0,type:{name:"SavedProxiesLocalStorage"}},updateProxies:{defaultValue:null,description:"",name:"updateProxies",required:!0,type:{name:"(proxies: SavedProxiesLocalStorage) => void"}},username:{defaultValue:null,description:"",name:"username",required:!0,type:{name:"string"}},setUsername:{defaultValue:null,description:"",name:"setUsername",required:!0,type:{name:"(username: string) => void"}},onProfileClick:{defaultValue:null,description:"",name:"onProfileClick",required:!1,type:{name:"(() => void)"}},setQuickConnectIp:{defaultValue:null,description:"",name:"setQuickConnectIp",required:!1,type:{name:"((ip: string) => void)"}},worldData:{defaultValue:null,description:"",name:"worldData",required:!0,type:{name:"WorldProps[] | null"}},serversLayout:{defaultValue:null,description:"",name:"serversLayout",required:!1,type:{name:"boolean"}},firstRowChildrenOverride:{defaultValue:null,description:"",name:"firstRowChildrenOverride",required:!1,type:{name:"ReactNode"}},searchRowChildrenOverride:{defaultValue:null,description:"",name:"searchRowChildrenOverride",required:!1,type:{name:"ReactNode"}},providers:{defaultValue:null,description:"",name:"providers",required:!1,type:{name:"Record<string, string>"}},activeProvider:{defaultValue:null,description:"",name:"activeProvider",required:!1,type:{name:"string"}},setActiveProvider:{defaultValue:null,description:"",name:"setActiveProvider",required:!1,type:{name:"((provider: string) => void)"}},providerActions:{defaultValue:null,description:"",name:"providerActions",required:!1,type:{name:"Record<string, Element | (() => void)>"}},disabledProviders:{defaultValue:null,description:"",name:"disabledProviders",required:!1,type:{name:"string[]"}},isReadonly:{defaultValue:null,description:"",name:"isReadonly",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},warning:{defaultValue:null,description:"",name:"warning",required:!1,type:{name:"string"}},warningAction:{defaultValue:null,description:"",name:"warningAction",required:!1,type:{name:"(() => void)"}},warningActionLabel:{defaultValue:null,description:"",name:"warningActionLabel",required:!1,type:{name:"string"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}},onWorldAction:{defaultValue:null,description:"",name:"onWorldAction",required:!0,type:{name:'(action: "load" | "export" | "delete" | "edit", worldName: string) => void'}},onGeneralAction:{defaultValue:null,description:"",name:"onGeneralAction",required:!0,type:{name:'(action: "cancel" | "create") => void'}},onRowSelect:{defaultValue:null,description:"",name:"onRowSelect",required:!1,type:{name:"((name: string, index: number) => void)"}},defaultSelectedRow:{defaultValue:null,description:"",name:"defaultSelectedRow",required:!1,type:{name:"number"}},listStyle:{defaultValue:null,description:"",name:"listStyle",required:!1,type:{name:"CSSProperties"}},setListHovered:{defaultValue:null,description:"",name:"setListHovered",required:!1,type:{name:"((hovered: boolean) => void)"}},secondRowStyles:{defaultValue:null,description:"",name:"secondRowStyles",required:!1,type:{name:"CSSProperties"}},lockedEditing:{defaultValue:null,description:"",name:"lockedEditing",required:!1,type:{name:"boolean"}}}}}catch{}const Ie={component:F,render(t){const[h,m]=M.useState(!1),[r,C]=M.useState("");return h?e(ce,{onBack:()=>{m(!1)},accounts:["testting"],onConfirm:i=>{console.log("add server",i)}}):e(F,{worldData:[{name:"test",title:"Server",formattedTextOverride:"play yes"}],joinServer:i=>{console.log("joinServer",i)},initialProxies:{proxies:["localhost","mc.hypixel.net"],selected:"localhost"},updateProxies:i=>{console.log("setProxies",i)},onWorldAction:()=>{},onGeneralAction:i=>{i==="create"&&m(!0)},username:r,setUsername:C})}},k={args:{}};var J,K,X;k.parameters={...k.parameters,docs:{...(J=k.parameters)==null?void 0:J.docs,source:{originalSource:`{
  args: {}
}`,...(X=(K=k.parameters)==null?void 0:K.docs)==null?void 0:X.source}}};const Ne=["Primary"];export{k as Primary,Ne as __namedExportsOrder,Ie as default};
//# sourceMappingURL=ServersList.stories-8256080c.js.map
