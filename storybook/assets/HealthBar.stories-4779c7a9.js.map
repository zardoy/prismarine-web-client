{"version":3,"file":"HealthBar.stories-4779c7a9.js","sources":["../../src/react/HealthBar.tsx"],"sourcesContent":["import { useRef, useEffect } from 'react'\nimport SharedHudVars from './SharedHudVars'\nimport './HealthBar.css'\nimport { barEffectAdded, barEffectEnded } from './BarsCommon'\n\n\nexport type HealthBarProps = {\n  gameMode?: string,\n  isHardcore: boolean,\n  damaged: boolean,\n  healthValue: number,\n  effectToAdd?: number | null,\n  effectToRemove?: number | null,\n  resetEffects?: () => void\n  style?: React.CSSProperties\n}\n\nexport default ({\n  gameMode,\n  isHardcore,\n  damaged,\n  healthValue,\n  effectToAdd,\n  effectToRemove,\n  resetEffects,\n  style\n}: HealthBarProps) => {\n  const healthRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    if (healthRef.current) {\n      healthRef.current.classList.toggle('creative', gameMode === 'creative' || gameMode === 'spectator')\n    }\n  }, [gameMode])\n\n  useEffect(() => {\n    if (healthRef.current) {\n      if (isHardcore) {\n        healthRef.current.classList.add('hardcore')\n      } else {\n        healthRef.current.classList.remove('hardcore')\n      }\n    }\n  }, [isHardcore])\n\n  useEffect(() => {\n    if (healthRef.current) {\n      if (damaged) {\n        healthRef.current.classList.add('damaged')\n        console.log('damage')\n      } else {\n        healthRef.current.classList.remove('damaged')\n      }\n    }\n  }, [damaged])\n\n  useEffect(() => {\n    if (healthRef.current) {\n      if (healthValue <= 4) {\n        healthRef.current.classList.add('low')\n      } else {\n        healthRef.current.classList.remove('low')\n      }\n\n      const healthElement = healthRef.current\n      const hearts = healthElement.children\n\n      for (const heart of hearts) {\n        heart.classList.remove('full')\n        heart.classList.remove('half')\n      }\n\n      for (let i = 0; i < Math.ceil(healthValue / 2); i++) {\n        if (i >= hearts.length) break\n\n        if (healthValue % 2 !== 0 && Math.ceil(healthValue / 2) === i + 1) {\n          hearts[i].classList.add('half')\n        } else {\n          hearts[i].classList.add('full')\n        }\n      }\n    }\n  }, [healthValue])\n\n  useEffect(() => {\n    if (effectToAdd) {\n      barEffectAdded(healthRef.current, effectToAdd)\n    }\n    if (effectToRemove) {\n      barEffectEnded(healthRef.current, effectToRemove)\n    }\n    resetEffects?.()\n  }, [effectToAdd, effectToRemove])\n\n  return <SharedHudVars>\n    <div ref={healthRef} className='health' style={style}>\n      {\n        Array.from({ length: 10 }, () => 0)\n          .map((num, index) => <div\n            key={`heart-${index}`}\n            className='heart'\n          />)\n      }\n    </div>\n  </SharedHudVars>\n}\n"],"names":["HealthBar$1","gameMode","isHardcore","damaged","healthValue","effectToAdd","effectToRemove","resetEffects","style","healthRef","useRef","useEffect","hearts","heart","i","barEffectAdded","barEffectEnded","jsx","SharedHudVars","num","index"],"mappings":"0LAiBA,MAAAA,EAAA,CAAA,CAAgB,SAAAC,EACd,WAAAC,EACA,QAAAC,EACA,YAAAC,EACA,YAAAC,EACA,eAAAC,EACA,aAAAC,EACA,MAAAC,CAEF,IAAA,CACE,MAAAC,EAAAC,SAAA,IAAA,EAEAC,OAAAA,EAAAA,UAAA,IAAA,CACEF,EAAA,SACEA,EAAA,QAAA,UAAA,OAAA,WAAAR,IAAA,YAAAA,IAAA,WAAA,CACF,EAAA,CAAAA,CAAA,CAAA,EAGFU,EAAAA,UAAA,IAAA,CACEF,EAAA,UACEP,EACEO,EAAA,QAAA,UAAA,IAAA,UAAA,EAEAA,EAAA,QAAA,UAAA,OAAA,UAAA,EAEJ,EAAA,CAAAP,CAAA,CAAA,EAGFS,EAAAA,UAAA,IAAA,CACEF,EAAA,UACEN,GACEM,EAAA,QAAA,UAAA,IAAA,SAAA,EACA,QAAA,IAAA,QAAA,GAEAA,EAAA,QAAA,UAAA,OAAA,SAAA,EAEJ,EAAA,CAAAN,CAAA,CAAA,EAGFQ,EAAAA,UAAA,IAAA,CACE,GAAAF,EAAA,QAAA,CACEL,GAAA,EACEK,EAAA,QAAA,UAAA,IAAA,KAAA,EAEAA,EAAA,QAAA,UAAA,OAAA,KAAA,EAIF,MAAAG,EADAH,EAAA,QACA,SAEA,UAAAI,KAAAD,EACEC,EAAA,UAAA,OAAA,MAAA,EACAA,EAAA,UAAA,OAAA,MAAA,EAGF,QAAAC,EAAA,EAAAA,EAAA,KAAA,KAAAV,EAAA,CAAA,GACE,EAAAU,GAAAF,EAAA,QADFE,IAGEV,EAAA,IAAA,GAAA,KAAA,KAAAA,EAAA,CAAA,IAAAU,EAAA,EACEF,EAAAE,CAAA,EAAA,UAAA,IAAA,MAAA,EAEAF,EAAAE,CAAA,EAAA,UAAA,IAAA,MAAA,CAEJ,CACF,EAAA,CAAAV,CAAA,CAAA,EAGFO,EAAAA,UAAA,IAAA,CACEN,GACEU,EAAAN,EAAA,QAAAJ,CAAA,EAEFC,GACEU,EAAAP,EAAA,QAAAH,CAAA,EAEFC,GAAA,MAAAA,GAAe,EAAA,CAAAF,EAAAC,CAAA,CAAA,EAGjBW,EAAAC,EAAA,CAAA,SAAAD,EAAA,MAAA,CAAA,IAAAR,EAAA,UAAA,SAAA,MAAAD,EAAA,SAAA,MAAA,KAAA,CAAA,OAAA,EAAA,EAAA,IAAA,CAAA,EAAA,IAAA,CAAAW,EAAAC,IAAAH,EAI6B,MAAC,CAAA,UAAA,OAEV,EAAA,SAAAG,CAAA,EADS,CAAA,CAAA,CAAA,CAAA,CAAA,CAM/B;;;;;;;;;"}