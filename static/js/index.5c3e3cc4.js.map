{"version":3,"file":"static/js/index.5c3e3cc4.js","sources":["webpack://minecraft-web-client/./prismarine-viewer/viewer/index.js","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/entity/EntityMesh.js","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/hand.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/mesher/modelsGeometryCommon.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/mesher/standaloneRenderer.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/simpleUtils.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/threeJsUtils.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/ui/newStats.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/utils.electron.js","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/utils.js","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/utils.web.js","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/entity/animations.js","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/entities.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/viewer.ts","webpack://minecraft-web-client/./prismarine-viewer/examples/shared.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/worldDataEmitter.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/cleanupDecorator.ts","webpack://minecraft-web-client/./prismarine-viewer/buildMesherConfig.mjs","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/mesher/shared.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/worldrendererCommon.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/sign-renderer/index.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/holdingBlock.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/worldrendererThree.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/prepare/utils.ts","webpack://minecraft-web-client/./src/botUtils.ts","webpack://minecraft-web-client/./src/chatUtils.ts","webpack://minecraft-web-client/./src/defaultLocalServerOptions.js","webpack://minecraft-web-client/./src/generated/resources.ts","webpack://minecraft-web-client/./src/globalState.ts","webpack://minecraft-web-client/./src/importsWorkaround.js","webpack://minecraft-web-client/./src/browserfs.ts","webpack://minecraft-web-client/./src/inventoryWindows.ts","webpack://minecraft-web-client/./src/localServerMultiplayer.ts","webpack://minecraft-web-client/./src/controls.ts","webpack://minecraft-web-client/./src/basicSounds.ts","webpack://minecraft-web-client/./src/panorama.ts","webpack://minecraft-web-client/./src/index.ts","webpack://minecraft-web-client/./src/customClient.js","webpack://minecraft-web-client/./src/globals.js","webpack://minecraft-web-client/./src/react/Crosshair.tsx","webpack://minecraft-web-client/./src/standaloneUtils.ts","webpack://minecraft-web-client/./src/worldInteractions.ts","webpack://minecraft-web-client/./src/devtools.ts","webpack://minecraft-web-client/./src/entities.ts","webpack://minecraft-web-client/./src/resourcePack.ts","webpack://minecraft-web-client/./src/loadSave.ts","webpack://minecraft-web-client/./src/flyingSquidUtils.ts","webpack://minecraft-web-client/./src/globalDomListeners.ts","webpack://minecraft-web-client/./src/getCollisionShapes.ts","webpack://minecraft-web-client/./src/scaleInterface.ts","webpack://minecraft-web-client/./src/itemsDescriptions.ts","webpack://minecraft-web-client/./src/topRightStats.ts","webpack://minecraft-web-client/./src/react/DeathScreen.tsx","webpack://minecraft-web-client/./src/react/DeathScreenProvider.tsx","webpack://minecraft-web-client/./src/react/slider.module.css?7ec9","webpack://minecraft-web-client/./src/react/Slider.tsx","webpack://minecraft-web-client/./src/react/OptionsItems.tsx","webpack://minecraft-web-client/./src/optionsGuiScheme.tsx","webpack://minecraft-web-client/./src/react/OptionsGroup.tsx","webpack://minecraft-web-client/./src/react/OptionsRenderApp.tsx","webpack://minecraft-web-client/./src/react/mainMenu.module.css?ec41","webpack://minecraft-web-client/./src/react/ButtonWithTooltip.tsx","webpack://minecraft-web-client/./src/react/MainMenu.tsx","webpack://minecraft-web-client/./src/react/DiscordButton.tsx","webpack://minecraft-web-client/./src/react/MainMenuRenderApp.tsx","webpack://minecraft-web-client/./src/builtinCommands.ts","webpack://minecraft-web-client/./src/googledrive.ts","webpack://minecraft-web-client/./src/react/GoogleButton.tsx","webpack://minecraft-web-client/./src/react/SingleplayerProvider.tsx","webpack://minecraft-web-client/./src/react/createWorld.module.css?2cbf","webpack://minecraft-web-client/./src/react/CreateWorld.tsx","webpack://minecraft-web-client/./src/react/CreateWorldProvider.tsx","webpack://minecraft-web-client/./src/react/EnterFullscreenButton.tsx","webpack://minecraft-web-client/./src/react/ChatProvider.tsx","webpack://minecraft-web-client/./src/react/Title.tsx","webpack://minecraft-web-client/./src/react/TitleProvider.tsx","webpack://minecraft-web-client/./src/react/Scoreboard.tsx","webpack://minecraft-web-client/./src/react/ScoreboardProvider.tsx","webpack://minecraft-web-client/./src/markdownToFormattedText.ts","webpack://minecraft-web-client/./src/react/prosemirror-markdown.ts","webpack://minecraft-web-client/./src/react/SignEditor.tsx","webpack://minecraft-web-client/./src/react/SignEditorProvider.tsx","webpack://minecraft-web-client/./src/react/IndicatorEffects.tsx","webpack://minecraft-web-client/./src/react/effectsImages.ts","webpack://minecraft-web-client/./src/react/IndicatorEffectsProvider.tsx","webpack://minecraft-web-client/./src/react/PlayerListOverlay.tsx","webpack://minecraft-web-client/./src/react/PlayerListOverlayProvider.tsx","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/mesher/worldConstants.ts","webpack://minecraft-web-client/./src/react/Fullmap.tsx","webpack://minecraft-web-client/./src/react/Minimap.tsx","webpack://minecraft-web-client/./src/react/MinimapDrawer.ts","webpack://minecraft-web-client/./src/react/MinimapProvider.tsx","webpack://minecraft-web-client/./src/react/armorValues.ts","webpack://minecraft-web-client/./src/react/BarsCommon.tsx","webpack://minecraft-web-client/./src/react/HealthBar.tsx","webpack://minecraft-web-client/./src/react/FoodBar.tsx","webpack://minecraft-web-client/./src/react/ArmorBar.tsx","webpack://minecraft-web-client/./src/react/BreathBar.tsx","webpack://minecraft-web-client/./src/react/HudBarsProvider.tsx","webpack://minecraft-web-client/./src/react/XPBar.module.css?7d51","webpack://minecraft-web-client/./src/react/XPBar.tsx","webpack://minecraft-web-client/./src/react/XPBarProvider.tsx","webpack://minecraft-web-client/./src/downloadAndOpenFile.ts","webpack://minecraft-web-client/./src/react/DebugOverlay.module.css?363f","webpack://minecraft-web-client/./src/react/DebugOverlay.tsx","webpack://minecraft-web-client/./src/customCommands.ts","webpack://minecraft-web-client/./src/react/FullScreenWidget.tsx","webpack://minecraft-web-client/./src/react/ModuleSignsViewer.tsx","webpack://minecraft-web-client/./src/react/widgets.ts","webpack://minecraft-web-client/./src/react/GamepadUiCursor.module.css?6418","webpack://minecraft-web-client/./src/react/GamepadUiCursor.tsx","webpack://minecraft-web-client/./src/react/useLongPress.ts","webpack://minecraft-web-client/./src/react/MobileTopButtons.module.css?8afa","webpack://minecraft-web-client/./src/react/MobileTopButtons.tsx","webpack://minecraft-web-client/./src/react/PauseScreen.module.css?e42d","webpack://minecraft-web-client/./src/react/PauseScreen.tsx","webpack://minecraft-web-client/./src/soundSystem.ts","webpack://minecraft-web-client/./src/react/SoundMuffler.tsx","webpack://minecraft-web-client/./src/react/TouchControls.tsx","webpack://minecraft-web-client/./src/react/GlobalSearchInput.tsx","webpack://minecraft-web-client/./src/react/TouchAreasControls.tsx","webpack://minecraft-web-client/./src/react/TouchAreasControlsProvider.tsx","webpack://minecraft-web-client/./src/gameUnload.ts","webpack://minecraft-web-client/./src/react/HotbarRenderApp.tsx","webpack://minecraft-web-client/./src/react/ButtonAppProvider.tsx","webpack://minecraft-web-client/./src/react/KeybindingsScreen.module.css?d6be","webpack://minecraft-web-client/./src/react/KeybindingsCustom.tsx","webpack://minecraft-web-client/./src/react/parseKeybindingName.ts","webpack://minecraft-web-client/./src/react/Keybinding.tsx","webpack://minecraft-web-client/./src/react/KeybindingsScreen.tsx","webpack://minecraft-web-client/./src/react/KeybindingsScreenProvider.tsx","webpack://minecraft-web-client/./src/react/HeldMapUi.tsx","webpack://minecraft-web-client/./src/react/BedTime.tsx","webpack://minecraft-web-client/./src/react/NoModalFoundProvider.tsx","webpack://minecraft-web-client/./src/react/SignInMessage.tsx","webpack://minecraft-web-client/./src/react/SignInMessageProvider.tsx","webpack://minecraft-web-client/./src/react/Book.module.css?f555","webpack://minecraft-web-client/./src/react/Book.tsx","webpack://minecraft-web-client/./src/react/BookProvider.tsx","webpack://minecraft-web-client/./src/react/BossBarOverlay.tsx","webpack://minecraft-web-client/./src/react/BossBarOverlayProvider.tsx","webpack://minecraft-web-client/./src/react/DebugEdges.tsx","webpack://minecraft-web-client/./src/reactUi.tsx","webpack://minecraft-web-client/./src/dragndrop.ts","webpack://minecraft-web-client/./src/watchOptions.ts","webpack://minecraft-web-client/./src/vr.ts","webpack://minecraft-web-client/./src/customServer.ts","webpack://minecraft-web-client/./src/createLocalServer.ts","webpack://minecraft-web-client/./src/water.ts","webpack://minecraft-web-client/./src/dayCycle.ts","webpack://minecraft-web-client/./src/serviceWorker.ts","webpack://minecraft-web-client/./src/flyingSquidEvents.ts","webpack://minecraft-web-client/./src/devReload.ts","webpack://minecraft-web-client/./src/connect.ts","webpack://minecraft-web-client/./src/viewerConnector.ts","webpack://minecraft-web-client/./src/rendererUtils.ts","webpack://minecraft-web-client/./src/getCollisionInteractionShapes.ts","webpack://minecraft-web-client/./src/packetsPatcher.ts","webpack://minecraft-web-client/./prismarine-viewer/viewer/lib/viewerWrapper.ts","webpack://minecraft-web-client/./src/microsoftAuthflow.ts","webpack://minecraft-web-client/./src/mobileShim.ts","webpack://minecraft-web-client/./src/optionsStorage.ts","webpack://minecraft-web-client/./src/packetsReplay.ts","webpack://minecraft-web-client/./src/packetsReplayBase.ts","webpack://minecraft-web-client/./src/errorLoadingScreenHelpers.ts","webpack://minecraft-web-client/./src/react/appStatus.module.css?2ffc","webpack://minecraft-web-client/./src/react/AppStatus.tsx","webpack://minecraft-web-client/./src/react/DiveTransition.module.css?397f","webpack://minecraft-web-client/./src/react/DiveTransition.tsx","webpack://minecraft-web-client/./src/react/LoadingChunks.tsx","webpack://minecraft-web-client/./src/react/AppStatusProvider.tsx","webpack://minecraft-web-client/./src/react/button.module.css?f052","webpack://minecraft-web-client/./src/react/Button.tsx","webpack://minecraft-web-client/./src/react/Chat.tsx","webpack://minecraft-web-client/./src/react/input.module.css?94aa","webpack://minecraft-web-client/./src/react/Input.tsx","webpack://minecraft-web-client/./src/react/MessageFormatted.tsx","webpack://minecraft-web-client/./src/react/MessageFormattedString.tsx","webpack://minecraft-web-client/./src/react/Notification.tsx","webpack://minecraft-web-client/./src/react/NotificationProvider.tsx","webpack://minecraft-web-client/./src/react/PixelartIcon.tsx","webpack://minecraft-web-client/./src/react/Screen.tsx","webpack://minecraft-web-client/./src/react/select.module.css?2493","webpack://minecraft-web-client/./src/react/Select.tsx","webpack://minecraft-web-client/./src/react/SelectGameVersion.tsx","webpack://minecraft-web-client/./src/react/SelectOption.tsx","webpack://minecraft-web-client/./src/react/ServersList.tsx","webpack://minecraft-web-client/./src/react/AddServerOrConnect.tsx","webpack://minecraft-web-client/./src/react/ServersListProvider.tsx","webpack://minecraft-web-client/./src/react/SharedHudVars.tsx","webpack://minecraft-web-client/./src/react/singleplayer.module.css?3925","webpack://minecraft-web-client/./src/react/Tabs.tsx","webpack://minecraft-web-client/./src/react/Singleplayer.tsx","webpack://minecraft-web-client/./src/react/simpleHooks.ts","webpack://minecraft-web-client/./src/react/utils.ts","webpack://minecraft-web-client/./src/react/utilsApp.ts","webpack://minecraft-web-client/./src/shims/crypto.js","webpack://minecraft-web-client/./src/shims/dns.js","webpack://minecraft-web-client/./src/shims/fs.js","webpack://minecraft-web-client/./src/optimizeJson.ts","webpack://minecraft-web-client/./src/shims/minecraftData.ts","webpack://minecraft-web-client/./src/shims/perf_hooks_replacement.js","webpack://minecraft-web-client/./src/shims/prismarineAuthReplacement.ts","webpack://minecraft-web-client/./src/shims/yggdrasilReplacement.ts","webpack://minecraft-web-client/./src/supportedVersions.mjs","webpack://minecraft-web-client/./src/utils.ts"],"sourcesContent":["module.exports = {\n  Viewer: require('./lib/viewer').Viewer,\n  WorldDataEmitter: require('./lib/worldDataEmitter').WorldDataEmitter,\n  Entity: require('./lib/entity/EntityMesh'),\n  getBufferFromStream: require('./lib/simpleUtils').getBufferFromStream\n}\n","//@ts-check\nimport * as THREE from 'three'\nimport { OBJLoader } from 'three-stdlib'\nimport huskPng from 'mc-assets/dist/other-textures/latest/entity/zombie/husk.png'\nimport { Vec3 } from 'vec3'\nimport entities from './entities.json'\nimport { externalModels } from './objModels'\nimport externalTexturesJson from './externalTextures.json'\n// import { loadTexture } from globalThis.isElectron ? '../utils.electron.js' : '../utils';\nconst { loadTexture } = globalThis.isElectron ? require('../utils.electron.js') : require('../utils')\n\nconst elemFaces = {\n  up: {\n    dir: [0, 1, 0],\n    u0: [0, 0, 1],\n    v0: [0, 0, 0],\n    u1: [1, 0, 1],\n    v1: [0, 0, 1],\n    corners: [\n      [0, 1, 1, 0, 0],\n      [1, 1, 1, 1, 0],\n      [0, 1, 0, 0, 1],\n      [1, 1, 0, 1, 1]\n    ]\n  },\n  down: {\n    dir: [0, -1, 0],\n    u0: [1, 0, 1],\n    v0: [0, 0, 0],\n    u1: [2, 0, 1],\n    v1: [0, 0, 1],\n    corners: [\n      [1, 0, 1, 0, 0],\n      [0, 0, 1, 1, 0],\n      [1, 0, 0, 0, 1],\n      [0, 0, 0, 1, 1]\n    ]\n  },\n  east: {\n    dir: [1, 0, 0],\n    u0: [0, 0, 0],\n    v0: [0, 0, 1],\n    u1: [0, 0, 1],\n    v1: [0, 1, 1],\n    corners: [\n      [1, 1, 1, 0, 0],\n      [1, 0, 1, 0, 1],\n      [1, 1, 0, 1, 0],\n      [1, 0, 0, 1, 1]\n    ]\n  },\n  west: {\n    dir: [-1, 0, 0],\n    u0: [1, 0, 1],\n    v0: [0, 0, 1],\n    u1: [1, 0, 2],\n    v1: [0, 1, 1],\n    corners: [\n      [0, 1, 0, 0, 0],\n      [0, 0, 0, 0, 1],\n      [0, 1, 1, 1, 0],\n      [0, 0, 1, 1, 1]\n    ]\n  },\n  north: {\n    dir: [0, 0, -1],\n    u0: [0, 0, 1],\n    v0: [0, 0, 1],\n    u1: [1, 0, 1],\n    v1: [0, 1, 1],\n    corners: [\n      [1, 0, 0, 0, 1],\n      [0, 0, 0, 1, 1],\n      [1, 1, 0, 0, 0],\n      [0, 1, 0, 1, 0]\n    ]\n  },\n  south: {\n    dir: [0, 0, 1],\n    u0: [1, 0, 2],\n    v0: [0, 0, 1],\n    u1: [2, 0, 2],\n    v1: [0, 1, 1],\n    corners: [\n      [0, 0, 1, 0, 1],\n      [1, 0, 1, 1, 1],\n      [0, 1, 1, 0, 0],\n      [1, 1, 1, 1, 0]\n    ]\n  }\n}\n\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]\n}\n\nfunction addCube(attr, boneId, bone, cube, texWidth = 64, texHeight = 64, mirror = false) {\n  const cubeRotation = new THREE.Euler(0, 0, 0)\n  if (cube.rotation) {\n    cubeRotation.x = -cube.rotation[0] * Math.PI / 180\n    cubeRotation.y = -cube.rotation[1] * Math.PI / 180\n    cubeRotation.z = -cube.rotation[2] * Math.PI / 180\n  }\n  for (const { dir, corners, u0, v0, u1, v1 } of Object.values(elemFaces)) {\n    const ndx = Math.floor(attr.positions.length / 3)\n\n    const eastOrWest = dir[0] !== 0\n    const faceUvs = []\n    for (const pos of corners) {\n      const u = (cube.uv[0] + dot(pos[3] ? u1 : u0, cube.size)) / texWidth\n      const v = (cube.uv[1] + dot(pos[4] ? v1 : v0, cube.size)) / texHeight\n\n      const posX = eastOrWest && mirror ? pos[0] ^ 1 : pos[0]\n      const posY = pos[1]\n      const posZ = eastOrWest && mirror ? pos[2] ^ 1 : pos[2]\n      const inflate = cube.inflate ?? 0\n      let vecPos = new THREE.Vector3(\n        cube.origin[0] + posX * cube.size[0] + (posX ? inflate : -inflate),\n        cube.origin[1] + posY * cube.size[1] + (posY ? inflate : -inflate),\n        cube.origin[2] + posZ * cube.size[2] + (posZ ? inflate : -inflate)\n      )\n\n      vecPos = vecPos.applyEuler(cubeRotation)\n      vecPos = vecPos.sub(bone.position)\n      vecPos = vecPos.applyEuler(bone.rotation)\n      vecPos = vecPos.add(bone.position)\n\n      attr.positions.push(vecPos.x, vecPos.y, vecPos.z)\n      attr.normals.push(...dir)\n      faceUvs.push(u, v)\n      attr.skinIndices.push(boneId, 0, 0, 0)\n      attr.skinWeights.push(1, 0, 0, 0)\n    }\n\n    if (mirror) {\n      for (let i = 0; i + 1 < corners.length; i += 2) {\n        const faceIndex = i * 2\n        const tempFaceUvs = faceUvs.slice(faceIndex, faceIndex + 4)\n        faceUvs[faceIndex] = tempFaceUvs[2]\n        faceUvs[faceIndex + 1] = tempFaceUvs[eastOrWest ? 1 : 3]\n        faceUvs[faceIndex + 2] = tempFaceUvs[0]\n        faceUvs[faceIndex + 3] = tempFaceUvs[eastOrWest ? 3 : 1]\n      }\n    }\n    attr.uvs.push(...faceUvs)\n\n    attr.indices.push(ndx, ndx + 1, ndx + 2, ndx + 2, ndx + 1, ndx + 3)\n  }\n}\n\nexport function getMesh(texture, jsonModel, overrides = {}) {\n  const bones = {}\n\n  const geoData = {\n    positions: [],\n    normals: [],\n    uvs: [],\n    indices: [],\n    skinIndices: [],\n    skinWeights: []\n  }\n  let i = 0\n  for (const jsonBone of jsonModel.bones) {\n    const bone = new THREE.Bone()\n    if (jsonBone.pivot) {\n      bone.position.x = jsonBone.pivot[0]\n      bone.position.y = jsonBone.pivot[1]\n      bone.position.z = jsonBone.pivot[2]\n    }\n    if (jsonBone.bind_pose_rotation) {\n      bone.rotation.x = -jsonBone.bind_pose_rotation[0] * Math.PI / 180\n      bone.rotation.y = -jsonBone.bind_pose_rotation[1] * Math.PI / 180\n      bone.rotation.z = -jsonBone.bind_pose_rotation[2] * Math.PI / 180\n    } else if (jsonBone.rotation) {\n      bone.rotation.x = -jsonBone.rotation[0] * Math.PI / 180\n      bone.rotation.y = -jsonBone.rotation[1] * Math.PI / 180\n      bone.rotation.z = -jsonBone.rotation[2] * Math.PI / 180\n    }\n    if (overrides.rotation?.[jsonBone.name]) {\n      bone.rotation.x -= (overrides.rotation[jsonBone.name].x ?? 0) * Math.PI / 180\n      bone.rotation.y -= (overrides.rotation[jsonBone.name].y ?? 0) * Math.PI / 180\n      bone.rotation.z -= (overrides.rotation[jsonBone.name].z ?? 0) * Math.PI / 180\n    }\n    bone.name = `bone_${jsonBone.name}`\n    bones[jsonBone.name] = bone\n\n    if (jsonBone.cubes) {\n      for (const cube of jsonBone.cubes) {\n        addCube(geoData, i, bone, cube, jsonModel.texturewidth, jsonModel.textureheight, jsonBone.mirror)\n      }\n    }\n    i++\n  }\n\n  const rootBones = []\n  for (const jsonBone of jsonModel.bones) {\n    if (jsonBone.parent && bones[jsonBone.parent]) { bones[jsonBone.parent].add(bones[jsonBone.name]) } else {\n      rootBones.push(bones[jsonBone.name])\n    }\n  }\n\n  const skeleton = new THREE.Skeleton(Object.values(bones))\n\n  const geometry = new THREE.BufferGeometry()\n  geometry.setAttribute('position', new THREE.Float32BufferAttribute(geoData.positions, 3))\n  geometry.setAttribute('normal', new THREE.Float32BufferAttribute(geoData.normals, 3))\n  geometry.setAttribute('uv', new THREE.Float32BufferAttribute(geoData.uvs, 2))\n  geometry.setAttribute('skinIndex', new THREE.Uint16BufferAttribute(geoData.skinIndices, 4))\n  geometry.setAttribute('skinWeight', new THREE.Float32BufferAttribute(geoData.skinWeights, 4))\n  geometry.setIndex(geoData.indices)\n\n  const material = new THREE.MeshLambertMaterial({ transparent: true, alphaTest: 0.1 })\n  const mesh = new THREE.SkinnedMesh(geometry, material)\n  mesh.add(...rootBones)\n  mesh.bind(skeleton)\n  mesh.scale.set(1 / 16, 1 / 16, 1 / 16)\n\n  loadTexture(texture, texture => {\n    if (material.map) {\n      // texture is already loaded\n      return\n    }\n    texture.magFilter = THREE.NearestFilter\n    texture.minFilter = THREE.NearestFilter\n    texture.flipY = false\n    texture.wrapS = THREE.RepeatWrapping\n    texture.wrapT = THREE.RepeatWrapping\n    material.map = texture\n  })\n\n  return mesh\n}\n\nexport const knownNotHandled = [\n  'area_effect_cloud', 'block_display',\n  'chest_boat', 'end_crystal',\n  'falling_block', 'furnace_minecart',\n  'giant', 'glow_item_frame',\n  'glow_squid', 'illusioner',\n  'interaction', 'item',\n  'item_display', 'item_frame',\n  'lightning_bolt', 'marker',\n  'painting', 'spawner_minecart',\n  'spectral_arrow', 'tnt',\n  'trader_llama', 'zombie_horse'\n]\n\nexport const temporaryMap = {\n  'furnace_minecart': 'minecart',\n  'spawner_minecart': 'minecart',\n  'chest_minecart': 'minecart',\n  'hopper_minecart': 'minecart',\n  'command_block_minecart': 'minecart',\n  'tnt_minecart': 'minecart',\n  'glow_squid': 'squid',\n  'trader_llama': 'llama',\n  'chest_boat': 'boat',\n  'spectral_arrow': 'arrow',\n  'husk': 'zombie',\n  'zombie_horse': 'horse',\n  'donkey': 'horse',\n  'skeleton_horse': 'horse',\n  'mule': 'horse',\n  'ocelot': 'cat',\n  // 'falling_block': 'block',\n  // 'lightning_bolt': 'lightning',\n}\n\nconst getEntity = (name) => {\n  return entities[name]\n}\n\n// const externalModelsTextures = {\n//   allay: 'allay/allay',\n//   axolotl: 'axolotl/axolotl_blue',\n//   blaze: 'blaze',\n//   camel: 'camel/camel',\n//   cat: 'cat/black',\n//   chicken: 'chicken',\n//   cod: 'fish/cod',\n//   creeper: 'creeper/creeper',\n//   dolphin: 'dolphin',\n//   ender_dragon: 'enderdragon/dragon',\n//   enderman: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAABGdBTUEAALGPC/xhBQAAAY5JREFUaN7lWNESgzAI8yv8/z/tXjZPHSShYitb73rXedo1AQJ0WchY17WhudQZ7TS18Qb5AXtY/yUBO8tXIaCRqRNwXlcgwDJgmAALfBUP8AjYEdHnAZUIAGdvPy+CnobJIVw9DVIPEABawuEyyvYx1sMIMP8fAbUO7ukBImZmCCEP2AhglnRip8vio7MIxYEsaVkdeYNjYfbN/BBA1twP9AxpB0qlMwj48gBP5Ji1rXc8nfBImk6A5+KqShNwdTwgKy0xYRzdS4yoY651W8EDRwGVJEDVITGtjiEAaEBq3o4SwGqRVAKsdVYIsAzDCACV6VwCFMBCpqLvgudzQ6CnjL5afmeX4pdE0LIQuYCBzZbQfT4rC6COUQGn9B3MQ28pSIxDSDdNrKdQSZJ7lDurMeZm6iEjKVENh8cQgBowBFK5gEHhsO3xFA/oKXp6vg8RoHaD2QRkiaDnAYcZAcB+E6GTRVAhQCVJyVImKOUiBLW3KL4jzU2POHp64RIQ/ADO6D6Ry1gl9tlN1Xm+AK8s2jHadDijAAAAAElFTkSuQmCC',\n//   endermite: 'endermite',\n//   fox: 'fox/fox',\n//   frog: 'frog/cold_frog',\n//   ghast: 'ghast/ghast',\n//   goat: 'goat/goat',\n//   guardian: 'guardian',\n//   horse: 'horse/horse_brown',\n//   llama: 'llama/creamy',\n//   minecart: 'minecart',\n//   parrot: 'parrot/parrot_grey',\n//   piglin: 'piglin/piglin',\n//   pillager: 'illager/pillager',\n//   rabbit: 'rabbit/brown',\n//   sheep: 'sheep/sheep',\n//   shulker: 'shulker/shulker',\n//   sniffer: 'sniffer/sniffer',\n//   spider: 'spider/spider',\n//   tadpole: 'tadpole/tadpole',\n//   turtle: 'turtle/big_sea_turtle',\n//   vex: 'illager/vex',\n//   villager: 'villager/villager',\n//   warden: 'warden/warden',\n//   witch: 'witch',\n//   wolf: 'wolf/wolf',\n//   zombie_villager: 'zombie_villager/zombie_villager'\n// }\n\nconst scaleEntity = {\n  zombie: 1.85,\n  husk: 1.85\n}\nconst offsetEntity = {\n  zombie: new Vec3(0, 1, 0),\n  husk: new Vec3(0, 1, 0),\n  boat: new Vec3(0, -1, 0),\n}\n\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nexport class EntityMesh {\n  constructor(version, type, scene, /** @type {{textures?, rotation?: Record<string, {x,y,z}>}} */overrides = {}) {\n    const originalType = type\n    const mappedValue = temporaryMap[type]\n    if (mappedValue) type = mappedValue\n\n    if (externalModels[type]) {\n      const objLoader = new OBJLoader()\n      let texturePath = externalTexturesJson[type]\n      if (originalType === 'zombie_horse') {\n        texturePath = `textures/${version}/entity/horse/horse_zombie.png`\n      }\n      if (originalType === 'husk') {\n        texturePath = huskPng\n      }\n      if (originalType === 'skeleton_horse') {\n        texturePath = `textures/${version}/entity/horse/horse_skeleton.png`\n      }\n      if (originalType === 'donkey') {\n        texturePath = `textures/${version}/entity/horse/donkey.png`\n      }\n      if (originalType === 'mule') {\n        texturePath = `textures/${version}/entity/horse/mule.png`\n      }\n      if (originalType === 'ocelot') {\n        texturePath = `textures/${version}/entity/cat/ocelot.png`\n      }\n      if (!texturePath) throw new Error(`No texture for ${type}`)\n      const texture = new THREE.TextureLoader().load(texturePath)\n      texture.minFilter = THREE.NearestFilter\n      texture.magFilter = THREE.NearestFilter\n      const material = new THREE.MeshBasicMaterial({\n        map: texture,\n        transparent: true,\n        alphaTest: 0.1\n      })\n      const obj = objLoader.parse(externalModels[type])\n      const scale = scaleEntity[originalType]\n      if (scale) obj.scale.set(scale, scale, scale)\n      const offset = offsetEntity[originalType]\n      if (offset) obj.position.set(offset.x, offset.y, offset.z)\n      obj.traverse((child) => {\n        if (child instanceof THREE.Mesh) {\n          child.material = material\n          // todo\n          if (child.name === 'Head layer') child.visible = false\n          if (child.name === 'Head' && overrides.rotation?.head) { // todo\n            child.rotation.x -= (overrides.rotation.head.x ?? 0) * Math.PI / 180\n            child.rotation.y -= (overrides.rotation.head.y ?? 0) * Math.PI / 180\n            child.rotation.z -= (overrides.rotation.head.z ?? 0) * Math.PI / 180\n          }\n        }\n      })\n      this.mesh = obj\n      return\n    }\n\n    const e = getEntity(type)\n    if (!e) {\n      if (knownNotHandled.includes(type)) return\n      throw new Error(`Unknown entity ${type}`)\n    }\n\n    this.mesh = new THREE.Object3D()\n    for (const [name, jsonModel] of Object.entries(e.geometry)) {\n      const texture = overrides.textures?.[name] ?? e.textures[name]\n      if (!texture) continue\n      // console.log(JSON.stringify(jsonModel, null, 2))\n      const mesh = getMesh(texture + '.png', jsonModel, overrides)\n      mesh.name = `geometry_${name}`\n      this.mesh.add(mesh)\n\n      const skeletonHelper = new THREE.SkeletonHelper(mesh)\n      //@ts-expect-error\n      skeletonHelper.material.linewidth = 2\n      skeletonHelper.visible = false\n      this.mesh.add(skeletonHelper)\n    }\n  }\n\n  static getStaticData(name) {\n    name = temporaryMap[name] || name\n    if (externalModels[name]) {\n      return {\n        boneNames: [] // todo\n      }\n    }\n    const e = getEntity(name)\n    if (!e) throw new Error(`Unknown entity ${name}`)\n    return {\n      boneNames: Object.values(e.geometry).flatMap(x => x.name)\n    }\n  }\n}\n","import * as THREE from 'three'\nimport { loadSkinToCanvas } from 'skinview-utils'\nimport stevePng from 'mc-assets/dist/other-textures/latest/entity/player/wide/steve.png'\n\nlet steveTexture: THREE.Texture\nexport const getMyHand = async (image?: string) => {\n  let newMap: THREE.Texture\n  if (!image && steveTexture) {\n    newMap = steveTexture\n  } else {\n    image ??= stevePng\n    const skinCanvas = document.createElement('canvas')\n    const img = new Image()\n    img.src = image\n    await new Promise<void>(resolve => {\n      img.onload = () => {\n        resolve()\n      }\n    })\n    loadSkinToCanvas(skinCanvas, img)\n    newMap = new THREE.CanvasTexture(skinCanvas)\n    // newMap.flipY = false\n    newMap.magFilter = THREE.NearestFilter\n    newMap.minFilter = THREE.NearestFilter\n    if (!image) {\n      steveTexture = newMap\n    }\n  }\n\n  // right arm\n  const box = new THREE.BoxGeometry()\n  const material = new THREE.MeshStandardMaterial()\n  const slim = false\n  const mesh = new THREE.Mesh(box, material)\n  mesh.scale.x = slim ? 3 : 4\n  mesh.scale.y = 12\n  mesh.scale.z = 4\n  setSkinUVs(box, 40, 16, slim ? 3 : 4, 12, 4)\n  material.map = newMap\n  material.needsUpdate = true\n  const group = new THREE.Group()\n  group.add(mesh)\n  group.scale.set(0.1, 0.1, 0.1)\n  mesh.rotation.z = Math.PI\n  return group\n}\n\nfunction setUVs (\n  box: THREE.BoxGeometry,\n  u: number,\n  v: number,\n  width: number,\n  height: number,\n  depth: number,\n  textureWidth: number,\n  textureHeight: number\n): void {\n  const toFaceVertices = (x1: number, y1: number, x2: number, y2: number) => [\n    new THREE.Vector2(x1 / textureWidth, 1 - y2 / textureHeight),\n    new THREE.Vector2(x2 / textureWidth, 1 - y2 / textureHeight),\n    new THREE.Vector2(x2 / textureWidth, 1 - y1 / textureHeight),\n    new THREE.Vector2(x1 / textureWidth, 1 - y1 / textureHeight),\n  ]\n\n  const top = toFaceVertices(u + depth, v, u + width + depth, v + depth)\n  const bottom = toFaceVertices(u + width + depth, v, u + width * 2 + depth, v + depth)\n  const left = toFaceVertices(u, v + depth, u + depth, v + depth + height)\n  const front = toFaceVertices(u + depth, v + depth, u + width + depth, v + depth + height)\n  const right = toFaceVertices(u + width + depth, v + depth, u + width + depth * 2, v + height + depth)\n  const back = toFaceVertices(u + width + depth * 2, v + depth, u + width * 2 + depth * 2, v + height + depth)\n\n  const uvAttr = box.attributes.uv as THREE.BufferAttribute\n  const uvRight = [right[3], right[2], right[0], right[1]]\n  const uvLeft = [left[3], left[2], left[0], left[1]]\n  const uvTop = [top[3], top[2], top[0], top[1]]\n  const uvBottom = [bottom[0], bottom[1], bottom[3], bottom[2]]\n  const uvFront = [front[3], front[2], front[0], front[1]]\n  const uvBack = [back[3], back[2], back[0], back[1]]\n\n  // Create a new array to hold the modified UV data\n  const newUVData = [] as number[]\n\n  // Iterate over the arrays and copy the data to uvData\n  for (const uvArray of [uvRight, uvLeft, uvTop, uvBottom, uvFront, uvBack]) {\n    for (const uv of uvArray) {\n      newUVData.push(uv.x, uv.y)\n    }\n  }\n\n  uvAttr.set(new Float32Array(newUVData))\n  uvAttr.needsUpdate = true\n}\n\nfunction setSkinUVs (box: THREE.BoxGeometry, u: number, v: number, width: number, height: number, depth: number): void {\n  setUVs(box, u, v, width, height, depth, 64, 64)\n}\n","import { BlockModelPartsResolved } from './world'\n\nexport type BlockElement = NonNullable<BlockModelPartsResolved[0][0]['elements']>[0]\n\n\nexport function buildRotationMatrix (axis, degree) {\n  const radians = degree / 180 * Math.PI\n  const cos = Math.cos(radians)\n  const sin = Math.sin(radians)\n\n  const axis0 = { x: 0, y: 1, z: 2 }[axis]\n  const axis1 = (axis0 + 1) % 3\n  const axis2 = (axis0 + 2) % 3\n\n  const matrix = [\n    [0, 0, 0],\n    [0, 0, 0],\n    [0, 0, 0]\n  ]\n\n  matrix[axis0][axis0] = 1\n  matrix[axis1][axis1] = cos\n  matrix[axis1][axis2] = -sin\n  matrix[axis2][axis1] = +sin\n  matrix[axis2][axis2] = cos\n\n  return matrix\n}\n\nexport function vecadd3 (a, b) {\n  if (!b) return a\n  return [a[0] + b[0], a[1] + b[1], a[2] + b[2]]\n}\n\nexport function vecsub3 (a, b) {\n  if (!b) return a\n  return [a[0] - b[0], a[1] - b[1], a[2] - b[2]]\n}\n\nexport function matmul3 (matrix, vector): [number, number, number] {\n  if (!matrix) return vector\n  return [\n    matrix[0][0] * vector[0] + matrix[0][1] * vector[1] + matrix[0][2] * vector[2],\n    matrix[1][0] * vector[0] + matrix[1][1] * vector[1] + matrix[1][2] * vector[2],\n    matrix[2][0] * vector[0] + matrix[2][1] * vector[1] + matrix[2][2] * vector[2]\n  ]\n}\n\nexport function matmulmat3 (a, b) {\n  const te = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\n\n  const a11 = a[0][0]; const a12 = a[1][0]; const a13 = a[2][0]\n  const a21 = a[0][1]; const a22 = a[1][1]; const a23 = a[2][1]\n  const a31 = a[0][2]; const a32 = a[1][2]; const a33 = a[2][2]\n\n  const b11 = b[0][0]; const b12 = b[1][0]; const b13 = b[2][0]\n  const b21 = b[0][1]; const b22 = b[1][1]; const b23 = b[2][1]\n  const b31 = b[0][2]; const b32 = b[1][2]; const b33 = b[2][2]\n\n  te[0][0] = a11 * b11 + a12 * b21 + a13 * b31\n  te[1][0] = a11 * b12 + a12 * b22 + a13 * b32\n  te[2][0] = a11 * b13 + a12 * b23 + a13 * b33\n\n  te[0][1] = a21 * b11 + a22 * b21 + a23 * b31\n  te[1][1] = a21 * b12 + a22 * b22 + a23 * b32\n  te[2][1] = a21 * b13 + a22 * b23 + a23 * b33\n\n  te[0][2] = a31 * b11 + a32 * b21 + a33 * b31\n  te[1][2] = a31 * b12 + a32 * b22 + a33 * b32\n  te[2][2] = a31 * b13 + a32 * b23 + a33 * b33\n\n  return te\n}\n\nexport const elemFaces = {\n  up: {\n    dir: [0, 1, 0],\n    mask1: [1, 1, 0],\n    mask2: [0, 1, 1],\n    corners: [\n      [0, 1, 1, 0, 1],\n      [1, 1, 1, 1, 1],\n      [0, 1, 0, 0, 0],\n      [1, 1, 0, 1, 0]\n    ]\n  },\n  down: {\n    dir: [0, -1, 0],\n    mask1: [1, 1, 0],\n    mask2: [0, 1, 1],\n    corners: [\n      [1, 0, 1, 0, 1],\n      [0, 0, 1, 1, 1],\n      [1, 0, 0, 0, 0],\n      [0, 0, 0, 1, 0]\n    ]\n  },\n  east: {\n    dir: [1, 0, 0],\n    mask1: [1, 1, 0],\n    mask2: [1, 0, 1],\n    corners: [\n      [1, 1, 1, 0, 0],\n      [1, 0, 1, 0, 1],\n      [1, 1, 0, 1, 0],\n      [1, 0, 0, 1, 1]\n    ]\n  },\n  west: {\n    dir: [-1, 0, 0],\n    mask1: [1, 1, 0],\n    mask2: [1, 0, 1],\n    corners: [\n      [0, 1, 0, 0, 0],\n      [0, 0, 0, 0, 1],\n      [0, 1, 1, 1, 0],\n      [0, 0, 1, 1, 1]\n    ]\n  },\n  north: {\n    dir: [0, 0, -1],\n    mask1: [1, 0, 1],\n    mask2: [0, 1, 1],\n    corners: [\n      [1, 0, 0, 0, 1],\n      [0, 0, 0, 1, 1],\n      [1, 1, 0, 0, 0],\n      [0, 1, 0, 1, 0]\n    ]\n  },\n  south: {\n    dir: [0, 0, 1],\n    mask1: [1, 0, 1],\n    mask2: [0, 1, 1],\n    corners: [\n      [0, 0, 1, 0, 1],\n      [1, 0, 1, 1, 1],\n      [0, 1, 1, 0, 0],\n      [1, 1, 1, 1, 0]\n    ]\n  }\n}\n","/* eslint-disable @stylistic/function-call-argument-newline */\nimport { Vec3 } from 'vec3'\nimport { Block } from 'prismarine-block'\nimport { IndexedData } from 'minecraft-data'\nimport * as THREE from 'three'\nimport { BlockModelPartsResolved } from './world'\nimport { BlockElement, buildRotationMatrix, elemFaces, matmul3, matmulmat3, vecadd3, vecsub3 } from './modelsGeometryCommon'\n\ntype NeighborSide = 'up' | 'down' | 'east' | 'west' | 'north' | 'south'\n\nfunction tintToGl (tint) {\n  const r = (tint >> 16) & 0xff\n  const g = (tint >> 8) & 0xff\n  const b = tint & 0xff\n  return [r / 255, g / 255, b / 255]\n}\n\ntype Neighbors = Partial<Record<NeighborSide, boolean>>\nfunction renderElement (element: BlockElement, doAO: boolean, attr, globalMatrix, globalShift, block: Block | undefined, biome: string, neighbors: Neighbors) {\n  const cursor = new Vec3(0, 0, 0)\n\n  // const key = `${position.x},${position.y},${position.z}`\n  // if (!globalThis.allowedBlocks.includes(key)) return\n  // const cullIfIdentical = block.name.indexOf('glass') >= 0\n\n  // eslint-disable-next-line guard-for-in\n  for (const face in element.faces) {\n    const eFace = element.faces[face]\n    const { corners, mask1, mask2 } = elemFaces[face]\n    const dir = matmul3(globalMatrix, elemFaces[face].dir)\n\n    if (eFace.cullface) {\n      if (neighbors[face]) continue\n    }\n\n    const minx = element.from[0]\n    const miny = element.from[1]\n    const minz = element.from[2]\n    const maxx = element.to[0]\n    const maxy = element.to[1]\n    const maxz = element.to[2]\n\n    const texture = eFace.texture as any\n    const { u } = texture\n    const { v } = texture\n    const { su } = texture\n    const { sv } = texture\n\n    const ndx = Math.floor(attr.positions.length / 3)\n\n    const tint = [1, 1, 1]\n    if (eFace.tintindex !== undefined) {\n      if (eFace.tintindex === 0) {\n        // TODO\n        // if (block.name === 'redstone_wire') {\n        //   tint = tints.redstone[`${block.getProperties().power}`]\n        // } else if (block.name === 'birch_leaves' ||\n        //   block.name === 'spruce_leaves' ||\n        //   block.name === 'lily_pad') {\n        //   tint = tints.constant[block.name]\n        // } else if (block.name.includes('leaves') || block.name === 'vine') {\n        //   tint = tints.foliage[biome]\n        // } else {\n        //   tint = tints.grass[biome]\n        // }\n      }\n    }\n\n    // UV rotation\n    const r = eFace.rotation || 0\n    const uvcs = Math.cos(r * Math.PI / 180)\n    const uvsn = -Math.sin(r * Math.PI / 180)\n\n    let localMatrix = null as any\n    let localShift = null as any\n\n    if (element.rotation) {\n      // todo do we support rescale?\n      localMatrix = buildRotationMatrix(\n        element.rotation.axis,\n        element.rotation.angle\n      )\n\n      localShift = vecsub3(\n        element.rotation.origin,\n        matmul3(\n          localMatrix,\n          element.rotation.origin\n        )\n      )\n    }\n\n    const aos: number[] = []\n    // const neighborPos = position.plus(new Vec3(...dir))\n    // const baseLight = world.getLight(neighborPos, undefined, undefined, block.name) / 15\n    const baseLight = 1\n    for (const pos of corners) {\n      let vertex = [\n        (pos[0] ? maxx : minx),\n        (pos[1] ? maxy : miny),\n        (pos[2] ? maxz : minz)\n      ]\n\n      vertex = vecadd3(matmul3(localMatrix, vertex), localShift)\n      vertex = vecadd3(matmul3(globalMatrix, vertex), globalShift)\n      vertex = vertex.map(v => v / 16)\n\n      attr.positions.push(\n        vertex[0]/*  + (cursor.x & 15) - 8 */,\n        vertex[1]/*  + (cursor.y & 15) x */,\n        vertex[2]/*  + (cursor.z & 15) - 8 */\n      )\n\n      attr.normals.push(...dir)\n\n      const baseu = (pos[3] - 0.5) * uvcs - (pos[4] - 0.5) * uvsn + 0.5\n      const basev = (pos[3] - 0.5) * uvsn + (pos[4] - 0.5) * uvcs + 0.5\n      attr.uvs.push(baseu * su + u, basev * sv + v)\n\n      let light = 1\n      if (doAO) {\n        const cornerLightResult = 15\n\n        const side1Block = 0\n        const side2Block = 0\n        const cornerBlock = 0\n\n        const ao = (side1Block && side2Block) ? 0 : (3 - (side1Block + side2Block + cornerBlock))\n        // todo light should go upper on lower blocks\n        light = (ao + 1) / 4 * (cornerLightResult / 15)\n        aos.push(ao)\n      }\n\n      attr.colors.push(baseLight * tint[0] * light, baseLight * tint[1] * light, baseLight * tint[2] * light)\n    }\n\n    // if (needTiles) {\n    //   attr.tiles[`${cursor.x},${cursor.y},${cursor.z}`] ??= {\n    //     block: block.name,\n    //     faces: [],\n    //   }\n    //   attr.tiles[`${cursor.x},${cursor.y},${cursor.z}`].faces.push({\n    //     face,\n    //     neighbor: `${neighborPos.x},${neighborPos.y},${neighborPos.z}`,\n    //     light: baseLight\n    //     // texture: eFace.texture.name,\n    //   })\n    // }\n\n    if (doAO && aos[0] + aos[3] >= aos[1] + aos[2]) {\n      attr.indices.push(\n\n        ndx, ndx + 3, ndx + 2,\n        ndx, ndx + 1, ndx + 3\n      )\n    } else {\n      attr.indices.push(\n\n        ndx, ndx + 1, ndx + 2,\n        ndx + 2, ndx + 1, ndx + 3\n      )\n    }\n  }\n}\n\nexport const renderBlockThreeAttr = (models: BlockModelPartsResolved, block: Block | undefined, biome: string, mcData: IndexedData, variants = [], neighbors: Neighbors = {}) => {\n  const sx = 0\n  const sy = 0\n  const sz = 0\n\n  const attr = {\n    sx: sx + 0.5,\n    sy: sy + 0.5,\n    sz: sz + 0.5,\n    positions: [],\n    normals: [],\n    colors: [],\n    uvs: [],\n    t_positions: [],\n    t_normals: [],\n    t_colors: [],\n    t_uvs: [],\n    indices: [],\n    tiles: {},\n  } as Record<string, any>\n\n  for (const [i, modelVars] of models.entries()) {\n    const model = modelVars[variants[i]] ?? modelVars[0]\n    if (!model) continue\n    let globalMatrix = null as any\n    let globalShift = null as any\n    for (const axis of ['x', 'y', 'z'] as const) {\n      if (axis in model) {\n        if (globalMatrix) { globalMatrix = matmulmat3(globalMatrix, buildRotationMatrix(axis, -(model[axis] ?? 0))) } else { globalMatrix = buildRotationMatrix(axis, -(model[axis] ?? 0)) }\n      }\n    }\n    if (globalMatrix) {\n      globalShift = [8, 8, 8]\n      globalShift = vecsub3(globalShift, matmul3(globalMatrix, globalShift))\n    }\n\n    const ao = model.ao ?? true\n\n    for (const element of model.elements ?? []) {\n      renderElement(element, ao, attr, globalMatrix, globalShift, block, biome, neighbors)\n    }\n  }\n\n  let ndx = attr.positions.length / 3\n  for (let i = 0; i < attr.t_positions.length / 12; i++) {\n    attr.indices.push(\n      ndx, ndx + 1, ndx + 2, ndx + 2, ndx + 1, ndx + 3,\n      // back face\n      ndx, ndx + 2, ndx + 1, ndx + 2, ndx + 3, ndx + 1\n    )\n    ndx += 4\n  }\n\n  attr.positions.push(...attr.t_positions)\n  attr.normals.push(...attr.t_normals)\n  attr.colors.push(...attr.t_colors)\n  attr.uvs.push(...attr.t_uvs)\n\n  delete attr.t_positions\n  delete attr.t_normals\n  delete attr.t_colors\n  delete attr.t_uvs\n\n  attr.positions = new Float32Array(attr.positions) as any\n  attr.normals = new Float32Array(attr.normals) as any\n  attr.colors = new Float32Array(attr.colors) as any\n  attr.uvs = new Float32Array(attr.uvs) as any\n\n  return attr\n}\n\nexport const renderBlockThree = (...args: Parameters<typeof renderBlockThreeAttr>) => {\n  const attr = renderBlockThreeAttr(...args)\n  const data = {\n    geometry: attr\n  }\n\n  const geometry = new THREE.BufferGeometry()\n  geometry.setAttribute('position', new THREE.BufferAttribute(data.geometry.positions, 3))\n  geometry.setAttribute('normal', new THREE.BufferAttribute(data.geometry.normals, 3))\n  geometry.setAttribute('color', new THREE.BufferAttribute(data.geometry.colors, 3))\n  geometry.setAttribute('uv', new THREE.BufferAttribute(data.geometry.uvs, 2))\n  geometry.setIndex(data.geometry.indices)\n  geometry.name = 'block-geometry'\n\n  return geometry\n}\n\nexport const getThreeBlockModelGroup = (material: THREE.Material, ...args: Parameters<typeof renderBlockThree>) => {\n  const geometry = renderBlockThree(...args)\n  const mesh = new THREE.Mesh(geometry, material)\n  mesh.position.set(-0.5, -0.5, -0.5)\n  const group = new THREE.Group()\n  group.add(mesh)\n  group.rotation.set(0, -THREE.MathUtils.degToRad(90), 0, 'ZYX')\n  globalThis.mesh = group\n  return group\n  // return new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), new THREE.MeshPhongMaterial({ color: 0x00_00_ff, transparent: true, opacity: 0.5 }))\n}\n\nexport const setBlockPosition = (object: THREE.Object3D, position: { x: number, y: number, z: number }) => {\n  object.position.set(position.x + 0.5, position.y + 0.5, position.z + 0.5)\n}\n","export async function getBufferFromStream (stream) {\n  return new Promise((resolve, reject) => {\n    let buffer = Buffer.from([])\n    stream.on('data', buf => {\n      buffer = Buffer.concat([buffer, buf])\n    })\n    stream.on('end', () => resolve(buffer))\n    stream.on('error', reject)\n  })\n}\n\nexport function openURL (url, newTab = true) {\n  if (newTab) {\n    window.open(url, '_blank', 'noopener,noreferrer')\n  } else {\n    window.open(url, '_self')\n  }\n}\n\nexport const isMobile = () => {\n  return window.matchMedia('(pointer: coarse)').matches || navigator.userAgent.includes('Mobile')\n}\n\nexport function chunkPos (pos: { x: number, z: number }) {\n  const x = Math.floor(pos.x / 16)\n  const z = Math.floor(pos.z / 16)\n  return [x, z]\n}\n\nexport function sectionPos (pos: { x: number, y: number, z: number }) {\n  const x = Math.floor(pos.x / 16)\n  const y = Math.floor(pos.y / 16)\n  const z = Math.floor(pos.z / 16)\n  return [x, y, z]\n}\n","import * as THREE from 'three'\n\nexport const disposeObject = (obj: THREE.Object3D) => {\n  // not cleaning texture there as it might be used by other objects, but would be good to also do that\n  if (obj instanceof THREE.Mesh) {\n    obj.geometry?.dispose?.()\n    obj.material?.dispose?.()\n  }\n  if (obj.children) {\n    // eslint-disable-next-line unicorn/no-array-for-each\n    obj.children.forEach(disposeObject)\n  }\n}\n","/* eslint-disable unicorn/prefer-dom-node-text-content */\nconst rightOffset = 0\n\nconst stats = {}\n\nlet lastY = 20\nexport const addNewStat = (id: string, width = 80, x = rightOffset, y = lastY) => {\n  const pane = document.createElement('div')\n  pane.style.position = 'fixed'\n  pane.style.top = `${y}px`\n  pane.style.right = `${x}px`\n  // gray bg\n  pane.style.backgroundColor = 'rgba(0, 0, 0, 0.7)'\n  pane.style.color = 'white'\n  pane.style.padding = '2px'\n  pane.style.fontFamily = 'monospace'\n  pane.style.fontSize = '12px'\n  pane.style.zIndex = '10000'\n  pane.style.pointerEvents = 'none'\n  document.body.appendChild(pane)\n  stats[id] = pane\n  if (y === 0) { // otherwise it's a custom position\n    // rightOffset += width\n    lastY += 20\n  }\n\n  return {\n    updateText (text: string) {\n      if (pane.innerText === text) return\n      pane.innerText = text\n    },\n    setVisibility (visible: boolean) {\n      pane.style.display = visible ? 'block' : 'none'\n    }\n  }\n}\n\nexport const updateStatText = (id, text) => {\n  if (!stats[id]) return\n  stats[id].innerText = text\n}\n\nif (typeof customEvents !== 'undefined') {\n  customEvents.on('gameLoaded', () => {\n    const chunksLoaded = addNewStat('chunks-loaded', 80, 0, 0)\n    const chunksTotal = addNewStat('chunks-read', 80, 0, 0)\n  })\n}\n","const path = require('path')\nconst THREE = require('three')\n\nconst textureCache = {}\nfunction loadTexture(texture, cb) {\n  if (!textureCache[texture]) {\n    const url = path.resolve(__dirname, '../../public/' + texture)\n    textureCache[texture] = new THREE.TextureLoader().load(url)\n  }\n  cb(textureCache[texture])\n}\n\nfunction loadJSON(json, cb) {\n  cb(require(path.resolve(__dirname, '../../public/' + json)))\n}\n\nmodule.exports = { loadTexture, loadJSON }\n","function safeRequire(path) {\n  try {\n    return require(path)\n  } catch (e) {\n    return {}\n  }\n}\nconst { loadImage } = safeRequire('node-canvas-webgl/lib')\nconst path = require('path')\nconst THREE = require('three')\n\nconst textureCache = {}\n// todo not ideal, export different functions for browser and node\nexport function loadTexture(texture, cb) {\n  if (process.platform === 'browser') {\n    return require('./utils.web').loadTexture(texture, cb)\n  }\n\n  if (textureCache[texture]) {\n    cb(textureCache[texture])\n  } else {\n    loadImage(path.resolve(__dirname, '../../public/' + texture)).then(image => {\n      textureCache[texture] = new THREE.CanvasTexture(image)\n      cb(textureCache[texture])\n    })\n  }\n}\n\nexport function loadJSON(json, cb) {\n  if (process.platform === 'browser') {\n    return require('./utils.web').loadJSON(json, cb)\n  }\n  cb(require(path.resolve(__dirname, '../../public/' + json)))\n}\n\nexport const loadScript = async function (/** @type {string} */scriptSrc) {\n  if (document.querySelector(`script[src=\"${scriptSrc}\"]`)) {\n    return\n  }\n\n  return new Promise((resolve, reject) => {\n    const scriptElement = document.createElement('script')\n    scriptElement.src = scriptSrc\n    scriptElement.async = true\n\n    scriptElement.addEventListener('load', () => {\n      resolve(scriptElement)\n    })\n\n    scriptElement.onerror = (error) => {\n      reject(new Error(error.message))\n      scriptElement.remove()\n    }\n\n    document.head.appendChild(scriptElement)\n  })\n}\n","/* global XMLHttpRequest */\nconst THREE = require('three')\n\nconst textureCache = {}\nfunction loadTexture(texture, cb, onLoad) {\n  const cached = textureCache[texture]\n  if (!cached) {\n    textureCache[texture] = new THREE.TextureLoader().load(texture, onLoad)\n  }\n  cb(textureCache[texture])\n  if (cached) onLoad?.()\n}\n\nfunction loadJSON(url, callback) {\n  const xhr = new XMLHttpRequest()\n  xhr.open('GET', url, true)\n  xhr.responseType = 'json'\n  xhr.onload = function () {\n    const { status } = xhr\n    if (status === 200) {\n      callback(xhr.response)\n    } else {\n      throw new Error(url + ' not found')\n    }\n  }\n  xhr.send()\n}\n\nmodule.exports = { loadTexture, loadJSON }\n","import { PlayerAnimation } from 'skinview3d'\n\nexport class WalkingGeneralSwing extends PlayerAnimation {\n\n  switchAnimationCallback\n\n  isRunning = false\n  isMoving = true\n\n  _startArmSwing\n\n  swingArm() {\n    this._startArmSwing = this.progress\n  }\n\n  animate(player) {\n    // Multiply by animation's natural speed\n    let t\n    const updateT = () => {\n      if (!this.isMoving) {\n        t = 0\n        return\n      }\n      if (this.isRunning) {\n        t = this.progress * 10 + Math.PI * 0.5\n      } else {\n        t = this.progress * 8\n      }\n    }\n    updateT()\n    let reset = false\n\n    if ((this.isRunning ? Math.cos(t) : Math.sin(t)) < 0.01) {\n      if (this.switchAnimationCallback) {\n        reset = true\n        this.progress = 0\n        updateT()\n      }\n    }\n\n    if (this.isRunning) {\n      // Leg swing with larger amplitude\n      player.skin.leftLeg.rotation.x = Math.cos(t + Math.PI) * 1.3\n      player.skin.rightLeg.rotation.x = Math.cos(t) * 1.3\n    } else {\n      // Leg swing\n      player.skin.leftLeg.rotation.x = Math.sin(t) * 0.5\n      player.skin.rightLeg.rotation.x = Math.sin(t + Math.PI) * 0.5\n    }\n\n    if (this._startArmSwing) {\n      const tHand = (this.progress - this._startArmSwing) * 18 + Math.PI * 0.5\n      player.skin.rightArm.rotation.x = Math.cos(tHand) * 1.5\n      const basicArmRotationZ = Math.PI * 0.1\n      player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.3 - basicArmRotationZ\n\n      if (tHand > Math.PI + Math.PI * 0.5) {\n        this._startArmSwing = null\n        player.skin.rightArm.rotation.z = 0\n      }\n    }\n\n    if (this.isRunning) {\n      player.skin.leftArm.rotation.x = Math.cos(t) * 1.5\n      if (!this._startArmSwing) {\n        player.skin.rightArm.rotation.x = Math.cos(t + Math.PI) * 1.5\n      }\n      const basicArmRotationZ = Math.PI * 0.1\n      player.skin.leftArm.rotation.z = Math.cos(t) * 0.1 + basicArmRotationZ\n      if (!this._startArmSwing) {\n        player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.1 - basicArmRotationZ\n      }\n    } else {\n      // Arm swing\n      player.skin.leftArm.rotation.x = Math.sin(t + Math.PI) * 0.5\n      if (!this._startArmSwing) {\n        player.skin.rightArm.rotation.x = Math.sin(t) * 0.5\n      }\n      const basicArmRotationZ = Math.PI * 0.02\n      player.skin.leftArm.rotation.z = Math.cos(t) * 0.03 + basicArmRotationZ\n      if (!this._startArmSwing) {\n        player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.03 - basicArmRotationZ\n      }\n    }\n\n    if (this.isRunning) {\n      player.rotation.z = Math.cos(t + Math.PI) * 0.01\n    }\n    if (this.isRunning) {\n      const basicCapeRotationX = Math.PI * 0.3\n      player.cape.rotation.x = Math.sin(t * 2) * 0.1 + basicCapeRotationX\n    } else {\n      // Always add an angle for cape around the x axis\n      const basicCapeRotationX = Math.PI * 0.06\n      player.cape.rotation.x = Math.sin(t / 1.5) * 0.06 + basicCapeRotationX\n    }\n\n    if (reset) {\n      this.switchAnimationCallback()\n      this.switchAnimationCallback = null\n    }\n  }\n}\n","//@ts-check\nimport EventEmitter from 'events'\nimport { UnionToIntersection } from 'type-fest'\nimport nbt from 'prismarine-nbt'\nimport * as TWEEN from '@tweenjs/tween.js'\nimport * as THREE from 'three'\nimport { PlayerObject, PlayerAnimation } from 'skinview3d'\nimport { loadSkinToCanvas, loadEarsToCanvasFromSkin, inferModelType, loadCapeToCanvas, loadImage } from 'skinview-utils'\n// todo replace with url\nimport stevePng from 'mc-assets/dist/other-textures/latest/entity/player/wide/steve.png'\nimport { degreesToRadians } from '@nxg-org/mineflayer-tracker/lib/mathUtils'\nimport { NameTagObject } from 'skinview3d/libs/nametag'\nimport { flat, fromFormattedString } from '@xmcl/text-component'\nimport mojangson from 'mojangson'\nimport { snakeCase } from 'change-case'\nimport { Item } from 'prismarine-item'\nimport { EntityMetadataVersions } from '../../../src/mcDataTypes'\nimport * as Entity from './entity/EntityMesh'\nimport { getMesh } from './entity/EntityMesh'\nimport { WalkingGeneralSwing } from './entity/animations'\nimport { disposeObject } from './threeJsUtils'\nimport { armorModels } from './entity/objModels'\nconst { loadTexture } = globalThis.isElectron ? require('./utils.electron.js') : require('./utils')\n\nexport const TWEEN_DURATION = 120\n\ntype PlayerObjectType = PlayerObject & { animation?: PlayerAnimation }\n\nfunction convert2sComplementToHex (complement: number) {\n  if (complement < 0) {\n    complement = (0xFF_FF_FF_FF + complement + 1) >>> 0\n  }\n  return complement.toString(16)\n}\n\nfunction toRgba (color: string | undefined) {\n  if (color === undefined) {\n    return undefined\n  }\n  if (parseInt(color, 10) === 0) {\n    return 'rgba(0, 0, 0, 0)'\n  }\n  const hex = convert2sComplementToHex(parseInt(color, 10))\n  if (hex.length === 8) {\n    return `#${hex.slice(2, 8)}${hex.slice(0, 2)}`\n  } else {\n    return `#${hex}`\n  }\n}\n\nfunction toQuaternion (quaternion: any, defaultValue?: THREE.Quaternion) {\n  if (quaternion === undefined) {\n    return defaultValue\n  }\n  if (quaternion instanceof THREE.Quaternion) {\n    return quaternion\n  }\n  if (Array.isArray(quaternion)) {\n    return new THREE.Quaternion(quaternion[0], quaternion[1], quaternion[2], quaternion[3])\n  }\n  return new THREE.Quaternion(quaternion.x, quaternion.y, quaternion.z, quaternion.w)\n}\n\nfunction poseToEuler (pose: any, defaultValue?: THREE.Euler) {\n  if (pose === undefined) {\n    return defaultValue ?? new THREE.Euler()\n  }\n  if (pose instanceof THREE.Euler) {\n    return pose\n  }\n  if (pose['yaw'] !== undefined && pose['pitch'] !== undefined && pose['roll'] !== undefined) {\n    // Convert Minecraft pitch, yaw, roll definitions to our angle system\n    return new THREE.Euler(-degreesToRadians(pose.pitch), -degreesToRadians(pose.yaw), degreesToRadians(pose.roll), 'ZYX')\n  }\n  if (pose['x'] !== undefined && pose['y'] !== undefined && pose['z'] !== undefined) {\n    return new THREE.Euler(pose.z, pose.y, pose.x, 'ZYX')\n  }\n  if (Array.isArray(pose)) {\n    return new THREE.Euler(pose[0], pose[1], pose[2])\n  }\n  return defaultValue ?? new THREE.Euler()\n}\n\nfunction getUsernameTexture ({\n  username,\n  nameTagBackgroundColor = 'rgba(0, 0, 0, 0.3)',\n  nameTagTextOpacity = 255\n}: any, { fontFamily = 'sans-serif' }: any) {\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n  if (!ctx) throw new Error('Could not get 2d context')\n\n  const fontSize = 48\n  const padding = 5\n  ctx.font = `${fontSize}px ${fontFamily}`\n\n  const lines = String(username).split('\\n')\n\n  let textWidth = 0\n  for (const line of lines) {\n    const width = ctx.measureText(line).width + padding * 2\n    if (width > textWidth) textWidth = width\n  }\n\n  canvas.width = textWidth\n  canvas.height = (fontSize + padding) * lines.length\n\n  ctx.fillStyle = nameTagBackgroundColor\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\n\n  ctx.font = `${fontSize}px ${fontFamily}`\n  ctx.fillStyle = `rgba(255, 255, 255, ${nameTagTextOpacity / 255})`\n  let i = 0\n  for (const line of lines) {\n    i++\n    ctx.fillText(line, (textWidth - ctx.measureText(line).width) / 2, -padding + fontSize * i)\n  }\n\n  return canvas\n}\n\nconst addNametag = (entity, options, mesh) => {\n  if (entity.username !== undefined) {\n    if (mesh.children.some(c => c.name === 'nametag')) return // todo update\n    const canvas = getUsernameTexture(entity, options)\n    const tex = new THREE.Texture(canvas)\n    tex.needsUpdate = true\n    let nameTag\n    if (entity.nameTagFixed) {\n      const geometry = new THREE.PlaneGeometry()\n      const material = new THREE.MeshBasicMaterial({ map: tex })\n      material.transparent = true\n      nameTag = new THREE.Mesh(geometry, material)\n      nameTag.rotation.set(entity.pitch, THREE.MathUtils.degToRad(entity.yaw + 180), 0)\n      nameTag.position.y += entity.height + 0.3\n    } else {\n      const spriteMat = new THREE.SpriteMaterial({ map: tex })\n      nameTag = new THREE.Sprite(spriteMat)\n      nameTag.position.y += entity.height + 0.6\n    }\n    nameTag.renderOrder = 1000\n    nameTag.scale.set(canvas.width * 0.005, canvas.height * 0.005, 1)\n    if (entity.nameTagRotationRight) {\n      nameTag.applyQuaternion(entity.nameTagRotationRight)\n    }\n    if (entity.nameTagScale) {\n      nameTag.scale.multiply(entity.nameTagScale)\n    }\n    if (entity.nameTagRotationLeft) {\n      nameTag.applyQuaternion(entity.nameTagRotationLeft)\n    }\n    if (entity.nameTagTranslation) {\n      nameTag.position.add(entity.nameTagTranslation)\n    }\n    nameTag.name = 'nametag'\n\n    mesh.add(nameTag)\n  }\n}\n\n// todo cleanup\nconst nametags = {}\n\nconst isFirstUpperCase = (str) => str.charAt(0) === str.charAt(0).toUpperCase()\n\nfunction getEntityMesh (entity, scene, options, overrides) {\n  if (entity.name) {\n    try {\n      // https://github.com/PrismarineJS/prismarine-viewer/pull/410\n      const entityName = (isFirstUpperCase(entity.name) ? snakeCase(entity.name) : entity.name).toLowerCase()\n      const e = new Entity.EntityMesh('1.16.4', entityName, scene, overrides)\n\n      if (e.mesh) {\n        addNametag(entity, options, e.mesh)\n        return e.mesh\n      }\n    } catch (err) {\n      reportError?.(err)\n    }\n  }\n\n  const geometry = new THREE.BoxGeometry(entity.width, entity.height, entity.width)\n  geometry.translate(0, entity.height / 2, 0)\n  const material = new THREE.MeshBasicMaterial({ color: 0xff_00_ff })\n  const cube = new THREE.Mesh(geometry, material)\n  const nametagCount = (nametags[entity.name] = (nametags[entity.name] || 0) + 1)\n  if (nametagCount < 6) {\n    addNametag({\n      username: entity.name,\n      height: entity.height,\n    }, options, cube)\n  }\n  return cube\n}\n\nexport type SceneEntity = THREE.Object3D & {\n  playerObject?: PlayerObject & {\n    animation?: PlayerAnimation\n  }\n  username?: string\n  additionalCleanup?: () => void\n}\n\nexport class Entities extends EventEmitter {\n  entities = {} as Record<string, SceneEntity>\n  entitiesOptions: {\n    fontFamily?: string\n  } = {}\n  debugMode: string\n  onSkinUpdate: () => void\n  clock = new THREE.Clock()\n  rendering = true\n  itemsTexture: THREE.Texture | null = null\n  getItemUv: undefined | ((idOrName: number | string) => {\n    texture: THREE.Texture;\n    u: number;\n    v: number;\n    su?: number;\n    sv?: number;\n    size?: number;\n  })\n\n  constructor (public scene: THREE.Scene) {\n    super()\n    this.entitiesOptions = {}\n    this.debugMode = 'none'\n    this.onSkinUpdate = () => { }\n  }\n\n  clear () {\n    for (const mesh of Object.values(this.entities)) {\n      this.scene.remove(mesh)\n      disposeObject(mesh)\n    }\n    this.entities = {}\n  }\n\n  setDebugMode (mode: string, entity: THREE.Object3D | null = null) {\n    this.debugMode = mode\n    for (const mesh of entity ? [entity] : Object.values(this.entities)) {\n      const boxHelper = mesh.children.find(c => c.name === 'debug')!\n      boxHelper.visible = false\n      if (this.debugMode === 'basic') {\n        boxHelper.visible = true\n      }\n      // todo advanced\n    }\n  }\n\n  setRendering (rendering: boolean, entity: THREE.Object3D | null = null) {\n    this.rendering = rendering\n    for (const ent of entity ? [entity] : Object.values(this.entities)) {\n      if (rendering) {\n        if (!this.scene.children.includes(ent)) this.scene.add(ent)\n      } else {\n        this.scene.remove(ent)\n      }\n    }\n  }\n\n  render () {\n    const dt = this.clock.getDelta()\n    for (const entityId of Object.keys(this.entities)) {\n      const playerObject = this.getPlayerObject(entityId)\n      if (playerObject?.animation) {\n        playerObject.animation.update(playerObject, dt)\n      }\n    }\n  }\n\n  getPlayerObject (entityId: string | number) {\n    const playerObject = this.entities[entityId]?.playerObject as PlayerObjectType | undefined\n    return playerObject\n  }\n\n  // fixme workaround\n  defaultSteveTexture\n\n  // true means use default skin url\n  updatePlayerSkin (entityId: string | number, username: string | undefined, skinUrl: string | true, capeUrl: string | true | undefined = undefined) {\n    let playerObject = this.getPlayerObject(entityId)\n    if (!playerObject) return\n    // const username = this.entities[entityId].username\n    // or https://mulv.vercel.app/\n    if (skinUrl === true) {\n      skinUrl = `https://mulv.tycrek.dev/api/lookup?username=${username}&type=skin`\n      if (!username) return\n    }\n    loadImage(skinUrl).then(image => {\n      playerObject = this.getPlayerObject(entityId)\n      if (!playerObject) return\n      /** @type {THREE.CanvasTexture} */\n      let skinTexture\n      if (skinUrl === stevePng && this.defaultSteveTexture) {\n        skinTexture = this.defaultSteveTexture\n      } else {\n        const skinCanvas = document.createElement('canvas')\n        loadSkinToCanvas(skinCanvas, image)\n        skinTexture = new THREE.CanvasTexture(skinCanvas)\n        if (skinUrl === stevePng) {\n          this.defaultSteveTexture = skinTexture\n        }\n      }\n      skinTexture.magFilter = THREE.NearestFilter\n      skinTexture.minFilter = THREE.NearestFilter\n      skinTexture.needsUpdate = true\n      playerObject.skin.map = skinTexture\n      playerObject.skin.modelType = inferModelType(skinTexture.image)\n\n      const earsCanvas = document.createElement('canvas')\n      loadEarsToCanvasFromSkin(earsCanvas, image)\n      if (isCanvasBlank(earsCanvas)) {\n        playerObject.ears.map = null\n        playerObject.ears.visible = false\n      } else {\n        const earsTexture = new THREE.CanvasTexture(earsCanvas)\n        earsTexture.magFilter = THREE.NearestFilter\n        earsTexture.minFilter = THREE.NearestFilter\n        earsTexture.needsUpdate = true\n        //@ts-expect-error\n        playerObject.ears.map = earsTexture\n        playerObject.ears.visible = true\n      }\n      this.onSkinUpdate?.()\n      if (capeUrl) {\n        if (capeUrl === true) capeUrl = `https://mulv.tycrek.dev/api/lookup?username=${username}&type=cape`\n        loadImage(capeUrl).then(capeImage => {\n          playerObject = this.getPlayerObject(entityId)\n          if (!playerObject) return\n          const capeCanvas = document.createElement('canvas')\n          loadCapeToCanvas(capeCanvas, capeImage)\n\n          const capeTexture = new THREE.CanvasTexture(capeCanvas)\n          capeTexture.magFilter = THREE.NearestFilter\n          capeTexture.minFilter = THREE.NearestFilter\n          capeTexture.needsUpdate = true\n          //@ts-expect-error\n          playerObject.cape.map = capeTexture\n          playerObject.cape.visible = true\n          //@ts-expect-error\n          playerObject.elytra.map = capeTexture\n          this.onSkinUpdate?.()\n\n          if (!playerObject.backEquipment) {\n            playerObject.backEquipment = 'cape'\n          }\n        }, () => { })\n      }\n    }, () => { })\n\n\n    playerObject.cape.visible = false\n    if (!capeUrl) {\n      playerObject.backEquipment = null\n      playerObject.elytra.map = null\n      if (playerObject.cape.map) {\n        playerObject.cape.map.dispose()\n      }\n      playerObject.cape.map = null\n    }\n\n    function isCanvasBlank (canvas) {\n      return !canvas.getContext('2d')\n        .getImageData(0, 0, canvas.width, canvas.height).data\n        .some(channel => channel !== 0)\n    }\n  }\n\n  playAnimation (entityPlayerId, animation: 'walking' | 'running' | 'oneSwing' | 'idle') {\n    const playerObject = this.getPlayerObject(entityPlayerId)\n    if (!playerObject) return\n\n    if (animation === 'oneSwing') {\n      if (!(playerObject.animation instanceof WalkingGeneralSwing)) throw new Error('Expected WalkingGeneralSwing')\n      playerObject.animation.swingArm()\n      return\n    }\n\n    if (playerObject.animation instanceof WalkingGeneralSwing) {\n      playerObject.animation.switchAnimationCallback = () => {\n        if (!(playerObject.animation instanceof WalkingGeneralSwing)) throw new Error('Expected WalkingGeneralSwing')\n        playerObject.animation.isMoving = animation !== 'idle'\n        playerObject.animation.isRunning = animation === 'running'\n      }\n    }\n\n  }\n\n  parseEntityLabel (jsonLike) {\n    if (!jsonLike) return\n    try {\n      if (jsonLike.type === 'string') {\n        return jsonLike.value\n      }\n      const parsed = typeof jsonLike === 'string' ? mojangson.simplify(mojangson.parse(jsonLike)) : nbt.simplify(jsonLike)\n      const text = flat(parsed).map(this.textFromComponent)\n      return text.join('')\n    } catch (err) {\n      return jsonLike\n    }\n  }\n\n  private textFromComponent (component) {\n    return typeof component === 'string' ? component : component.text ?? ''\n  }\n\n  getItemMesh (item) {\n    const textureUv = this.getItemUv?.(item.itemId ?? item.blockId)\n    if (textureUv) {\n      // todo use geometry buffer uv instead!\n      const { u, v, size, su, sv, texture } = textureUv\n      const itemsTexture = texture.clone()\n      itemsTexture.flipY = true\n      const sizeY = (sv ?? size)!\n      const sizeX = (su ?? size)!\n      itemsTexture.offset.set(u, 1 - v - sizeY)\n      itemsTexture.repeat.set(sizeX, sizeY)\n      itemsTexture.needsUpdate = true\n      itemsTexture.magFilter = THREE.NearestFilter\n      itemsTexture.minFilter = THREE.NearestFilter\n      const itemsTextureFlipped = itemsTexture.clone()\n      itemsTextureFlipped.repeat.x *= -1\n      itemsTextureFlipped.needsUpdate = true\n      itemsTextureFlipped.offset.set(u + (sizeX), 1 - v - sizeY)\n      const material = new THREE.MeshStandardMaterial({\n        map: itemsTexture,\n        transparent: true,\n        alphaTest: 0.1,\n      })\n      const materialFlipped = new THREE.MeshStandardMaterial({\n        map: itemsTextureFlipped,\n        transparent: true,\n        alphaTest: 0.1,\n      })\n      const mesh = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 0), [\n        // top left and right bottom are black box materials others are transparent\n        new THREE.MeshBasicMaterial({ color: 0x00_00_00 }), new THREE.MeshBasicMaterial({ color: 0x00_00_00 }),\n        new THREE.MeshBasicMaterial({ color: 0x00_00_00 }), new THREE.MeshBasicMaterial({ color: 0x00_00_00 }),\n        material, materialFlipped,\n      ])\n      return {\n        mesh,\n        itemsTexture,\n        itemsTextureFlipped,\n      }\n    }\n  }\n\n  setVisible (mesh: THREE.Object3D, visible: boolean) {\n    //mesh.visible = visible\n    //TODO: Fix workaround for visibility setting\n    if (visible) {\n      mesh.scale.set(1, 1, 1)\n    } else {\n      mesh.scale.set(0, 0, 0)\n    }\n  }\n\n  update (entity: import('prismarine-entity').Entity & { delete?; pos, name }, overrides) {\n    const isPlayerModel = entity.name === 'player'\n    if (entity.name === 'zombie' || entity.name === 'zombie_villager' || entity.name === 'husk') {\n      overrides.texture = `textures/1.16.4/entity/${entity.name === 'zombie_villager' ? 'zombie_villager/zombie_villager.png' : `zombie/${entity.name}.png`}`\n    }\n    // this can be undefined in case where packet entity_destroy was sent twice (so it was already deleted)\n    let e = this.entities[entity.id]\n\n    if (entity.delete) {\n      if (!e) return\n      if (e.additionalCleanup) e.additionalCleanup()\n      this.emit('remove', entity)\n      this.scene.remove(e)\n      disposeObject(e)\n      // todo dispose textures as well ?\n      delete this.entities[entity.id]\n      return\n    }\n\n    let mesh\n    if (e === undefined) {\n      const group = new THREE.Group()\n      if (entity.name === 'item') {\n        const item = entity.metadata?.find((m: any) => typeof m === 'object' && m?.itemCount)\n        if (item) {\n          const object = this.getItemMesh(item)\n          if (object) {\n            mesh = object.mesh\n            mesh.scale.set(0.5, 0.5, 0.5)\n            mesh.position.set(0, 0.2, 0)\n            // set faces\n            // mesh.position.set(targetPos.x + 0.5 + 2, targetPos.y + 0.5, targetPos.z + 0.5)\n            // viewer.scene.add(mesh)\n            const clock = new THREE.Clock()\n            mesh.onBeforeRender = () => {\n              const delta = clock.getDelta()\n              mesh.rotation.y += delta\n            }\n            //@ts-expect-error\n            group.additionalCleanup = () => {\n              // important: avoid texture memory leak and gpu slowdown\n              object.itemsTexture.dispose()\n              object.itemsTextureFlipped.dispose()\n            }\n          }\n        }\n      } else if (isPlayerModel) {\n        // CREATE NEW PLAYER ENTITY\n        const wrapper = new THREE.Group()\n        const playerObject = new PlayerObject() as PlayerObjectType\n        playerObject.position.set(0, 16, 0)\n\n        // fix issues with starfield\n        playerObject.traverse((obj) => {\n          if (obj instanceof THREE.Mesh && obj.material instanceof THREE.MeshStandardMaterial) {\n            obj.material.transparent = true\n          }\n        })\n        //@ts-expect-error\n        wrapper.add(playerObject)\n        const scale = 1 / 16\n        wrapper.scale.set(scale, scale, scale)\n\n        if (entity.username) {\n          // todo proper colors\n          const nameTag = new NameTagObject(fromFormattedString(entity.username).text, {\n            font: `48px ${this.entitiesOptions.fontFamily}`,\n          })\n          nameTag.position.y = playerObject.position.y + playerObject.scale.y * 16 + 3\n          nameTag.renderOrder = 1000\n\n          //@ts-expect-error\n          wrapper.add(nameTag)\n        }\n\n        //@ts-expect-error\n        group.playerObject = playerObject\n        wrapper.rotation.set(0, Math.PI, 0)\n        mesh = wrapper\n        playerObject.animation = new WalkingGeneralSwing()\n        //@ts-expect-error\n        playerObject.animation.isMoving = false\n      } else {\n        mesh = getEntityMesh(entity, this.scene, this.entitiesOptions, overrides)\n      }\n      if (!mesh) return\n      mesh.name = 'mesh'\n      // set initial position so there are no weird jumps update after\n      group.position.set(entity.pos.x, entity.pos.y, entity.pos.z)\n\n      // todo use width and height instead\n      const boxHelper = new THREE.BoxHelper(\n        mesh,\n        entity.type === 'hostile' ? 0xff_00_00 :\n          entity.type === 'mob' ? 0x00_ff_00 :\n            entity.type === 'player' ? 0x00_00_ff :\n              0xff_a5_00,\n      )\n      boxHelper.name = 'debug'\n      group.add(mesh)\n      group.add(boxHelper)\n      boxHelper.visible = false\n      this.scene.add(group)\n\n      e = group\n      this.entities[entity.id] = e\n\n      this.emit('add', entity)\n\n      if (isPlayerModel) {\n        this.updatePlayerSkin(entity.id, '', overrides?.texture || stevePng)\n      }\n      this.setDebugMode(this.debugMode, group)\n      this.setRendering(this.rendering, group)\n    } else {\n      mesh = e.children.find(c => c.name === 'mesh')\n    }\n\n    // check if entity has armor\n    if (entity.equipment) {\n      addArmorModel(e, 'feet', entity.equipment[2])\n      addArmorModel(e, 'legs', entity.equipment[3], 2)\n      addArmorModel(e, 'chest', entity.equipment[4])\n      addArmorModel(e, 'head', entity.equipment[5])\n    }\n\n    const meta = getGeneralEntitiesMetadata(entity)\n\n    //@ts-expect-error\n    // set visibility\n    const isInvisible = entity.metadata?.[0] & 0x20\n    for (const child of mesh.children ?? []) {\n      if (child.name !== 'nametag') {\n        child.visible = !isInvisible\n      }\n    }\n    // ---\n    // not player\n    const textDisplayMeta = getSpecificEntityMetadata('text_display', entity)\n    const displayTextRaw = textDisplayMeta?.text || meta.custom_name_visible && meta.custom_name\n    const displayText = this.parseEntityLabel(displayTextRaw)\n    if (entity.name !== 'player' && displayText) {\n      const nameTagFixed = textDisplayMeta && (textDisplayMeta.billboard_render_constraints === 'fixed' || !textDisplayMeta.billboard_render_constraints)\n      const nameTagBackgroundColor = textDisplayMeta && toRgba(textDisplayMeta.background_color)\n      let nameTagTextOpacity: any\n      if (textDisplayMeta?.text_opacity) {\n        const rawOpacity = parseInt(textDisplayMeta?.text_opacity, 10)\n        nameTagTextOpacity = rawOpacity > 0 ? rawOpacity : 256 - rawOpacity\n      }\n      addNametag(\n        { ...entity, username: displayText, nameTagBackgroundColor, nameTagTextOpacity, nameTagFixed,\n          nameTagScale: textDisplayMeta?.scale, nameTagTranslation: textDisplayMeta && (textDisplayMeta.translation || new THREE.Vector3(0, 0, 0)),\n          nameTagRotationLeft: toQuaternion(textDisplayMeta?.left_rotation), nameTagRotationRight: toQuaternion(textDisplayMeta?.right_rotation) },\n        this.entitiesOptions,\n        mesh\n      )\n    }\n\n    const armorStandMeta = getSpecificEntityMetadata('armor_stand', entity)\n    if (armorStandMeta) {\n      const isSmall = (parseInt(armorStandMeta.client_flags, 10) & 0x01) !== 0\n      const hasArms = (parseInt(armorStandMeta.client_flags, 10) & 0x04) !== 0\n      const hasBasePlate = (parseInt(armorStandMeta.client_flags, 10) & 0x08) === 0\n      const isMarker = (parseInt(armorStandMeta.client_flags, 10) & 0x10) !== 0\n      mesh.castShadow = !isMarker\n      mesh.receiveShadow = !isMarker\n      if (isSmall) {\n        e.scale.set(0.5, 0.5, 0.5)\n      } else {\n        e.scale.set(1, 1, 1)\n      }\n      e.traverse(c => {\n        switch (c.name) {\n          case 'bone_baseplate':\n            this.setVisible(c, hasBasePlate)\n            c.rotation.y = -e.rotation.y\n            break\n          case 'bone_head':\n            if (armorStandMeta.head_pose) {\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.head_pose))\n            }\n            break\n          case 'bone_body':\n            if (armorStandMeta.body_pose) {\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.body_pose))\n            }\n            break\n          case 'bone_leftarm':\n            if (c.parent?.name !== 'bone_armor') {\n              this.setVisible(c, hasArms)\n            }\n            if (armorStandMeta.left_arm_pose) {\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.left_arm_pose))\n            } else {\n              c.setRotationFromEuler(poseToEuler({ 'yaw': -10, 'pitch': -10, 'roll': 0 }))\n            }\n            break\n          case 'bone_rightarm':\n            if (c.parent?.name !== 'bone_armor') {\n              this.setVisible(c, hasArms)\n            }\n            if (armorStandMeta.right_arm_pose) {\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.right_arm_pose))\n            } else {\n              c.setRotationFromEuler(poseToEuler({ 'yaw': 10, 'pitch': -10, 'roll': 0 }))\n            }\n            break\n          case 'bone_leftleg':\n            if (armorStandMeta.left_leg_pose) {\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.left_leg_pose))\n            } else {\n              c.setRotationFromEuler(poseToEuler({ 'yaw': -1, 'pitch': -1, 'roll': 0 }))\n            }\n            break\n          case 'bone_rightleg':\n            if (armorStandMeta.right_leg_pose) {\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.right_leg_pose))\n            } else {\n              c.setRotationFromEuler(poseToEuler({ 'yaw': 1, 'pitch': 1, 'roll': 0 }))\n            }\n            break\n        }\n      })\n    }\n\n    // todo handle map, map_chunks events\n    // if (entity.name === 'item_frame' || entity.name === 'glow_item_frame') {\n    //   const example = {\n    //     \"present\": true,\n    //     \"itemId\": 847,\n    //     \"itemCount\": 1,\n    //     \"nbtData\": {\n    //         \"type\": \"compound\",\n    //         \"name\": \"\",\n    //         \"value\": {\n    //             \"map\": {\n    //                 \"type\": \"int\",\n    //                 \"value\": 2146483444\n    //             },\n    //             \"interactiveboard\": {\n    //                 \"type\": \"byte\",\n    //                 \"value\": 1\n    //             }\n    //         }\n    //     }\n    // }\n    //   const item = entity.metadata?.[8]\n    //   if (item.nbtData) {\n    //     const nbt = nbt.simplify(item.nbtData)\n    //   }\n    // }\n\n    if (entity.username) {\n      e.username = entity.username\n    }\n\n    if (e?.playerObject && overrides?.rotation?.head) {\n      const playerObject = e.playerObject as PlayerObjectType\n      const headRotationDiff = overrides.rotation.head.y ? overrides.rotation.head.y - entity.yaw : 0\n      playerObject.skin.head.rotation.y = -headRotationDiff\n      playerObject.skin.head.rotation.x = overrides.rotation.head.x ? - overrides.rotation.head.x : 0\n    }\n\n    if (entity.pos) {\n      new TWEEN.Tween(e.position).to({ x: entity.pos.x, y: entity.pos.y, z: entity.pos.z }, TWEEN_DURATION).start()\n    }\n    if (entity.yaw) {\n      const da = (entity.yaw - e.rotation.y) % (Math.PI * 2)\n      const dy = 2 * da % (Math.PI * 2) - da\n      new TWEEN.Tween(e.rotation).to({ y: e.rotation.y + dy }, TWEEN_DURATION).start()\n    }\n  }\n\n  handleDamageEvent (entityId, damageAmount) {\n    const entityMesh = this.entities[entityId]?.children.find(c => c.name === 'mesh')\n    if (entityMesh) {\n      entityMesh.traverse((child) => {\n        if (child instanceof THREE.Mesh) {\n          const clonedMaterial = child.material.clone()\n          clonedMaterial.dispose()\n          child.material = child.material.clone()\n          const originalColor = child.material.color.clone()\n          child.material.color.set(0xff_00_00)\n          new TWEEN.Tween(child.material.color)\n            .to(originalColor, 500)\n            .start()\n        }\n      })\n    }\n  }\n}\n\nfunction getGeneralEntitiesMetadata (entity: { name; metadata }): Partial<UnionToIntersection<EntityMetadataVersions[keyof EntityMetadataVersions]>> {\n  const entityData = loadedData.entitiesByName[entity.name]\n  return new Proxy({}, {\n    get (target, p, receiver) {\n      if (typeof p !== 'string' || !entityData) return\n      const index = entityData.metadataKeys?.indexOf(p)\n      return entity.metadata[index ?? -1]\n    },\n  })\n}\n\nfunction getSpecificEntityMetadata<T extends keyof EntityMetadataVersions> (name: T, entity): EntityMetadataVersions[T] | undefined {\n  if (entity.name !== name) return\n  return getGeneralEntitiesMetadata(entity) as any\n}\n\nfunction addArmorModel (entityMesh: THREE.Object3D, slotType: string, item: Item, layer = 1, overlay = false) {\n  if (!item) {\n    removeArmorModel(entityMesh, slotType)\n    return\n  }\n  const itemParts = item.name.split('_')\n  const armorMaterial = itemParts[0]\n  if (!armorMaterial) {\n    removeArmorModel(entityMesh, slotType)\n    return\n  }\n  // TODO: Support resource pack\n  // TODO: Support mirroring on certain parts of the model\n  const texturePath = armorModels[`${armorMaterial}Layer${layer}${overlay ? 'Overlay' : ''}`]\n  if (!texturePath || !armorModels.armorModel[slotType]) {\n    return\n  }\n\n  const meshName = `geometry_armor_${slotType}${overlay ? '_overlay' : ''}`\n  let mesh = entityMesh.children.findLast(c => c.name === meshName) as THREE.Mesh\n  let material\n  if (mesh) {\n    material = mesh.material\n    loadTexture(texturePath, texture => {\n      texture.magFilter = THREE.NearestFilter\n      texture.minFilter = THREE.NearestFilter\n      texture.flipY = false\n      texture.wrapS = THREE.MirroredRepeatWrapping\n      texture.wrapT = THREE.MirroredRepeatWrapping\n      material.map = texture\n    })\n  } else {\n    mesh = getMesh(texturePath, armorModels.armorModel[slotType])\n    mesh.name = meshName\n    material = mesh.material\n    material.side = THREE.DoubleSide\n  }\n  if (armorMaterial === 'leather' && !overlay) {\n    const color = (item.nbt?.value as any)?.display?.value?.color?.value\n    if (color) {\n      const r = color >> 16 & 0xff\n      const g = color >> 8 & 0xff\n      const b = color & 0xff\n      material.color.setRGB(r / 255, g / 255, b / 255)\n    } else {\n      material.color.setHex(0xB5_6D_51) // default brown color\n    }\n    addArmorModel(entityMesh, slotType, item, layer, true)\n  }\n  const group = new THREE.Object3D()\n  group.name = `armor_${slotType}${overlay ? '_overlay' : ''}`\n  group.add(mesh)\n\n  const skeletonHelper = new THREE.SkeletonHelper(mesh)\n  //@ts-expect-error\n  skeletonHelper.material.linewidth = 2\n  skeletonHelper.visible = false\n  group.add(skeletonHelper)\n\n  entityMesh.add(mesh)\n}\n\nfunction removeArmorModel (entityMesh: THREE.Object3D, slotType: string) {\n  for (const c of entityMesh.children) {\n    if (c.name === `geometry_armor_${slotType}` || c.name === `geometry_armor_${slotType}_overlay`) {\n      c.removeFromParent()\n    }\n  }\n}\n","import EventEmitter from 'events'\nimport * as THREE from 'three'\nimport { Vec3 } from 'vec3'\nimport { generateSpiralMatrix } from 'flying-squid/dist/utils'\nimport worldBlockProvider from 'mc-assets/dist/worldBlockProvider'\nimport stevePng from 'mc-assets/dist/other-textures/latest/entity/player/wide/steve.png'\nimport { Entities } from './entities'\nimport { Primitives } from './primitives'\nimport { WorldRendererThree } from './worldrendererThree'\nimport { WorldRendererCommon, WorldRendererConfig, defaultWorldRendererConfig } from './worldrendererCommon'\nimport { getThreeBlockModelGroup, renderBlockThree, setBlockPosition } from './mesher/standaloneRenderer'\nimport { addNewStat } from './ui/newStats'\nimport { getMyHand } from './hand'\n\nexport class Viewer {\n  scene: THREE.Scene\n  ambientLight: THREE.AmbientLight\n  directionalLight: THREE.DirectionalLight\n  world: WorldRendererCommon\n  entities: Entities\n  // primitives: Primitives\n  domElement: HTMLCanvasElement\n  playerHeight = 1.62\n  isSneaking = false\n  threeJsWorld: WorldRendererThree\n  cameraObjectOverride?: THREE.Object3D // for xr\n  audioListener: THREE.AudioListener\n  renderingUntilNoUpdates = false\n  processEntityOverrides = (e, overrides) => overrides\n\n  getMineflayerBot (): void | Record<string, any> {} // to be overridden\n\n  get camera () {\n    return this.world.camera\n  }\n\n  set camera (camera) {\n    this.world.camera = camera\n  }\n\n  constructor (public renderer: THREE.WebGLRenderer, worldConfig = defaultWorldRendererConfig) {\n    // https://discourse.threejs.org/t/updates-to-color-management-in-three-js-r152/50791\n    THREE.ColorManagement.enabled = false\n    renderer.outputColorSpace = THREE.LinearSRGBColorSpace\n\n    this.scene = new THREE.Scene()\n    this.scene.matrixAutoUpdate = false // for perf\n    this.threeJsWorld = new WorldRendererThree(this.scene, this.renderer, worldConfig)\n    this.setWorld()\n    this.resetScene()\n    this.entities = new Entities(this.scene)\n    // this.primitives = new Primitives(this.scene, this.camera)\n\n    this.domElement = renderer.domElement\n  }\n\n  setWorld () {\n    this.world = this.threeJsWorld\n  }\n\n  resetScene () {\n    this.scene.background = new THREE.Color('lightblue')\n\n    if (this.ambientLight) this.scene.remove(this.ambientLight)\n    this.ambientLight = new THREE.AmbientLight(0xcc_cc_cc)\n    this.scene.add(this.ambientLight)\n\n    if (this.directionalLight) this.scene.remove(this.directionalLight)\n    this.directionalLight = new THREE.DirectionalLight(0xff_ff_ff, 0.5)\n    this.directionalLight.position.set(1, 1, 0.5).normalize()\n    this.directionalLight.castShadow = true\n    this.scene.add(this.directionalLight)\n\n    const size = this.renderer.getSize(new THREE.Vector2())\n    this.camera = new THREE.PerspectiveCamera(75, size.x / size.y, 0.1, 1000)\n  }\n\n  resetAll () {\n    this.resetScene()\n    this.world.resetWorld()\n    this.entities.clear()\n    // this.primitives.clear()\n  }\n\n  setVersion (userVersion: string, texturesVersion = userVersion): void | Promise<void> {\n    console.log('[viewer] Using version:', userVersion, 'textures:', texturesVersion)\n    this.entities.clear()\n    // this.primitives.clear()\n    return this.world.setVersion(userVersion, texturesVersion).then(async () => {\n      return new THREE.TextureLoader().loadAsync(this.world.itemsAtlasParser!.latestImage)\n    }).then((texture) => {\n      this.entities.itemsTexture = texture\n      this.world.renderUpdateEmitter.emit('itemsTextureDownloaded')\n    })\n  }\n\n  addColumn (x, z, chunk, isLightUpdate = false) {\n    this.world.addColumn(x, z, chunk, isLightUpdate)\n  }\n\n  removeColumn (x: string, z: string) {\n    this.world.removeColumn(x, z)\n  }\n\n  setBlockStateId (pos: Vec3, stateId: number) {\n    const set = async () => {\n      const sectionX = Math.floor(pos.x / 16) * 16\n      const sectionZ = Math.floor(pos.z / 16) * 16\n      if (this.world.queuedChunks.has(`${sectionX},${sectionZ}`)) {\n        await new Promise<void>(resolve => {\n          this.world.queuedFunctions.push(() => {\n            resolve()\n          })\n        })\n      }\n      if (!this.world.loadedChunks[`${sectionX},${sectionZ}`]) {\n        console.debug('[should be unreachable] setBlockStateId called for unloaded chunk', pos)\n      }\n      this.world.setBlockStateId(pos, stateId)\n    }\n    void set()\n  }\n\n  async demoModel () {\n    //@ts-expect-error\n    const pos = cursorBlockRel(0, 1, 0).position\n    const blockProvider = worldBlockProvider(this.world.blockstatesModels, this.world.blocksAtlases, 'latest')\n\n    const mesh = await getMyHand()\n    // mesh.rotation.y = THREE.MathUtils.degToRad(90)\n    setBlockPosition(mesh, pos)\n    const helper = new THREE.BoxHelper(mesh, 0xff_ff_00)\n    mesh.add(helper)\n    this.scene.add(mesh)\n  }\n\n  demoItem () {\n    //@ts-expect-error\n    const pos = cursorBlockRel(0, 1, 0).position\n    const { mesh } = this.entities.getItemMesh({\n      itemId: 541,\n    })!\n    mesh.position.set(pos.x + 0.5, pos.y + 0.5, pos.z + 0.5)\n    // mesh.scale.set(0.5, 0.5, 0.5)\n    const helper = new THREE.BoxHelper(mesh, 0xff_ff_00)\n    mesh.add(helper)\n    this.scene.add(mesh)\n  }\n\n  updateEntity (e) {\n    this.entities.update(e, this.processEntityOverrides(e, {\n      rotation: {\n        head: {\n          x: e.headPitch ?? e.pitch,\n          y: e.headYaw,\n          z: 0\n        }\n      }\n    }))\n  }\n\n  setFirstPersonCamera (pos: Vec3 | null, yaw: number, pitch: number, roll = 0) {\n    const cam = this.cameraObjectOverride || this.camera\n    let yOffset = this.getMineflayerBot()?.entity?.eyeHeight ?? this.playerHeight\n    if (this.isSneaking) yOffset -= 0.3\n\n    this.world.camera = cam as THREE.PerspectiveCamera\n\n    this.world.updateCamera(pos?.offset(0, yOffset, 0) ?? null, yaw, pitch)\n  }\n\n  playSound (position: Vec3, path: string, volume = 1, pitch = 1) {\n    if (!this.audioListener) {\n      this.audioListener = new THREE.AudioListener()\n      this.camera.add(this.audioListener)\n    }\n\n    const sound = new THREE.PositionalAudio(this.audioListener)\n\n    const audioLoader = new THREE.AudioLoader()\n    const start = Date.now()\n    void audioLoader.loadAsync(path).then((buffer) => {\n      if (Date.now() - start > 500) return\n      // play\n      sound.setBuffer(buffer)\n      sound.setRefDistance(20)\n      sound.setVolume(volume)\n      sound.setPlaybackRate(pitch) // set the pitch\n      this.scene.add(sound)\n      // set sound position\n      sound.position.set(position.x, position.y, position.z)\n      sound.onEnded = () => {\n        this.scene.remove(sound)\n        sound.disconnect()\n        audioLoader.manager.itemEnd(path)\n      }\n      sound.play()\n    })\n  }\n\n  addChunksBatchWaitTime = 200\n\n  connect (worldEmitter: EventEmitter) {\n    worldEmitter.on('entity', (e) => {\n      this.updateEntity(e)\n    })\n\n    worldEmitter.on('primitive', (p) => {\n      // this.updatePrimitive(p)\n    })\n\n    let currentLoadChunkBatch = null as {\n      timeout\n      data\n    } | null\n    worldEmitter.on('loadChunk', ({ x, z, chunk, worldConfig, isLightUpdate }) => {\n      this.world.worldConfig = worldConfig\n      this.world.queuedChunks.add(`${x},${z}`)\n      const args = [x, z, chunk, isLightUpdate]\n      if (!currentLoadChunkBatch) {\n        // add a setting to use debounce instead\n        currentLoadChunkBatch = {\n          data: [],\n          timeout: setTimeout(() => {\n            for (const args of currentLoadChunkBatch!.data) {\n              this.world.queuedChunks.delete(`${args[0]},${args[1]}`)\n              this.addColumn(...args as Parameters<typeof this.addColumn>)\n            }\n            for (const fn of this.world.queuedFunctions) {\n              fn()\n            }\n            this.world.queuedFunctions = []\n            currentLoadChunkBatch = null\n          }, this.addChunksBatchWaitTime)\n        }\n      }\n      currentLoadChunkBatch.data.push(args)\n    })\n    // todo remove and use other architecture instead so data flow is clear\n    worldEmitter.on('blockEntities', (blockEntities) => {\n      if (this.world instanceof WorldRendererThree) (this.world).blockEntities = blockEntities\n    })\n\n    worldEmitter.on('unloadChunk', ({ x, z }) => {\n      this.removeColumn(x, z)\n    })\n\n    worldEmitter.on('blockUpdate', ({ pos, stateId }) => {\n      this.setBlockStateId(new Vec3(pos.x, pos.y, pos.z), stateId)\n    })\n\n    worldEmitter.on('chunkPosUpdate', ({ pos }) => {\n      this.world.updateViewerPosition(pos)\n    })\n\n\n    worldEmitter.on('renderDistance', (d) => {\n      this.world.viewDistance = d\n      this.world.chunksLength = d === 0 ? 1 : generateSpiralMatrix(d).length\n    })\n\n    worldEmitter.on('renderDistance', (d) => {\n      this.world.viewDistance = d\n      this.world.chunksLength = d === 0 ? 1 : generateSpiralMatrix(d).length\n      this.world.allChunksFinished = Object.keys(this.world.finishedChunks).length === this.world.chunksLength\n    })\n\n    worldEmitter.on('markAsLoaded', ({ x, z }) => {\n      this.world.markAsLoaded(x, z)\n    })\n\n    worldEmitter.on('updateLight', ({ pos }) => {\n      if (this.world instanceof WorldRendererThree) (this.world).updateLight(pos.x, pos.z)\n    })\n\n    worldEmitter.on('time', (timeOfDay) => {\n      this.world.timeUpdated?.(timeOfDay)\n\n      let skyLight = 15\n      if (timeOfDay < 0 || timeOfDay > 24_000) {\n        throw new Error('Invalid time of day. It should be between 0 and 24000.')\n      } else if (timeOfDay <= 6000 || timeOfDay >= 18_000) {\n        skyLight = 15\n      } else if (timeOfDay > 6000 && timeOfDay < 12_000) {\n        skyLight = 15 - ((timeOfDay - 6000) / 6000) * 15\n      } else if (timeOfDay >= 12_000 && timeOfDay < 18_000) {\n        skyLight = ((timeOfDay - 12_000) / 6000) * 15\n      }\n\n      skyLight = Math.floor(skyLight) // todo: remove this after optimization\n\n      if (this.world.mesherConfig.skyLight === skyLight) return\n      this.world.mesherConfig.skyLight = skyLight\n      if (this.world instanceof WorldRendererThree) {\n        (this.world).rerenderAllChunks?.()\n      }\n    })\n\n    worldEmitter.emit('listening')\n  }\n\n  render () {\n    if (this.world instanceof WorldRendererThree) {\n      (this.world).render()\n      this.entities.render()\n    }\n  }\n\n  async waitForChunksToRender () {\n    await this.world.waitForChunksToRender()\n  }\n}\n","import WorldLoader, { world } from 'prismarine-world'\nimport ChunkLoader from 'prismarine-chunk'\n\nexport type BlockFaceType = {\n  side: number\n  textureIndex: number\n  tint?: [number, number, number]\n  isTransparent?: boolean\n\n  // for testing\n  face?: string\n  neighbor?: string\n  light?: number\n}\n\nexport type BlockType = {\n  faces: BlockFaceType[]\n\n  // for testing\n  block: string\n}\n\nexport const makeError = (str: string) => {\n  reportError?.(str)\n}\nexport const makeErrorCritical = (str: string) => {\n  throw new Error(str)\n}\n\nexport const getSyncWorld = (version: string): world.WorldSync => {\n  const World = (WorldLoader as any)(version)\n  const Chunk = (ChunkLoader as any)(version)\n\n  const world = new World(version).sync\n\n  const methods = getAllMethods(world)\n  for (const method of methods) {\n    if (method.startsWith('set') && method !== 'setColumn') {\n      const oldMethod = world[method].bind(world)\n      world[method] = (...args) => {\n        const arg = args[0]\n        if (arg.x !== undefined && !world.getColumnAt(arg)) {\n          world.setColumn(Math.floor(arg.x / 16), Math.floor(arg.z / 16), new Chunk(undefined as any))\n        }\n        oldMethod(...args)\n      }\n    }\n  }\n\n  return world\n}\n\nfunction getAllMethods (obj) {\n  const methods = new Set()\n  let currentObj = obj\n\n  do {\n    for (const name of Object.getOwnPropertyNames(currentObj)) {\n      if (typeof obj[name] === 'function' && name !== 'constructor') {\n        methods.add(name)\n      }\n    }\n  } while ((currentObj = Object.getPrototypeOf(currentObj)))\n\n  return [...methods] as string[]\n}\n\nexport const delayedIterator = async <T> (arr: T[], delay: number, exec: (item: T, index: number) => void, chunkSize = 1) => {\n  // if delay is 0 then don't use setTimeout\n  for (let i = 0; i < arr.length; i += chunkSize) {\n    if (delay) {\n      // eslint-disable-next-line no-await-in-loop\n      await new Promise(resolve => {\n        setTimeout(resolve, delay)\n      })\n    }\n    exec(arr[i], i)\n  }\n}\n","/* eslint-disable guard-for-in */\n\n// todo refactor into its own commons module\nimport { EventEmitter } from 'events'\nimport { generateSpiralMatrix, ViewRect } from 'flying-squid/dist/utils'\nimport { Vec3 } from 'vec3'\nimport { BotEvents } from 'mineflayer'\nimport { getItemFromBlock } from '../../../src/chatUtils'\nimport { delayedIterator } from '../../examples/shared'\nimport { chunkPos } from './simpleUtils'\n\nexport type ChunkPosKey = string\ntype ChunkPos = { x: number, z: number }\n\n/**\n * Usually connects to mineflayer bot and emits world data (chunks, entities)\n * It's up to the consumer to serialize the data if needed\n */\nexport class WorldDataEmitter extends EventEmitter {\n  private loadedChunks: Record<ChunkPosKey, boolean>\n  private readonly lastPos: Vec3\n  private eventListeners: Record<string, any> = {}\n  private readonly emitter: WorldDataEmitter\n  keepChunksDistance = 0\n  addWaitTime = 1\n  isPlayground = false\n\n  constructor (public world: typeof __type_bot['world'], public viewDistance: number, position: Vec3 = new Vec3(0, 0, 0)) {\n    super()\n    this.loadedChunks = {}\n    this.lastPos = new Vec3(0, 0, 0).update(position)\n    // todo\n    this.emitter = this\n\n    this.emitter.on('mouseClick', async (click) => {\n      const ori = new Vec3(click.origin.x, click.origin.y, click.origin.z)\n      const dir = new Vec3(click.direction.x, click.direction.y, click.direction.z)\n      const block = this.world.raycast(ori, dir, 256)\n      if (!block) return\n      this.emit('blockClicked', block, block.face, click.button)\n    })\n  }\n\n  setBlockStateId (position: Vec3, stateId: number) {\n    const val = this.world.setBlockStateId(position, stateId) as Promise<void> | void\n    if (val) throw new Error('setBlockStateId returned promise (not supported)')\n    const chunkX = Math.floor(position.x / 16)\n    const chunkZ = Math.floor(position.z / 16)\n    if (!this.loadedChunks[`${chunkX},${chunkZ}`]) {\n      void this.loadChunk({ x: chunkX, z: chunkZ })\n      return\n    }\n\n    this.emit('blockUpdate', { pos: position, stateId })\n  }\n\n  updateViewDistance (viewDistance: number) {\n    this.viewDistance = viewDistance\n    this.emitter.emit('renderDistance', viewDistance)\n  }\n\n  listenToBot (bot: typeof __type_bot) {\n    const emitEntity = (e) => {\n      if (!e || e === bot.entity) return\n      this.emitter.emit('entity', {\n        ...e,\n        pos: e.position,\n        username: e.username,\n        // set debugTree (obj) {\n        //   e.debugTree = obj\n        // }\n      })\n    }\n\n    this.eventListeners = {\n      // 'move': botPosition,\n      entitySpawn (e: any) {\n        emitEntity(e)\n      },\n      entityUpdate (e: any) {\n        emitEntity(e)\n      },\n      entityMoved (e: any) {\n        emitEntity(e)\n      },\n      entityGone: (e: any) => {\n        this.emitter.emit('entity', { id: e.id, delete: true })\n      },\n      chunkColumnLoad: (pos: Vec3) => {\n        void this.loadChunk(pos)\n      },\n      chunkColumnUnload: (pos: Vec3) => {\n        this.unloadChunk(pos)\n      },\n      blockUpdate: (oldBlock: any, newBlock: any) => {\n        const stateId = newBlock.stateId ?? ((newBlock.type << 4) | newBlock.metadata)\n        this.emitter.emit('blockUpdate', { pos: oldBlock.position, stateId })\n      },\n      time: () => {\n        this.emitter.emit('time', bot.time.timeOfDay)\n      },\n      heldItemChanged () {\n        handChanged(false)\n      },\n    } satisfies Partial<BotEvents>\n    const handChanged = (isLeftHand: boolean) => {\n      const newItem = isLeftHand ? bot.inventory.slots[45] : bot.heldItem\n      if (!newItem) {\n        viewer.world.onHandItemSwitch(undefined, isLeftHand)\n        return\n      }\n      const block = loadedData.blocksByName[newItem.name]\n      // todo clean types\n      const blockProperties = block ? new window.PrismarineBlock(block.id, 'void', newItem.metadata).getProperties() : {}\n      // todo item props\n      viewer.world.onHandItemSwitch({ name: newItem.name, properties: blockProperties, id: newItem.type, type: block ? 'block' : 'item', }, isLeftHand)\n    }\n    bot.inventory.on('updateSlot', (index) => {\n      if (index === 45) {\n        handChanged(true)\n      }\n    })\n    handChanged(false)\n    handChanged(true)\n\n\n    bot._client.on('update_light', ({ chunkX, chunkZ }) => {\n      const chunkPos = new Vec3(chunkX * 16, 0, chunkZ * 16)\n      void this.loadChunk(chunkPos, true)\n    })\n\n    this.emitter.on('listening', () => {\n      this.emitter.emit('blockEntities', new Proxy({}, {\n        get (_target, posKey, receiver) {\n          if (typeof posKey !== 'string') return\n          const [x, y, z] = posKey.split(',').map(Number)\n          return bot.world.getBlock(new Vec3(x, y, z))?.entity\n        },\n      }))\n      this.emitter.emit('renderDistance', this.viewDistance)\n      this.emitter.emit('time', bot.time.timeOfDay)\n    })\n    // node.js stream data event pattern\n    if (this.emitter.listenerCount('blockEntities')) {\n      this.emitter.emit('listening')\n    }\n\n    for (const [evt, listener] of Object.entries(this.eventListeners)) {\n      bot.on(evt as any, listener)\n    }\n\n    for (const id in bot.entities) {\n      const e = bot.entities[id]\n      emitEntity(e)\n    }\n  }\n\n  removeListenersFromBot (bot: import('mineflayer').Bot) {\n    for (const [evt, listener] of Object.entries(this.eventListeners)) {\n      bot.removeListener(evt as any, listener)\n    }\n  }\n\n  async init (pos: Vec3) {\n    this.updateViewDistance(this.viewDistance)\n    this.emitter.emit('chunkPosUpdate', { pos })\n    const [botX, botZ] = chunkPos(pos)\n\n    const positions = generateSpiralMatrix(this.viewDistance).map(([x, z]) => new Vec3((botX + x) * 16, 0, (botZ + z) * 16))\n\n    this.lastPos.update(pos)\n    await this._loadChunks(positions)\n  }\n\n  async _loadChunks (positions: Vec3[], sliceSize = 5) {\n    const promises = [] as Array<Promise<void>>\n    await delayedIterator(positions, this.addWaitTime, (pos) => {\n      promises.push(this.loadChunk(pos))\n    })\n    await Promise.all(promises)\n  }\n\n  readdDebug () {\n    const clonedLoadedChunks = { ...this.loadedChunks }\n    this.unloadAllChunks()\n    for (const loadedChunk in clonedLoadedChunks) {\n      const [x, z] = loadedChunk.split(',').map(Number)\n      void this.loadChunk(new Vec3(x, 0, z))\n    }\n  }\n\n  // debugGotChunkLatency = [] as number[]\n  // lastTime = 0\n\n  async loadChunk (pos: ChunkPos, isLightUpdate = false) {\n    const [botX, botZ] = chunkPos(this.lastPos)\n    const dx = Math.abs(botX - Math.floor(pos.x / 16))\n    const dz = Math.abs(botZ - Math.floor(pos.z / 16))\n    if (dx <= this.viewDistance && dz <= this.viewDistance) {\n      // eslint-disable-next-line @typescript-eslint/await-thenable -- todo allow to use async world provider but not sure if needed\n      const column = await this.world.getColumnAt(pos['y'] ? pos as Vec3 : new Vec3(pos.x, 0, pos.z))\n      if (column) {\n        // const latency = Math.floor(performance.now() - this.lastTime)\n        // this.debugGotChunkLatency.push(latency)\n        // this.lastTime = performance.now()\n        // todo optimize toJson data, make it clear why it is used\n        const chunk = column.toJson()\n        // TODO: blockEntities\n        const worldConfig = {\n          minY: column['minY'] ?? 0,\n          worldHeight: column['worldHeight'] ?? 256,\n        }\n        //@ts-expect-error\n        this.emitter.emit('loadChunk', { x: pos.x, z: pos.z, chunk, blockEntities: column.blockEntities, worldConfig, isLightUpdate })\n        this.loadedChunks[`${pos.x},${pos.z}`] = true\n      } else if (this.isPlayground) { // don't allow in real worlds pre-flag chunks as loaded to avoid race condition when the chunk might still be loading. In playground it's assumed we always pre-load all chunks first\n        this.emitter.emit('markAsLoaded', { x: pos.x, z: pos.z })\n      }\n    } else {\n      // console.debug('skipped loading chunk', dx, dz, '>', this.viewDistance)\n    }\n  }\n\n  unloadAllChunks () {\n    for (const coords of Object.keys(this.loadedChunks)) {\n      const [x, z] = coords.split(',').map(Number)\n      this.unloadChunk({ x, z })\n    }\n  }\n\n  unloadChunk (pos: ChunkPos) {\n    this.emitter.emit('unloadChunk', { x: pos.x, z: pos.z })\n    delete this.loadedChunks[`${pos.x},${pos.z}`]\n  }\n\n  async updatePosition (pos: Vec3, force = false) {\n    const [lastX, lastZ] = chunkPos(this.lastPos)\n    const [botX, botZ] = chunkPos(pos)\n    if (lastX !== botX || lastZ !== botZ || force) {\n      this.emitter.emit('chunkPosUpdate', { pos })\n      const newViewToUnload = new ViewRect(botX, botZ, this.viewDistance + this.keepChunksDistance)\n      const chunksToUnload: Vec3[] = []\n      for (const coords of Object.keys(this.loadedChunks)) {\n        const x = parseInt(coords.split(',')[0], 10)\n        const z = parseInt(coords.split(',')[1], 10)\n        const p = new Vec3(x, 0, z)\n        const [chunkX, chunkZ] = chunkPos(p)\n        if (!newViewToUnload.contains(chunkX, chunkZ)) {\n          chunksToUnload.push(p)\n        }\n      }\n      console.log('unloading', chunksToUnload.length, 'total now', Object.keys(this.loadedChunks).length)\n      for (const p of chunksToUnload) {\n        this.unloadChunk(p)\n      }\n      const positions = generateSpiralMatrix(this.viewDistance).map(([x, z]) => {\n        const pos = new Vec3((botX + x) * 16, 0, (botZ + z) * 16)\n        if (!this.loadedChunks[`${pos.x},${pos.z}`]) return pos\n        return undefined!\n      }).filter(a => !!a)\n      this.lastPos.update(pos)\n      void this._loadChunks(positions)\n    } else {\n      this.emitter.emit('chunkPosUpdate', { pos }) // todo-low\n      this.lastPos.update(pos)\n    }\n  }\n}\n","export function buildCleanupDecorator (cleanupMethod: string) {\n  return function () {\n    return function (_target: { snapshotInitialValues }, propertyKey: string) {\n      const target = _target as any\n      // Store the initial value of the property\n      if (!target._snapshotMethodPatched) {\n        target.snapshotInitialValues = function () {\n          this._initialValues = {}\n          for (const key of target._toCleanup) {\n            this._initialValues[key] = this[key]\n          }\n        }\n        target._snapshotMethodPatched = true\n      }\n      (target._toCleanup ??= []).push(propertyKey)\n      if (!target._cleanupPatched) {\n        const originalMethod = target[cleanupMethod]\n        target[cleanupMethod] = function () {\n          for (const key of target._toCleanup) {\n            this[key] = this._initialValues[key]\n          }\n          // eslint-disable-next-line prefer-rest-params\n          Reflect.apply(originalMethod, this, arguments)\n        }\n      }\n      target._cleanupPatched = true\n    }\n  }\n}\n","export const dynamicMcDataFiles = ['blocks', 'blockCollisionShapes', 'biomes', 'version']\n","import { BlockType } from '../../../examples/shared'\n\nexport const defaultMesherConfig = {\n  version: '',\n  enableLighting: true,\n  skyLight: 15,\n  smoothLighting: true,\n  outputFormat: 'threeJs' as 'threeJs' | 'webgpu',\n  textureSize: 1024, // for testing\n  debugModelVariant: undefined as undefined | number[],\n  clipWorldBelowY: undefined as undefined | number,\n  disableSignsMapsSupport: false\n}\n\nexport type MesherConfig = typeof defaultMesherConfig\n\nexport type MesherGeometryOutput = {\n  sx: number,\n  sy: number,\n  sz: number,\n  // resulting: float32array\n  positions: any,\n  normals: any,\n  colors: any,\n  uvs: any,\n  t_positions?: number[],\n  t_normals?: number[],\n  t_colors?: number[],\n  t_uvs?: number[],\n\n  indices: number[],\n  tiles: Record<string, BlockType>,\n  signs: Record<string, any>,\n  // isFull: boolean\n  highestBlocks: Map<string, HighestBlockInfo>\n  hadErrors: boolean\n  blocksCount: number\n}\n\nexport type HighestBlockInfo = { y: number, stateId: number | undefined, biomeId: number | undefined }\n","/* eslint-disable guard-for-in */\nimport { EventEmitter } from 'events'\nimport { Vec3 } from 'vec3'\nimport * as THREE from 'three'\nimport mcDataRaw from 'minecraft-data/data.js' // note: using alias\nimport blocksAtlases from 'mc-assets/dist/blocksAtlases.json'\nimport blocksAtlasLatest from 'mc-assets/dist/blocksAtlasLatest.png'\nimport blocksAtlasLegacy from 'mc-assets/dist/blocksAtlasLegacy.png'\nimport itemsAtlases from 'mc-assets/dist/itemsAtlases.json'\nimport itemsAtlasLatest from 'mc-assets/dist/itemsAtlasLatest.png'\nimport itemsAtlasLegacy from 'mc-assets/dist/itemsAtlasLegacy.png'\nimport { AtlasParser } from 'mc-assets'\nimport TypedEmitter from 'typed-emitter'\nimport { LineMaterial } from 'three-stdlib'\nimport christmasPack from 'mc-assets/dist/textureReplacements/christmas'\nimport { dynamicMcDataFiles } from '../../buildMesherConfig.mjs'\nimport { toMajorVersion } from '../../../src/utils'\nimport { buildCleanupDecorator } from './cleanupDecorator'\nimport { defaultMesherConfig, HighestBlockInfo, MesherGeometryOutput } from './mesher/shared'\nimport { chunkPos } from './simpleUtils'\nimport { HandItemBlock } from './holdingBlock'\nimport { updateStatText } from './ui/newStats'\nimport { WorldRendererThree } from './worldrendererThree'\n\nfunction mod (x, n) {\n  return ((x % n) + n) % n\n}\n\nexport const worldCleanup = buildCleanupDecorator('resetWorld')\n\nexport const defaultWorldRendererConfig = {\n  showChunkBorders: false,\n  numWorkers: 4,\n  isPlayground: false,\n  // game renderer setting actually\n  displayHand: false\n}\n\nexport type WorldRendererConfig = typeof defaultWorldRendererConfig\n\ntype CustomTexturesData = {\n  tileSize: number | undefined\n  textures: Record<string, HTMLImageElement>\n}\n\nexport abstract class WorldRendererCommon<WorkerSend = any, WorkerReceive = any> {\n  // todo\n  @worldCleanup()\n  threejsCursorLineMaterial: LineMaterial\n  @worldCleanup()\n  cursorBlock = null as Vec3 | null\n  displayStats = true\n  @worldCleanup()\n  worldConfig = { minY: 0, worldHeight: 256 }\n  // todo need to cleanup\n  material = new THREE.MeshLambertMaterial({ vertexColors: true, transparent: true, alphaTest: 0.1 })\n\n  @worldCleanup()\n  active = false\n\n  version = undefined as string | undefined\n  // #region CHUNK & SECTIONS TRACKING\n  @worldCleanup()\n  loadedChunks = {} as Record<string, boolean> // data is added for these chunks and they might be still processing\n\n  @worldCleanup()\n  finishedChunks = {} as Record<string, boolean> // these chunks are fully loaded into the world (scene)\n\n  @worldCleanup()\n  finishedSections = {} as Record<string, boolean> // these sections are fully loaded into the world (scene)\n\n  @worldCleanup()\n  // loading sections (chunks)\n  sectionsWaiting = new Map<string, number>()\n\n  @worldCleanup()\n  queuedChunks = new Set<string>()\n  queuedFunctions = [] as Array<() => void>\n  // #endregion\n\n  @worldCleanup()\n  renderUpdateEmitter = new EventEmitter() as unknown as TypedEmitter<{\n    dirty (pos: Vec3, value: boolean): void\n    update (/* pos: Vec3, value: boolean */): void\n    textureDownloaded (): void\n    itemsTextureDownloaded (): void\n    chunkFinished (key: string): void\n  }>\n  customTexturesDataUrl = undefined as string | undefined\n  @worldCleanup()\n  currentTextureImage = undefined as any\n  workers: any[] = []\n  @worldCleanup()\n  viewerPosition?: Vec3\n  lastCamUpdate = 0\n  droppedFpsPercentage = 0\n  @worldCleanup()\n  initialChunkLoadWasStartedIn: number | undefined\n  @worldCleanup()\n  initialChunksLoad = true\n  enableChunksLoadDelay = false\n  texturesVersion?: string\n  viewDistance = -1\n  chunksLength = 0\n  @worldCleanup()\n  allChunksFinished = false\n\n  handleResize = () => { }\n  mesherConfig = defaultMesherConfig\n  camera: THREE.PerspectiveCamera\n  highestBlocks = new Map<string, HighestBlockInfo>()\n  blockstatesModels: any\n  customBlockStates: Record<string, any> | undefined\n  customModels: Record<string, any> | undefined\n  itemsAtlasParser: AtlasParser | undefined\n  blocksAtlasParser: AtlasParser | undefined\n\n  blocksAtlases = blocksAtlases\n  itemsAtlases = itemsAtlases\n  customTextures: {\n    items?: CustomTexturesData\n    blocks?: CustomTexturesData\n  } = {}\n  workersProcessAverageTime = 0\n  workersProcessAverageTimeCount = 0\n  maxWorkersProcessTime = 0\n  geometryReceiveCount = {}\n  allLoadedIn: undefined | number\n  rendererDevice = '...'\n\n  edgeChunks = {} as Record<string, boolean>\n  lastAddChunk = null as null | {\n    timeout: any\n    x: number\n    z: number\n  }\n  neighborChunkUpdates = true\n  lastChunkDistance = 0\n  debugStopGeometryUpdate = false\n\n  abstract outputFormat: 'threeJs' | 'webgpu'\n\n  abstract changeBackgroundColor (color: [number, number, number]): void\n\n  constructor (public config: WorldRendererConfig) {\n    // this.initWorkers(1) // preload script on page load\n    this.snapshotInitialValues()\n\n    this.renderUpdateEmitter.on('update', () => {\n      const loadedChunks = Object.keys(this.finishedChunks).length\n      updateStatText('loaded-chunks', `${loadedChunks}/${this.chunksLength} chunks (${this.lastChunkDistance}/${this.viewDistance})`)\n    })\n  }\n\n  snapshotInitialValues () { }\n\n  initWorkers (numWorkers = this.config.numWorkers) {\n    // init workers\n    for (let i = 0; i < numWorkers + 1; i++) {\n      // Node environment needs an absolute path, but browser needs the url of the file\n      const workerName = 'mesher.js'\n      // eslint-disable-next-line node/no-path-concat\n      const src = typeof window === 'undefined' ? `${__dirname}/${workerName}` : workerName\n\n      const worker: any = new Worker(src)\n      const handleMessage = (data) => {\n        if (!this.active) return\n        if (data.type !== 'geometry' || !this.debugStopGeometryUpdate) {\n          this.handleWorkerMessage(data)\n        }\n        if (data.type === 'geometry') {\n          this.geometryReceiveCount[data.workerIndex] ??= 0\n          this.geometryReceiveCount[data.workerIndex]++\n          const geometry = data.geometry as MesherGeometryOutput\n          for (const key in geometry.highestBlocks) {\n            const highest = geometry.highestBlocks[key]\n            if (!this.highestBlocks[key] || this.highestBlocks[key].y < highest.y) {\n              this.highestBlocks[key] = highest\n            }\n          }\n          const chunkCoords = data.key.split(',').map(Number)\n          this.lastChunkDistance = Math.max(...this.getDistance(new Vec3(chunkCoords[0], 0, chunkCoords[2])))\n        }\n        if (data.type === 'sectionFinished') { // on after load & unload section\n          if (!this.sectionsWaiting.get(data.key)) throw new Error(`sectionFinished event for non-outstanding section ${data.key}`)\n          this.sectionsWaiting.set(data.key, this.sectionsWaiting.get(data.key)! - 1)\n          if (this.sectionsWaiting.get(data.key) === 0) {\n            this.sectionsWaiting.delete(data.key)\n            this.finishedSections[data.key] = true\n          }\n\n          const chunkCoords = data.key.split(',').map(Number)\n          if (this.loadedChunks[`${chunkCoords[0]},${chunkCoords[2]}`]) { // ensure chunk data was added, not a neighbor chunk update\n            const loadingKeys = [...this.sectionsWaiting.keys()]\n            if (!loadingKeys.some(key => {\n              const [x, y, z] = key.split(',').map(Number)\n              return x === chunkCoords[0] && z === chunkCoords[2]\n            })) {\n              this.finishedChunks[`${chunkCoords[0]},${chunkCoords[2]}`] = true\n            }\n          }\n          this.checkAllFinished()\n\n          this.renderUpdateEmitter.emit('update')\n          if (data.processTime) {\n            this.workersProcessAverageTimeCount++\n            this.workersProcessAverageTime = ((this.workersProcessAverageTime * (this.workersProcessAverageTimeCount - 1)) + data.processTime) / this.workersProcessAverageTimeCount\n            this.maxWorkersProcessTime = Math.max(this.maxWorkersProcessTime, data.processTime)\n          }\n        }\n      }\n      worker.onmessage = ({ data }) => {\n        if (Array.isArray(data)) {\n          // eslint-disable-next-line unicorn/no-array-for-each\n          data.forEach(handleMessage)\n          return\n        }\n        handleMessage(data)\n      }\n      if (worker.on) worker.on('message', (data) => { worker.onmessage({ data }) })\n      this.workers.push(worker)\n    }\n  }\n\n  checkAllFinished () {\n    if (this.sectionsWaiting.size === 0) {\n      const allFinished = Object.keys(this.finishedChunks).length === this.chunksLength\n      if (allFinished) {\n        this.allChunksLoaded?.()\n        this.allChunksFinished = true\n        this.allLoadedIn ??= Date.now() - this.initialChunkLoadWasStartedIn!\n      }\n    }\n  }\n\n  onHandItemSwitch (item: HandItemBlock | undefined, isLeftHand: boolean): void { }\n  changeHandSwingingState (isAnimationPlaying: boolean, isLeftHand: boolean): void { }\n\n  abstract handleWorkerMessage (data: WorkerReceive): void\n\n  abstract updateCamera (pos: Vec3 | null, yaw: number, pitch: number): void\n\n  abstract render (): void\n\n  /**\n   * Optionally update data that are depedendent on the viewer position\n   */\n  updatePosDataChunk? (key: string): void\n\n  allChunksLoaded? (): void\n\n  timeUpdated? (newTime: number): void\n\n  updateViewerPosition (pos: Vec3) {\n    this.viewerPosition = pos\n    for (const [key, value] of Object.entries(this.loadedChunks)) {\n      if (!value) continue\n      this.updatePosDataChunk?.(key)\n    }\n  }\n\n  sendWorkers (message: WorkerSend) {\n    for (const worker of this.workers) {\n      worker.postMessage(message)\n    }\n  }\n\n  getDistance (posAbsolute: Vec3) {\n    const [botX, botZ] = chunkPos(this.viewerPosition!)\n    const dx = Math.abs(botX - Math.floor(posAbsolute.x / 16))\n    const dz = Math.abs(botZ - Math.floor(posAbsolute.z / 16))\n    return [dx, dz] as [number, number]\n  }\n\n  abstract updateShowChunksBorder (value: boolean): void\n\n  resetWorld () {\n    // destroy workers\n    for (const worker of this.workers) {\n      worker.terminate()\n    }\n    this.workers = []\n    this.currentTextureImage = undefined\n    this.blocksAtlasParser = undefined\n    this.itemsAtlasParser = undefined\n  }\n\n  // new game load happens here\n  async setVersion (version, texturesVersion = version) {\n    if (!this.blockstatesModels) throw new Error('Blockstates models is not loaded yet')\n    this.version = version\n    this.texturesVersion = texturesVersion\n    this.resetWorld()\n    this.initWorkers()\n    this.active = true\n    this.mesherConfig.outputFormat = this.outputFormat\n    this.mesherConfig.version = this.version!\n\n    this.sendMesherMcData()\n    await this.updateTexturesData()\n  }\n\n  sendMesherMcData () {\n    const allMcData = mcDataRaw.pc[this.version] ?? mcDataRaw.pc[toMajorVersion(this.version)]\n    const mcData = {\n      version: JSON.parse(JSON.stringify(allMcData.version))\n    }\n    for (const key of dynamicMcDataFiles) {\n      mcData[key] = allMcData[key]\n    }\n\n    for (const worker of this.workers) {\n      worker.postMessage({ type: 'mcData', mcData, config: this.mesherConfig })\n    }\n  }\n\n  async updateTexturesData (resourcePackUpdate = false, prioritizeBlockTextures?: string[]) {\n    const blocksAssetsParser = new AtlasParser(this.blocksAtlases, blocksAtlasLatest, blocksAtlasLegacy)\n    const itemsAssetsParser = new AtlasParser(this.itemsAtlases, itemsAtlasLatest, itemsAtlasLegacy)\n\n    const blockTexturesChanges = {} as Record<string, string>\n    const date = new Date()\n    if ((date.getMonth() === 11 && date.getDate() >= 24) || (date.getMonth() === 0 && date.getDate() <= 6)) {\n      Object.assign(blockTexturesChanges, christmasPack)\n    }\n\n    const customBlockTextures = Object.keys(this.customTextures.blocks?.textures ?? {}).filter(x => x.includes('/'))\n    const { atlas: blocksAtlas, canvas: blocksCanvas } = await blocksAssetsParser.makeNewAtlas(this.texturesVersion ?? this.version ?? 'latest', (textureName) => {\n      const texture = this.customTextures?.blocks?.textures[textureName]\n      return blockTexturesChanges[textureName] ?? texture\n    }, /* this.customTextures?.blocks?.tileSize */undefined, prioritizeBlockTextures, customBlockTextures)\n    const { atlas: itemsAtlas, canvas: itemsCanvas } = await itemsAssetsParser.makeNewAtlas(this.texturesVersion ?? this.version ?? 'latest', (textureName) => {\n      const texture = this.customTextures?.items?.textures[textureName]\n      if (!texture) return\n      return texture\n    }, this.customTextures?.items?.tileSize)\n    this.blocksAtlasParser = new AtlasParser({ latest: blocksAtlas }, blocksCanvas.toDataURL())\n    this.itemsAtlasParser = new AtlasParser({ latest: itemsAtlas }, itemsCanvas.toDataURL())\n\n    const texture = await new THREE.TextureLoader().loadAsync(this.blocksAtlasParser.latestImage)\n    texture.magFilter = THREE.NearestFilter\n    texture.minFilter = THREE.NearestFilter\n    texture.flipY = false\n    this.material.map = texture\n    this.currentTextureImage = this.material.map.image\n    this.mesherConfig.textureSize = this.material.map.image.width\n\n    for (const [i, worker] of this.workers.entries()) {\n      const { blockstatesModels } = this\n      if (this.customBlockStates) {\n        // TODO! remove from other versions as well\n        blockstatesModels.blockstates.latest = {\n          ...blockstatesModels.blockstates.latest,\n          ...this.customBlockStates\n        }\n      }\n      if (this.customModels) {\n        blockstatesModels.models.latest = {\n          ...blockstatesModels.models.latest,\n          ...this.customModels\n        }\n      }\n      worker.postMessage({\n        type: 'mesherData',\n        workerIndex: i,\n        blocksAtlas: {\n          latest: blocksAtlas\n        },\n        blockstatesModels,\n        config: this.mesherConfig,\n      })\n    }\n    this.renderUpdateEmitter.emit('textureDownloaded')\n    console.log('texture loaded')\n  }\n\n  get worldMinYRender () {\n    return Math.floor(Math.max(this.worldConfig.minY, this.mesherConfig.clipWorldBelowY ?? -Infinity) / 16) * 16\n  }\n\n  updateChunksStatsText () {\n    updateStatText('downloaded-chunks', `${Object.keys(this.loadedChunks).length}/${this.chunksLength} chunks D (${this.workers.length}:${this.workersProcessAverageTime.toFixed(0)}ms/${this.allLoadedIn?.toFixed(1) ?? '-'}s)`)\n  }\n\n  addColumn (x: number, z: number, chunk: any, isLightUpdate: boolean) {\n    if (!this.active) return\n    if (this.workers.length === 0) throw new Error('workers not initialized yet')\n    this.initialChunksLoad = false\n    this.initialChunkLoadWasStartedIn ??= Date.now()\n    this.loadedChunks[`${x},${z}`] = true\n    this.updateChunksStatsText()\n    for (const worker of this.workers) {\n      // todo optimize\n      worker.postMessage({ type: 'chunk', x, z, chunk })\n    }\n    for (let y = this.worldMinYRender; y < this.worldConfig.worldHeight; y += 16) {\n      const loc = new Vec3(x, y, z)\n      this.setSectionDirty(loc)\n      if (this.neighborChunkUpdates && (!isLightUpdate || this.mesherConfig.smoothLighting)) {\n        this.setSectionDirty(loc.offset(-16, 0, 0))\n        this.setSectionDirty(loc.offset(16, 0, 0))\n        this.setSectionDirty(loc.offset(0, 0, -16))\n        this.setSectionDirty(loc.offset(0, 0, 16))\n      }\n    }\n  }\n\n  markAsLoaded (x, z) {\n    this.loadedChunks[`${x},${z}`] = true\n    this.finishedChunks[`${x},${z}`] = true\n    this.checkAllFinished()\n  }\n\n  removeColumn (x, z) {\n    delete this.loadedChunks[`${x},${z}`]\n    for (const worker of this.workers) {\n      worker.postMessage({ type: 'unloadChunk', x, z })\n    }\n    delete this.finishedChunks[`${x},${z}`]\n    this.allChunksFinished = Object.keys(this.finishedChunks).length === this.chunksLength\n    if (!this.allChunksFinished) {\n      this.allLoadedIn = undefined\n      this.initialChunkLoadWasStartedIn = undefined\n    }\n    for (let y = this.worldConfig.minY; y < this.worldConfig.worldHeight; y += 16) {\n      this.setSectionDirty(new Vec3(x, y, z), false)\n      delete this.finishedSections[`${x},${y},${z}`]\n    }\n\n    // remove from highestBlocks\n    const startX = Math.floor(x / 16) * 16\n    const startZ = Math.floor(z / 16) * 16\n    const endX = Math.ceil((x + 1) / 16) * 16\n    const endZ = Math.ceil((z + 1) / 16) * 16\n    for (let x = startX; x < endX; x += 16) {\n      for (let z = startZ; z < endZ; z += 16) {\n        delete this.highestBlocks[`${x},${z}`]\n      }\n    }\n  }\n\n  setBlockStateId (pos: Vec3, stateId: number) {\n    const needAoRecalculation = true\n    for (const worker of this.workers) {\n      worker.postMessage({ type: 'blockUpdate', pos, stateId })\n    }\n    this.setSectionDirty(pos, true, true)\n    if (this.neighborChunkUpdates) {\n      if ((pos.x & 15) === 0) this.setSectionDirty(pos.offset(-16, 0, 0), true, true)\n      if ((pos.x & 15) === 15) this.setSectionDirty(pos.offset(16, 0, 0), true, true)\n      if ((pos.y & 15) === 0) this.setSectionDirty(pos.offset(0, -16, 0), true, true)\n      if ((pos.y & 15) === 15) this.setSectionDirty(pos.offset(0, 16, 0), true, true)\n      if ((pos.z & 15) === 0) this.setSectionDirty(pos.offset(0, 0, -16), true, true)\n      if ((pos.z & 15) === 15) this.setSectionDirty(pos.offset(0, 0, 16), true, true)\n\n      if (needAoRecalculation) {\n        // top view neighbors\n        if ((pos.x & 15) === 0 && (pos.z & 15) === 0) this.setSectionDirty(pos.offset(-16, 0, -16), true, true)\n        if ((pos.x & 15) === 15 && (pos.z & 15) === 0) this.setSectionDirty(pos.offset(16, 0, -16), true, true)\n        if ((pos.x & 15) === 0 && (pos.z & 15) === 15) this.setSectionDirty(pos.offset(-16, 0, 16), true, true)\n        if ((pos.x & 15) === 15 && (pos.z & 15) === 15) this.setSectionDirty(pos.offset(16, 0, 16), true, true)\n\n        // side view neighbors (but ignore updates above)\n        // z view neighbors\n        if ((pos.x & 15) === 0 && (pos.y & 15) === 0) this.setSectionDirty(pos.offset(-16, -16, 0), true, true)\n        if ((pos.x & 15) === 15 && (pos.y & 15) === 0) this.setSectionDirty(pos.offset(16, -16, 0), true, true)\n\n        // x view neighbors\n        if ((pos.z & 15) === 0 && (pos.y & 15) === 0) this.setSectionDirty(pos.offset(0, -16, -16), true, true)\n        if ((pos.z & 15) === 15 && (pos.y & 15) === 0) this.setSectionDirty(pos.offset(0, -16, 16), true, true)\n\n        // x & z neighbors\n        if ((pos.y & 15) === 0 && (pos.x & 15) === 0 && (pos.z & 15) === 0) this.setSectionDirty(pos.offset(-16, -16, -16), true, true)\n        if ((pos.y & 15) === 0 && (pos.x & 15) === 15 && (pos.z & 15) === 0) this.setSectionDirty(pos.offset(16, -16, -16), true, true)\n        if ((pos.y & 15) === 0 && (pos.x & 15) === 0 && (pos.z & 15) === 15) this.setSectionDirty(pos.offset(-16, -16, 16), true, true)\n        if ((pos.y & 15) === 0 && (pos.x & 15) === 15 && (pos.z & 15) === 15) this.setSectionDirty(pos.offset(16, -16, 16), true, true)\n      }\n    }\n  }\n\n  queueAwaited = false\n  messagesQueue = {} as { [workerIndex: string]: any[] }\n\n  getWorkerNumber (pos: Vec3, updateAction = false) {\n    if (updateAction) {\n      const key = `${Math.floor(pos.x / 16) * 16},${Math.floor(pos.y / 16) * 16},${Math.floor(pos.z / 16) * 16}`\n      const cantUseChangeWorker = this.sectionsWaiting.get(key) && !this.finishedSections[key]\n      if (!cantUseChangeWorker) return 0\n    }\n\n    const hash = mod(Math.floor(pos.x / 16) + Math.floor(pos.y / 16) + Math.floor(pos.z / 16), this.workers.length - 1)\n    return hash + 1\n  }\n\n  setSectionDirty (pos: Vec3, value = true, useChangeWorker = false) { // value false is used for unloading chunks\n    if (this.viewDistance === -1) throw new Error('viewDistance not set')\n    this.allChunksFinished = false\n    const distance = this.getDistance(pos)\n    if (!this.workers.length || distance[0] > this.viewDistance || distance[1] > this.viewDistance) return\n    const key = `${Math.floor(pos.x / 16) * 16},${Math.floor(pos.y / 16) * 16},${Math.floor(pos.z / 16) * 16}`\n    // if (this.sectionsOutstanding.has(key)) return\n    this.renderUpdateEmitter.emit('dirty', pos, value)\n    // Dispatch sections to workers based on position\n    // This guarantees uniformity accross workers and that a given section\n    // is always dispatched to the same worker\n    const hash = this.getWorkerNumber(pos, useChangeWorker)\n    this.sectionsWaiting.set(key, (this.sectionsWaiting.get(key) ?? 0) + 1)\n    this.messagesQueue[hash] ??= []\n    this.messagesQueue[hash].push({\n      // this.workers[hash].postMessage({\n      type: 'dirty',\n      x: pos.x,\n      y: pos.y,\n      z: pos.z,\n      value,\n      config: this.mesherConfig,\n    })\n    this.dispatchMessages()\n  }\n\n  dispatchMessages () {\n    if (this.queueAwaited) return\n    this.queueAwaited = true\n    setTimeout(() => {\n      // group messages and send as one\n      for (const workerIndex in this.messagesQueue) {\n        const worker = this.workers[Number(workerIndex)]\n        worker.postMessage(this.messagesQueue[workerIndex])\n      }\n      this.messagesQueue = {}\n      this.queueAwaited = false\n    })\n  }\n\n  // Listen for chunk rendering updates emitted if a worker finished a render and resolve if the number\n  // of sections not rendered are 0\n  async waitForChunksToRender () {\n    return new Promise<void>((resolve, reject) => {\n      if ([...this.sectionsWaiting].length === 0) {\n        resolve()\n        return\n      }\n\n      const updateHandler = () => {\n        if (this.sectionsWaiting.size === 0) {\n          this.renderUpdateEmitter.removeListener('update', updateHandler)\n          resolve()\n        }\n      }\n      this.renderUpdateEmitter.on('update', updateHandler)\n    })\n  }\n\n  async waitForChunkToLoad (pos: Vec3) {\n    return new Promise<void>((resolve, reject) => {\n      const key = `${Math.floor(pos.x / 16) * 16},${Math.floor(pos.z / 16) * 16}`\n      if (this.loadedChunks[key]) {\n        resolve()\n        return\n      }\n      const updateHandler = () => {\n        if (this.loadedChunks[key]) {\n          this.renderUpdateEmitter.removeListener('update', updateHandler)\n          resolve()\n        }\n      }\n      this.renderUpdateEmitter.on('update', updateHandler)\n    })\n  }\n\n  destroy () {\n    console.warn('world destroy is not implemented')\n  }\n\n  abstract setHighlightCursorBlock (block: typeof this.cursorBlock, shapePositions?: Array<{ position; width; height; depth }>): void\n}\n","import { fromFormattedString, render, RenderNode, TextComponent } from '@xmcl/text-component'\nimport type { ChatMessage } from 'prismarine-chat'\n\ntype SignBlockEntity = {\n  Color?: string\n  GlowingText?: 0 | 1\n  Text1?: string\n  Text2?: string\n  Text3?: string\n  Text4?: string\n} | {\n  // todo\n  is_waxed?: 0 | 1\n  front_text: {\n    color: string\n    messages: string[]\n    // todo\n    has_glowing_text?: 0 | 1\n  }\n  // todo\n  // back_text: {}\n}\n\ntype JsonEncodedType = string | null | Record<string, any>\n\nconst parseSafe = (text: string, task: string) => {\n  try {\n    return JSON.parse(text)\n  } catch (e) {\n    console.warn(`Failed to parse ${task}`, e)\n    return null\n  }\n}\n\nexport const renderSign = (blockEntity: SignBlockEntity, PrismarineChat: typeof ChatMessage, ctxHook = (ctx) => { }) => {\n  // todo don't use texture rendering, investigate the font rendering when possible\n  // or increase factor when needed\n  const factor = 40\n  const signboardY = [16, 9]\n  const heightOffset = signboardY[0] - signboardY[1]\n  const heightScalar = heightOffset / 16\n\n  let canvas: HTMLCanvasElement | undefined\n  let _ctx: CanvasRenderingContext2D | null = null\n  const getCtx = () => {\n    if (_ctx) return _ctx\n    canvas = document.createElement('canvas')\n\n    canvas.width = 16 * factor\n    canvas.height = heightOffset * factor\n\n    _ctx = canvas.getContext('2d')!\n    _ctx.imageSmoothingEnabled = false\n\n    ctxHook(_ctx)\n    return _ctx\n  }\n\n  const texts = 'front_text' in blockEntity ? /* > 1.20 */ blockEntity.front_text.messages : [\n    blockEntity.Text1,\n    blockEntity.Text2,\n    blockEntity.Text3,\n    blockEntity.Text4\n  ]\n  const defaultColor = ('front_text' in blockEntity ? blockEntity.front_text.color : blockEntity.Color) || 'black'\n  for (const [lineNum, text] of texts.slice(0, 4).entries()) {\n    // todo: in pre flatenning it seems the format was not json\n    if (text === 'null') continue\n    const parsed = text?.startsWith('{') || text?.startsWith('\"') ? parseSafe(text ?? '\"\"', 'sign text') : text\n    if (!parsed || (typeof parsed !== 'object' && typeof parsed !== 'string')) continue\n    // todo fix type\n    const message = typeof parsed === 'string' ? fromFormattedString(parsed) : new PrismarineChat(parsed) as never\n    const patchExtra = ({ extra }: TextComponent) => {\n      if (!extra) return\n      for (const child of extra) {\n        if (child.color) {\n          child.color = child.color === 'dark_green' ? child.color.toUpperCase() : child.color.toLowerCase()\n        }\n        patchExtra(child)\n      }\n    }\n    patchExtra(message)\n    const rendered = render(message)\n\n    const toRenderCanvas: Array<{\n      fontStyle: string\n      fillStyle: string\n      underlineStyle: boolean\n      strikeStyle: boolean\n      text: string\n    }> = []\n    let plainText = ''\n    // todo the text should be clipped based on it's render width (needs investigate)\n    const MAX_LENGTH = 50 // avoid abusing the signboard\n    const renderText = (node: RenderNode) => {\n      const { component } = node\n      let { text } = component\n      if (plainText.length + text.length > MAX_LENGTH) {\n        text = text.slice(0, MAX_LENGTH - plainText.length)\n        if (!text) return false\n      }\n      plainText += text\n      toRenderCanvas.push({\n        fontStyle: `${component.bold ? 'bold' : ''} ${component.italic ? 'italic' : ''}`,\n        fillStyle: node.style['color'] || defaultColor,\n        underlineStyle: component.underlined ?? false,\n        strikeStyle: component.strikethrough ?? false,\n        text\n      })\n      for (const child of node.children) {\n        const stop = renderText(child) === false\n        if (stop) return false\n      }\n    }\n\n    renderText(rendered)\n\n    // skip rendering empty lines (and possible signs)\n    if (!plainText.trim()) continue\n\n    const ctx = getCtx()\n    const fontSize = 1.6 * factor\n    ctx.font = `${fontSize}px mojangles`\n    const textWidth = ctx.measureText(plainText).width\n\n    let renderedWidth = 0\n    for (const { fillStyle, fontStyle, strikeStyle, text, underlineStyle } of toRenderCanvas) {\n      // todo strikeStyle, underlineStyle\n      ctx.fillStyle = fillStyle\n      ctx.font = `${fontStyle} ${fontSize}px mojangles`\n      ctx.fillText(text, (canvas!.width - textWidth) / 2 + renderedWidth, fontSize * (lineNum + 1))\n      renderedWidth += ctx.measureText(text).width // todo isn't the font is monospace?\n    }\n  }\n  // ctx.fillStyle = 'red'\n  // ctx.fillRect(0, 0, canvas.width, canvas.height)\n\n  return canvas\n}\n","import * as THREE from 'three'\nimport * as tweenJs from '@tweenjs/tween.js'\nimport worldBlockProvider from 'mc-assets/dist/worldBlockProvider'\nimport { GUI } from 'lil-gui'\nimport { getThreeBlockModelGroup, renderBlockThree, setBlockPosition } from './mesher/standaloneRenderer'\nimport { getMyHand } from './hand'\n\nexport type HandItemBlock = {\n  name?\n  properties?\n  type: 'block' | 'item' | 'hand'\n  id?: number\n}\n\nexport default class HoldingBlock {\n  // TODO refactor with the tree builder for better visual understanding\n  holdingBlock: THREE.Object3D | undefined = undefined\n  swingAnimation: tweenJs.Group | undefined = undefined\n  blockSwapAnimation: {\n    tween: tweenJs.Group\n    hidden: boolean\n  } | undefined = undefined\n  cameraGroup = new THREE.Mesh()\n  objectOuterGroup = new THREE.Group() // 3\n  objectInnerGroup = new THREE.Group() // 4\n  holdingBlockInnerGroup = new THREE.Group() // 5\n  camera = new THREE.PerspectiveCamera(75, 1, 0.1, 100)\n  stopUpdate = false\n  lastHeldItem: HandItemBlock | undefined\n  toBeRenderedItem: HandItemBlock | undefined\n  isSwinging = false\n  nextIterStopCallbacks: Array<() => void> | undefined\n  rightSide = true\n\n  debug = {} as Record<string, any>\n\n  constructor () {\n    this.initCameraGroup()\n  }\n\n  initCameraGroup () {\n    this.cameraGroup = new THREE.Mesh()\n  }\n\n  startSwing () {\n    this.nextIterStopCallbacks = undefined // forget about cancelling\n    if (this.isSwinging) return\n    this.swingAnimation = new tweenJs.Group()\n    this.isSwinging = true\n    const cube = this.cameraGroup.children[0]\n    if (cube) {\n      // const DURATION = 1000 * 0.35 / 2\n      const DURATION = 1000 * 0.35 / 3\n      // const DURATION = 1000\n      const { position, rotation, object } = this.getFinalSwingPositionRotation()\n      const initialPos = {\n        x: object.position.x,\n        y: object.position.y,\n        z: object.position.z\n      }\n      const initialRot = {\n        x: object.rotation.x,\n        y: object.rotation.y,\n        z: object.rotation.z\n      }\n      const mainAnim = new tweenJs.Tween(object.position, this.swingAnimation).to(position, DURATION).yoyo(true).repeat(Infinity).start()\n      let i = 0\n      mainAnim.onRepeat(() => {\n        i++\n        if (this.nextIterStopCallbacks && i % 2 === 0) {\n          for (const callback of this.nextIterStopCallbacks) {\n            callback()\n          }\n          this.nextIterStopCallbacks = undefined\n          this.isSwinging = false\n          this.swingAnimation!.removeAll()\n          this.swingAnimation = undefined\n          // todo refactor to be more generic for animations\n          object.position.set(initialPos.x, initialPos.y, initialPos.z)\n          // object.rotation.set(initialRot.x, initialRot.y, initialRot.z)\n          Object.assign(object.rotation, initialRot)\n        }\n      })\n\n      new tweenJs.Tween(object.rotation, this.swingAnimation).to(rotation, DURATION).yoyo(true).repeat(Infinity).start()\n    }\n  }\n\n  getFinalSwingPositionRotation (origPosition?: THREE.Vector3) {\n    const object = this.objectInnerGroup\n    if (this.lastHeldItem?.type === 'block') {\n      origPosition ??= object.position\n      return {\n        position: { y: origPosition.y - this.objectInnerGroup.scale.y / 2 },\n        rotation: { z: THREE.MathUtils.degToRad(90), x: -THREE.MathUtils.degToRad(90) },\n        object\n      }\n    }\n    if (this.lastHeldItem?.type === 'item') {\n      const object = this.holdingBlockInnerGroup\n      origPosition ??= object.position\n      return {\n        position: {\n          y: origPosition.y - object.scale.y * 2,\n          // z: origPosition.z - window.zFinal,\n          // x: origPosition.x - window.xFinal,\n        },\n        // rotation: { z: THREE.MathUtils.degToRad(90), x: -THREE.MathUtils.degToRad(90) }\n        rotation: {\n          // z: THREE.MathUtils.degToRad(window.zRotationFinal ?? 0),\n          // x: THREE.MathUtils.degToRad(window.xRotationFinal ?? 0),\n          // y: THREE.MathUtils.degToRad(window.yRotationFinal ?? 0),\n          x: THREE.MathUtils.degToRad(-120)\n        },\n        object\n      }\n    }\n    if (this.lastHeldItem?.type === 'hand') {\n      const object = this.holdingBlockInnerGroup\n      origPosition ??= object.position\n      return {\n        position: {\n          y: origPosition.y - (window.yFinal ?? 0.15),\n          z: origPosition.z - window.zFinal,\n          x: origPosition.x - window.xFinal,\n        },\n        rotation: {\n          x: THREE.MathUtils.degToRad(window.xRotationFinal || -14.7),\n          y: THREE.MathUtils.degToRad(window.yRotationFinal || 33.95),\n          z: THREE.MathUtils.degToRad(window.zRotationFinal || -28),\n        },\n        object\n      }\n    }\n    return {\n      position: {},\n      rotation: {},\n      object\n    }\n  }\n\n  async stopSwing () {\n    if (!this.isSwinging) return\n    // might never resolve!\n    /* return */void new Promise<void>((resolve) => {\n      this.nextIterStopCallbacks ??= []\n      this.nextIterStopCallbacks.push(() => {\n        resolve()\n      })\n    })\n  }\n\n  render (originalCamera: THREE.PerspectiveCamera, renderer: THREE.WebGLRenderer, ambientLight: THREE.AmbientLight, directionalLight: THREE.DirectionalLight) {\n    if (!this.lastHeldItem) return\n    this.swingAnimation?.update()\n    this.blockSwapAnimation?.tween.update()\n\n    const scene = new THREE.Scene()\n    scene.add(this.cameraGroup)\n    // if (this.camera.aspect !== originalCamera.aspect) {\n    //   this.camera.aspect = originalCamera.aspect\n    //   this.camera.updateProjectionMatrix()\n    // }\n    this.updateCameraGroup()\n    scene.add(ambientLight.clone())\n    scene.add(directionalLight.clone())\n\n    const viewerSize = renderer.getSize(new THREE.Vector2())\n    const minSize = Math.min(viewerSize.width, viewerSize.height)\n\n    renderer.autoClear = false\n    renderer.clearDepth()\n    if (this.rightSide) {\n      const x = viewerSize.width - minSize\n      // if (x) x -= x / 4\n      renderer.setViewport(x, 0, minSize, minSize)\n    } else {\n      renderer.setViewport(0, 0, minSize, minSize)\n    }\n    renderer.render(scene, this.camera)\n    renderer.setViewport(0, 0, viewerSize.width, viewerSize.height)\n  }\n\n  // worldTest () {\n  //   const mesh = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), new THREE.MeshPhongMaterial({ color: 0x00_00_ff, transparent: true, opacity: 0.5 }))\n  //   mesh.position.set(0.5, 0.5, 0.5)\n  //   const group = new THREE.Group()\n  //   group.add(mesh)\n  //   group.position.set(-0.5, -0.5, -0.5)\n  //   const outerGroup = new THREE.Group()\n  //   outerGroup.add(group)\n  //   outerGroup.position.set(this.camera.position.x, this.camera.position.y, this.camera.position.z)\n  //   this.scene.add(outerGroup)\n\n  //   new tweenJs.Tween(group.rotation).to({ z: THREE.MathUtils.degToRad(90) }, 1000).yoyo(true).repeat(Infinity).start()\n  // }\n\n  async playBlockSwapAnimation () {\n    // if (this.blockSwapAnimation) return\n    this.blockSwapAnimation ??= {\n      tween: new tweenJs.Group(),\n      hidden: false\n    }\n    const DURATION = 1000 * 0.35 / 2\n    const tween = new tweenJs.Tween(this.objectInnerGroup.position, this.blockSwapAnimation.tween).to({\n      y: this.objectInnerGroup.position.y + (this.objectInnerGroup.scale.y * 1.5 * (this.blockSwapAnimation.hidden ? 1 : -1))\n    }, DURATION).start()\n    return new Promise<void>((resolve) => {\n      tween.onComplete(() => {\n        if (this.blockSwapAnimation!.hidden) {\n          this.blockSwapAnimation = undefined\n        } else {\n          this.blockSwapAnimation!.hidden = !this.blockSwapAnimation!.hidden\n        }\n        resolve()\n      })\n    })\n  }\n\n  isDifferentItem (block: HandItemBlock | undefined) {\n    return this.lastHeldItem && (this.lastHeldItem.name !== block?.name || JSON.stringify(this.lastHeldItem.properties) !== JSON.stringify(block?.properties ?? '{}'))\n  }\n\n  updateCameraGroup () {\n    if (this.stopUpdate) return\n    const { camera } = this\n    this.cameraGroup.position.copy(camera.position)\n    this.cameraGroup.rotation.copy(camera.rotation)\n\n    // const viewerSize = viewer.renderer.getSize(new THREE.Vector2())\n    // const aspect = viewerSize.width / viewerSize.height\n    const aspect = 1\n\n\n    // Adjust the position based on the aspect ratio\n    const { position, scale: scaleData } = this.getHandHeld3d()\n    const distance = -position.z\n    const side = this.rightSide ? 1 : -1\n    this.objectOuterGroup.position.set(\n      distance * position.x * aspect * side,\n      distance * position.y,\n      -distance\n    )\n\n    // const scale = Math.min(0.8, Math.max(1, 1 * aspect))\n    const scale = scaleData * 2.22 * 0.2\n    this.objectOuterGroup.scale.set(scale, scale, scale)\n  }\n\n  async initHandObject (material: THREE.Material, blockstatesModels: any, blocksAtlases: any, handItem?: HandItemBlock) {\n    let animatingCurrent = false\n    if (!this.swingAnimation && !this.blockSwapAnimation && this.isDifferentItem(handItem)) {\n      animatingCurrent = true\n      await this.playBlockSwapAnimation()\n      this.holdingBlock?.removeFromParent()\n      this.holdingBlock = undefined\n    }\n    this.lastHeldItem = handItem\n    if (!handItem) {\n      this.holdingBlock?.removeFromParent()\n      this.holdingBlock = undefined\n      this.swingAnimation = undefined\n      this.blockSwapAnimation = undefined\n      return\n    }\n    const blockProvider = worldBlockProvider(blockstatesModels, blocksAtlases, 'latest')\n    let blockInner\n    if (handItem.type === 'block') {\n      const models = blockProvider.getAllResolvedModels0_1({\n        name: handItem.name,\n        properties: handItem.properties ?? {}\n      }, true)\n      blockInner = getThreeBlockModelGroup(material, models, undefined, 'plains', loadedData)\n    } else if (handItem.type === 'item') {\n      const { mesh: itemMesh } = viewer.entities.getItemMesh({\n        itemId: handItem.id,\n      })!\n      itemMesh.position.set(0.5, 0.5, 0.5)\n      blockInner = itemMesh\n    } else {\n      blockInner = await getMyHand()\n    }\n    blockInner.name = 'holdingBlock'\n    const blockOuterGroup = new THREE.Group()\n    this.holdingBlockInnerGroup.removeFromParent()\n    this.holdingBlockInnerGroup = new THREE.Group()\n    this.holdingBlockInnerGroup.add(blockInner)\n    blockOuterGroup.add(this.holdingBlockInnerGroup)\n    this.holdingBlock = blockInner\n    this.objectInnerGroup = new THREE.Group()\n    this.objectInnerGroup.add(blockOuterGroup)\n    this.objectInnerGroup.position.set(-0.5, -0.5, -0.5)\n    // todo cleanup\n    if (animatingCurrent) {\n      this.objectInnerGroup.position.y -= this.objectInnerGroup.scale.y * 1.5\n    }\n    Object.assign(blockOuterGroup.position, { x: 0.5, y: 0.5, z: 0.5 })\n\n    this.objectOuterGroup = new THREE.Group()\n    this.objectOuterGroup.add(this.objectInnerGroup)\n\n    this.cameraGroup.add(this.objectOuterGroup)\n    const rotationDeg = this.getHandHeld3d().rotation\n    let origPosition\n    const setRotation = () => {\n      const final = this.getFinalSwingPositionRotation(origPosition)\n      origPosition ??= final.object.position.clone()\n      if (this.debug.displayFinal) {\n        Object.assign(final.object.position, final.position)\n        Object.assign(final.object.rotation, final.rotation)\n      } else if (this.debug.displayFinal === false) {\n        final.object.rotation.set(0, 0, 0)\n      }\n\n      this.holdingBlock!.rotation.x = THREE.MathUtils.degToRad(rotationDeg.x)\n      this.holdingBlock!.rotation.y = THREE.MathUtils.degToRad(rotationDeg.y)\n      this.holdingBlock!.rotation.z = THREE.MathUtils.degToRad(rotationDeg.z)\n      this.objectOuterGroup.rotation.y = THREE.MathUtils.degToRad(rotationDeg.yOuter)\n    }\n    // const gui = new GUI()\n    // gui.add(rotationDeg, 'x', -180, 180, 0.1)\n    // gui.add(rotationDeg, 'y', -180, 180, 0.1)\n    // gui.add(rotationDeg, 'z', -180, 180, 0.1)\n    // gui.add(rotationDeg, 'yOuter', -180, 180, 0.1)\n    // Object.assign(window, { xFinal: 0, yFinal: 0, zFinal: 0, xRotationFinal: 0, yRotationFinal: 0, zRotationFinal: 0, displayFinal: true })\n    // gui.add(window, 'xFinal', -10, 10, 0.05)\n    // gui.add(window, 'yFinal', -10, 10, 0.05)\n    // gui.add(window, 'zFinal', -10, 10, 0.05)\n    // gui.add(window, 'xRotationFinal', -180, 180, 0.05)\n    // gui.add(window, 'yRotationFinal', -180, 180, 0.05)\n    // gui.add(window, 'zRotationFinal', -180, 180, 0.05)\n    // gui.add(window, 'displayFinal')\n    // gui.onChange(setRotation)\n    setRotation()\n\n    if (animatingCurrent) {\n      await this.playBlockSwapAnimation()\n    }\n  }\n\n  getHandHeld3d () {\n    const type = this.lastHeldItem?.type ?? 'hand'\n    const { debug } = this\n\n    let scale = type === 'item' ? 0.68 : 0.45\n\n    const position = {\n      x: debug.x ?? 0.4,\n      y: debug.y ?? -0.7,\n      z: -0.45\n    }\n\n    if (type === 'item') {\n      position.x = -0.05\n      // position.y -= 3.2 / 10\n      // position.z += 1.13 / 10\n    }\n\n    if (type === 'hand') {\n      // position.x = viewer.camera.aspect > 1 ? 0.7 : 1.1\n      position.y = -0.8\n      scale = 0.8\n    }\n\n    const rotations = {\n      block: {\n        x: 0,\n        y: -45 + 90,\n        z: 0,\n        yOuter: 0\n      },\n      // hand: {\n      //   x: 166.7,\n      //   // y: -180,\n      //   y: -165.2,\n      //   // z: -156.3,\n      //   z: -134.2,\n      //   yOuter: -81.1\n      // },\n      hand: {\n        x: -32.4,\n        // y: 25.1\n        y: 42.8,\n        z: -41.3,\n        yOuter: 0\n      },\n      // item: {\n      //   x: -174,\n      //   y: 47.3,\n      //   z: -134.2,\n      //   yOuter: -41.2\n      // }\n      item: {\n        // x: -174,\n        // y: 47.3,\n        // z: -134.2,\n        // yOuter: -41.2\n        x: 0,\n        // y: -90, // todo thats the correct one but we don't make it look too cheap because of no depth\n        y: -70,\n        z: window.z ?? 25,\n        yOuter: 0\n      }\n    }\n\n    return {\n      rotation: rotations[type],\n      position,\n      scale\n    }\n  }\n}\n","import * as THREE from 'three'\nimport { Vec3 } from 'vec3'\nimport nbt from 'prismarine-nbt'\nimport PrismarineChatLoader from 'prismarine-chat'\nimport * as tweenJs from '@tweenjs/tween.js'\nimport { BloomPass, RenderPass, UnrealBloomPass, EffectComposer, WaterPass, GlitchPass, LineSegmentsGeometry, Wireframe, LineMaterial } from 'three-stdlib'\nimport worldBlockProvider from 'mc-assets/dist/worldBlockProvider'\nimport { renderSign } from '../sign-renderer'\nimport { chunkPos, sectionPos } from './simpleUtils'\nimport { WorldRendererCommon, WorldRendererConfig } from './worldrendererCommon'\nimport { disposeObject } from './threeJsUtils'\nimport HoldingBlock, { HandItemBlock } from './holdingBlock'\nimport { addNewStat } from './ui/newStats'\nimport { MesherGeometryOutput } from './mesher/shared'\n\nexport class WorldRendererThree extends WorldRendererCommon {\n  interactionLines: null | { blockPos; mesh } = null\n  outputFormat = 'threeJs' as const\n  blockEntities = {}\n  sectionObjects: Record<string, THREE.Object3D> = {}\n  chunkTextures = new Map<string, { [pos: string]: THREE.Texture }>()\n  signsCache = new Map<string, any>()\n  starField: StarField\n  cameraSectionPos: Vec3 = new Vec3(0, 0, 0)\n  holdingBlock: HoldingBlock\n  holdingBlockLeft: HoldingBlock\n  rendererDevice = '...'\n\n  get tilesRendered () {\n    return Object.values(this.sectionObjects).reduce((acc, obj) => acc + (obj as any).tilesCount, 0)\n  }\n\n  get blocksRendered () {\n    return Object.values(this.sectionObjects).reduce((acc, obj) => acc + (obj as any).blocksCount, 0)\n  }\n\n  constructor (public scene: THREE.Scene, public renderer: THREE.WebGLRenderer, public config: WorldRendererConfig) {\n    super(config)\n    this.rendererDevice = `${WorldRendererThree.getRendererInfo(this.renderer)} powered by three.js r${THREE.REVISION}`\n    this.starField = new StarField(scene)\n    this.holdingBlock = new HoldingBlock()\n    this.holdingBlockLeft = new HoldingBlock()\n    this.holdingBlockLeft.rightSide = false\n\n    this.renderUpdateEmitter.on('itemsTextureDownloaded', () => {\n      if (this.holdingBlock.toBeRenderedItem) {\n        this.onHandItemSwitch(this.holdingBlock.toBeRenderedItem)\n        this.holdingBlock.toBeRenderedItem = undefined\n      }\n      if (this.holdingBlockLeft.toBeRenderedItem) {\n        this.onHandItemSwitch(this.holdingBlock.toBeRenderedItem, true)\n        this.holdingBlockLeft.toBeRenderedItem = undefined\n      }\n    })\n\n    this.addDebugOverlay()\n  }\n\n  onHandItemSwitch (item: HandItemBlock | undefined, isLeft = false) {\n    if (!isLeft) {\n      item ??= {\n        type: 'hand',\n      }\n    }\n    const holdingBlock = isLeft ? this.holdingBlockLeft : this.holdingBlock\n    if (!this.currentTextureImage) {\n      holdingBlock.toBeRenderedItem = item\n      return\n    }\n    void holdingBlock.initHandObject(this.material, this.blockstatesModels, this.blocksAtlases, item)\n  }\n\n  changeHandSwingingState (isAnimationPlaying: boolean, isLeft = false) {\n    const holdingBlock = isLeft ? this.holdingBlockLeft : this.holdingBlock\n    if (isAnimationPlaying) {\n      holdingBlock.startSwing()\n    } else {\n      void holdingBlock.stopSwing()\n    }\n  }\n\n  changeBackgroundColor (color: [number, number, number]): void {\n    this.scene.background = new THREE.Color(color[0], color[1], color[2])\n  }\n\n  timeUpdated (newTime: number): void {\n    const nightTime = 13_500\n    const morningStart = 23_000\n    const displayStars = newTime > nightTime && newTime < morningStart\n    if (displayStars) {\n      this.starField.addToScene()\n    } else {\n      this.starField.remove()\n    }\n  }\n\n  debugOverlayAdded = false\n  addDebugOverlay () {\n    if (this.debugOverlayAdded) return\n    this.debugOverlayAdded = true\n    const pane = addNewStat('debug-overlay')\n    setInterval(() => {\n      pane.setVisibility(this.displayStats)\n      if (this.displayStats) {\n        pane.updateText(`C: ${this.renderer.info.render.calls} TR: ${this.renderer.info.render.triangles} TE: ${this.renderer.info.memory.textures} F: ${this.tilesRendered} B: ${this.blocksRendered}`)\n      }\n    }, 100)\n  }\n\n  /**\n   * Optionally update data that are depedendent on the viewer position\n   */\n  updatePosDataChunk (key: string) {\n    const [x, y, z] = key.split(',').map(x => Math.floor(+x / 16))\n    // sum of distances: x + y + z\n    const chunkDistance = Math.abs(x - this.cameraSectionPos.x) + Math.abs(y - this.cameraSectionPos.y) + Math.abs(z - this.cameraSectionPos.z)\n    const section = this.sectionObjects[key].children.find(child => child.name === 'mesh')!\n    section.renderOrder = 500 - chunkDistance\n  }\n\n  updateViewerPosition (pos: Vec3): void {\n    this.viewerPosition = pos\n    const cameraPos = this.camera.position.toArray().map(x => Math.floor(x / 16)) as [number, number, number]\n    this.cameraSectionPos = new Vec3(...cameraPos)\n    // eslint-disable-next-line guard-for-in\n    for (const key in this.sectionObjects) {\n      const value = this.sectionObjects[key]\n      if (!value) continue\n      this.updatePosDataChunk(key)\n    }\n  }\n\n  // debugRecomputedDeletedObjects = 0\n  handleWorkerMessage (data: { geometry: MesherGeometryOutput, key, type }): void {\n    if (data.type !== 'geometry') return\n    let object: THREE.Object3D = this.sectionObjects[data.key]\n    if (object) {\n      this.scene.remove(object)\n      disposeObject(object)\n      delete this.sectionObjects[data.key]\n    }\n\n    const chunkCoords = data.key.split(',')\n    if (!this.loadedChunks[chunkCoords[0] + ',' + chunkCoords[2]] || !data.geometry.positions.length || !this.active) return\n\n    // if (object) {\n    //   this.debugRecomputedDeletedObjects++\n    // }\n\n    // if (!this.initialChunksLoad && this.enableChunksLoadDelay) {\n    //   const newPromise = new Promise(resolve => {\n    //     if (this.droppedFpsPercentage > 0.5) {\n    //       setTimeout(resolve, 1000 / 50 * this.droppedFpsPercentage)\n    //     } else {\n    //       setTimeout(resolve)\n    //     }\n    //   })\n    //   this.promisesQueue.push(newPromise)\n    //   for (const promise of this.promisesQueue) {\n    //     await promise\n    //   }\n    // }\n\n    const geometry = new THREE.BufferGeometry()\n    geometry.setAttribute('position', new THREE.BufferAttribute(data.geometry.positions, 3))\n    geometry.setAttribute('normal', new THREE.BufferAttribute(data.geometry.normals, 3))\n    geometry.setAttribute('color', new THREE.BufferAttribute(data.geometry.colors, 3))\n    geometry.setAttribute('uv', new THREE.BufferAttribute(data.geometry.uvs, 2))\n    geometry.setIndex(data.geometry.indices)\n\n    const mesh = new THREE.Mesh(geometry, this.material)\n    mesh.position.set(data.geometry.sx, data.geometry.sy, data.geometry.sz)\n    mesh.name = 'mesh'\n    object = new THREE.Group()\n    object.add(mesh)\n    // mesh with static dimensions: 16x16x16\n    const staticChunkMesh = new THREE.Mesh(new THREE.BoxGeometry(16, 16, 16), new THREE.MeshBasicMaterial({ color: 0x00_00_00, transparent: true, opacity: 0 }))\n    staticChunkMesh.position.set(data.geometry.sx, data.geometry.sy, data.geometry.sz)\n    const boxHelper = new THREE.BoxHelper(staticChunkMesh, 0xff_ff_00)\n    boxHelper.name = 'helper'\n    object.add(boxHelper)\n    object.name = 'chunk';\n    (object as any).tilesCount = data.geometry.positions.length / 3 / 4;\n    (object as any).blocksCount = data.geometry.blocksCount\n    if (!this.config.showChunkBorders) {\n      boxHelper.visible = false\n    }\n    // should not compute it once\n    if (Object.keys(data.geometry.signs).length) {\n      for (const [posKey, { isWall, isHanging, rotation }] of Object.entries(data.geometry.signs)) {\n        const [x, y, z] = posKey.split(',')\n        const signBlockEntity = this.blockEntities[posKey]\n        if (!signBlockEntity) continue\n        const sign = this.renderSign(new Vec3(+x, +y, +z), rotation, isWall, isHanging, nbt.simplify(signBlockEntity))\n        if (!sign) continue\n        object.add(sign)\n      }\n    }\n    this.sectionObjects[data.key] = object\n    this.updatePosDataChunk(data.key)\n    object.matrixAutoUpdate = false\n    mesh.onAfterRender = (renderer, scene, camera, geometry, material, group) => {\n      // mesh.matrixAutoUpdate = false\n    }\n\n    this.scene.add(object)\n  }\n\n  getSignTexture (position: Vec3, blockEntity, backSide = false) {\n    const chunk = chunkPos(position)\n    let textures = this.chunkTextures.get(`${chunk[0]},${chunk[1]}`)\n    if (!textures) {\n      textures = {}\n      this.chunkTextures.set(`${chunk[0]},${chunk[1]}`, textures)\n    }\n    const texturekey = `${position.x},${position.y},${position.z}`\n    // todo investigate bug and remove this so don't need to clean in section dirty\n    if (textures[texturekey]) return textures[texturekey]\n\n    const PrismarineChat = PrismarineChatLoader(this.version!)\n    const canvas = renderSign(blockEntity, PrismarineChat)\n    if (!canvas) return\n    const tex = new THREE.Texture(canvas)\n    tex.magFilter = THREE.NearestFilter\n    tex.minFilter = THREE.NearestFilter\n    tex.needsUpdate = true\n    textures[texturekey] = tex\n    return tex\n  }\n\n  updateCamera (pos: Vec3 | null, yaw: number, pitch: number): void {\n    if (pos) {\n      new tweenJs.Tween(this.camera.position).to({ x: pos.x, y: pos.y, z: pos.z }, 50).start()\n    }\n    this.camera.rotation.set(pitch, yaw, 0, 'ZYX')\n  }\n\n  render () {\n    tweenJs.update()\n    // eslint-disable-next-line @typescript-eslint/non-nullable-type-assertion-style\n    const cam = this.camera instanceof THREE.Group ? this.camera.children.find(child => child instanceof THREE.PerspectiveCamera) as THREE.PerspectiveCamera : this.camera\n    this.renderer.render(this.scene, cam)\n    if (this.config.displayHand) {\n      this.holdingBlock.render(this.camera, this.renderer, viewer.ambientLight, viewer.directionalLight)\n      this.holdingBlockLeft.render(this.camera, this.renderer, viewer.ambientLight, viewer.directionalLight)\n    }\n  }\n\n  renderSign (position: Vec3, rotation: number, isWall: boolean, isHanging: boolean, blockEntity) {\n    const tex = this.getSignTexture(position, blockEntity)\n\n    if (!tex) return\n\n    // todo implement\n    // const key = JSON.stringify({ position, rotation, isWall })\n    // if (this.signsCache.has(key)) {\n    //   console.log('cached', key)\n    // } else {\n    //   this.signsCache.set(key, tex)\n    // }\n\n    const mesh = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), new THREE.MeshBasicMaterial({ map: tex, transparent: true }))\n    mesh.renderOrder = 999\n\n    const lineHeight = 7 / 16\n    const scaleFactor = isHanging ? 1.3 : 1\n    mesh.scale.set(1 * scaleFactor, lineHeight * scaleFactor, 1 * scaleFactor)\n\n    const thickness = (isHanging ? 2 : 1.5) / 16\n    const wallSpacing = 0.25 / 16\n    if (isWall && !isHanging) {\n      mesh.position.set(0, 0, -0.5 + thickness + wallSpacing + 0.0001)\n    } else {\n      mesh.position.set(0, 0, thickness / 2 + 0.0001)\n    }\n\n    const group = new THREE.Group()\n    group.rotation.set(\n      0,\n      -THREE.MathUtils.degToRad(rotation * (isWall ? 90 : 45 / 2)),\n      0\n    )\n    group.add(mesh)\n    const height = (isHanging ? 10 : 8) / 16\n    const heightOffset = (isHanging ? 0 : isWall ? 4.333 : 9.333) / 16\n    const textPosition = height / 2 + heightOffset\n    group.position.set(position.x + 0.5, position.y + textPosition, position.z + 0.5)\n    return group\n  }\n\n  updateLight (chunkX: number, chunkZ: number) {\n    // set all sections in the chunk dirty\n    for (let y = this.worldConfig.minY; y < this.worldConfig.worldHeight; y += 16) {\n      this.setSectionDirty(new Vec3(chunkX, y, chunkZ))\n    }\n  }\n\n  async doHmr () {\n    const oldSections = { ...this.sectionObjects }\n    this.sectionObjects = {} // skip clearing\n    worldView!.unloadAllChunks()\n    void this.setVersion(this.version, this.texturesVersion)\n    this.sectionObjects = oldSections\n    // this.rerenderAllChunks()\n\n    // supply new data\n    await worldView!.updatePosition(bot.entity.position, true)\n  }\n\n  rerenderAllChunks () { // todo not clear what to do with loading chunks\n    for (const key of Object.keys(this.sectionObjects)) {\n      const [x, y, z] = key.split(',').map(Number)\n      this.setSectionDirty(new Vec3(x, y, z))\n    }\n  }\n\n  updateShowChunksBorder (value: boolean) {\n    this.config.showChunkBorders = value\n    for (const object of Object.values(this.sectionObjects)) {\n      for (const child of object.children) {\n        if (child.name === 'helper') {\n          child.visible = value\n        }\n      }\n    }\n  }\n\n  resetWorld () {\n    super.resetWorld()\n\n    for (const mesh of Object.values(this.sectionObjects)) {\n      this.scene.remove(mesh)\n    }\n  }\n\n  getLoadedChunksRelative (pos: Vec3, includeY = false) {\n    const [currentX, currentY, currentZ] = sectionPos(pos)\n    return Object.fromEntries(Object.entries(this.sectionObjects).map(([key, o]) => {\n      const [xRaw, yRaw, zRaw] = key.split(',').map(Number)\n      const [x, y, z] = sectionPos({ x: xRaw, y: yRaw, z: zRaw })\n      const setKey = includeY ? `${x - currentX},${y - currentY},${z - currentZ}` : `${x - currentX},${z - currentZ}`\n      return [setKey, o]\n    }))\n  }\n\n  cleanChunkTextures (x, z) {\n    const textures = this.chunkTextures.get(`${Math.floor(x / 16)},${Math.floor(z / 16)}`) ?? {}\n    for (const key of Object.keys(textures)) {\n      textures[key].dispose()\n      delete textures[key]\n    }\n  }\n\n  readdChunks () {\n    for (const key of Object.keys(this.sectionObjects)) {\n      this.scene.remove(this.sectionObjects[key])\n    }\n    setTimeout(() => {\n      for (const key of Object.keys(this.sectionObjects)) {\n        this.scene.add(this.sectionObjects[key])\n      }\n    }, 500)\n  }\n\n  disableUpdates (children = this.scene.children) {\n    for (const child of children) {\n      child.matrixWorldNeedsUpdate = false\n      this.disableUpdates(child.children ?? [])\n    }\n  }\n\n  removeColumn (x, z) {\n    super.removeColumn(x, z)\n\n    this.cleanChunkTextures(x, z)\n    for (let y = this.worldConfig.minY; y < this.worldConfig.worldHeight; y += 16) {\n      this.setSectionDirty(new Vec3(x, y, z), false)\n      const key = `${x},${y},${z}`\n      const mesh = this.sectionObjects[key]\n      if (mesh) {\n        this.scene.remove(mesh)\n        disposeObject(mesh)\n      }\n      delete this.sectionObjects[key]\n    }\n  }\n\n  setSectionDirty (...args: Parameters<WorldRendererCommon['setSectionDirty']>) {\n    const [pos] = args\n    this.cleanChunkTextures(pos.x, pos.z) // todo don't do this!\n    super.setSectionDirty(...args)\n  }\n\n  setHighlightCursorBlock (blockPos: typeof this.cursorBlock, shapePositions?: Array<{ position: any; width: any; height: any; depth: any; }>): void {\n    this.cursorBlock = blockPos\n    if (blockPos && this.interactionLines && blockPos.equals(this.interactionLines.blockPos)) {\n      return\n    }\n    if (this.interactionLines !== null) {\n      this.scene.remove(this.interactionLines.mesh)\n      this.interactionLines = null\n    }\n    if (blockPos === null) {\n      return\n    }\n\n    const group = new THREE.Group()\n    for (const { position, width, height, depth } of shapePositions ?? []) {\n      const scale = [1.0001 * width, 1.0001 * height, 1.0001 * depth] as const\n      const geometry = new THREE.BoxGeometry(...scale)\n      const lines = new LineSegmentsGeometry().fromEdgesGeometry(new THREE.EdgesGeometry(geometry))\n      const wireframe = new Wireframe(lines, this.threejsCursorLineMaterial)\n      const pos = blockPos.plus(position)\n      wireframe.position.set(pos.x, pos.y, pos.z)\n      wireframe.computeLineDistances()\n      group.add(wireframe)\n    }\n    this.scene.add(group)\n    this.interactionLines = { blockPos, mesh: group }\n  }\n\n  static getRendererInfo (renderer: THREE.WebGLRenderer) {\n    try {\n      const gl = renderer.getContext()\n      return `${gl.getParameter(gl.getExtension('WEBGL_debug_renderer_info')!.UNMASKED_RENDERER_WEBGL)}`\n    } catch (err) {\n      console.warn('Failed to get renderer info', err)\n    }\n  }\n}\n\nclass StarField {\n  points?: THREE.Points\n  private _enabled = true\n  get enabled () {\n    return this._enabled\n  }\n\n  set enabled (value) {\n    this._enabled = value\n    if (this.points) {\n      this.points.visible = value\n    }\n  }\n\n  constructor (private readonly scene: THREE.Scene) {\n  }\n\n  addToScene () {\n    if (this.points || !this.enabled) return\n\n    const radius = 80\n    const depth = 50\n    const count = 7000\n    const factor = 7\n    const saturation = 10\n    const speed = 0.2\n\n    const geometry = new THREE.BufferGeometry()\n\n    const genStar = r => new THREE.Vector3().setFromSpherical(new THREE.Spherical(r, Math.acos(1 - Math.random() * 2), Math.random() * 2 * Math.PI))\n\n    const positions = [] as number[]\n    const colors = [] as number[]\n    const sizes = Array.from({ length: count }, () => (0.5 + 0.5 * Math.random()) * factor)\n    const color = new THREE.Color()\n    let r = radius + depth\n    const increment = depth / count\n    for (let i = 0; i < count; i++) {\n      r -= increment * Math.random()\n      positions.push(...genStar(r).toArray())\n      color.setHSL(i / count, saturation, 0.9)\n      colors.push(color.r, color.g, color.b)\n    }\n\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3))\n    geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3))\n    geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1))\n\n    // Create a material\n    const material = new StarfieldMaterial()\n    material.blending = THREE.AdditiveBlending\n    material.depthTest = false\n    material.transparent = true\n\n    // Create points and add them to the scene\n    this.points = new THREE.Points(geometry, material)\n    this.scene.add(this.points)\n\n    const clock = new THREE.Clock()\n    this.points.onBeforeRender = (renderer, scene, camera) => {\n      this.points?.position.copy?.(camera.position)\n      material.uniforms.time.value = clock.getElapsedTime() * speed\n    }\n    this.points.renderOrder = -1\n  }\n\n  remove () {\n    if (this.points) {\n      this.points.geometry.dispose();\n      (this.points.material as THREE.Material).dispose()\n      this.scene.remove(this.points)\n\n      this.points = undefined\n    }\n  }\n}\n\nconst version = parseInt(THREE.REVISION.replaceAll(/\\D+/g, ''), 10)\nclass StarfieldMaterial extends THREE.ShaderMaterial {\n  constructor () {\n    super({\n      uniforms: { time: { value: 0 }, fade: { value: 1 } },\n      vertexShader: /* glsl */ `\n                uniform float time;\n                attribute float size;\n                varying vec3 vColor;\n                attribute vec3 color;\n                void main() {\n                vColor = color;\n                vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n                gl_PointSize = 0.7 * size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));\n                gl_Position = projectionMatrix * mvPosition;\n            }`,\n      fragmentShader: /* glsl */ `\n                uniform sampler2D pointTexture;\n                uniform float fade;\n                varying vec3 vColor;\n                void main() {\n                float opacity = 1.0;\n                gl_FragColor = vec4(vColor, 1.0);\n\n                #include <tonemapping_fragment>\n                #include <${version >= 154 ? 'colorspace_fragment' : 'encodings_fragment'}>\n            }`,\n    })\n  }\n}\n","export const versionToNumber = (ver: string) => {\n  const [x, y = '0', z = '0'] = ver.split('.')\n  return +`${x.padStart(2, '0')}${y.padStart(2, '0')}${z.padStart(2, '0')}`\n}\n\nexport const versionToMajor = (version: string) => {\n  const [x, y = '0'] = version.split('.')\n  return `${x.padStart(2, '0')}.${y.padStart(2, '0')}`\n}\n\nexport const versionsMapToMajor = <T> (versionsMap: Record<string, T>) => {\n  const majorVersions = {} as Record<string, T>\n  for (const [ver, data] of Object.entries(versionsMap)) {\n    const major = versionToMajor(ver)\n    majorVersions[major] = data\n  }\n  return majorVersions\n}\n","import { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\nimport * as nbt from 'prismarine-nbt'\n\nexport const displayClientChat = (text: string) => {\n  const message = {\n    text\n  }\n  if (versionToNumber(bot.version) >= versionToNumber('1.19')) {\n    bot._client.emit('systemChat', {\n      formattedMessage: JSON.stringify(message),\n      position: 0,\n      sender: 'minecraft:chat'\n    })\n    return\n  }\n  bot._client.emit('chat', {\n    message: JSON.stringify(message),\n    position: 0,\n    sender: 'minecraft:chat'\n  })\n}\n\nexport const parseFormattedMessagePacket = (arg) => {\n  if (typeof arg === 'object') {\n    try {\n      return {\n        formatted: nbt.simplify(arg),\n        plain: ''\n      }\n    } catch (err) {\n      console.warn('Failed to parse formatted message', arg, err)\n      return {\n        plain: JSON.stringify(arg)\n      }\n    }\n  }\n  return {\n    plain: String(arg)\n  }\n}\n","// this should actually be moved to mineflayer / prismarine-viewer\n\nimport { fromFormattedString, TextComponent } from '@xmcl/text-component'\nimport type { IndexedData } from 'minecraft-data'\nimport { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\n\nexport type MessageFormatPart = Pick<TextComponent, 'hoverEvent' | 'clickEvent'> & {\n  text: string\n  color?: string\n  bold?: boolean\n  italic?: boolean\n  underlined?: boolean\n  strikethrough?: boolean\n  obfuscated?: boolean\n}\n\ntype MessageInput = {\n  text?: string\n  translate?: string\n  with?: Array<MessageInput | string>\n  color?: string\n  bold?: boolean\n  italic?: boolean\n  underlined?: boolean\n  strikethrough?: boolean\n  obfuscated?: boolean\n  extra?: MessageInput[]\n  json?: any\n}\n\nconst global = globalThis as any\n\n// todo move to sign-renderer, replace with prismarine-chat, fix mcData issue!\nexport const formatMessage = (message: MessageInput, mcData: IndexedData = global.loadedData) => {\n  let msglist: MessageFormatPart[] = []\n\n  const readMsg = (msg: MessageInput) => {\n    const styles = {\n      color: msg.color,\n      bold: !!msg.bold,\n      italic: !!msg.italic,\n      underlined: !!msg.underlined,\n      strikethrough: !!msg.strikethrough,\n      obfuscated: !!msg.obfuscated\n    }\n\n    if (msg.text) {\n      msglist.push({\n        ...msg,\n        text: msg.text,\n        ...styles\n      })\n    } else if (msg.translate) {\n      const tText = mcData?.language[msg.translate] ?? msg.translate\n\n      if (msg.with) {\n        const splitted = tText.split(/%s|%\\d+\\$s/g)\n\n        let i = 0\n        for (const [j, part] of splitted.entries()) {\n          msglist.push({ text: part, ...styles })\n\n          if (j + 1 < splitted.length) {\n            if (msg.with[i]) {\n              const msgWith = msg.with[i]\n              if (typeof msgWith === 'string') {\n                readMsg({\n                  ...styles,\n                  text: msgWith\n                })\n              } else {\n                readMsg({\n                  ...styles,\n                  ...msgWith\n                })\n              }\n            }\n            i++\n          }\n        }\n      } else {\n        msglist.push({\n          ...msg,\n          text: tText,\n          ...styles\n        })\n      }\n    }\n\n    if (msg.extra) {\n      for (const ex of msg.extra) {\n        readMsg({ ...styles, ...ex })\n      }\n    }\n  }\n\n  readMsg(message)\n\n  const flat = (msg) => {\n    return [msg, msg.extra?.flatMap(flat) ?? []]\n  }\n\n  msglist = msglist.map(msg => {\n    // normalize \n    if (!msg.text.includes?.('')) return msg\n    const newMsg = fromFormattedString(msg.text)\n    return flat(newMsg)\n  }).flat(Infinity)\n\n  return msglist\n}\n\nconst blockToItemRemaps = {\n  water: 'water_bucket',\n  lava: 'lava_bucket',\n  redstone_wire: 'redstone',\n  tripwire: 'tripwire_hook'\n}\n\nexport const getItemFromBlock = (block: import('prismarine-block').Block) => {\n  const item = global.loadedData.itemsByName[blockToItemRemaps[block.name] ?? block.name]\n  return item\n}\n","module.exports = {\n  'motd': 'A Minecraft Server \\nRunning flying-squid',\n  // host: '',\n  // eslint-disable-next-line unicorn/numeric-separators-style\n  'port': 25565,\n  'max-players': 10,\n  'online-mode': false,\n  'gameMode': 0,\n  'difficulty': 0,\n  'worldFolder': 'world',\n  // todo set sid, disable entities auto-spawn\n  'generation': {\n    // grass_field\n    // diamond_square\n    // empty\n    // superflat\n    // all_the_blocks\n    // nether\n    'name': 'diamond_square',\n    options: {}\n    // 'options': {\n    //   'worldHeight': 80\n    // }\n  },\n  'kickTimeout': 10_000,\n  'plugins': {},\n  'modpe': false,\n  'view-distance': 2,\n  'player-list-text': {\n    'header': 'Flying squid',\n    'footer': 'Integrated server'\n  },\n  keepAlive: false,\n  'everybody-op': true,\n  'max-entities': 100,\n  'version': '1.18.2',\n  versionMajor: '1.18'\n}\n","import latest_gui_title_minecraft from 'mc-assets/dist/other-textures/latest/gui/title/minecraft.png'\nimport other_textures_1_19_gui_icons from 'mc-assets/dist/other-textures/1.19/gui/icons.png'\nimport other_textures_latest_gui_widgets from 'mc-assets/dist/other-textures/latest/gui/widgets.png'\nimport other_textures_latest_gui_bars from 'mc-assets/dist/other-textures/latest/gui/bars.png'\nimport latest_gui_container_inventory from 'mc-assets/dist/other-textures/latest/gui/container/inventory.png'\nimport latest_gui_container_shulker_box from 'mc-assets/dist/other-textures/latest/gui/container/shulker_box.png'\nimport latest_gui_container_generic_54 from 'mc-assets/dist/other-textures/latest/gui/container/generic_54.png'\nimport latest_gui_container_furnace from 'mc-assets/dist/other-textures/latest/gui/container/furnace.png'\nimport latest_gui_container_crafting_table from 'mc-assets/dist/other-textures/latest/gui/container/crafting_table.png'\nimport latest_gui_container_dispenser from 'mc-assets/dist/other-textures/latest/gui/container/dispenser.png'\nimport latest_gui_container_hopper from 'mc-assets/dist/other-textures/latest/gui/container/hopper.png'\nimport latest_gui_container_horse from 'mc-assets/dist/other-textures/latest/gui/container/horse.png'\nimport latest_gui_container_villager2 from 'mc-assets/dist/other-textures/latest/gui/container/villager2.png'\nimport latest_gui_container_enchanting_table from 'mc-assets/dist/other-textures/latest/gui/container/enchanting_table.png'\nimport latest_gui_container_anvil from 'mc-assets/dist/other-textures/latest/gui/container/anvil.png'\nimport latest_gui_container_beacon from 'mc-assets/dist/other-textures/latest/gui/container/beacon.png'\n\nexport const appReplacableResources: { [key in Keys]: { content: any, resourcePackPath: string, cssVar?: string, cssVarRepeat?: number } } = {\n\n  'latest_gui_title_minecraft': {\n    content: latest_gui_title_minecraft,\n    resourcePackPath: 'minecraft/textures/gui/title/minecraft.png',\n    ...{\"cssVar\":\"--title-gui\"}\n  },\n\n  'other_textures_1_19_gui_icons': {\n    content: other_textures_1_19_gui_icons,\n    resourcePackPath: 'minecraft/textures/gui/icons.png',\n    ...{\"cssVar\":\"--gui-icons\",\"cssVarRepeat\":2}\n  },\n\n  'other_textures_latest_gui_widgets': {\n    content: other_textures_latest_gui_widgets,\n    resourcePackPath: 'minecraft/textures/gui/widgets.png',\n    ...{\"cssVar\":\"--widgets-gui-atlas\"}\n  },\n\n  'other_textures_latest_gui_bars': {\n    content: other_textures_latest_gui_bars,\n    resourcePackPath: 'minecraft/textures/gui/bars.png',\n    ...{\"cssVar\":\"--bars-gui-atlas\"}\n  },\n\n  'latest_gui_container_inventory': {\n    content: latest_gui_container_inventory,\n    resourcePackPath: 'minecraft/textures/gui/container/inventory.png',\n    ...{}\n  },\n\n  'latest_gui_container_shulker_box': {\n    content: latest_gui_container_shulker_box,\n    resourcePackPath: 'minecraft/textures/gui/container/shulker_box.png',\n    ...{}\n  },\n\n  'latest_gui_container_generic_54': {\n    content: latest_gui_container_generic_54,\n    resourcePackPath: 'minecraft/textures/gui/container/generic_54.png',\n    ...{}\n  },\n\n  'latest_gui_container_furnace': {\n    content: latest_gui_container_furnace,\n    resourcePackPath: 'minecraft/textures/gui/container/furnace.png',\n    ...{}\n  },\n\n  'latest_gui_container_crafting_table': {\n    content: latest_gui_container_crafting_table,\n    resourcePackPath: 'minecraft/textures/gui/container/crafting_table.png',\n    ...{}\n  },\n\n  'latest_gui_container_dispenser': {\n    content: latest_gui_container_dispenser,\n    resourcePackPath: 'minecraft/textures/gui/container/dispenser.png',\n    ...{}\n  },\n\n  'latest_gui_container_hopper': {\n    content: latest_gui_container_hopper,\n    resourcePackPath: 'minecraft/textures/gui/container/hopper.png',\n    ...{}\n  },\n\n  'latest_gui_container_horse': {\n    content: latest_gui_container_horse,\n    resourcePackPath: 'minecraft/textures/gui/container/horse.png',\n    ...{}\n  },\n\n  'latest_gui_container_villager2': {\n    content: latest_gui_container_villager2,\n    resourcePackPath: 'minecraft/textures/gui/container/villager2.png',\n    ...{}\n  },\n\n  'latest_gui_container_enchanting_table': {\n    content: latest_gui_container_enchanting_table,\n    resourcePackPath: 'minecraft/textures/gui/container/enchanting_table.png',\n    ...{}\n  },\n\n  'latest_gui_container_anvil': {\n    content: latest_gui_container_anvil,\n    resourcePackPath: 'minecraft/textures/gui/container/anvil.png',\n    ...{}\n  },\n\n  'latest_gui_container_beacon': {\n    content: latest_gui_container_beacon,\n    resourcePackPath: 'minecraft/textures/gui/container/beacon.png',\n    ...{}\n  },\n}\ntype Keys = 'latest_gui_title_minecraft' | 'other_textures_1_19_gui_icons' | 'other_textures_latest_gui_widgets' | 'other_textures_latest_gui_bars' | 'latest_gui_container_inventory' | 'latest_gui_container_shulker_box' | 'latest_gui_container_generic_54' | 'latest_gui_container_furnace' | 'latest_gui_container_crafting_table' | 'latest_gui_container_dispenser' | 'latest_gui_container_hopper' | 'latest_gui_container_horse' | 'latest_gui_container_villager2' | 'latest_gui_container_enchanting_table' | 'latest_gui_container_anvil' | 'latest_gui_container_beacon'\nexport const resourcesContentOriginal = {\n\n  'latest_gui_title_minecraft': latest_gui_title_minecraft,\n\n  'other_textures_1_19_gui_icons': other_textures_1_19_gui_icons,\n\n  'other_textures_latest_gui_widgets': other_textures_latest_gui_widgets,\n\n  'other_textures_latest_gui_bars': other_textures_latest_gui_bars,\n\n  'latest_gui_container_inventory': latest_gui_container_inventory,\n\n  'latest_gui_container_shulker_box': latest_gui_container_shulker_box,\n\n  'latest_gui_container_generic_54': latest_gui_container_generic_54,\n\n  'latest_gui_container_furnace': latest_gui_container_furnace,\n\n  'latest_gui_container_crafting_table': latest_gui_container_crafting_table,\n\n  'latest_gui_container_dispenser': latest_gui_container_dispenser,\n\n  'latest_gui_container_hopper': latest_gui_container_hopper,\n\n  'latest_gui_container_horse': latest_gui_container_horse,\n\n  'latest_gui_container_villager2': latest_gui_container_villager2,\n\n  'latest_gui_container_enchanting_table': latest_gui_container_enchanting_table,\n\n  'latest_gui_container_anvil': latest_gui_container_anvil,\n\n  'latest_gui_container_beacon': latest_gui_container_beacon,\n}\n","//@ts-check\n\nimport { proxy, ref, subscribe } from 'valtio'\nimport { WorldWarp } from 'flying-squid/dist/lib/modules/warps'\nimport { pointerLock } from './utils'\nimport type { OptionsGroupType } from './optionsGuiScheme'\n\n// todo: refactor structure with support of hideNext=false\n\nconst notHideableModalsWithoutForce = new Set(['app-status'])\n\ntype Modal = ({ elem?: HTMLElement & Record<string, any> } & { reactType: string })\n\ntype ContextMenuItem = { callback; label }\n\nexport const activeModalStack: Modal[] = proxy([])\n\nexport const insertActiveModalStack = (name: string, newModalStack = activeModalStacks[name]) => {\n  hideModal(undefined, undefined, { restorePrevious: false, force: true })\n  activeModalStack.splice(0, activeModalStack.length, ...newModalStack)\n  const last = activeModalStack.at(-1)\n  if (last) showModalInner(last)\n}\n\nexport const activeModalStacks: Record<string, Modal[]> = {}\n\nwindow.activeModalStack = activeModalStack\n\nsubscribe(activeModalStack, () => {\n  if (activeModalStack.length === 0) {\n    if (isGameActive(false)) {\n      void pointerLock.requestPointerLock()\n    }\n  } else {\n    document.exitPointerLock?.()\n  }\n})\n\n/**\n * @returns true if operation was successful\n */\nconst showModalInner = (modal: Modal) => {\n  const cancel = modal.elem?.show?.()\n  return true\n}\n\nexport const showModal = (elem: /* (HTMLElement & Record<string, any>) |  */{ reactType: string }) => {\n  const resolved = elem\n  const curModal = activeModalStack.at(-1)\n  if (/* elem === curModal?.elem ||  */(elem.reactType && elem.reactType === curModal?.reactType) || !showModalInner(resolved)) return\n  activeModalStack.push(resolved)\n}\n\n/**\n *\n * @returns true if previous modal was restored\n */\nexport const hideModal = (modal = activeModalStack.at(-1), data: any = undefined, options: { force?: boolean; restorePrevious?: boolean } = {}) => {\n  const { force = false, restorePrevious = true } = options\n  if (!modal) return\n  let cancel = notHideableModalsWithoutForce.has(modal.reactType) ? !force : undefined\n  if (force) {\n    cancel = undefined\n  }\n\n  if (!cancel) {\n    const lastModal = activeModalStack.at(-1)\n    for (let i = activeModalStack.length - 1; i >= 0; i--) {\n      if (activeModalStack[i].reactType === modal.reactType) {\n        activeModalStack.splice(i, 1)\n        break\n      }\n    }\n    const newModal = activeModalStack.at(-1)\n    if (newModal && lastModal !== newModal && restorePrevious) {\n      // would be great to ignore cancel I guess?\n      showModalInner(newModal)\n    }\n    return true\n  }\n}\n\nexport const hideCurrentModal = (_data?, onHide?: () => void) => {\n  if (hideModal(undefined, undefined)) {\n    onHide?.()\n  }\n}\n\nexport const openOptionsMenu = (group: OptionsGroupType) => {\n  showModal({ reactType: `options-${group}` })\n}\n\n// ---\n\nexport const currentContextMenu = proxy({ items: [] as ContextMenuItem[] | null, x: 0, y: 0 })\n\nexport const showContextmenu = (items: ContextMenuItem[], { clientX, clientY }) => {\n  Object.assign(currentContextMenu, {\n    items,\n    x: clientX,\n    y: clientY,\n  })\n}\n\n// ---\n\nexport type AppConfig = {\n  // defaultHost?: string\n  // defaultHostSave?: string\n  defaultProxy?: string\n  // defaultProxySave?: string\n  // defaultVersion?: string\n  peerJsServer?: string\n  peerJsServerFallback?: string\n  promoteServers?: Array<{ ip, description, version? }>\n  mapsProvider?: string\n}\n\nexport const miscUiState = proxy({\n  currentDisplayQr: null as string | null,\n  currentTouch: null as boolean | null,\n  hasErrors: false,\n  singleplayer: false,\n  flyingSquid: false,\n  wanOpened: false,\n  wanOpening: false,\n  /** wether game hud is shown (in playing state) */\n  gameLoaded: false,\n  showUI: true,\n  loadedServerIndex: '',\n  /** currently trying to load or loaded mc version, after all data is loaded */\n  loadedDataVersion: null as string | null,\n  appLoaded: false,\n  usingGamepadInput: false,\n  appConfig: null as AppConfig | null,\n  displaySearchInput: false,\n})\n\nexport const loadedGameState = proxy({\n  username: '',\n  serverIp: '' as string | null,\n  usingServerResourcePack: false,\n})\n\nexport const isGameActive = (foregroundCheck: boolean) => {\n  if (foregroundCheck && activeModalStack.length) return false\n  return miscUiState.gameLoaded\n}\n\nwindow.miscUiState = miscUiState\n\n// state that is not possible to get via bot and in-game specific\nexport const gameAdditionalState = proxy({\n  isFlying: false,\n  isSprinting: false,\n  isSneaking: false,\n  isZooming: false,\n  warps: [] as WorldWarp[]\n})\n\nwindow.gameAdditionalState = gameAdditionalState\n\n// todo restore auto-save on interval for player data! (or implement it in flying squid since there is already auto-save for world)\n","// workaround for mineflayer\nprocess.versions.node = '18.0.0'\n\nif (!navigator.getGamepads) {\n  console.warn('navigator.getGamepads is not available, adding a workaround')\n  navigator.getGamepads ??= () => []\n}\n","import { join } from 'path'\nimport { promisify } from 'util'\nimport fs from 'fs'\nimport sanitizeFilename from 'sanitize-filename'\nimport { oneOf } from '@zardoy/utils'\nimport * as browserfs from 'browserfs'\nimport { options, resetOptions } from './optionsStorage'\n\nimport { fsState, loadSave } from './loadSave'\nimport { installTexturePack, installTexturePackFromHandle, updateTexturePackInstalledState } from './resourcePack'\nimport { miscUiState } from './globalState'\nimport { setLoadingScreenStatus } from './utils'\nconst { GoogleDriveFileSystem } = require('google-drive-browserfs/src/backends/GoogleDrive') // disable type checking\n\nbrowserfs.install(window)\nconst defaultMountablePoints = {\n  '/world': { fs: 'LocalStorage' }, // will be removed in future\n  '/data': { fs: 'IndexedDB' },\n  '/resourcepack': { fs: 'InMemory' }, // temporary storage for currently loaded resource pack\n}\nbrowserfs.configure({\n  fs: 'MountableFileSystem',\n  options: defaultMountablePoints,\n}, async (e) => {\n  // todo disable singleplayer button\n  if (e) throw e\n  await updateTexturePackInstalledState()\n  miscUiState.appLoaded = true\n})\n\nexport const forceCachedDataPaths = {}\nexport const forceRedirectPaths = {}\n\nwindow.fs = fs\n//@ts-expect-error\nfs.promises = new Proxy(Object.fromEntries(['readFile', 'writeFile', 'stat', 'mkdir', 'rmdir', 'unlink', 'rename', /* 'copyFile',  */'readdir'].map(key => [key, promisify(fs[key])])), {\n  get (target, p: string, receiver) {\n    if (!target[p]) throw new Error(`Not implemented fs.promises.${p}`)\n    return (...args) => {\n      // browser fs bug: if path doesn't start with / dirname will return . which would cause infinite loop, so we need to normalize paths\n      if (typeof args[0] === 'string' && !args[0].startsWith('/')) args[0] = '/' + args[0]\n      const toRemap = Object.entries(forceRedirectPaths).find(([from]) => args[0].startsWith(from))\n      if (toRemap) {\n        args[0] = args[0].replace(toRemap[0], toRemap[1])\n      }\n      // Write methods\n      // todo issue one-time warning (in chat I guess)\n      const readonly = fsState.isReadonly && !(args[0].startsWith('/data') && !fsState.inMemorySave) // allow copying worlds from external providers such as zip\n      if (readonly) {\n        if (oneOf(p, 'readFile', 'writeFile') && forceCachedDataPaths[args[0]]) {\n          if (p === 'readFile') {\n            return Promise.resolve(forceCachedDataPaths[args[0]])\n          } else if (p === 'writeFile') {\n            forceCachedDataPaths[args[0]] = args[1]\n            console.debug('Skipped writing to readonly fs', args[0])\n            return Promise.resolve()\n          }\n        }\n        if (oneOf(p, 'writeFile', 'mkdir', 'rename')) return\n      }\n      if (p === 'open' && fsState.isReadonly) {\n        args[1] = 'r' // read-only, zipfs throw otherwise\n      }\n      if (p === 'readFile') {\n        fsState.openReadOperations++\n      } else if (p === 'writeFile') {\n        fsState.openWriteOperations++\n      }\n      return target[p](...args).finally(() => {\n        if (p === 'readFile') {\n          fsState.openReadOperations--\n        } else if (p === 'writeFile') {\n          fsState.openWriteOperations--\n        }\n      })\n    }\n  }\n})\n//@ts-expect-error\nfs.promises.open = async (...args) => {\n  //@ts-expect-error\n  const fd = await promisify(fs.open)(...args)\n  return {\n    ...Object.fromEntries(['read', 'write', 'close'].map(x => [x, async (...args) => {\n      return new Promise(resolve => {\n        // todo it results in world corruption on interactions eg block placements\n        if (x === 'write' && fsState.isReadonly) {\n          resolve({ buffer: Buffer.from([]), bytesRead: 0 })\n          return\n        }\n\n        if (x === 'read') {\n          fsState.openReadOperations++\n        } else if (x === 'write' || x === 'close') {\n          fsState.openWriteOperations++\n        }\n        fs[x](fd, ...args, (err, bytesRead, buffer) => {\n          if (x === 'read') {\n            fsState.openReadOperations--\n          } else if (x === 'write' || x === 'close') {\n            // todo that's not correct\n            fsState.openWriteOperations--\n          }\n          if (err) throw err\n          // todo if readonly probably there is no need to open at all (return some mocked version - check reload)?\n          if (x === 'write' && !fsState.isReadonly) {\n            // flush data, though alternatively we can rely on close in unload\n            fs.fsync(fd, () => { })\n          }\n          resolve({ buffer, bytesRead })\n        })\n      })\n    }])),\n    // for debugging\n    fd,\n    filename: args[0],\n    async close () {\n      return new Promise<void>(resolve => {\n        fs.close(fd, (err) => {\n          if (err) {\n            throw err\n          } else {\n            resolve()\n          }\n        })\n      })\n    }\n  }\n}\n\n// for testing purposes, todo move it to core patch\nconst removeFileRecursiveSync = (path) => {\n  for (const file of fs.readdirSync(path)) {\n    const curPath = join(path, file)\n    if (fs.lstatSync(curPath).isDirectory()) {\n      // recurse\n      removeFileRecursiveSync(curPath)\n      fs.rmdirSync(curPath)\n    } else {\n      // delete file\n      fs.unlinkSync(curPath)\n    }\n  }\n}\n\nwindow.removeFileRecursiveSync = removeFileRecursiveSync\n\nexport const mkdirRecursive = async (path: string) => {\n  const parts = path.split('/')\n  let current = ''\n  for (const part of parts) {\n    current += part + '/'\n    try {\n      // eslint-disable-next-line no-await-in-loop\n      await fs.promises.mkdir(current)\n    } catch (err) {\n    }\n  }\n}\n\nexport const uniqueFileNameFromWorldName = async (title: string, savePath: string) => {\n  const name = sanitizeFilename(title)\n  let resultPath!: string\n  // getUniqueFolderName\n  let i = 0\n  let free = false\n  while (!free) {\n    try {\n      resultPath = `${savePath.replace(/\\$/, '')}/${name}${i === 0 ? '' : `-${i}`}`\n      // eslint-disable-next-line no-await-in-loop\n      await fs.promises.stat(resultPath)\n      i++\n    } catch (err) {\n      free = true\n    }\n  }\n  return resultPath\n}\n\nexport const mountExportFolder = async () => {\n  let handle: FileSystemDirectoryHandle\n  try {\n    handle = await showDirectoryPicker({\n      id: 'world-export',\n    })\n  } catch (err) {\n    if (err instanceof DOMException && err.name === 'AbortError') return\n    throw err\n  }\n  if (!handle) return false\n  await new Promise<void>(resolve => {\n    browserfs.configure({\n      fs: 'MountableFileSystem',\n      options: {\n        ...defaultMountablePoints,\n        '/export': {\n          fs: 'FileSystemAccess',\n          options: {\n            handle\n          }\n        }\n      },\n    }, (e) => {\n      if (e) throw e\n      resolve()\n    })\n  })\n  return true\n}\n\nlet googleDriveFileSystem\n\n/** Only cached! */\nexport const googleDriveGetFileIdFromPath = (path: string) => {\n  return googleDriveFileSystem._getExistingFileId(path)\n}\n\nexport const mountGoogleDriveFolder = async (readonly: boolean, rootId: string) => {\n  googleDriveFileSystem = new GoogleDriveFileSystem()\n  googleDriveFileSystem.rootDirId = rootId\n  googleDriveFileSystem.isReadonly = readonly\n  await new Promise<void>(resolve => {\n    browserfs.configure({\n      fs: 'MountableFileSystem',\n      options: {\n        ...defaultMountablePoints,\n        '/google': googleDriveFileSystem\n      },\n    }, (e) => {\n      if (e) throw e\n      resolve()\n    })\n  })\n  fsState.isReadonly = readonly\n  fsState.syncFs = false\n  fsState.inMemorySave = false\n  fsState.remoteBackend = true\n  return true\n}\n\nexport async function removeFileRecursiveAsync (path) {\n  const errors = [] as Array<[string, Error]>\n  try {\n    const files = await fs.promises.readdir(path)\n\n    // Use Promise.all to parallelize file/directory removal\n    await Promise.all(files.map(async (file) => {\n      const curPath = join(path, file)\n      const stats = await fs.promises.stat(curPath)\n      if (stats.isDirectory()) {\n        // Recurse\n        await removeFileRecursiveAsync(curPath)\n      } else {\n        // Delete file\n        await fs.promises.unlink(curPath)\n      }\n    }))\n\n    // After removing all files/directories, remove the current directory\n    await fs.promises.rmdir(path)\n  } catch (error) {\n    errors.push([path, error])\n  }\n\n  if (errors.length) {\n    setTimeout(() => {\n      console.error(errors)\n      throw new Error(`Error removing directories/files: ${errors.map(([path, err]) => `${path}: ${err.message}`).join(', ')}`)\n    })\n  }\n}\n\n\nconst SUPPORT_WRITE = true\n\nexport const openWorldDirectory = async (dragndropHandle?: FileSystemDirectoryHandle) => {\n  let _directoryHandle: FileSystemDirectoryHandle\n  if (dragndropHandle) {\n    _directoryHandle = dragndropHandle\n  } else {\n    try {\n      _directoryHandle = await window.showDirectoryPicker({\n        id: 'select-world', // important: this is used to remember user choice (start directory)\n      })\n    } catch (err) {\n      if (err instanceof DOMException && err.name === 'AbortError') return\n      throw err\n    }\n  }\n  const directoryHandle = _directoryHandle\n\n  const requestResult = SUPPORT_WRITE && !options.preferLoadReadonly ? await directoryHandle.requestPermission?.({ mode: 'readwrite' }) : undefined\n  const writeAccess = requestResult === 'granted'\n\n  const doContinue = writeAccess || !SUPPORT_WRITE || options.disableLoadPrompts || confirm('Continue in readonly mode?')\n  if (!doContinue) return\n  await new Promise<void>(resolve => {\n    browserfs.configure({\n      fs: 'MountableFileSystem',\n      options: {\n        ...defaultMountablePoints,\n        '/world': {\n          fs: 'FileSystemAccess',\n          options: {\n            handle: directoryHandle\n          }\n        }\n      },\n    }, (e) => {\n      if (e) throw e\n      resolve()\n    })\n  })\n\n  fsState.isReadonly = !writeAccess\n  fsState.syncFs = false\n  fsState.inMemorySave = false\n  fsState.remoteBackend = false\n  await loadSave()\n}\n\nconst tryToDetectResourcePack = async () => {\n  const askInstall = async () => {\n    // todo investigate browserfs read errors\n    return alert('ATM You can install texturepacks only via options menu.')\n    // if (confirm('Resource pack detected, do you want to install it?')) {\n    //   await installTexturePackFromHandle()\n    // }\n  }\n\n  if (fs.existsSync('/world/pack.mcmeta')) {\n    await askInstall()\n    return true\n  }\n  // const jszip = new JSZip()\n  // let loaded = await jszip.loadAsync(file)\n  // if (loaded.file('pack.mcmeta')) {\n  //   loaded = null\n  //   askInstall()\n  //   return true\n  // }\n  // loaded = null\n}\n\nexport const possiblyCleanHandle = (callback = () => { }) => {\n  if (!fsState.saveLoaded) {\n    // todo clean handle\n    browserfs.configure({\n      fs: 'MountableFileSystem',\n      options: defaultMountablePoints,\n    }, (e) => {\n      callback()\n      if (e) throw e\n    })\n  }\n}\n\nconst readdirSafe = async (path: string) => {\n  try {\n    return await fs.promises.readdir(path)\n  } catch (err) {\n    return null\n  }\n}\n\nexport const collectFilesToCopy = async (basePath: string, safe = false): Promise<string[]> => {\n  const result: string[] = []\n  const countFiles = async (relPath: string) => {\n    const resolvedPath = join(basePath, relPath)\n    const files = relPath === '.' && !safe ? await fs.promises.readdir(resolvedPath) : await readdirSafe(resolvedPath)\n    if (!files) return null\n    await Promise.all(files.map(async file => {\n      const res = await countFiles(join(relPath, file))\n      if (res === null) {\n        // is file\n        result.push(join(relPath, file))\n      }\n    }))\n  }\n  await countFiles('.')\n  return result\n}\n\nexport const copyFilesAsyncWithProgress = async (pathSrc: string, pathDest: string, throwRootNotExist = true, addMsg = '') => {\n  const stat = await existsViaStats(pathSrc)\n  if (!stat) {\n    if (throwRootNotExist) throw new Error(`Cannot copy. Source directory ${pathSrc} does not exist`)\n    console.debug('source directory does not exist', pathSrc)\n    return\n  }\n  if (!stat.isDirectory()) {\n    await fs.promises.writeFile(pathDest, await fs.promises.readFile(pathSrc) as any)\n    console.debug('copied single file', pathSrc, pathDest)\n    return\n  }\n\n  try {\n    setLoadingScreenStatus('Copying files')\n    let filesCount = 0\n    const countFiles = async (path: string) => {\n      const files = await fs.promises.readdir(path)\n      await Promise.all(files.map(async (file) => {\n        const curPath = join(path, file)\n        const stats = await fs.promises.stat(curPath)\n        if (stats.isDirectory()) {\n          // Recurse\n          await countFiles(curPath)\n        } else {\n          filesCount++\n        }\n      }))\n    }\n    console.debug('Counting files', pathSrc)\n    await countFiles(pathSrc)\n    console.debug('counted', filesCount)\n    let copied = 0\n    await copyFilesAsync(pathSrc, pathDest, (name) => {\n      copied++\n      setLoadingScreenStatus(`Copying files${addMsg} (${copied}/${filesCount}): ${name}`)\n    })\n  } finally {\n    setLoadingScreenStatus(undefined)\n  }\n}\n\nexport const existsViaStats = async (path: string) => {\n  try {\n    return await fs.promises.stat(path)\n  } catch (e) {\n    return false\n  }\n}\n\nexport const fileExistsAsyncOptimized = async (path: string) => {\n  try {\n    await fs.promises.readdir(path)\n  } catch (err) {\n    if (err.code === 'ENOTDIR') return true\n    // eslint-disable-next-line sonarjs/prefer-single-boolean-return\n    if (err.code === 'ENOENT') return false\n    // throw err\n    return false\n  }\n  return true\n}\n\nexport const copyFilesAsync = async (pathSrc: string, pathDest: string, fileCopied?: (name) => void) => {\n  // query: can't use fs.copy! use fs.promises.writeFile and readFile\n  const files = await fs.promises.readdir(pathSrc)\n\n  if (!await existsViaStats(pathDest)) {\n    await fs.promises.mkdir(pathDest, { recursive: true })\n  }\n\n  // Use Promise.all to parallelize file/directory copying\n  await Promise.all(files.map(async (file) => {\n    const curPathSrc = join(pathSrc, file)\n    const curPathDest = join(pathDest, file)\n    const stats = await fs.promises.stat(curPathSrc)\n    if (stats.isDirectory()) {\n      // Recurse\n      await fs.promises.mkdir(curPathDest)\n      await copyFilesAsync(curPathSrc, curPathDest, fileCopied)\n    } else {\n      // Copy file\n      try {\n        await fs.promises.writeFile(curPathDest, await fs.promises.readFile(curPathSrc) as any)\n        console.debug('copied file', curPathSrc, curPathDest)\n      } catch (err) {\n        console.error('Error copying file', curPathSrc, curPathDest, err)\n        throw err\n      }\n      fileCopied?.(curPathDest)\n    }\n  }))\n}\n\nexport const openWorldFromHttpDir = async (fileDescriptorUrls: string[]/*  | undefined */, baseUrlParam) => {\n  // todo try go guess mode\n  let index\n  let baseUrl\n  for (const url of fileDescriptorUrls) {\n    let file\n    try {\n      setLoadingScreenStatus(`Trying to get world descriptor from ${new URL(url).host}`)\n      const controller = new AbortController()\n      setTimeout(() => {\n        controller.abort()\n      }, 3000)\n      // eslint-disable-next-line no-await-in-loop\n      const response = await fetch(url, { signal: controller.signal })\n      // eslint-disable-next-line no-await-in-loop\n      file = await response.json()\n    } catch (err) {\n      console.error('Error fetching file descriptor', url, err)\n    }\n    if (!file) continue\n    if (file.baseUrl) {\n      baseUrl = new URL(file.baseUrl, baseUrl).toString()\n      index = file.index\n    } else {\n      index = file\n      baseUrl = baseUrlParam ?? url.split('/').slice(0, -1).join('/')\n    }\n    break\n  }\n  if (!index) throw new Error(`The provided mapDir file is not valid descriptor file! ${fileDescriptorUrls.join(', ')}`)\n  await new Promise<void>(async resolve => {\n    browserfs.configure({\n      fs: 'MountableFileSystem',\n      options: {\n        ...defaultMountablePoints,\n        '/world': {\n          fs: 'HTTPRequest',\n          options: {\n            index,\n            baseUrl\n          }\n        }\n      },\n    }, (e) => {\n      if (e) throw e\n      resolve()\n    })\n  })\n\n  fsState.saveLoaded = false\n  fsState.isReadonly = true\n  fsState.syncFs = false\n  fsState.inMemorySave = false\n  fsState.remoteBackend = true\n\n  await loadSave()\n}\n\n// todo rename method\nconst openWorldZipInner = async (file: File | ArrayBuffer, name = file['name']) => {\n  await new Promise<void>(async resolve => {\n    browserfs.configure({\n      // todo\n      fs: 'MountableFileSystem',\n      options: {\n        ...defaultMountablePoints,\n        '/world': {\n          fs: 'ZipFS',\n          options: {\n            zipData: Buffer.from(file instanceof File ? (await file.arrayBuffer()) : file),\n            name\n          }\n        }\n      },\n    }, (e) => {\n      if (e) throw e\n      resolve()\n    })\n  })\n\n  fsState.saveLoaded = false\n  fsState.isReadonly = true\n  fsState.syncFs = true\n  fsState.inMemorySave = false\n  fsState.remoteBackend = false\n\n  if (fs.existsSync('/world/level.dat')) {\n    await loadSave()\n  } else {\n    const dirs = fs.readdirSync('/world')\n    const availableWorlds: string[] = []\n    for (const dir of dirs) {\n      if (fs.existsSync(`/world/${dir}/level.dat`)) {\n        availableWorlds.push(dir)\n      }\n    }\n\n    if (availableWorlds.length === 0) {\n      if (await tryToDetectResourcePack()) return\n      alert('No worlds found in the zip')\n      return\n    }\n\n    if (availableWorlds.length === 1) {\n      await loadSave(`/world/${availableWorlds[0]}`)\n      return\n    }\n\n    alert(`Many (${availableWorlds.length}) worlds found in the zip!`)\n    // todo prompt picker\n    // const selectWorld\n  }\n}\n\nexport const openWorldZip = async (...args: Parameters<typeof openWorldZipInner>) => {\n  try {\n    return await openWorldZipInner(...args)\n  } finally {\n    possiblyCleanHandle()\n  }\n}\n\nexport const resetLocalStorageWorld = () => {\n  for (const key of Object.keys(localStorage)) {\n    if (/^[\\da-fA-F]{8}(?:\\b-[\\da-fA-F]{4}){3}\\b-[\\da-fA-F]{12}$/g.test(key) || key === '/') {\n      localStorage.removeItem(key)\n    }\n  }\n}\n\nexport const resetLocalStorageWithoutWorld = () => {\n  for (const key of Object.keys(localStorage)) {\n    if (!/^[\\da-fA-F]{8}(?:\\b-[\\da-fA-F]{4}){3}\\b-[\\da-fA-F]{12}$/g.test(key) && key !== '/') {\n      localStorage.removeItem(key)\n    }\n  }\n  resetOptions()\n}\n\nwindow.resetLocalStorageWorld = resetLocalStorageWorld\nexport const openFilePicker = (specificCase?: 'resourcepack') => {\n  // create and show input picker\n  let picker: HTMLInputElement = document.body.querySelector('input#file-zip-picker')!\n  if (!picker) {\n    picker = document.createElement('input')\n    picker.type = 'file'\n    picker.accept = '.zip'\n\n    picker.addEventListener('change', () => {\n      const file = picker.files?.[0]\n      picker.value = ''\n      if (!file) return\n      if (!file.name.endsWith('.zip')) {\n        const doContinue = confirm(`Are you sure ${file.name.slice(-20)} is .zip file? Only .zip files are supported. Continue?`)\n        if (!doContinue) return\n      }\n      if (specificCase === 'resourcepack') {\n        void installTexturePack(file).catch((err) => {\n          setLoadingScreenStatus(err.message, true)\n        })\n      } else {\n        void openWorldZip(file)\n      }\n    })\n    picker.hidden = true\n    document.body.appendChild(picker)\n  }\n\n  picker.click()\n}\n\nexport const resetStateAfterDisconnect = () => {\n  miscUiState.gameLoaded = false\n  miscUiState.loadedDataVersion = null\n  miscUiState.singleplayer = false\n  miscUiState.flyingSquid = false\n  miscUiState.wanOpened = false\n  miscUiState.currentDisplayQr = null\n\n  fsState.saveLoaded = false\n}\n","import { proxy, subscribe } from 'valtio'\nimport { showInventory } from 'minecraft-inventory-gui/web/ext.mjs'\n\n// import Dirt from 'mc-assets/dist/other-textures/latest/blocks/dirt.png'\nimport { RecipeItem } from 'minecraft-data'\nimport { flat, fromFormattedString } from '@xmcl/text-component'\nimport mojangson from 'mojangson'\nimport nbt from 'prismarine-nbt'\nimport { splitEvery, equals } from 'rambda'\nimport PItem, { Item } from 'prismarine-item'\nimport { ItemsRenderer } from 'mc-assets/dist/itemsRenderer'\nimport { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\nimport { getRenamedData } from 'flying-squid/dist/blockRenames'\nimport PrismarineChatLoader from 'prismarine-chat'\nimport Generic95 from '../assets/generic_95.png'\nimport { appReplacableResources } from './generated/resources'\nimport { activeModalStack, hideCurrentModal, hideModal, miscUiState, showModal } from './globalState'\nimport { options } from './optionsStorage'\nimport { assertDefined, inGameError } from './utils'\nimport { displayClientChat } from './botUtils'\nimport { currentScaling } from './scaleInterface'\nimport { getItemDescription } from './itemsDescriptions'\nimport { MessageFormatPart } from './chatUtils'\n\nconst loadedImagesCache = new Map<string, HTMLImageElement>()\nconst cleanLoadedImagesCache = () => {\n  loadedImagesCache.delete('blocks')\n}\n\nlet lastWindow: ReturnType<typeof showInventory>\n/** bot version */\nlet version: string\nlet PrismarineItem: typeof Item\n\nexport const allImagesLoadedState = proxy({\n  value: false\n})\n\nlet itemsRenderer: ItemsRenderer\nexport const onGameLoad = (onLoad) => {\n  allImagesLoadedState.value = false\n  version = bot.version\n\n  const checkIfLoaded = () => {\n    if (!viewer.world.itemsAtlasParser) return\n    itemsRenderer = new ItemsRenderer(bot.version, viewer.world.blockstatesModels, viewer.world.itemsAtlasParser, viewer.world.blocksAtlasParser)\n    globalThis.itemsRenderer = itemsRenderer\n    if (allImagesLoadedState.value) return\n    onLoad?.()\n    allImagesLoadedState.value = true\n  }\n  viewer.world.renderUpdateEmitter.on('textureDownloaded', checkIfLoaded)\n  checkIfLoaded()\n\n  PrismarineItem = PItem(version)\n\n  const mapWindowType = (type: string, inventoryStart: number) => {\n    if (type === 'minecraft:container') {\n      if (inventoryStart === 45 - 9 * 4) return 'minecraft:generic_9x1'\n      if (inventoryStart === 45 - 9 * 3) return 'minecraft:generic_9x2'\n      if (inventoryStart === 45 - 9 * 2) return 'minecraft:generic_9x3'\n      if (inventoryStart === 45 - 9) return 'minecraft:generic_9x4'\n      if (inventoryStart === 45) return 'minecraft:generic_9x5'\n      if (inventoryStart === 45 + 9) return 'minecraft:generic_9x6'\n    }\n    return type\n  }\n\n  bot.on('windowOpen', (win) => {\n    const implementedWindow = implementedContainersGuiMap[mapWindowType(win.type as string, win.inventoryStart)]\n    if (implementedWindow) {\n      openWindow(implementedWindow)\n    } else if (options.unimplementedContainers) {\n      openWindow('ChestWin')\n    } else {\n      // todo format\n      displayClientChat(`[client error] cannot open unimplemented window ${win.id} (${win.type}). Slots: ${win.slots.map(item => getItemName(item)).filter(Boolean).join(', ')}`)\n      bot.currentWindow?.['close']()\n    }\n  })\n\n  // workaround: singleplayer player inventory crafting\n  let skipUpdate = false\n  bot.inventory.on('updateSlot', ((_oldSlot, oldItem, newItem) => {\n    const currentSlot = _oldSlot as number\n    if (!miscUiState.singleplayer || oldItem === newItem || skipUpdate) return\n    const { craftingResultSlot } = bot.inventory\n    if (currentSlot === craftingResultSlot && oldItem && !newItem) {\n      for (let i = 1; i < 5; i++) {\n        const count = bot.inventory.slots[i]?.count\n        if (count && count > 1) {\n          const slot = bot.inventory.slots[i]!\n          slot.count--\n          void bot.creative.setInventorySlot(i, slot)\n        } else {\n          void bot.creative.setInventorySlot(i, null)\n        }\n      }\n      return\n    }\n    if (currentSlot > 4) return\n    const craftingSlots = bot.inventory.slots.slice(1, 5)\n    try {\n      const resultingItem = getResultingRecipe(craftingSlots, 2)\n      skipUpdate = true\n      void bot.creative.setInventorySlot(craftingResultSlot, resultingItem ?? null).then(() => {\n        skipUpdate = false\n      })\n    } catch (err) {\n      console.error(err)\n      // todo resolve the error! and why would we ever get here on every update?\n    }\n  }) as any)\n\n  bot.on('windowClose', () => {\n    // todo hide up to the window itself!\n    if (lastWindow) {\n      hideCurrentModal()\n    }\n  })\n  bot.on('respawn', () => { // todo validate logic against native client (maybe login)\n    if (lastWindow) {\n      hideCurrentModal()\n    }\n  })\n\n  customEvents.on('search', (q) => {\n    if (!lastWindow) return\n    upJei(q)\n  })\n}\n\nconst getImageSrc = (path): string | HTMLImageElement => {\n  assertDefined(viewer)\n  switch (path) {\n    case 'gui/container/inventory': return appReplacableResources.latest_gui_container_inventory.content\n    case 'blocks': return viewer.world.blocksAtlasParser!.latestImage\n    case 'items': return viewer.world.itemsAtlasParser!.latestImage\n    case 'gui/container/dispenser': return appReplacableResources.latest_gui_container_dispenser.content\n    case 'gui/container/furnace': return appReplacableResources.latest_gui_container_furnace.content\n    case 'gui/container/crafting_table': return appReplacableResources.latest_gui_container_crafting_table.content\n    case 'gui/container/shulker_box': return appReplacableResources.latest_gui_container_shulker_box.content\n    case 'gui/container/generic_54': return appReplacableResources.latest_gui_container_generic_54.content\n    case 'gui/container/generic_95': return Generic95\n    case 'gui/container/hopper': return appReplacableResources.latest_gui_container_hopper.content\n    case 'gui/container/horse': return appReplacableResources.latest_gui_container_horse.content\n    case 'gui/container/villager2': return appReplacableResources.latest_gui_container_villager2.content\n    case 'gui/container/enchanting_table': return appReplacableResources.latest_gui_container_enchanting_table.content\n    case 'gui/container/anvil': return appReplacableResources.latest_gui_container_anvil.content\n    case 'gui/container/beacon': return appReplacableResources.latest_gui_container_beacon.content\n    case 'gui/widgets': return appReplacableResources.other_textures_latest_gui_widgets.content\n  }\n  // empty texture\n  return 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\n}\n\nconst getImage = ({ path = undefined as string | undefined, texture = undefined as string | undefined, blockData = undefined as any }, onLoad = () => { }) => {\n  if (!path && !texture) throw new Error('Either pass path or texture')\n  const loadPath = (blockData ? 'blocks' : path ?? texture)!\n  if (loadedImagesCache.has(loadPath)) {\n    onLoad()\n  } else {\n    const imageSrc = getImageSrc(loadPath)\n    let image: HTMLImageElement\n    if (imageSrc instanceof Image) {\n      image = imageSrc\n    } else {\n      image = new Image()\n      image.src = imageSrc\n    }\n    image.onload = onLoad\n    loadedImagesCache.set(loadPath, image)\n  }\n  return loadedImagesCache.get(loadPath)\n}\n\ntype RenderSlot = Pick<import('prismarine-item').Item, 'name' | 'displayName' | 'durabilityUsed' | 'maxDurability' | 'enchants'>\nconst renderSlot = (slot: RenderSlot, skipBlock = false): {\n  texture: string,\n  blockData?: Record<string, { slice, path }>,\n  scale?: number,\n  slice?: number[]\n} | undefined => {\n  let itemName = slot.name\n  const isItem = loadedData.itemsByName[itemName]\n\n  let itemTexture\n  try {\n    if (versionToNumber(bot.version) < versionToNumber('1.13')) itemName = getRenamedData(isItem ? 'items' : 'blocks', itemName, bot.version, '1.13.1') as string\n    itemTexture = itemsRenderer.getItemTexture(itemName) ?? itemsRenderer.getItemTexture('item/missing_texture')!\n  } catch (err) {\n    itemTexture = itemsRenderer.getItemTexture('block/errored')!\n    inGameError(`Failed to render item ${itemName} on ${bot.version} (resourcepack: ${options.enabledResourcepack}): ${err.message}`)\n  }\n  if ('type' in itemTexture) {\n    // is item\n    return {\n      texture: itemTexture.type,\n      slice: itemTexture.slice\n    }\n  } else {\n    // is block\n    return {\n      texture: 'blocks',\n      blockData: itemTexture\n    }\n  }\n}\n\ntype JsonString = string\ntype PossibleItemProps = {\n  Damage?: number\n  display?: { Name?: JsonString } // {\"text\":\"Knife\",\"color\":\"white\",\"italic\":\"true\"}\n}\nexport const getItemNameRaw = (item: Pick<import('prismarine-item').Item, 'nbt'> | null) => {\n  if (!item?.nbt) return\n  const itemNbt: PossibleItemProps = nbt.simplify(item.nbt)\n  const customName = itemNbt.display?.Name\n  if (!customName) return\n  try {\n    const parsed = customName.startsWith('{') && customName.endsWith('}') ? mojangson.simplify(mojangson.parse(customName)) : fromFormattedString(customName)\n    if (parsed.extra) {\n      return parsed as Record<string, any>\n    } else {\n      return parsed as MessageFormatPart\n    }\n  } catch (err) {\n    return {\n      text: customName\n    }\n  }\n}\n\nconst getItemName = (slot: Item | null) => {\n  const parsed = getItemNameRaw(slot)\n  if (!parsed) return\n  // todo display full text renderer from sign renderer\n  const text = flat(parsed as MessageFormatPart).map(x => x.text)\n  return text.join('')\n}\n\nexport const renderSlotExternal = (slot) => {\n  const data = renderSlot(slot, true)\n  if (!data) return\n  return {\n    imageDataUrl: data.texture === 'invsprite' ? undefined : getImage({ path: data.texture })?.src,\n    sprite: data.slice && data.texture !== 'invsprite' ? data.slice.map(x => x * 2) : data.slice,\n    displayName: getItemName(slot) ?? slot.displayName,\n  }\n}\n\nconst mapSlots = (slots: Array<RenderSlot | Item | null>) => {\n  return slots.map(slot => {\n    // todo stateid\n    if (!slot) return\n\n    try {\n      const slotCustomProps = renderSlot(slot)\n      Object.assign(slot, { ...slotCustomProps, displayName: ('nbt' in slot ? getItemName(slot) : undefined) ?? slot.displayName })\n      //@ts-expect-error\n      slot.toJSON = () => {\n        // Allow to serialize slot to JSON as minecraft-inventory-gui creates icon property as cache (recursively)\n        //@ts-expect-error\n        const { icon, ...rest } = slot\n        return rest\n      }\n    } catch (err) {\n      inGameError(err)\n    }\n    return slot\n  })\n}\n\nexport const upInventoryItems = (isInventory: boolean, invWindow = lastWindow) => {\n  // inv.pwindow.inv.slots[2].displayName = 'test'\n  // inv.pwindow.inv.slots[2].blockData = getBlockData('dirt')\n  const customSlots = mapSlots((isInventory ? bot.inventory : bot.currentWindow)!.slots)\n  invWindow.pwindow.setSlots(customSlots)\n}\n\nexport const onModalClose = (callback: () => any) => {\n  const modal = activeModalStack.at(-1)\n  const unsubscribe = subscribe(activeModalStack, () => {\n    const newModal = activeModalStack.at(-1)\n    if (modal?.reactType !== newModal?.reactType) {\n      callback()\n      unsubscribe()\n    }\n  }, true)\n}\n\nconst implementedContainersGuiMap = {\n  // todo allow arbitrary size instead!\n  'minecraft:generic_9x1': 'ChestWin',\n  'minecraft:generic_9x2': 'ChestWin',\n  'minecraft:generic_9x3': 'ChestWin',\n  'minecraft:generic_9x4': 'Generic95Win',\n  'minecraft:generic_9x5': 'Generic95Win',\n  // hopper\n  'minecraft:generic_5x1': 'HopperWin',\n  'minecraft:generic_9x6': 'LargeChestWin',\n  'minecraft:generic_3x3': 'DropDispenseWin',\n  'minecraft:furnace': 'FurnaceWin',\n  'minecraft:smoker': 'FurnaceWin',\n  'minecraft:crafting': 'CraftingWin',\n  'minecraft:crafting3x3': 'CraftingWin', // todo different result slot\n  'minecraft:anvil': 'AnvilWin',\n  // enchant\n  'minecraft:enchanting_table': 'EnchantingWin',\n  // horse\n  'minecraft:horse': 'HorseWin',\n  // villager\n  'minecraft:villager': 'VillagerWin',\n}\n\nconst upJei = (search: string) => {\n  search = search.toLowerCase()\n  // todo fix pre flat\n  const matchedSlots = loadedData.itemsArray.map(x => {\n    if (!x.displayName.toLowerCase().includes(search)) return null\n    return new PrismarineItem(x.id, 1)\n  }).filter(a => a !== null)\n  lastWindow.pwindow.win.jeiSlotsPage = 0\n  lastWindow.pwindow.win.jeiSlots = mapSlots(matchedSlots)\n}\n\nexport const openItemsCanvas = (type, _bot = bot as typeof bot | null) => {\n  const inv = showInventory(type, getImage, {}, _bot);\n  (inv.canvasManager.children[0].callbacks as any).getItemRecipes = (item) => {\n    const allRecipes = getAllItemRecipes(item.name)\n    inv.canvasManager.children[0].messageDisplay = ''\n    const itemDescription = getItemDescription(item)\n    if (!allRecipes?.length && !itemDescription) {\n      inv.canvasManager.children[0].messageDisplay = `No recipes found for ${item.displayName}`\n    }\n    return [...allRecipes ?? [], ...itemDescription ? [\n      [\n        'GenericDescription',\n        mapSlots([item])[0],\n        [],\n        itemDescription\n      ]\n    ] : []]\n  }\n  (inv.canvasManager.children[0].callbacks as any).getItemUsages = (item) => {\n    const allItemUsages = getAllItemUsages(item.name)\n    inv.canvasManager.children[0].messageDisplay = ''\n    if (!allItemUsages?.length) {\n      inv.canvasManager.children[0].messageDisplay = `No usages found for ${item.displayName}`\n    }\n    return allItemUsages\n  }\n  return inv\n}\n\nlet skipClosePacketSending = false\nconst openWindow = (type: string | undefined) => {\n  // if (activeModalStack.some(x => x.reactType?.includes?.('player_win:'))) {\n  if (activeModalStack.length) { // game is not in foreground, don't close current modal\n    if (type) {\n      skipClosePacketSending = true\n      hideCurrentModal()\n    } else {\n      bot.currentWindow?.['close']()\n      return\n    }\n  }\n  showModal({\n    reactType: `player_win:${type}`,\n  })\n  onModalClose(() => {\n    // might be already closed (event fired)\n    if (type !== undefined && bot.currentWindow && !skipClosePacketSending) bot.currentWindow['close']()\n    lastWindow.destroy()\n    lastWindow = null as any\n    window.lastWindow = lastWindow\n    miscUiState.displaySearchInput = false\n    destroyFn()\n    skipClosePacketSending = false\n  })\n  cleanLoadedImagesCache()\n  const inv = openItemsCanvas(type)\n  inv.canvasManager.children[0].mobileHelpers = miscUiState.currentTouch\n  const title = bot.currentWindow?.title\n  const PrismarineChat = PrismarineChatLoader(bot.version)\n  try {\n    inv.canvasManager.children[0].customTitleText = title ?\n      typeof title === 'string' ?\n        fromFormattedString(title).text :\n        new PrismarineChat(title).toString() :\n      undefined\n  } catch (err) {\n    reportError?.(err)\n    inv.canvasManager.children[0].customTitleText = undefined\n  }\n  // todo\n  inv.canvasManager.setScale(currentScaling.scale === 1 ? 1.5 : currentScaling.scale)\n  inv.canvas.style.zIndex = '10'\n  inv.canvas.style.position = 'fixed'\n  inv.canvas.style.inset = '0'\n\n  inv.canvasManager.onClose = async () => {\n    await new Promise(resolve => {\n      setTimeout(resolve, 0)\n    })\n    if (activeModalStack.at(-1)?.reactType?.includes('player_win:')) {\n      hideModal(undefined, undefined, { force: true })\n    }\n    inv.canvasManager.destroy()\n  }\n\n  lastWindow = inv\n  const upWindowItems = () => {\n    if (!lastWindow && bot.currentWindow) {\n      // edge case: might happen due to high ping, inventory should be closed soon!\n      // openWindow(implementedContainersGuiMap[bot.currentWindow.type])\n      return\n    }\n    void Promise.resolve().then(() => upInventoryItems(type === undefined))\n  }\n  upWindowItems()\n\n  lastWindow.pwindow.touch = miscUiState.currentTouch ?? false\n  const oldOnInventoryEvent = lastWindow.pwindow.onInventoryEvent.bind(lastWindow.pwindow)\n  lastWindow.pwindow.onInventoryEvent = (type, containing, windowIndex, inventoryIndex, item) => {\n    if (inv.canvasManager.children[0].currentGuide) {\n      const isRightClick = type === 'rightclick'\n      const isLeftClick = type === 'leftclick'\n      if (isLeftClick || isRightClick) {\n        inv.canvasManager.children[0].showRecipesOrUsages(isLeftClick, item)\n      }\n    } else {\n      oldOnInventoryEvent(type, containing, windowIndex, inventoryIndex, item)\n    }\n  }\n  lastWindow.pwindow.onJeiClick = (slotItem, _index, isRightclick) => {\n    // slotItem is the slot from mapSlots\n    const itemId = loadedData.itemsByName[slotItem.name]?.id\n    if (!itemId) {\n      inGameError(`Item for block ${slotItem.name} not found`)\n      return\n    }\n    const item = new PrismarineItem(itemId, isRightclick ? 64 : 1, slotItem.metadata)\n    if (bot.game.gameMode === 'creative') {\n      const freeSlot = bot.inventory.firstEmptyInventorySlot()\n      if (freeSlot === null) return\n      void bot.creative.setInventorySlot(freeSlot, item)\n    } else {\n      inv.canvasManager.children[0].showRecipesOrUsages(!isRightclick, mapSlots([item])[0])\n    }\n  }\n\n  // if (bot.game.gameMode !== 'spectator') {\n  lastWindow.pwindow.win.jeiSlotsPage = 0\n  // todo workaround so inventory opens immediately (though it still lags)\n  setTimeout(() => {\n    upJei('')\n  })\n  miscUiState.displaySearchInput = true\n  // } else {\n  //   lastWindow.pwindow.win.jeiSlots = []\n  // }\n\n  if (type === undefined) {\n    // player inventory\n    bot.inventory.on('updateSlot', upWindowItems)\n    destroyFn = () => {\n      bot.inventory.off('updateSlot', upWindowItems)\n    }\n  } else {\n    //@ts-expect-error\n    bot.currentWindow.on('updateSlot', () => {\n      upWindowItems()\n    })\n  }\n}\n\nlet destroyFn = () => { }\n\nexport const openPlayerInventory = () => {\n  openWindow(undefined)\n}\n\nconst getResultingRecipe = (slots: Array<Item | null>, gridRows: number) => {\n  const inputSlotsItems = slots.map(blockSlot => blockSlot?.type)\n  let currentShape = splitEvery(gridRows, inputSlotsItems as Array<number | undefined | null>)\n  // todo rewrite with candidates search\n  if (currentShape.length > 1) {\n    // eslint-disable-next-line @typescript-eslint/no-for-in-array\n    for (const slotX in currentShape[0]) {\n      if (currentShape[0][slotX] !== undefined) {\n        for (const [otherY] of Array.from({ length: gridRows }).entries()) {\n          if (currentShape[otherY]?.[slotX] === undefined) {\n            currentShape[otherY]![slotX] = null\n          }\n        }\n      }\n    }\n  }\n  currentShape = currentShape.map(arr => arr.filter(x => x !== undefined)).filter(x => x.length !== 0)\n\n  // todo rewrite\n  // eslint-disable-next-line @typescript-eslint/require-array-sort-compare\n  const slotsIngredients = [...inputSlotsItems].sort().filter(item => item !== undefined)\n  type Result = RecipeItem | undefined\n  let shapelessResult: Result\n  let shapeResult: Result\n  outer: for (const [id, recipeVariants] of Object.entries(loadedData.recipes)) {\n    for (const recipeVariant of recipeVariants) {\n      if ('inShape' in recipeVariant && equals(currentShape, recipeVariant.inShape as number[][])) {\n        shapeResult = recipeVariant.result!\n        break outer\n      }\n      if ('ingredients' in recipeVariant && equals(slotsIngredients, recipeVariant.ingredients?.sort() as number[])) {\n        shapelessResult = recipeVariant.result\n        break outer\n      }\n    }\n  }\n  const result = shapeResult ?? shapelessResult\n  if (!result) return\n  const id = typeof result === 'number' ? result : Array.isArray(result) ? result[0] : result.id\n  if (!id) return\n  const count = (typeof result === 'number' ? undefined : Array.isArray(result) ? result[1] : result.count) ?? 1\n  const metadata = typeof result === 'object' && !Array.isArray(result) ? result.metadata : undefined\n  const item = new PrismarineItem(id, count, metadata)\n  return item\n}\n\nconst ingredientToItem = (recipeItem) => (recipeItem === null ? null : new PrismarineItem(recipeItem, 1))\n\nconst getAllItemRecipes = (itemName: string) => {\n  const item = loadedData.itemsByName[itemName]\n  if (!item) return\n  const itemId = item.id\n  const recipes = loadedData.recipes[itemId]\n  if (!recipes) return\n  const results = [] as Array<{\n    result: Item,\n    ingredients: Array<Item | null>,\n    description?: string\n  }>\n\n  // get recipes here\n  for (const recipe of recipes) {\n    const { result } = recipe\n    if (!result) continue\n    const resultId = typeof result === 'number' ? result : Array.isArray(result) ? result[0]! : result.id\n    const resultCount = (typeof result === 'number' ? undefined : Array.isArray(result) ? result[1] : result.count) ?? 1\n    const resultMetadata = typeof result === 'object' && !Array.isArray(result) ? result.metadata : undefined\n    const resultItem = new PrismarineItem(resultId!, resultCount, resultMetadata)\n    if ('inShape' in recipe) {\n      const ingredients = recipe.inShape\n      if (!ingredients) continue\n\n      const ingredientsItems = ingredients.flatMap(items => items.map(item => ingredientToItem(item)))\n      results.push({ result: resultItem, ingredients: ingredientsItems })\n    }\n    if ('ingredients' in recipe) {\n      const { ingredients } = recipe\n      if (!ingredients) continue\n      const ingredientsItems = ingredients.map(item => ingredientToItem(item))\n      results.push({ result: resultItem, ingredients: ingredientsItems, description: 'Shapeless' })\n    }\n  }\n  return results.map(({ result, ingredients, description }) => {\n    return [\n      'CraftingTableGuide',\n      mapSlots([result])[0],\n      mapSlots(ingredients),\n      description\n    ]\n  })\n}\n\nconst getAllItemUsages = (itemName: string) => {\n  const item = loadedData.itemsByName[itemName]\n  if (!item) return\n  const foundRecipeIds = [] as string[]\n\n  for (const [id, recipes] of Object.entries(loadedData.recipes)) {\n    for (const recipe of recipes) {\n      if ('inShape' in recipe) {\n        if (recipe.inShape.some(row => row.includes(item.id))) {\n          foundRecipeIds.push(id)\n        }\n      }\n      if ('ingredients' in recipe) {\n        if (recipe.ingredients.includes(item.id)) {\n          foundRecipeIds.push(id)\n        }\n      }\n    }\n  }\n\n  return foundRecipeIds.flatMap(id => {\n    // todo should use exact match, not include all recipes!\n    return getAllItemRecipes(loadedData.items[id].name)\n  })\n}\n","import { Duplex } from 'stream'\nimport Peer, { DataConnection } from 'peerjs'\nimport Client from 'minecraft-protocol/src/client'\nimport { resolveTimeout, setLoadingScreenStatus } from './utils'\nimport { miscUiState } from './globalState'\n\nclass CustomDuplex extends Duplex {\n  constructor (options, public writeAction) {\n    super(options)\n  }\n\n  _read () { }\n\n  _write (chunk, encoding, callback) {\n    this.writeAction(chunk)\n    callback()\n  }\n}\n\nlet peerInstance: Peer | undefined\n\nlet overridePeerJsServer = null as string | null\n\nexport const getJoinLink = () => {\n  if (!peerInstance) return\n  const url = new URL(window.location.href)\n  for (const key of url.searchParams.keys()) {\n    url.searchParams.delete(key)\n  }\n  url.searchParams.set('connectPeer', peerInstance.id)\n  url.searchParams.set('peerVersion', localServer!.options.version)\n  const host = (overridePeerJsServer ?? miscUiState.appConfig?.peerJsServer) ?? undefined\n  if (host) {\n    // TODO! use miscUiState.appConfig.peerJsServer\n    url.searchParams.set('server', host)\n  }\n  return url.toString()\n}\n\nconst copyJoinLink = async () => {\n  miscUiState.wanOpened = true\n  const joinLink = getJoinLink()!\n  if (navigator.clipboard) {\n    await navigator.clipboard.writeText(joinLink)\n  } else {\n    window.prompt('Copy to clipboard: Ctrl+C, Enter', joinLink)\n  }\n}\n\nexport const openToWanAndCopyJoinLink = async (writeText: (text) => void, doCopy = true) => {\n  if (!localServer) return\n  if (peerInstance) {\n    if (doCopy) await copyJoinLink()\n    return 'Already opened to wan. Join link copied'\n  }\n  miscUiState.wanOpening = true\n  const host = (overridePeerJsServer ?? miscUiState.appConfig?.peerJsServer) || undefined\n  const params = host ? parseUrl(host) : undefined\n  const peer = new Peer({\n    debug: 3,\n    ...params\n  })\n  peerInstance = peer\n  peer.on('connection', (connection) => {\n    console.log('connection')\n    const serverDuplex = new CustomDuplex({}, async (data) => connection.send(data))\n    const client = new Client(true, localServer.options.version, undefined)\n    client.setSocket(serverDuplex)\n    localServer._server.emit('connection', client)\n\n    connection.on('data', (data: any) => {\n      serverDuplex.push(Buffer.from(data))\n    })\n    // our side disconnect\n    const endConnection = () => {\n      console.log('connection.close')\n      serverDuplex.end()\n      connection.close()\n    }\n    serverDuplex.on('end', endConnection)\n    serverDuplex.on('force-close', endConnection)\n    client.on('end', endConnection)\n\n    const disconnected = () => {\n      serverDuplex.end()\n      client.end()\n    }\n    connection.on('iceStateChanged', (state) => {\n      console.log('iceStateChanged', state)\n      if (state === 'disconnected') {\n        disconnected()\n      }\n    })\n    connection.on('close', disconnected)\n    connection.on('error', disconnected)\n  })\n  const fallbackServer = miscUiState.appConfig?.peerJsServerFallback\n  const hasFallback = fallbackServer && peer.options.host !== fallbackServer\n  let hadErrorReported = false\n  peer.on('error', (error) => {\n    console.error('peerJS error', error)\n    if (error.type === 'server-error' && hasFallback) {\n      return\n    }\n    hadErrorReported = true\n    writeText(error.message || JSON.stringify(error))\n  })\n  let timeout\n  const destroy = () => {\n    clearTimeout(timeout)\n    timeout = undefined\n    peer.destroy()\n    peerInstance = undefined\n  }\n\n  const result = await new Promise<string>(resolve => {\n    peer.on('open', async () => {\n      await copyJoinLink()\n      resolve('Copied join link to clipboard')\n    })\n    timeout = setTimeout(() => {\n      if (!hadErrorReported && timeout !== undefined) {\n        writeText('timeout')\n      }\n      resolve('Failed to open to wan (timeout)')\n    }, 6000)\n\n    // fallback\n    peer.on('error', async (error) => {\n      if (!peer.open) {\n        if (hasFallback) {\n          destroy()\n\n          overridePeerJsServer = fallbackServer\n          console.log('Trying fallback server', fallbackServer)\n          resolve((await openToWanAndCopyJoinLink(writeText, doCopy))!)\n        }\n      }\n    })\n  })\n  if (!peerInstance.open) {\n    destroy()\n  }\n  miscUiState.wanOpening = false\n  return result\n}\n\nconst parseUrl = (url: string) => {\n  // peerJS does this internally for some reason: const url = new URL(`${protocol}://${host}:${port}${path}${key}/${method}`)\n  if (!url.startsWith('http')) url = `${location.protocol}//${url}`\n  const urlObj = new URL(url)\n  const key = urlObj.searchParams.get('key')\n  return {\n    host: urlObj.hostname,\n    path: urlObj.pathname,\n    protocol: urlObj.protocol.slice(0, -1),\n    ...urlObj.port ? { port: +urlObj.port } : {},\n    ...key ? { key } : {},\n  }\n}\n\nexport const closeWan = () => {\n  peerInstance?.destroy()\n  peerInstance = undefined\n  miscUiState.wanOpened = false\n  return 'Closed WAN'\n}\n\nexport type ConnectPeerOptions = {\n  server?: string\n}\n\nexport const connectToPeer = async (peerId: string, options: ConnectPeerOptions = {}) => {\n  setLoadingScreenStatus('Connecting to peer server')\n  // todo destroy connection on error\n  // TODO! use miscUiState.appConfig.peerJsServer\n  const host = options.server\n  const params = host ? parseUrl(host) : undefined\n  const peer = new Peer({\n    debug: 3,\n    ...params\n  })\n  await resolveTimeout(new Promise(resolve => {\n    peer.once('open', resolve)\n  }))\n  setLoadingScreenStatus('Connecting to the peer')\n  const connection = peer.connect(peerId, {\n    serialization: 'raw',\n  })\n  await resolveTimeout(new Promise<void>((resolve, reject) => {\n    connection.once('error', (error) => {\n      console.log(error.type, error.name)\n      console.log(error)\n      reject(error.message)\n    })\n    connection.once('open', resolve)\n  }))\n\n  const clientDuplex = new CustomDuplex({}, (data) => {\n    // todo debug until play state\n    // console.debug('sending', data.toString())\n    connection.send(data)\n  })\n  connection.on('data', (data: any) => {\n    console.debug('received', Buffer.from(data).toString())\n    clientDuplex.push(Buffer.from(data))\n  })\n  connection.on('close', () => {\n    console.log('connection closed')\n    clientDuplex.end()\n    // bot._client.end()\n    // bot.end()\n    bot.emit('end', 'Disconnected.')\n  })\n  connection.on('error', (error) => {\n    console.error(error)\n    clientDuplex.end()\n  })\n\n  return clientDuplex\n}\n","//@ts-check\n\nimport { Vec3 } from 'vec3'\nimport { proxy, subscribe } from 'valtio'\n\nimport { ControMax } from 'contro-max/build/controMax'\nimport { CommandEventArgument, SchemaCommandInput } from 'contro-max/build/types'\nimport { stringStartsWith } from 'contro-max/build/stringUtils'\nimport { UserOverrideCommand, UserOverridesConfig } from 'contro-max/build/types/store'\nimport { isGameActive, showModal, gameAdditionalState, activeModalStack, hideCurrentModal, miscUiState, loadedGameState, hideModal } from './globalState'\nimport { goFullscreen, pointerLock, reloadChunks } from './utils'\nimport { options } from './optionsStorage'\nimport { openPlayerInventory } from './inventoryWindows'\nimport { chatInputValueGlobal } from './react/Chat'\nimport { fsState } from './loadSave'\nimport { customCommandsConfig } from './customCommands'\nimport type { CustomCommand } from './react/KeybindingsCustom'\nimport { showOptionsModal } from './react/SelectOption'\nimport widgets from './react/widgets'\nimport { getItemFromBlock } from './chatUtils'\nimport { gamepadUiCursorState, moveGamepadCursorByPx } from './react/GamepadUiCursor'\nimport { completeTexturePackInstall, resourcePackState } from './resourcePack'\nimport { showNotification } from './react/NotificationProvider'\nimport { lastConnectOptions } from './react/AppStatusProvider'\n\n\nexport const customKeymaps = proxy(JSON.parse(localStorage.keymap || '{}')) as UserOverridesConfig\nsubscribe(customKeymaps, () => {\n  localStorage.keymap = JSON.stringify(customKeymaps)\n})\n\nconst controlOptions = {\n  preventDefault: true\n}\n\nexport const contro = new ControMax({\n  commands: {\n    general: {\n      jump: ['Space', 'A'],\n      inventory: ['KeyE', 'X'],\n      drop: ['KeyQ', 'B'],\n      sneak: ['ShiftLeft'],\n      toggleSneakOrDown: [null, 'Right Stick'],\n      sprint: ['ControlLeft', 'Left Stick'],\n      nextHotbarSlot: [null, 'Right Bumper'],\n      prevHotbarSlot: [null, 'Left Bumper'],\n      attackDestroy: [null, 'Right Trigger'],\n      interactPlace: [null, 'Left Trigger'],\n      chat: [['KeyT', 'Enter']],\n      command: ['Slash'],\n      swapHands: ['KeyF'],\n      zoom: ['KeyC'],\n      selectItem: ['KeyH'] // default will be removed\n    },\n    ui: {\n      toggleFullscreen: ['F11'],\n      back: [null/* 'Escape' */, 'B'],\n      toggleMap: ['KeyM'],\n      leftClick: [null, 'A'],\n      rightClick: [null, 'Y'],\n      speedupCursor: [null, 'Left Stick'],\n      pauseMenu: [null, 'Start']\n    },\n    advanced: {\n      lockUrl: ['KeyY'],\n    },\n    custom: {} as Record<string, SchemaCommandInput & { type: string, input: any[] }>,\n    // waila: {\n    //   showLookingBlockRecipe: ['Numpad3'],\n    //   showLookingBlockUsages: ['Numpad4']\n    // }\n  } satisfies Record<string, Record<string, SchemaCommandInput>>,\n  movementKeymap: 'WASD',\n  movementVector: '2d',\n  groupedCommands: {\n    general: {\n      switchSlot: ['Digits', []]\n    }\n  },\n}, {\n  defaultControlOptions: controlOptions,\n  target: document,\n  captureEvents () {\n    return true\n  },\n  storeProvider: {\n    load: () => customKeymaps,\n    save () { },\n  },\n  gamepadPollingInterval: 10\n})\nwindow.controMax = contro\nexport type Command = CommandEventArgument<typeof contro['_commandsRaw']>['command']\n\nupdateBinds(customKeymaps)\n\nconst updateDoPreventDefault = () => {\n  controlOptions.preventDefault = miscUiState.gameLoaded && !activeModalStack.length\n}\n\nsubscribe(miscUiState, updateDoPreventDefault)\nsubscribe(activeModalStack, updateDoPreventDefault)\nupdateDoPreventDefault()\n\nconst setSprinting = (state: boolean) => {\n  bot.setControlState('sprint', state)\n  gameAdditionalState.isSprinting = state\n}\n\ncontro.on('movementUpdate', ({ vector, soleVector, gamepadIndex }) => {\n  if (gamepadIndex !== undefined && gamepadUiCursorState.display) {\n    const deadzone = 0.1 // TODO make deadzone configurable\n    if (Math.abs(soleVector.x) < deadzone && Math.abs(soleVector.z) < deadzone) {\n      return\n    }\n    moveGamepadCursorByPx(soleVector.x, true)\n    moveGamepadCursorByPx(soleVector.z, false)\n    emitMousemove()\n  }\n  miscUiState.usingGamepadInput = gamepadIndex !== undefined\n  if (!bot || !isGameActive(false)) return\n  // gamepadIndex will be used for splitscreen in future\n  const coordToAction = [\n    ['z', -1, 'forward'],\n    ['z', 1, 'back'],\n    ['x', -1, 'left'],\n    ['x', 1, 'right'],\n  ] as const\n\n  const newState: Partial<typeof bot.controlState> = {}\n  for (const [coord, v] of Object.entries(vector)) {\n    if (v === undefined || Math.abs(v) < 0.3) continue\n    // todo use raw values eg for slow movement\n    const mappedValue = v < 0 ? -1 : 1\n    // eslint-disable-next-line @typescript-eslint/no-non-null-asserted-optional-chain\n    const foundAction = coordToAction.find(([c, mapV]) => c === coord && mapV === mappedValue)?.[2]!\n    newState[foundAction] = true\n  }\n\n  for (const key of ['forward', 'back', 'left', 'right'] as const) {\n    if (newState[key] === bot.controlState[key]) continue\n    const action = !!newState[key]\n    if (action && !isGameActive(true)) continue\n    bot.setControlState(key, action)\n\n    if (key === 'forward') {\n      // todo workaround: need to refactor\n      if (action) {\n        void contro.emit('trigger', { command: 'general.forward' } as any)\n      } else {\n        setSprinting(false)\n      }\n    }\n  }\n})\n\nlet lastCommandTrigger = null as { command: string, time: number } | null\n\nconst secondActionActivationTimeout = 300\nconst secondActionCommands = {\n  'general.jump' () {\n    // if (bot.game.gameMode === 'spectator') return\n    toggleFly()\n  },\n  'general.forward' () {\n    setSprinting(true)\n  }\n}\n\n// detect pause open, as ANY keyup event is not fired when you exit pointer lock (esc)\nsubscribe(activeModalStack, () => {\n  if (activeModalStack.length) {\n    // iterate over pressedKeys\n    for (const key of contro.pressedKeys) {\n      contro.pressedKeyOrButtonChanged({ code: key }, false)\n    }\n  }\n})\n\nconst emitMousemove = () => {\n  const { x, y } = gamepadUiCursorState\n  const xAbs = x / 100 * window.innerWidth\n  const yAbs = y / 100 * window.innerHeight\n  const element = document.elementFromPoint(xAbs, yAbs) as HTMLElement | null\n  if (!element) return\n  element.dispatchEvent(new MouseEvent('mousemove', {\n    clientX: xAbs,\n    clientY: yAbs\n  }))\n}\n\nlet lastClickedEl = null as HTMLElement | null\nlet lastClickedElTimeout: ReturnType<typeof setTimeout> | undefined\nconst inModalCommand = (command: Command, pressed: boolean) => {\n  if (pressed && !gamepadUiCursorState.display) return\n\n  if (pressed) {\n    if (command === 'ui.back') {\n      hideCurrentModal()\n    }\n    if (command === 'ui.leftClick' || command === 'ui.rightClick') {\n      // in percent\n      const { x, y } = gamepadUiCursorState\n      const xAbs = x / 100 * window.innerWidth\n      const yAbs = y / 100 * window.innerHeight\n      const el = document.elementFromPoint(xAbs, yAbs) as HTMLElement\n      if (el) {\n        if (el === lastClickedEl && command === 'ui.leftClick') {\n          el.dispatchEvent(new MouseEvent('dblclick', {\n            bubbles: true,\n            clientX: xAbs,\n            clientY: yAbs\n          }))\n          return\n        }\n        el.dispatchEvent(new MouseEvent('mousedown', {\n          button: command === 'ui.leftClick' ? 0 : 2,\n          bubbles: true,\n          clientX: xAbs,\n          clientY: yAbs\n        }))\n        el.dispatchEvent(new MouseEvent(command === 'ui.leftClick' ? 'click' : 'contextmenu', {\n          bubbles: true,\n          clientX: xAbs,\n          clientY: yAbs\n        }))\n        el.dispatchEvent(new MouseEvent('mouseup', {\n          button: command === 'ui.leftClick' ? 0 : 2,\n          bubbles: true,\n          clientX: xAbs,\n          clientY: yAbs\n        }))\n        el.focus()\n        lastClickedEl = el\n        if (lastClickedElTimeout) clearTimeout(lastClickedElTimeout)\n        lastClickedElTimeout = setTimeout(() => {\n          lastClickedEl = null\n        }, 500)\n      }\n    }\n  }\n\n  if (command === 'ui.speedupCursor') {\n    gamepadUiCursorState.multiply = pressed ? 2 : 1\n  }\n}\n\nconst setSneaking = (state: boolean) => {\n  gameAdditionalState.isSneaking = state\n  bot.setControlState('sneak', state)\n}\n\nconst onTriggerOrReleased = (command: Command, pressed: boolean) => {\n  // always allow release!\n  if (!bot || !isGameActive(false)) return\n  if (stringStartsWith(command, 'general')) {\n    // handle general commands\n    // eslint-disable-next-line @typescript-eslint/switch-exhaustiveness-check\n    switch (command) {\n      case 'general.jump':\n        bot.setControlState('jump', pressed)\n        break\n      case 'general.sneak':\n        setSneaking(pressed)\n        break\n      case 'general.sprint':\n        // todo add setting to change behavior\n        if (pressed) {\n          setSprinting(pressed)\n        }\n        break\n      case 'general.toggleSneakOrDown':\n        if (gameAdditionalState.isFlying) {\n          setSneaking(pressed)\n        } else if (pressed) {\n          setSneaking(!gameAdditionalState.isSneaking)\n        }\n\n        break\n      case 'general.attackDestroy':\n        document.dispatchEvent(new MouseEvent(pressed ? 'mousedown' : 'mouseup', { button: 0 }))\n        break\n      case 'general.interactPlace':\n        document.dispatchEvent(new MouseEvent(pressed ? 'mousedown' : 'mouseup', { button: 2 }))\n        break\n      case 'general.zoom':\n        gameAdditionalState.isZooming = pressed\n        break\n    }\n  }\n}\n\n// im still not sure, maybe need to refactor to handle in inventory instead\nconst alwaysPressedHandledCommand = (command: Command) => {\n  inModalCommand(command, true)\n  // triggered even outside of the game\n  if (command === 'general.inventory') {\n    if (activeModalStack.at(-1)?.reactType?.startsWith?.('player_win:')) { // todo?\n      hideCurrentModal()\n    }\n  }\n  if (command === 'advanced.lockUrl') {\n    lockUrl()\n  }\n}\n\nexport function lockUrl () {\n  let newQs = ''\n  if (fsState.saveLoaded) {\n    const save = localServer!.options.worldFolder.split('/').at(-1)\n    newQs = `loadSave=${save}`\n  } else if (process.env.NODE_ENV === 'development') {\n    newQs = `reconnect=1`\n  } else if (lastConnectOptions.value?.server) {\n    const qs = new URLSearchParams()\n    const { server, botVersion } = lastConnectOptions.value\n    qs.set('server', server)\n    if (botVersion) qs.set('version', botVersion)\n    newQs = String(qs.toString())\n  }\n\n  if (newQs) {\n    window.history.replaceState({}, '', `${window.location.pathname}?${newQs}`)\n  }\n}\n\nfunction cycleHotbarSlot (dir: 1 | -1) {\n  const newHotbarSlot = (bot.quickBarSlot + dir + 9) % 9\n  bot.setQuickBarSlot(newHotbarSlot)\n}\n\n// custom commands handler\nconst customCommandsHandler = ({ command }) => {\n  const [section, name] = command.split('.')\n  if (!isGameActive(true) || section !== 'custom') return\n\n  if (contro.userConfig?.custom) {\n    customCommandsConfig[(contro.userConfig.custom[name] as CustomCommand).type].handler((contro.userConfig.custom[name] as CustomCommand).inputs)\n  }\n}\ncontro.on('trigger', customCommandsHandler)\n\ncontro.on('trigger', ({ command }) => {\n  const willContinue = !isGameActive(true)\n  alwaysPressedHandledCommand(command)\n  if (willContinue) return\n\n  const secondActionCommand = secondActionCommands[command]\n  if (secondActionCommand) {\n    if (command === lastCommandTrigger?.command && Date.now() - lastCommandTrigger.time < secondActionActivationTimeout) {\n      const commandToTrigger = secondActionCommands[lastCommandTrigger.command]\n      commandToTrigger()\n      lastCommandTrigger = null\n    } else {\n      lastCommandTrigger = {\n        command,\n        time: Date.now(),\n      }\n    }\n  }\n\n  onTriggerOrReleased(command, true)\n\n  if (stringStartsWith(command, 'general')) {\n    switch (command) {\n      case 'general.jump':\n      case 'general.sneak':\n      case 'general.toggleSneakOrDown':\n      case 'general.sprint':\n      case 'general.attackDestroy':\n      case 'general.swapHands': {\n        bot._client.write('entity_action', {\n          entityId: bot.entity.id,\n          actionId: 6,\n          jumpBoost: 0\n        })\n        break\n      }\n      case 'general.interactPlace':\n        // handled in onTriggerOrReleased\n        break\n      case 'general.inventory':\n        document.exitPointerLock?.()\n        openPlayerInventory()\n        break\n      case 'general.drop': {\n        // if (bot.heldItem/* && ctrl */) bot.tossStack(bot.heldItem)\n        bot._client.write('block_dig', {\n          'status': 4,\n          'location': {\n            'x': 0,\n            'z': 0,\n            'y': 0\n          },\n          'face': 0,\n          sequence: 0\n        })\n        const slot = bot.inventory.hotbarStart + bot.quickBarSlot\n        const item = bot.inventory.slots[slot]\n        if (item) {\n          item.count--\n          bot.inventory.updateSlot(slot, item.count > 0 ? item : null!)\n        }\n        break\n      }\n      case 'general.chat':\n        showModal({ reactType: 'chat' })\n        break\n      case 'general.command':\n        chatInputValueGlobal.value = '/'\n        showModal({ reactType: 'chat' })\n        break\n      case 'general.selectItem':\n        void selectItem()\n        break\n      case 'general.nextHotbarSlot':\n        cycleHotbarSlot(1)\n        break\n      case 'general.prevHotbarSlot':\n        cycleHotbarSlot(-1)\n        break\n      case 'general.zoom':\n        break\n    }\n  }\n\n  if (command === 'ui.pauseMenu') {\n    showModal({ reactType: 'pause-screen' })\n  }\n\n  if (command === 'ui.toggleFullscreen') {\n    void goFullscreen(true)\n  }\n\n  if (command === 'ui.toggleMap') {\n    if (activeModalStack.at(-1)?.reactType === 'full-map') {\n      hideModal({ reactType: 'full-map' })\n    } else {\n      showModal({ reactType: 'full-map' })\n    }\n  }\n})\n\ncontro.on('release', ({ command }) => {\n  inModalCommand(command, false)\n  onTriggerOrReleased(command, false)\n})\n\n// hard-coded keybindings\n\nexport const f3Keybinds = [\n  {\n    key: 'KeyA',\n    action () {\n      //@ts-expect-error\n      const loadedChunks = Object.entries(worldView.loadedChunks).filter(([, v]) => v).map(([key]) => key.split(',').map(Number))\n      for (const [x, z] of loadedChunks) {\n        worldView!.unloadChunk({ x, z })\n      }\n      for (const child of viewer.scene.children) {\n        if (child.name === 'chunk') { // should not happen\n          viewer.scene.remove(child)\n          console.warn('forcefully removed chunk from scene')\n        }\n      }\n      if (localServer) {\n        //@ts-expect-error not sure why it is private... maybe revisit api?\n        localServer.players[0].world.columns = {}\n      }\n      void reloadChunks()\n    },\n    mobileTitle: 'Reload chunks',\n  },\n  {\n    key: 'KeyG',\n    action () {\n      options.showChunkBorders = !options.showChunkBorders\n      viewer.world.updateShowChunksBorder(options.showChunkBorders)\n    },\n    mobileTitle: 'Toggle chunk borders',\n  },\n  {\n    key: 'KeyY',\n    async action () {\n      // waypoints\n      const widgetNames = widgets.map(widget => widget.name)\n      const widget = await showOptionsModal('Open Widget', widgetNames)\n      if (!widget) return\n      showModal({ reactType: `widget-${widget}` })\n    },\n    mobileTitle: 'Open Widget'\n  },\n  {\n    key: 'KeyT',\n    async action () {\n      // TODO!\n      if (resourcePackState.resourcePackInstalled || loadedGameState.usingServerResourcePack) {\n        showNotification('Reloading textures...')\n        await completeTexturePackInstall('default', 'default', loadedGameState.usingServerResourcePack)\n      }\n    },\n    mobileTitle: 'Reload Textures'\n  },\n  {\n    key: 'F4',\n    async action () {\n      switch (bot.game.gameMode) {\n        case 'creative': {\n          bot.chat('/gamemode survival')\n\n          break\n        }\n        case 'survival': {\n          bot.chat('/gamemode adventure')\n\n          break\n        }\n        case 'adventure': {\n          bot.chat('/gamemode spectator')\n\n          break\n        }\n        case 'spectator': {\n          bot.chat('/gamemode creative')\n\n          break\n        }\n      // No default\n      }\n    },\n    mobileTitle: 'Cycle Game Mode'\n  },\n  {\n    key: 'KeyP',\n    async action () {\n      const { uuid, ping: playerPing, username } = bot.player\n      const proxyPing = await bot['pingProxy']()\n      void showOptionsModal(`${username}: last known total latency (ping): ${playerPing}. Connected to ${lastConnectOptions.value?.proxy} with current ping ${proxyPing}. Player UUID: ${uuid}`, [])\n    },\n    mobileTitle: 'Show Proxy & Ping Details'\n  }\n]\n\nconst hardcodedPressedKeys = new Set<string>()\ndocument.addEventListener('keydown', (e) => {\n  if (!isGameActive(false)) return\n  if (hardcodedPressedKeys.has('F3')) {\n    const keybind = f3Keybinds.find((v) => v.key === e.code)\n    if (keybind) {\n      keybind.action()\n      e.stopPropagation()\n    }\n    return\n  }\n\n  hardcodedPressedKeys.add(e.code)\n}, {\n  capture: true,\n})\ndocument.addEventListener('keyup', (e) => {\n  hardcodedPressedKeys.delete(e.code)\n})\ndocument.addEventListener('visibilitychange', (e) => {\n  if (document.visibilityState === 'hidden') {\n    hardcodedPressedKeys.clear()\n  }\n})\n\n// #region creative fly\n// these controls are more like for gamemode 3\n\nconst makeInterval = (fn, interval) => {\n  const intervalId = setInterval(fn, interval)\n\n  const cleanup = () => {\n    clearInterval(intervalId)\n    cleanup.active = false\n  }\n  cleanup.active = true\n  return cleanup\n}\n\nconst isFlying = () => bot.physics.gravity === 0\nlet endFlyLoop: ReturnType<typeof makeInterval> | undefined\n\nconst currentFlyVector = new Vec3(0, 0, 0)\nwindow.currentFlyVector = currentFlyVector\n\n// todo cleanup\nconst flyingPressedKeys = {\n  down: false,\n  up: false\n}\n\nconst startFlyLoop = () => {\n  if (!isFlying()) return\n  endFlyLoop?.()\n\n  endFlyLoop = makeInterval(() => {\n    if (!bot) {\n      endFlyLoop?.()\n      return\n    }\n\n    bot.entity.position.add(currentFlyVector.clone().multiply(new Vec3(0, 0.5, 0)))\n  }, 50)\n}\n\n// todo we will get rid of patching it when refactor controls\nlet originalSetControlState\nconst patchedSetControlState = (action, state) => {\n  if (!isFlying()) {\n    return originalSetControlState(action, state)\n  }\n\n  const actionPerFlyVector = {\n    jump: new Vec3(0, 1, 0),\n    sneak: new Vec3(0, -1, 0),\n  }\n\n  const changeVec = actionPerFlyVector[action]\n  if (!changeVec) {\n    return originalSetControlState(action, state)\n  }\n  if (flyingPressedKeys[state === 'jump' ? 'up' : 'down'] === state) return\n  const toAddVec = changeVec.scaled(state ? 1 : -1)\n  for (const coord of ['x', 'y', 'z']) {\n    if (toAddVec[coord] === 0) continue\n    if (currentFlyVector[coord] === toAddVec[coord]) return\n  }\n  currentFlyVector.add(toAddVec)\n  flyingPressedKeys[state === 'jump' ? 'up' : 'down'] = state\n}\n\nconst startFlying = (sendAbilities = true) => {\n  bot.entity['creativeFly'] = true\n  if (sendAbilities) {\n    bot._client.write('abilities', {\n      flags: 2,\n    })\n  }\n  // window.flyingSpeed will be removed\n  bot.physics['airborneAcceleration'] = window.flyingSpeed ?? 0.1 // todo use abilities\n  bot.entity.velocity = new Vec3(0, 0, 0)\n  bot.creative.startFlying()\n  startFlyLoop()\n}\n\nconst endFlying = (sendAbilities = true) => {\n  bot.entity['creativeFly'] = false\n  if (bot.physics.gravity !== 0) return\n  if (sendAbilities) {\n    bot._client.write('abilities', {\n      flags: 0,\n    })\n  }\n  Object.assign(flyingPressedKeys, {\n    up: false,\n    down: false\n  })\n  currentFlyVector.set(0, 0, 0)\n  bot.physics['airborneAcceleration'] = standardAirborneAcceleration\n  bot.creative.stopFlying()\n  endFlyLoop?.()\n}\n\nlet allowFlying = false\n\nexport const onBotCreate = () => {\n  let wasSpectatorFlying = false\n  bot._client.on('abilities', ({ flags }) => {\n    if (flags & 2) { // flying\n      toggleFly(true, false)\n    } else {\n      toggleFly(false, false)\n    }\n    allowFlying = !!(flags & 4)\n  })\n  const gamemodeCheck = () => {\n    if (bot.game.gameMode === 'spectator') {\n      toggleFly(true, false)\n      wasSpectatorFlying = true\n    } else if (wasSpectatorFlying) {\n      toggleFly(false, false)\n      wasSpectatorFlying = false\n    }\n  }\n  bot.on('game', () => {\n    gamemodeCheck()\n  })\n  bot.on('login', () => {\n    gamemodeCheck()\n  })\n}\n\nconst standardAirborneAcceleration = 0.02\nconst toggleFly = (newState = !isFlying(), sendAbilities?: boolean) => {\n  // if (bot.game.gameMode !== 'creative' && bot.game.gameMode !== 'spectator') return\n  if (!allowFlying) return\n  if (bot.setControlState !== patchedSetControlState) {\n    originalSetControlState = bot.setControlState\n    bot.setControlState = patchedSetControlState\n  }\n\n  if (newState) {\n    startFlying(sendAbilities)\n  } else {\n    endFlying(sendAbilities)\n  }\n  gameAdditionalState.isFlying = isFlying()\n}\n// #endregion\n\nconst selectItem = async () => {\n  const block = bot.blockAtCursor(5)\n  if (!block) return\n  const itemId = getItemFromBlock(block)?.id\n  if (!itemId) return\n  const Item = require('prismarine-item')(bot.version)\n  const item = new Item(itemId, 1, 0)\n  await bot.creative.setInventorySlot(bot.inventory.hotbarStart + bot.quickBarSlot, item)\n  bot.updateHeldItem()\n}\n\naddEventListener('mousedown', async (e) => {\n  if ((e.target as HTMLElement).matches?.('#VRButton')) return\n  void pointerLock.requestPointerLock()\n  if (!bot) return\n  // wheel click\n  // todo support ctrl+wheel (+nbt)\n  if (e.button === 1) {\n    await selectItem()\n  }\n})\n\nwindow.addEventListener('keydown', (e) => {\n  if (e.code !== 'Escape') return\n  if (activeModalStack.length) {\n    hideCurrentModal(undefined, () => {\n      if (!activeModalStack.length) {\n        pointerLock.justHitEscape = true\n      }\n    })\n  } else if (pointerLock.hasPointerLock) {\n    document.exitPointerLock?.()\n    if (options.autoExitFullscreen) {\n      void document.exitFullscreen()\n    }\n  } else {\n    document.dispatchEvent(new Event('pointerlockchange'))\n  }\n})\n\nwindow.addEventListener('keydown', (e) => {\n  if (e.code !== 'F2' || e.repeat || !isGameActive(true)) return\n  e.preventDefault()\n  const canvas = document.getElementById('viewer-canvas') as HTMLCanvasElement\n  if (!canvas) return\n  const link = document.createElement('a')\n  link.href = canvas.toDataURL('image/png')\n  const date = new Date()\n  link.download = `screenshot ${date.toLocaleString().replaceAll('.', '-').replace(',', '')}.png`\n  link.click()\n})\n\nwindow.addEventListener('keydown', (e) => {\n  if (e.code !== 'F1' || e.repeat || !isGameActive(true)) return\n  e.preventDefault()\n  miscUiState.showUI = !miscUiState.showUI\n})\n\n// #region experimental debug things\nwindow.addEventListener('keydown', (e) => {\n  if (e.code === 'KeyL' && e.altKey) {\n    console.clear()\n  }\n})\n// #endregion\n\nexport function updateBinds (commands: any) {\n  contro.inputSchema.commands.custom = Object.fromEntries(Object.entries(commands?.custom ?? {}).map(([key, value]) => {\n    return [key, {\n      keys: [],\n      gamepad: [],\n      type: '',\n      inputs: []\n    }]\n  }))\n\n  for (const [group, actions] of Object.entries(commands)) {\n    contro.userConfig![group] = Object.fromEntries(Object.entries(actions).map(([key, value]) => {\n      const newValue = {\n        keys: value?.keys ?? undefined,\n        gamepad: value?.gamepad ?? undefined,\n      }\n\n      if (group === 'custom') {\n        newValue['type'] = (value).type\n        newValue['inputs'] = (value).inputs\n      }\n\n      return [key, newValue]\n    }))\n  }\n}\n","import { options } from './optionsStorage'\nimport { isCypress } from './standaloneUtils'\nimport { reportWarningOnce } from './utils'\n\nlet audioContext: AudioContext\nconst sounds: Record<string, any> = {}\n\n// load as many resources on page load as possible instead on demand as user can disable internet connection after he thinks the page is loaded\nconst loadingSounds = [] as string[]\nconst convertedSounds = [] as string[]\nexport async function loadSound (path: string, contents = path) {\n  if (loadingSounds.includes(path)) return true\n  loadingSounds.push(path)\n  const res = await window.fetch(contents)\n  if (!res.ok) {\n    const error = `Failed to load sound ${path}`\n    if (isCypress()) throw new Error(error)\n    else console.warn(error)\n    return\n  }\n  const data = await res.arrayBuffer()\n\n  sounds[path] = data\n  loadingSounds.splice(loadingSounds.indexOf(path), 1)\n}\n\nexport const loadOrPlaySound = async (url, soundVolume = 1) => {\n  const soundBuffer = sounds[url]\n  if (!soundBuffer) {\n    const start = Date.now()\n    const cancelled = await loadSound(url)\n    if (cancelled || Date.now() - start > 500) return\n  }\n\n  await playSound(url)\n}\n\nexport async function playSound (url, soundVolume = 1) {\n  const volume = soundVolume * (options.volume / 100)\n\n  if (!volume) return\n\n  try {\n    audioContext ??= new window.AudioContext()\n  } catch (err) {\n    reportWarningOnce('audioContext', 'Failed to create audio context. Some sounds will not play')\n    return\n  }\n\n  for (const [soundName, sound] of Object.entries(sounds)) {\n    if (convertedSounds.includes(soundName)) continue\n    sounds[soundName] = await audioContext.decodeAudioData(sound)\n    convertedSounds.push(soundName)\n  }\n\n  const soundBuffer = sounds[url]\n  if (!soundBuffer) {\n    console.warn(`Sound ${url} not loaded yet`)\n    return\n  }\n\n  const gainNode = audioContext.createGain()\n  const source = audioContext.createBufferSource()\n  source.buffer = soundBuffer\n  source.connect(gainNode)\n  gainNode.connect(audioContext.destination)\n  gainNode.gain.value = volume\n  source.start(0)\n}\n","//@ts-check\n\nimport { join } from 'path'\nimport fs from 'fs'\nimport * as THREE from 'three'\nimport { subscribeKey } from 'valtio/utils'\nimport { EntityMesh } from 'prismarine-viewer/viewer/lib/entity/EntityMesh'\nimport { fromTexturePackPath, resourcePackState } from './resourcePack'\nimport { options, watchValue } from './optionsStorage'\nimport { miscUiState } from './globalState'\n\nlet panoramaCubeMap\nlet shouldDisplayPanorama = false\nlet panoramaUsesResourcePack = null as boolean | null\n\nconst panoramaFiles = [\n  'panorama_1.png', // WS\n  'panorama_3.png', // ES\n  'panorama_4.png', // Up\n  'panorama_5.png', // Down\n  'panorama_0.png', // NS\n  'panorama_2.png' // SS\n]\n\nconst panoramaResourcePackPath = 'assets/minecraft/textures/gui/title/background'\nconst possiblyLoadPanoramaFromResourcePack = async (file) => {\n  let base64Texture\n  if (panoramaUsesResourcePack) {\n    try {\n      // TODO!\n      // base64Texture = await fs.promises.readFile(fromTexturePackPath(join(panoramaResourcePackPath, file)), 'base64')\n    } catch (err) {\n      panoramaUsesResourcePack = false\n    }\n  }\n  if (base64Texture) return `data:image/png;base64,${base64Texture}`\n  else return join('background', file)\n}\n\nconst updateResourcePackSupportPanorama = async () => {\n  try {\n    // TODO!\n    // await fs.promises.readFile(fromTexturePackPath(join(panoramaResourcePackPath, panoramaFiles[0])), 'base64')\n    panoramaUsesResourcePack = true\n  } catch (err) {\n    panoramaUsesResourcePack = false\n  }\n}\n\nwatchValue(miscUiState, m => {\n  if (m.appLoaded) {\n    // Also adds panorama on app load here\n    watchValue(resourcePackState, async (s) => {\n      const oldState = panoramaUsesResourcePack\n      const newState = s.resourcePackInstalled && (await updateResourcePackSupportPanorama(), panoramaUsesResourcePack)\n      if (newState === oldState) return\n      removePanorama()\n      void addPanoramaCubeMap()\n    })\n  }\n})\n\nsubscribeKey(miscUiState, 'loadedDataVersion', () => {\n  if (miscUiState.loadedDataVersion) removePanorama()\n  else void addPanoramaCubeMap()\n})\n\n// Menu panorama background\n// TODO-low use abort controller\nexport async function addPanoramaCubeMap () {\n  if (panoramaCubeMap || miscUiState.loadedDataVersion || options.disableAssets) return\n  shouldDisplayPanorama = true\n\n  let time = 0\n  viewer.camera.fov = 85\n  viewer.camera.near = 0.05\n  viewer.camera.updateProjectionMatrix()\n  viewer.camera.position.set(0, 0, 0)\n  viewer.camera.rotation.set(0, 0, 0)\n  const panorGeo = new THREE.BoxGeometry(1000, 1000, 1000)\n\n  const loader = new THREE.TextureLoader()\n  const panorMaterials = [] as THREE.MeshBasicMaterial[]\n  await updateResourcePackSupportPanorama()\n  for (const file of panoramaFiles) {\n    panorMaterials.push(new THREE.MeshBasicMaterial({\n      map: loader.load(await possiblyLoadPanoramaFromResourcePack(file)),\n      transparent: true,\n      side: THREE.DoubleSide\n    }))\n  }\n\n  if (!shouldDisplayPanorama) return\n\n  const panoramaBox = new THREE.Mesh(panorGeo, panorMaterials)\n\n  panoramaBox.onBeforeRender = () => {\n    time += 0.01\n    panoramaBox.rotation.y = Math.PI + time * 0.01\n    panoramaBox.rotation.z = Math.sin(-time * 0.001) * 0.001\n  }\n\n  const group = new THREE.Object3D()\n  group.add(panoramaBox)\n\n  // should be rewritten entirely\n  for (let i = 0; i < 20; i++) {\n    const m = new EntityMesh('1.16.4', 'squid').mesh!\n    m.position.set(Math.random() * 30 - 15, Math.random() * 20 - 10, Math.random() * 10 - 17)\n    m.rotation.set(0, Math.PI + Math.random(), -Math.PI / 4, 'ZYX')\n    const v = Math.random() * 0.01\n    m.children[0].onBeforeRender = () => {\n      m.rotation.y += v\n      m.rotation.z = Math.cos(panoramaBox.rotation.y * 3) * Math.PI / 4 - Math.PI / 2\n    }\n    group.add(m)\n  }\n\n  viewer.scene.add(group)\n  panoramaCubeMap = group\n}\n\nexport function removePanorama () {\n  shouldDisplayPanorama = false\n  if (!panoramaCubeMap) return\n  viewer.camera.fov = options.fov\n  viewer.camera.near = 0.1\n  viewer.camera.updateProjectionMatrix()\n  viewer.scene.remove(panoramaCubeMap)\n  panoramaCubeMap = null\n}\n","/* eslint-disable import/order */\nimport './importsWorkaround'\nimport './styles.css'\nimport './globals'\nimport './devtools'\nimport './entities'\nimport './globalDomListeners'\nimport initCollisionShapes from './getCollisionInteractionShapes'\nimport { onGameLoad } from './inventoryWindows'\nimport { supportedVersions } from 'minecraft-protocol'\nimport protocolMicrosoftAuth from 'minecraft-protocol/src/client/microsoftAuth'\nimport microsoftAuthflow from './microsoftAuthflow'\nimport nbt from 'prismarine-nbt'\n\nimport 'core-js/features/array/at'\nimport 'core-js/features/promise/with-resolvers'\n\nimport './scaleInterface'\nimport { initWithRenderer } from './topRightStats'\nimport PrismarineBlock from 'prismarine-block'\nimport PrismarineItem from 'prismarine-item'\n\nimport { options, watchValue } from './optionsStorage'\nimport './reactUi'\nimport { contro, lockUrl, onBotCreate } from './controls'\nimport './dragndrop'\nimport { possiblyCleanHandle, resetStateAfterDisconnect } from './browserfs'\nimport { watchOptionsAfterViewerInit, watchOptionsAfterWorldViewInit } from './watchOptions'\nimport downloadAndOpenFile from './downloadAndOpenFile'\n\nimport fs from 'fs'\nimport net from 'net'\nimport mineflayer from 'mineflayer'\nimport { WorldDataEmitter, Viewer } from 'prismarine-viewer/viewer'\nimport pathfinder from 'mineflayer-pathfinder'\nimport { Vec3 } from 'vec3'\n\nimport worldInteractions from './worldInteractions'\n\nimport * as THREE from 'three'\nimport MinecraftData, { versionsByMinecraftVersion } from 'minecraft-data'\nimport debug from 'debug'\nimport { defaultsDeep } from 'lodash-es'\nimport initializePacketsReplay from './packetsReplay'\n\nimport { initVR } from './vr'\nimport {\n  AppConfig,\n  activeModalStack,\n  activeModalStacks,\n  hideModal,\n  insertActiveModalStack,\n  isGameActive,\n  loadedGameState,\n  miscUiState,\n  showModal\n} from './globalState'\n\n\nimport {\n  pointerLock,\n  toMajorVersion,\n  setLoadingScreenStatus\n} from './utils'\nimport { isCypress } from './standaloneUtils'\n\nimport {\n  removePanorama\n} from './panorama'\n\nimport { startLocalServer, unsupportedLocalServerFeatures } from './createLocalServer'\nimport defaultServerOptions from './defaultLocalServerOptions'\nimport dayCycle from './dayCycle'\n\nimport { onAppLoad, resourcepackReload } from './resourcePack'\nimport { ConnectPeerOptions, connectToPeer } from './localServerMultiplayer'\nimport CustomChannelClient from './customClient'\nimport { loadScript } from 'prismarine-viewer/viewer/lib/utils'\nimport { registerServiceWorker } from './serviceWorker'\nimport { appStatusState, lastConnectOptions } from './react/AppStatusProvider'\n\nimport { fsState } from './loadSave'\nimport { watchFov } from './rendererUtils'\nimport { loadInMemorySave } from './react/SingleplayerProvider'\n\nimport { downloadSoundsIfNeeded } from './soundSystem'\nimport { ua } from './react/utils'\nimport { handleMovementStickDelta, joystickPointer } from './react/TouchAreasControls'\nimport { possiblyHandleStateVariable } from './googledrive'\nimport flyingSquidEvents from './flyingSquidEvents'\nimport { hideNotification, notificationProxy, showNotification } from './react/NotificationProvider'\nimport { saveToBrowserMemory } from './react/PauseScreen'\nimport { ViewerWrapper } from 'prismarine-viewer/viewer/lib/viewerWrapper'\nimport './devReload'\nimport './water'\nimport { ConnectOptions, downloadNeededDataOnConnect } from './connect'\nimport { ref, subscribe } from 'valtio'\nimport { signInMessageState } from './react/SignInMessageProvider'\nimport { updateAuthenticatedAccountData, updateLoadedServerData } from './react/ServersListProvider'\nimport { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\nimport packetsPatcher from './packetsPatcher'\nimport { mainMenuState } from './react/MainMenuRenderApp'\nimport { ItemsRenderer } from 'mc-assets/dist/itemsRenderer'\nimport './mobileShim'\nimport { parseFormattedMessagePacket } from './botUtils'\nimport { getViewerVersionData, getWsProtocolStream } from './viewerConnector'\n\nwindow.debug = debug\nwindow.THREE = THREE\nwindow.worldInteractions = worldInteractions\nwindow.beforeRenderFrame = []\n\n// ACTUAL CODE\n\nvoid registerServiceWorker().then(() => {\n  mainMenuState.serviceWorkerLoaded = true\n})\nwatchFov()\ninitCollisionShapes()\ninitializePacketsReplay()\npacketsPatcher()\nonAppLoad()\n\n// Create three.js context, add to page\nlet renderer: THREE.WebGLRenderer\ntry {\n  renderer = new THREE.WebGLRenderer({\n    powerPreference: options.gpuPreference,\n    preserveDrawingBuffer: true,\n    logarithmicDepthBuffer: true,\n  })\n} catch (err) {\n  console.error(err)\n  throw new Error(`Failed to create WebGL context, not possible to render (restart browser): ${err.message}`)\n}\n\n// renderer.localClippingEnabled = true\ninitWithRenderer(renderer.domElement)\nconst renderWrapper = new ViewerWrapper(renderer.domElement, renderer)\nrenderWrapper.addToPage()\nwatchValue(options, (o) => {\n  renderWrapper.renderInterval = o.frameLimit ? 1000 / o.frameLimit : 0\n  renderWrapper.renderIntervalUnfocused = o.backgroundRendering === '5fps' ? 1000 / 5 : o.backgroundRendering === '20fps' ? 1000 / 20 : undefined\n})\n\nconst isFirefox = ua.getBrowser().name === 'Firefox'\nif (isFirefox) {\n  // set custom property\n  document.body.style.setProperty('--thin-if-firefox', 'thin')\n}\n\nconst isIphone = ua.getDevice().model === 'iPhone' // todo ipad?\n\nif (isIphone) {\n  document.documentElement.style.setProperty('--hud-bottom-max', '21px') // env-safe-aria-inset-bottom\n}\n\n// Create viewer\nconst viewer: import('prismarine-viewer/viewer/lib/viewer').Viewer = new Viewer(renderer)\nwindow.viewer = viewer\nviewer.getMineflayerBot = () => bot\n// todo unify\nviewer.entities.getItemUv = (idOrName: number | string) => {\n  try {\n    const name = typeof idOrName === 'number' ? loadedData.items[idOrName]?.name : idOrName\n    // TODO\n    if (!viewer.world.itemsAtlasParser) throw new Error('itemsAtlasParser not loaded yet')\n    const itemsRenderer = new ItemsRenderer('latest', viewer.world.blockstatesModels, viewer.world.itemsAtlasParser, viewer.world.blocksAtlasParser)\n    const textureInfo = itemsRenderer.getItemTexture(name)\n    if (!textureInfo) throw new Error(`Texture not found for item ${name}`)\n    const tex = 'type' in textureInfo ? textureInfo : textureInfo.left\n    const [x, y, w, h] = tex.slice\n    const textureThree = tex.type === 'blocks' ? viewer.world.material.map! : viewer.entities.itemsTexture!\n    const img = textureThree.image\n    const [u, v, su, sv] = [x / img.width, y / img.height, (w / img.width), (h / img.height)]\n    const uvInfo = {\n      u,\n      v,\n      su,\n      sv\n    }\n    return {\n      ...uvInfo,\n      texture: textureThree\n    }\n  } catch (err) {\n    reportError?.(err)\n    return {\n      u: 0,\n      v: 0,\n      size: 16 / viewer.world.material.map!.image.width,\n      texture: viewer.world.material.map!\n    }\n  }\n}\n\nviewer.entities.entitiesOptions = {\n  fontFamily: 'mojangles'\n}\nwatchOptionsAfterViewerInit()\n\nlet mouseMovePostHandle = (e) => { }\nlet lastMouseMove: number\nconst updateCursor = () => {\n  worldInteractions.update()\n}\nfunction onCameraMove (e) {\n  if (e.type !== 'touchmove' && !pointerLock.hasPointerLock) return\n  e.stopPropagation?.()\n  const now = performance.now()\n  // todo: limit camera movement for now to avoid unexpected jumps\n  if (now - lastMouseMove < 4) return\n  lastMouseMove = now\n  let { mouseSensX, mouseSensY } = options\n  if (mouseSensY === -1) mouseSensY = mouseSensX\n  mouseMovePostHandle({\n    x: e.movementX * mouseSensX * 0.0001,\n    y: e.movementY * mouseSensY * 0.0001\n  })\n  updateCursor()\n}\nwindow.addEventListener('mousemove', onCameraMove, { capture: true })\ncontro.on('stickMovement', ({ stick, vector }) => {\n  if (!isGameActive(true)) return\n  if (stick !== 'right') return\n  let { x, z } = vector\n  if (Math.abs(x) < 0.18) x = 0\n  if (Math.abs(z) < 0.18) z = 0\n  onCameraMove({ movementX: x * 10, movementY: z * 10, type: 'touchmove' })\n  miscUiState.usingGamepadInput = true\n})\n\nfunction hideCurrentScreens () {\n  activeModalStacks['main-menu'] = [...activeModalStack]\n  insertActiveModalStack('', [])\n}\n\nconst loadSingleplayer = (serverOverrides = {}, flattenedServerOverrides = {}) => {\n  const serverSettingsQsRaw = new URLSearchParams(window.location.search).getAll('serverSetting')\n  const serverSettingsQs = serverSettingsQsRaw.map(x => x.split(':')).reduce<Record<string, string>>((acc, [key, value]) => {\n    acc[key] = JSON.parse(value)\n    return acc\n  }, {})\n  void connect({ singleplayer: true, username: options.localUsername, serverOverrides, serverOverridesFlat: { ...flattenedServerOverrides, ...serverSettingsQs } })\n}\nfunction listenGlobalEvents () {\n  window.addEventListener('connect', e => {\n    const options = (e as CustomEvent).detail\n    void connect(options)\n  })\n  window.addEventListener('singleplayer', (e) => {\n    loadSingleplayer((e as CustomEvent).detail)\n  })\n}\n\nlet listeners = [] as Array<{ target, event, callback }>\nlet cleanupFunctions = [] as Array<() => void>\n// only for dom listeners (no removeAllListeners)\n// todo refactor them out of connect fn instead\nconst registerListener: import('./utilsTs').RegisterListener = (target, event, callback) => {\n  target.addEventListener(event, callback)\n  listeners.push({ target, event, callback })\n}\nconst removeAllListeners = () => {\n  for (const { target, event, callback } of listeners) {\n    target.removeEventListener(event, callback)\n  }\n  for (const cleanupFunction of cleanupFunctions) {\n    cleanupFunction()\n  }\n  cleanupFunctions = []\n  listeners = []\n}\n\nconst cleanConnectIp = (host: string | undefined, defaultPort: string | undefined) => {\n  const hostPort = host && /:\\d+$/.exec(host)\n  if (hostPort) {\n    return {\n      host: host.slice(0, -hostPort[0].length),\n      port: hostPort[0].slice(1)\n    }\n  } else {\n    return { host, port: defaultPort }\n  }\n}\n\nasync function connect (connectOptions: ConnectOptions) {\n  if (miscUiState.gameLoaded) return\n  miscUiState.hasErrors = false\n  lastConnectOptions.value = connectOptions\n  removePanorama()\n\n  const { singleplayer } = connectOptions\n  const p2pMultiplayer = !!connectOptions.peerId\n  miscUiState.singleplayer = singleplayer\n  miscUiState.flyingSquid = singleplayer || p2pMultiplayer\n  const { renderDistance: renderDistanceSingleplayer, multiplayerRenderDistance } = options\n  const server = cleanConnectIp(connectOptions.server, '25565')\n  if (connectOptions.proxy?.startsWith(':')) {\n    connectOptions.proxy = `${location.protocol}//${location.hostname}${connectOptions.proxy}`\n  }\n  const proxy = cleanConnectIp(connectOptions.proxy, undefined)\n  let { username } = connectOptions\n\n  console.log(`connecting to ${server.host}:${server.port} with ${username}`)\n\n  hideCurrentScreens()\n  setLoadingScreenStatus('Logging in')\n\n  let ended = false\n  let bot!: typeof __type_bot\n  const destroyAll = () => {\n    if (ended) return\n    ended = true\n    viewer.resetAll()\n    localServer = window.localServer = window.server = undefined\n\n    renderWrapper.postRender = () => { }\n    if (bot) {\n      bot.end()\n      // ensure mineflayer plugins receive this event for cleanup\n      bot.emit('end', '')\n      bot.removeAllListeners()\n      bot._client.removeAllListeners()\n      //@ts-expect-error TODO?\n      bot._client = undefined\n      //@ts-expect-error\n      window.bot = bot = undefined\n    }\n    resetStateAfterDisconnect()\n    cleanFs()\n    removeAllListeners()\n  }\n  const cleanFs = () => {\n    if (singleplayer && !fsState.inMemorySave) {\n      possiblyCleanHandle(() => {\n        // todo: this is not enough, we need to wait for all async operations to finish\n      })\n    }\n  }\n  let lastPacket = undefined as string | undefined\n  const onPossibleErrorDisconnect = () => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    if (lastPacket && bot?._client && bot._client.state !== 'play') {\n      appStatusState.descriptionHint = `Last Server Packet: ${lastPacket}`\n    }\n  }\n  const handleError = (err) => {\n    console.error(err)\n    if (err === 'ResizeObserver loop completed with undelivered notifications.') {\n      return\n    }\n    errorAbortController.abort()\n    if (isCypress()) throw err\n    miscUiState.hasErrors = true\n    if (miscUiState.gameLoaded) return\n\n    setLoadingScreenStatus(`Error encountered. ${err}`, true)\n    onPossibleErrorDisconnect()\n    destroyAll()\n  }\n\n  const errorAbortController = new AbortController()\n  window.addEventListener('unhandledrejection', (e) => {\n    if (e.reason.name === 'ServerPluginLoadFailure') {\n      if (confirm(`Failed to load server plugin ${e.reason.pluginName} (invoking ${e.reason.pluginMethod}). Continue?`)) {\n        return\n      }\n    }\n    handleError(e.reason)\n  }, {\n    signal: errorAbortController.signal\n  })\n  window.addEventListener('error', (e) => {\n    handleError(e.message)\n  }, {\n    signal: errorAbortController.signal\n  })\n\n  if (proxy && !connectOptions.viewerWsConnect) {\n    console.log(`using proxy ${proxy.host}:${proxy.port || location.port}`)\n\n    net['setProxy']({ hostname: proxy.host, port: proxy.port })\n  }\n\n  const renderDistance = singleplayer ? renderDistanceSingleplayer : multiplayerRenderDistance\n  let updateDataAfterJoin = () => { }\n  let localServer\n  try {\n    const serverOptions = defaultsDeep({}, connectOptions.serverOverrides ?? {}, options.localServerOptions, defaultServerOptions)\n    Object.assign(serverOptions, connectOptions.serverOverridesFlat ?? {})\n    window._LOAD_MC_DATA() // start loading data (if not loaded yet)\n    const downloadMcData = async (version: string) => {\n      if (connectOptions.authenticatedAccount && (versionToNumber(version) < versionToNumber('1.19.4') || versionToNumber(version) >= versionToNumber('1.21'))) {\n        // todo support it (just need to fix .export crash)\n        throw new Error('Microsoft authentication is only supported on 1.19.4 - 1.20.6 (at least for now)')\n      }\n\n      await downloadNeededDataOnConnect(version)\n      try {\n        await resourcepackReload(version)\n      } catch (err) {\n        console.error(err)\n        const doContinue = confirm('Failed to apply texture pack. See errors in the console. Continue?')\n        if (!doContinue) {\n          throw err\n        }\n      }\n      viewer.world.blockstatesModels = await import('mc-assets/dist/blockStatesModels.json')\n      void viewer.setVersion(version, options.useVersionsTextures === 'latest' ? version : options.useVersionsTextures)\n    }\n\n    const downloadVersion = connectOptions.botVersion || (singleplayer ? serverOptions.version : undefined)\n    if (downloadVersion) {\n      await downloadMcData(downloadVersion)\n    }\n\n    if (singleplayer) {\n      // SINGLEPLAYER EXPLAINER:\n      // Note 1: here we have custom sync communication between server Client (flying-squid) and game client (mineflayer)\n      // Note 2: custom Server class is used which simplifies communication & Client creation on it's side\n      // local server started\n      // mineflayer.createBot (see source def)\n      // bot._client = bot._client ?? mc.createClient(options) <-- mc-protocol package\n      // tcpDns() skipped since we define connect option\n      // in setProtocol: we emit 'connect' here below so in that file we send set_protocol and login_start (onLogin handler)\n      // Client (class) of flying-squid (in server/login.js of mc-protocol): onLogin handler: skip most logic & go to loginClient() which assigns uuid and sends 'success' back to client (onLogin handler) and emits 'login' on the server (login.js in flying-squid handler)\n      // flying-squid: 'login' -> player.login -> now sends 'login' event to the client (handled in many plugins in mineflayer) -> then 'update_health' is sent which emits 'spawn' in mineflayer\n\n      setLoadingScreenStatus('Starting local server')\n      localServer = window.localServer = window.server = startLocalServer(serverOptions)\n      // todo need just to call quit if started\n      // loadingScreen.maybeRecoverable = false\n      // init world, todo: do it for any async plugins\n      if (!localServer.pluginsReady) {\n        await new Promise(resolve => {\n          localServer.once('pluginsReady', resolve)\n        })\n      }\n\n      localServer.on('newPlayer', (player) => {\n        // it's you!\n        player.on('loadingStatus', (newStatus) => {\n          setLoadingScreenStatus(newStatus, false, false, true)\n        })\n      })\n      flyingSquidEvents()\n    }\n\n    if (connectOptions.authenticatedAccount) username = 'you'\n    let initialLoadingText: string\n    if (singleplayer) {\n      initialLoadingText = 'Local server is still starting'\n    } else if (p2pMultiplayer) {\n      initialLoadingText = 'Connecting to peer'\n    } else {\n      initialLoadingText = 'Connecting to server'\n    }\n    setLoadingScreenStatus(initialLoadingText)\n\n    let newTokensCacheResult = null as any\n    const cachedTokens = typeof connectOptions.authenticatedAccount === 'object' ? connectOptions.authenticatedAccount.cachedTokens : {}\n    const authData = connectOptions.authenticatedAccount ? await microsoftAuthflow({\n      tokenCaches: cachedTokens,\n      proxyBaseUrl: connectOptions.proxy,\n      setProgressText (text) {\n        setLoadingScreenStatus(text)\n      },\n      setCacheResult (result) {\n        newTokensCacheResult = result\n      },\n      connectingServer: server.host\n    }) : undefined\n\n    let clientDataStream\n    if (p2pMultiplayer) {\n      clientDataStream = await connectToPeer(connectOptions.peerId!, connectOptions.peerOptions)\n    }\n    if (connectOptions.viewerWsConnect) {\n      const { version, time } = await getViewerVersionData(connectOptions.viewerWsConnect)\n      console.log('Latency:', Date.now() - time, 'ms')\n      // const version = '1.21.1'\n      connectOptions.botVersion = version\n      await downloadMcData(version)\n      setLoadingScreenStatus(`Connecting to WebSocket server ${connectOptions.viewerWsConnect}`)\n      clientDataStream = await getWsProtocolStream(connectOptions.viewerWsConnect)\n    }\n\n    bot = mineflayer.createBot({\n      host: server.host,\n      port: server.port ? +server.port : undefined,\n      version: connectOptions.botVersion || false,\n      ...clientDataStream ? {\n        stream: clientDataStream,\n      } : {},\n      ...singleplayer || p2pMultiplayer ? {\n        keepAlive: false,\n      } : {},\n      ...singleplayer ? {\n        version: serverOptions.version,\n        connect () { },\n        Client: CustomChannelClient as any,\n      } : {},\n      onMsaCode (data) {\n        signInMessageState.code = data.user_code\n        signInMessageState.link = data.verification_uri\n        signInMessageState.expiresOn = Date.now() + data.expires_in * 1000\n      },\n      sessionServer: authData?.sessionEndpoint?.toString(),\n      auth: connectOptions.authenticatedAccount ? async (client, options) => {\n        authData!.setOnMsaCodeCallback(options.onMsaCode)\n        authData?.setConnectingVersion(client.version)\n        //@ts-expect-error\n        client.authflow = authData!.authFlow\n        try {\n          signInMessageState.abortController = ref(new AbortController())\n          await Promise.race([\n            protocolMicrosoftAuth.authenticate(client, options),\n            new Promise((_r, reject) => {\n              signInMessageState.abortController.signal.addEventListener('abort', () => {\n                reject(new Error('Aborted by user'))\n              })\n            })\n          ])\n          if (signInMessageState.shouldSaveToken) {\n            updateAuthenticatedAccountData(accounts => {\n              const existingAccount = accounts.find(a => a.username === client.username)\n              if (existingAccount) {\n                existingAccount.cachedTokens = { ...existingAccount.cachedTokens, ...newTokensCacheResult }\n              } else {\n                accounts.push({\n                  username: client.username,\n                  cachedTokens: { ...cachedTokens, ...newTokensCacheResult }\n                })\n              }\n              return accounts\n            })\n            updateDataAfterJoin = () => {\n              updateLoadedServerData(s => ({ ...s, authenticatedAccountOverride: client.username }), connectOptions.serverIndex)\n            }\n          } else {\n            updateDataAfterJoin = () => {\n              updateLoadedServerData(s => ({ ...s, authenticatedAccountOverride: undefined }), connectOptions.serverIndex)\n            }\n          }\n          setLoadingScreenStatus('Authentication successful. Logging in to server')\n        } finally {\n          signInMessageState.code = ''\n        }\n      } : undefined,\n      username,\n      viewDistance: renderDistance,\n      checkTimeoutInterval: 240 * 1000,\n      // noPongTimeout: 240 * 1000,\n      closeTimeout: 240 * 1000,\n      respawn: options.autoRespawn,\n      maxCatchupTicks: 0,\n      async versionSelectedHook (client) {\n        await downloadMcData(client.version)\n        setLoadingScreenStatus(initialLoadingText)\n      },\n      'mapDownloader-saveToFile': false,\n      // \"mapDownloader-saveInternal\": false, // do not save into memory, todo must be implemeneted as we do really care of ram\n    }) as unknown as typeof __type_bot\n    window.bot = bot\n    customEvents.emit('mineflayerBotCreated')\n    if (singleplayer || p2pMultiplayer) {\n      // in case of p2pMultiplayer there is still flying-squid on the host side\n      const _supportFeature = bot.supportFeature\n      bot.supportFeature = ((feature) => {\n        if (unsupportedLocalServerFeatures.includes(feature)) {\n          return false\n        }\n        return _supportFeature(feature)\n      }) as typeof bot.supportFeature\n\n      bot.emit('inject_allowed')\n      bot._client.emit('connect')\n    } else if (connectOptions.viewerWsConnect) {\n      // bot.emit('inject_allowed')\n      bot._client.emit('connect')\n    } else {\n      const setupConnectHandlers = () => {\n        bot._client.socket.on('connect', () => {\n          console.log('Proxy WebSocket connection established')\n          //@ts-expect-error\n          bot._client.socket._ws.addEventListener('close', () => {\n            console.log('WebSocket connection closed')\n            setTimeout(() => {\n              if (bot) {\n                bot.emit('end', 'WebSocket connection closed with unknown reason')\n              }\n            }, 1000)\n          })\n          bot._client.socket.on('close', () => {\n            setTimeout(() => {\n              if (bot) {\n                bot.emit('end', 'WebSocket connection closed with unknown reason')\n              }\n            })\n          })\n        })\n        let i = 0\n        //@ts-expect-error\n        bot.pingProxy = async () => {\n          const curI = ++i\n          return new Promise(resolve => {\n            //@ts-expect-error\n            bot._client.socket._ws.send(`ping:${curI}`)\n            const date = Date.now()\n            const onPong = (received) => {\n              if (received !== curI.toString()) return\n              bot._client.socket.off('pong' as any, onPong)\n              resolve(Date.now() - date)\n            }\n            bot._client.socket.on('pong' as any, onPong)\n          })\n        }\n      }\n      // socket setup actually can be delayed because of dns lookup\n      if (bot._client.socket) {\n        setupConnectHandlers()\n      } else {\n        const originalSetSocket = bot._client.setSocket.bind(bot._client)\n        bot._client.setSocket = (socket) => {\n          if (!bot) return\n          originalSetSocket(socket)\n          setupConnectHandlers()\n        }\n      }\n\n    }\n  } catch (err) {\n    handleError(err)\n  }\n  if (!bot) return\n\n  const p2pConnectTimeout = p2pMultiplayer ? setTimeout(() => { throw new Error('Spawn timeout. There might be error on the other side, check console.') }, 20_000) : undefined\n\n  // bot.on('inject_allowed', () => {\n  //   loadingScreen.maybeRecoverable = false\n  // })\n\n  bot.on('error', handleError)\n\n  bot.on('kicked', (kickReason) => {\n    console.log('You were kicked!', kickReason)\n    const { formatted: kickReasonFormatted, plain: kickReasonString } = parseFormattedMessagePacket(kickReason)\n    setLoadingScreenStatus(`The Minecraft server kicked you. Kick reason: ${kickReasonString}`, true, undefined, undefined, kickReasonFormatted)\n    destroyAll()\n  })\n\n  const packetBeforePlay = (_, __, ___, fullBuffer) => {\n    lastPacket = fullBuffer.toString()\n  }\n  bot._client.on('packet', packetBeforePlay as any)\n  const playStateSwitch = (newState) => {\n    if (newState === 'play') {\n      bot._client.removeListener('packet', packetBeforePlay)\n    }\n  }\n  bot._client.on('state', playStateSwitch)\n\n  bot.on('end', (endReason) => {\n    if (ended) return\n    console.log('disconnected for', endReason)\n    setLoadingScreenStatus(`You have been disconnected from the server. End reason: ${endReason}`, true)\n    onPossibleErrorDisconnect()\n    destroyAll()\n    if (isCypress()) throw new Error(`disconnected: ${endReason}`)\n  })\n\n  onBotCreate()\n\n  bot.once('login', () => {\n    worldInteractions.initBot()\n\n    setLoadingScreenStatus('Loading world')\n  })\n\n  const spawnEarlier = !singleplayer && !p2pMultiplayer\n  // don't use spawn event, player can be dead\n  bot.once(spawnEarlier ? 'forcedMove' : 'health', () => {\n    errorAbortController.abort()\n    const mcData = MinecraftData(bot.version)\n    window.PrismarineBlock = PrismarineBlock(mcData.version.minecraftVersion!)\n    window.PrismarineItem = PrismarineItem(mcData.version.minecraftVersion!)\n    window.loadedData = mcData\n    window.Vec3 = Vec3\n    window.pathfinder = pathfinder\n\n    miscUiState.gameLoaded = true\n    miscUiState.loadedServerIndex = connectOptions.serverIndex ?? ''\n    customEvents.emit('gameLoaded')\n    if (p2pConnectTimeout) clearTimeout(p2pConnectTimeout)\n\n    setLoadingScreenStatus('Placing blocks (starting viewer)')\n    localStorage.lastConnectOptions = JSON.stringify(connectOptions)\n    connectOptions.onSuccessfulPlay?.()\n    if (process.env.NODE_ENV === 'development' && !localStorage.lockUrl && new URLSearchParams(location.search).size === 0) {\n      lockUrl()\n    }\n    updateDataAfterJoin()\n    if (connectOptions.autoLoginPassword) {\n      bot.chat(`/login ${connectOptions.autoLoginPassword}`)\n    }\n\n    console.log('bot spawned - starting viewer')\n\n    const center = bot.entity.position\n\n    const worldView = window.worldView = new WorldDataEmitter(bot.world, renderDistance, center)\n    watchOptionsAfterWorldViewInit()\n\n    bot.on('physicsTick', () => updateCursor())\n\n\n    void initVR()\n\n    renderWrapper.postRender = () => {\n      viewer.setFirstPersonCamera(null, bot.entity.yaw, bot.entity.pitch)\n    }\n\n\n    // Link WorldDataEmitter and Viewer\n    viewer.connect(worldView)\n    worldView.listenToBot(bot)\n    void worldView.init(bot.entity.position)\n\n    dayCycle()\n\n    // Bot position callback\n    function botPosition () {\n      viewer.world.lastCamUpdate = Date.now()\n      // this might cause lag, but not sure\n      viewer.setFirstPersonCamera(bot.entity.position, bot.entity.yaw, bot.entity.pitch)\n      void worldView.updatePosition(bot.entity.position)\n    }\n    bot.on('move', botPosition)\n    botPosition()\n\n    setLoadingScreenStatus('Setting callbacks')\n\n    const maxPitch = 0.5 * Math.PI\n    const minPitch = -0.5 * Math.PI\n    mouseMovePostHandle = ({ x, y }) => {\n      viewer.world.lastCamUpdate = Date.now()\n      bot.entity.pitch -= y\n      bot.entity.pitch = Math.max(minPitch, Math.min(maxPitch, bot.entity.pitch))\n      bot.entity.yaw -= x\n    }\n\n    function changeCallback () {\n      if (notificationProxy.id === 'pointerlockchange') {\n        hideNotification()\n      }\n      if (renderer.xr.isPresenting) return // todo\n      if (!pointerLock.hasPointerLock && activeModalStack.length === 0) {\n        showModal({ reactType: 'pause-screen' })\n      }\n    }\n\n    registerListener(document, 'pointerlockchange', changeCallback, false)\n\n    const cameraControlEl = document.querySelector('#ui-root')\n\n    /** after what time of holding the finger start breaking the block */\n    const touchStartBreakingBlockMs = 500\n    let virtualClickActive = false\n    let virtualClickTimeout\n    let screenTouches = 0\n    let capturedPointer: { id; x; y; sourceX; sourceY; activateCameraMove; time } | undefined\n    registerListener(document, 'pointerdown', (e) => {\n      const usingJoystick = options.touchControlsType === 'joystick-buttons'\n      const clickedEl = e.composedPath()[0]\n      if (!isGameActive(true) || !miscUiState.currentTouch || clickedEl !== cameraControlEl || e.pointerId === undefined) {\n        return\n      }\n      screenTouches++\n      if (screenTouches === 3) {\n        // todo needs fixing!\n        // window.dispatchEvent(new MouseEvent('mousedown', { button: 1 }))\n      }\n      if (usingJoystick) {\n        if (!joystickPointer.pointer && e.clientX < window.innerWidth / 2) {\n          joystickPointer.pointer = {\n            pointerId: e.pointerId,\n            x: e.clientX,\n            y: e.clientY\n          }\n          return\n        }\n      }\n      if (capturedPointer) {\n        return\n      }\n      cameraControlEl.setPointerCapture(e.pointerId)\n      capturedPointer = {\n        id: e.pointerId,\n        x: e.clientX,\n        y: e.clientY,\n        sourceX: e.clientX,\n        sourceY: e.clientY,\n        activateCameraMove: false,\n        time: Date.now()\n      }\n      if (options.touchControlsType !== 'joystick-buttons') {\n        virtualClickTimeout ??= setTimeout(() => {\n          virtualClickActive = true\n          document.dispatchEvent(new MouseEvent('mousedown', { button: 0 }))\n        }, touchStartBreakingBlockMs)\n      }\n    })\n    registerListener(document, 'pointermove', (e) => {\n      if (e.pointerId === undefined) return\n      const supportsPressure = (e as any).pressure !== undefined && (e as any).pressure !== 0 && (e as any).pressure !== 0.5 && (e as any).pressure !== 1 && (e.pointerType === 'touch' || e.pointerType === 'pen')\n      if (e.pointerId === joystickPointer.pointer?.pointerId) {\n        handleMovementStickDelta(e)\n        if (supportsPressure && (e as any).pressure > 0.5) {\n          bot.setControlState('sprint', true)\n          // todo\n        }\n        return\n      }\n      if (e.pointerId !== capturedPointer?.id) return\n      window.scrollTo(0, 0)\n      e.preventDefault()\n      e.stopPropagation()\n\n      const allowedJitter = 1.1\n      if (supportsPressure) {\n        bot.setControlState('jump', (e as any).pressure > 0.5)\n      }\n      const xDiff = Math.abs(e.pageX - capturedPointer.sourceX) > allowedJitter\n      const yDiff = Math.abs(e.pageY - capturedPointer.sourceY) > allowedJitter\n      if (!capturedPointer.activateCameraMove && (xDiff || yDiff)) capturedPointer.activateCameraMove = true\n      if (capturedPointer.activateCameraMove) {\n        clearTimeout(virtualClickTimeout)\n      }\n      onCameraMove({ movementX: e.pageX - capturedPointer.x, movementY: e.pageY - capturedPointer.y, type: 'touchmove' })\n      capturedPointer.x = e.pageX\n      capturedPointer.y = e.pageY\n    }, { passive: false })\n\n    const pointerUpHandler = (e: PointerEvent) => {\n      if (e.pointerId === undefined) return\n      if (e.pointerId === joystickPointer.pointer?.pointerId) {\n        handleMovementStickDelta()\n        joystickPointer.pointer = null\n        return\n      }\n      if (e.pointerId !== capturedPointer?.id) return\n      clearTimeout(virtualClickTimeout)\n      virtualClickTimeout = undefined\n\n      if (options.touchControlsType !== 'joystick-buttons') {\n        if (virtualClickActive) {\n          // button 0 is left click\n          document.dispatchEvent(new MouseEvent('mouseup', { button: 0 }))\n          virtualClickActive = false\n        } else if (!capturedPointer.activateCameraMove && (Date.now() - capturedPointer.time < touchStartBreakingBlockMs)) {\n          document.dispatchEvent(new MouseEvent('mousedown', { button: 2 }))\n          worldInteractions.update()\n          document.dispatchEvent(new MouseEvent('mouseup', { button: 2 }))\n        }\n      }\n      capturedPointer = undefined\n      screenTouches--\n    }\n    registerListener(document, 'pointerup', pointerUpHandler)\n    registerListener(document, 'pointercancel', pointerUpHandler)\n    registerListener(document, 'lostpointercapture', pointerUpHandler)\n\n    registerListener(document, 'contextmenu', (e) => e.preventDefault(), false)\n\n    registerListener(document, 'blur', (e) => {\n      bot.clearControlStates()\n    }, false)\n\n    console.log('Done!')\n\n    // todo\n    onGameLoad(async () => {\n      loadedGameState.serverIp = server.host ?? null\n      loadedGameState.username = username\n    })\n\n    if (appStatusState.isError) return\n    setTimeout(() => {\n      // todo\n      const qs = new URLSearchParams(window.location.search)\n      if (qs.get('suggest_save')) {\n        showNotification('Suggestion', 'Save the world to keep your progress!', false, undefined, async () => {\n          const savePath = await saveToBrowserMemory()\n          if (!savePath) return\n          const saveName = savePath.split('/').pop()\n          bot.end()\n          // todo hot reload\n          location.search = `loadSave=${saveName}`\n        })\n      }\n    }, 600)\n\n    setLoadingScreenStatus(undefined)\n    const start = Date.now()\n    let done = false\n    void viewer.world.renderUpdateEmitter.on('update', () => {\n      // todo might not emit as servers simply don't send chunk if it's empty\n      if (!viewer.world.allChunksFinished || done) return\n      done = true\n      console.log('All done and ready! In', (Date.now() - start) / 1000, 's')\n      viewer.render() // ensure the last state is rendered\n      document.dispatchEvent(new Event('cypress-world-ready'))\n    })\n  })\n\n  if (singleplayer && connectOptions.serverOverrides.worldFolder) {\n    fsState.saveLoaded = true\n  }\n\n  if (!connectOptions.ignoreQs) {\n    // todo cleanup\n    customEvents.on('gameLoaded', () => {\n      const qs = new URLSearchParams(window.location.search)\n      for (let command of qs.getAll('command')) {\n        if (!command.startsWith('/')) command = `/${command}`\n        bot.chat(command)\n      }\n    })\n  }\n}\n\nlistenGlobalEvents()\nwatchValue(miscUiState, async s => {\n  if (s.appLoaded) { // fs ready\n    const qs = new URLSearchParams(window.location.search)\n    const moreServerOptions = {} as Record<string, any>\n    if (qs.has('version')) moreServerOptions.version = qs.get('version')\n    if (qs.get('singleplayer') === '1' || qs.get('sp') === '1') {\n      loadSingleplayer({}, {\n        worldFolder: undefined,\n        ...moreServerOptions\n      })\n    }\n    if (qs.get('loadSave')) {\n      const savePath = `/data/worlds/${qs.get('loadSave')}`\n      try {\n        await fs.promises.stat(savePath)\n      } catch (err) {\n        alert(`Save ${savePath} not found`)\n        return\n      }\n      await loadInMemorySave(savePath)\n    }\n  }\n})\n\n// #region fire click event on touch as we disable default behaviors\nlet activeTouch: { touch: Touch, elem: HTMLElement, start: number } | undefined\ndocument.body.addEventListener('touchend', (e) => {\n  if (!isGameActive(true)) return\n  if (activeTouch?.touch.identifier !== e.changedTouches[0].identifier) return\n  if (Date.now() - activeTouch.start > 500) {\n    activeTouch.elem.dispatchEvent(new Event('longtouch', { bubbles: true }))\n  } else {\n    activeTouch.elem.click()\n  }\n  activeTouch = undefined\n})\ndocument.body.addEventListener('touchstart', (e) => {\n  const ignoreElem = (e.target as HTMLElement).matches('vercel-live-feedback') || (e.target as HTMLElement).closest('.hotbar')\n  if (!isGameActive(true) || ignoreElem) return\n  // we always prevent default behavior to disable magnifier on ios, but by doing so we also disable click events\n  e.preventDefault()\n  let firstClickable // todo remove composedPath and this workaround when lit-element is fully dropped\n  const path = e.composedPath() as Array<{ click?: () => void }>\n  for (const elem of path) {\n    if (elem.click) {\n      firstClickable = elem\n      break\n    }\n  }\n  if (!firstClickable) return\n  activeTouch = {\n    touch: e.touches[0],\n    elem: firstClickable,\n    start: Date.now(),\n  }\n}, { passive: false })\n// #endregion\n\nvoid window.fetch('config.json').then(async res => res.json()).then(c => c, (error) => {\n  console.warn('Failed to load optional app config.json', error)\n  return {}\n}).then((config: AppConfig | {}) => {\n  miscUiState.appConfig = config\n})\n\n// qs open actions\ndownloadAndOpenFile().then((downloadAction) => {\n  if (downloadAction) return\n  const qs = new URLSearchParams(window.location.search)\n  if (qs.get('reconnect') && process.env.NODE_ENV === 'development') {\n    const ip = qs.get('ip')\n    const lastConnect = JSON.parse(localStorage.lastConnectOptions ?? {})\n    void connect({\n      ...lastConnect, // todo mixing is not good idea\n      ip: ip || undefined\n    })\n    return\n  }\n  if (qs.get('ip') || qs.get('proxy')) {\n    const waitAppConfigLoad = !qs.get('proxy')\n    const openServerEditor = () => {\n      hideModal()\n      // show server editor for connect or save\n      showModal({ reactType: 'editServer' })\n    }\n    showModal({ reactType: 'empty' })\n    if (waitAppConfigLoad) {\n      const unsubscribe = subscribe(miscUiState, checkCanDisplay)\n      checkCanDisplay()\n      // eslint-disable-next-line no-inner-declarations\n      function checkCanDisplay () {\n        if (miscUiState.appConfig) {\n          unsubscribe()\n          openServerEditor()\n          return true\n        }\n      }\n    } else {\n      openServerEditor()\n    }\n  }\n\n  void Promise.resolve().then(() => {\n    // try to connect to peer\n    const peerId = qs.get('connectPeer')\n    const peerOptions = {} as ConnectPeerOptions\n    if (qs.get('server')) {\n      peerOptions.server = qs.get('server')!\n    }\n    const version = qs.get('peerVersion')\n    if (peerId) {\n      let username: string | null = options.guestUsername\n      if (options.askGuestName) username = prompt('Enter your username', username)\n      if (!username) return\n      options.guestUsername = username\n      void connect({\n        username,\n        botVersion: version || undefined,\n        peerId,\n        peerOptions\n      })\n    }\n  })\n\n  if (qs.get('serversList')) {\n    showModal({ reactType: 'serversList' })\n  }\n\n  const viewerWsConnect = qs.get('viewerConnect')\n  if (viewerWsConnect) {\n    void connect({\n      username: `viewer-${Math.random().toString(36).slice(2, 10)}`,\n      viewerWsConnect,\n    })\n  }\n\n  if (qs.get('modal')) {\n    const modals = qs.get('modal')!.split(',')\n    for (const modal of modals) {\n      showModal({ reactType: modal })\n    }\n  }\n}, (err) => {\n  console.error(err)\n  alert(`Failed to download file: ${err}`)\n})\n\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\nconst initialLoader = document.querySelector('.initial-loader') as HTMLElement | null\nif (initialLoader) {\n  initialLoader.style.opacity = '0'\n  initialLoader.style.pointerEvents = 'none'\n}\nwindow.pageLoaded = true\n\nvoid possiblyHandleStateVariable()\n","import { options } from './optionsStorage'\n\n//@ts-check\nconst { EventEmitter } = require('events')\nconst debug = require('debug')('minecraft-protocol')\nconst states = require('minecraft-protocol/src/states')\n\nwindow.serverDataChannel ??= {}\nexport const customCommunication = {\n  sendData(data) {\n    setTimeout(() => {\n      window.serverDataChannel[this.isServer ? 'emitClient' : 'emitServer'](data)\n    })\n  },\n  receiverSetup(processData) {\n    window.serverDataChannel[this.isServer ? 'emitServer' : 'emitClient'] = (data) => {\n      processData(data)\n    }\n  }\n}\n\nclass CustomChannelClient extends EventEmitter {\n  constructor(isServer, version) {\n    super()\n    this.version = version\n    this.isServer = !!isServer\n    this.state = states.HANDSHAKING\n  }\n\n  get state() {\n    return this.protocolState\n  }\n\n  setSerializer(state) {\n    customCommunication.receiverSetup.call(this, (/** @type {{name, params, state?}} */parsed) => {\n      if (!options.excludeCommunicationDebugEvents.includes(parsed.name)) {\n        debug(`receive in ${this.isServer ? 'server' : 'client'}: ${parsed.name}`)\n      }\n      this.emit(parsed.name, parsed.params, parsed)\n      this.emit('packet_name', parsed.name, parsed.params, parsed)\n    })\n  }\n\n  // eslint-disable-next-line @typescript-eslint/adjacent-overload-signatures, grouped-accessor-pairs\n  set state(newProperty) {\n    const oldProperty = this.protocolState\n    this.protocolState = newProperty\n\n    this.setSerializer(this.protocolState)\n\n    this.emit('state', newProperty, oldProperty)\n  }\n\n  end(reason) {\n    this._endReason = reason\n    this.emit('end', this._endReason) // still emits on server side only, doesn't send anything to our client\n  }\n\n  write(name, params) {\n    if (!options.excludeCommunicationDebugEvents.includes(name)) {\n      debug(`[${this.state}] from ${this.isServer ? 'server' : 'client'}: ` + name)\n      debug(params)\n    }\n\n    this.emit('writePacket', name, params)\n    customCommunication.sendData.call(this, { name, params, state: this.state })\n  }\n\n  writeBundle(packets) {\n    // no-op\n  }\n\n  writeRaw(buffer) {\n    // no-op\n  }\n}\n\nexport default CustomChannelClient\n","import EventEmitter from 'events'\n\nwindow.reportError = window.reportError ?? console.error\nwindow.bot = undefined\nwindow.THREE = undefined\nwindow.localServer = undefined\nwindow.worldView = undefined\nwindow.viewer = undefined\nwindow.loadedData = undefined\nwindow.customEvents = new EventEmitter()\n","import { useEffect, useState } from 'react'\nimport './Crosshair.css'\nimport { proxy, useSnapshot } from 'valtio'\nimport SharedHudVars from './SharedHudVars'\n\n// todo move to mineflayer\nexport const itemBeingUsed = proxy({\n  name: null as string | null,\n  hand: 0 as 0 | 1\n})\n\nexport default () => {\n  const { name: usingItem, hand } = useSnapshot(itemBeingUsed)\n\n  const [displayIndicator, setDisplayIndicator] = useState(false)\n  const [indicatorProgress, setIndicatorProgress] = useState(0)\n  const [alternativeIndicator, setAlternativeIndicator] = useState(false)\n  const boxMaxTimeMs = 1000\n  // todo add sword indicator\n  const indicatorSize = 20\n\n  useEffect(() => {\n    bot.on('heldItemChanged' as any, () => {\n      const displayBar = (item: import('prismarine-item').Item | null) => {\n        const itemName = item?.name\n        if (!itemName) return\n        return loadedData.foodsArray.map((food) => food.name).includes(itemName) || itemName === 'bow' || itemName === 'shield' || itemName === 'crossbow'\n      }\n      setDisplayIndicator(displayBar(bot.heldItem) || displayBar(bot.inventory.slots[45]) || false)\n    })\n  }, [])\n\n  useEffect(() => {\n    setAlternativeIndicator(usingItem === 'shield')\n    if (!usingItem) return\n    const startTime = Date.now()\n    let maxTime = 0\n    if (usingItem === 'bow' || usingItem === 'crossbow') {\n      maxTime = 1000\n    }\n    const isFood = loadedData.foodsArray.some((food) => food.name === usingItem)\n    if (isFood) {\n      maxTime = 32 * 50\n    }\n    if (!maxTime) return\n\n    const id = setInterval(() => {\n      const progress = (Date.now() - startTime) / boxMaxTimeMs\n      if (progress >= 1) {\n        clearInterval(id)\n      } else {\n        setIndicatorProgress(progress)\n      }\n    }, 1000 / 60)\n    return () => {\n      setIndicatorProgress(0)\n      clearInterval(id)\n    }\n  }, [usingItem])\n\n  return <SharedHudVars>\n    <div className='crosshair' />\n    {displayIndicator && <div\n      className='crosshair-indicator' style={{\n      //@ts-expect-error\n        '--crosshair-indicator-size': `${indicatorSize}px`,\n        borderLeft: `solid ${indicatorSize * indicatorProgress}px white`,\n        backgroundColor: alternativeIndicator ? 'dodgerblue' : undefined,\n      }}\n    />}\n  </SharedHudVars>\n}\n","export const isCypress = () => {\n  return localStorage.cypress === 'true'\n}\n","//@ts-check\n\nimport * as THREE from 'three'\n\n// wouldn't better to create atlas instead?\nimport { Vec3 } from 'vec3'\nimport { LineMaterial } from 'three-stdlib'\nimport { Entity } from 'prismarine-entity'\nimport destroyStage0 from '../assets/destroy_stage_0.png'\nimport destroyStage1 from '../assets/destroy_stage_1.png'\nimport destroyStage2 from '../assets/destroy_stage_2.png'\nimport destroyStage3 from '../assets/destroy_stage_3.png'\nimport destroyStage4 from '../assets/destroy_stage_4.png'\nimport destroyStage5 from '../assets/destroy_stage_5.png'\nimport destroyStage6 from '../assets/destroy_stage_6.png'\nimport destroyStage7 from '../assets/destroy_stage_7.png'\nimport destroyStage8 from '../assets/destroy_stage_8.png'\nimport destroyStage9 from '../assets/destroy_stage_9.png'\n\nimport { hideCurrentModal, isGameActive, showModal } from './globalState'\nimport { assertDefined } from './utils'\nimport { options } from './optionsStorage'\nimport { itemBeingUsed } from './react/Crosshair'\nimport { isCypress } from './standaloneUtils'\nimport { displayClientChat } from './botUtils'\n\nfunction getViewDirection (pitch, yaw) {\n  const csPitch = Math.cos(pitch)\n  const snPitch = Math.sin(pitch)\n  const csYaw = Math.cos(yaw)\n  const snYaw = Math.sin(yaw)\n  return new Vec3(-snYaw * csPitch, snPitch, -csYaw * csPitch)\n}\n\nclass WorldInteraction {\n  ready = false\n  prevBreakState\n  currentDigTime\n  prevOnGround\n  lastBlockPlaced: number\n  lastSwing = 0\n  buttons = [false, false, false]\n  lastButtons = [false, false, false]\n  breakStartTime: number | undefined = 0\n  lastDugBlock: Vec3 | null = null\n  blockBreakMesh: THREE.Mesh\n  breakTextures: THREE.Texture[]\n  lastDigged: number\n  debugDigStatus: string\n\n  oneTimeInit () {\n    const loader = new THREE.TextureLoader()\n    this.breakTextures = []\n    const destroyStagesImages = [\n      destroyStage0,\n      destroyStage1,\n      destroyStage2,\n      destroyStage3,\n      destroyStage4,\n      destroyStage5,\n      destroyStage6,\n      destroyStage7,\n      destroyStage8,\n      destroyStage9\n    ]\n    for (let i = 0; i < 10; i++) {\n      const texture = loader.load(destroyStagesImages[i])\n      texture.magFilter = THREE.NearestFilter\n      texture.minFilter = THREE.NearestFilter\n      this.breakTextures.push(texture)\n    }\n    const breakMaterial = new THREE.MeshBasicMaterial({\n      transparent: true,\n      blending: THREE.MultiplyBlending,\n      alphaTest: 0.5,\n    })\n    this.blockBreakMesh = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), breakMaterial)\n    this.blockBreakMesh.visible = false\n    this.blockBreakMesh.renderOrder = 999\n    this.blockBreakMesh.name = 'blockBreakMesh'\n    viewer.scene.add(this.blockBreakMesh)\n\n    // Setup events\n    document.addEventListener('mouseup', (e) => {\n      this.buttons[e.button] = false\n    })\n\n    this.lastBlockPlaced = 4 // ticks since last placed\n    document.addEventListener('mousedown', (e) => {\n      if (e.isTrusted && !document.pointerLockElement && !isCypress()) return\n      if (!isGameActive(true)) return\n      this.buttons[e.button] = true\n\n      const entity = getEntityCursor()\n\n      if (entity) {\n        if (e.button === 0) { // left click\n          bot.attack(entity)\n        } else if (e.button === 2) { // right click\n          this.activateEntity(entity)\n        }\n      }\n    })\n    document.addEventListener('blur', (e) => {\n      this.buttons = [false, false, false]\n    })\n\n    beforeRenderFrame.push(() => {\n      if (viewer.world.threejsCursorLineMaterial) {\n        const { renderer } = viewer\n        viewer.world.threejsCursorLineMaterial.resolution.set(renderer.domElement.width, renderer.domElement.height)\n        viewer.world.threejsCursorLineMaterial.dashOffset = performance.now() / 750\n      }\n    })\n  }\n\n  initBot () {\n    if (!this.ready) {\n      this.ready = true\n      this.oneTimeInit()\n    }\n    assertDefined(viewer)\n    bot.on('physicsTick', () => { if (this.lastBlockPlaced < 4) this.lastBlockPlaced++ })\n    bot.on('diggingCompleted', (block) => {\n      this.breakStartTime = undefined\n      this.lastDugBlock = block.position\n      // TODO: If the tool and enchantments immediately exceed the hardness times 30, the block breaks with no delay; SO WE NEED TO CHECK THAT\n      // TODO: Any blocks with a breaking time of 0.05\n      this.lastDigged = Date.now()\n      this.debugDigStatus = 'done'\n    })\n    bot.on('diggingAborted', (block) => {\n      if (!viewer.world.cursorBlock?.equals(block.position)) return\n      this.debugDigStatus = 'aborted'\n      // if (this.lastDugBlock)\n      this.breakStartTime = undefined\n      if (this.buttons[0]) {\n        this.buttons[0] = false\n        this.update()\n        this.buttons[0] = true // trigger again\n      }\n      this.lastDugBlock = null\n    })\n    bot.on('heldItemChanged' as any, () => {\n      itemBeingUsed.name = null\n    })\n\n    const upLineMaterial = () => {\n      const inCreative = bot.game.gameMode === 'creative'\n      const pixelRatio = viewer.renderer.getPixelRatio()\n      viewer.world.threejsCursorLineMaterial = new LineMaterial({\n        color: inCreative ? 0x40_80_ff : 0x00_00_00,\n        linewidth: Math.max(pixelRatio * 0.7, 1) * 2,\n        // dashed: true,\n        // dashSize: 5,\n      })\n    }\n    upLineMaterial()\n    // todo use gamemode update only\n    bot.on('game', upLineMaterial)\n  }\n\n  activateEntity (entity: Entity) {\n    // mineflayer has completely wrong implementation of this action\n    if (bot.supportFeature('armAnimationBeforeUse')) {\n      bot.swingArm('right')\n    }\n    bot._client.write('use_entity', {\n      target: entity.id,\n      mouse: 2,\n      // todo do not fake\n      x: 0.581_012_585_759_162_9,\n      y: 0.581_012_585_759_162_9,\n      z: 0.581_012_585_759_162_9,\n      // x: raycastPosition.x - entity.position.x,\n      // y: raycastPosition.y - entity.position.y,\n      // z: raycastPosition.z - entity.position.z\n      sneaking: bot.getControlState('sneak'),\n      hand: 0\n    })\n    bot._client.write('use_entity', {\n      target: entity.id,\n      mouse: 0,\n      sneaking: bot.getControlState('sneak'),\n      hand: 0\n    })\n    if (!bot.supportFeature('armAnimationBeforeUse')) {\n      bot.swingArm('right')\n    }\n  }\n\n  // todo this shouldnt be done in the render loop, migrate the code to dom events to avoid delays on lags\n  update () {\n    const inSpectator = bot.game.gameMode === 'spectator'\n    const entity = getEntityCursor()\n    let cursorBlock = inSpectator && !options.showCursorBlockInSpectator ? null : bot.blockAtCursor(5)\n    if (entity) {\n      cursorBlock = null\n    }\n\n    let cursorBlockDiggable = cursorBlock\n    if (cursorBlock && !bot.canDigBlock(cursorBlock) && bot.game.gameMode !== 'creative') cursorBlockDiggable = null\n\n    const cursorChanged = cursorBlock && viewer.world.cursorBlock ? !viewer.world.cursorBlock.equals(cursorBlock.position) : viewer.world.cursorBlock !== cursorBlock\n\n    // Place / interact / activate\n    if (this.buttons[2] && this.lastBlockPlaced >= 4) {\n      const activatableItems = (itemName: string) => {\n        return ['egg', 'fishing_rod', 'firework_rocket',\n          'fire_charge', 'snowball', 'ender_pearl', 'experience_bottle', 'potion',\n          'glass_bottle', 'bucket', 'water_bucket', 'lava_bucket', 'milk_bucket',\n          'minecart', 'boat', 'tnt_minecart', 'chest_minecart', 'hopper_minecart',\n          'command_block_minecart', 'armor_stand', 'lead', 'name_tag',\n          //\n          'writable_book', 'written_book', 'compass', 'clock', 'filled_map', 'empty_map', 'map',\n          'shears', 'carrot_on_a_stick', 'warped_fungus_on_a_stick',\n          'spawn_egg', 'trident', 'crossbow', 'elytra', 'shield', 'turtle_helmet', 'bow', 'crossbow', 'bucket_of_cod',\n          ...loadedData.foodsArray.map((f) => f.name),\n        ].includes(itemName)\n      }\n      const activate = bot.heldItem && activatableItems(bot.heldItem.name)\n      let stop = false\n      if (!bot.controlState.sneak) {\n        if (cursorBlock?.name === 'bed' || cursorBlock?.name.endsWith('_bed')) {\n          stop = true\n          showModal({ reactType: 'bed' })\n          let cancelSleep = true\n          void bot.sleep(cursorBlock).catch((e) => {\n            if (cancelSleep) {\n              hideCurrentModal()\n            }\n            // if (e.message === 'bot is not sleeping') return\n            displayClientChat(e.message)\n          })\n          setTimeout(() => {\n            cancelSleep = false\n          })\n        }\n      }\n      // todo placing with offhand\n      if (cursorBlock && !activate && !stop) {\n        const vecArray = [new Vec3(0, -1, 0), new Vec3(0, 1, 0), new Vec3(0, 0, -1), new Vec3(0, 0, 1), new Vec3(-1, 0, 0), new Vec3(1, 0, 0)]\n        //@ts-expect-error\n        const delta = cursorBlock.intersect.minus(cursorBlock.position)\n\n        if (bot.heldItem) {\n          //@ts-expect-error todo\n          bot._placeBlockWithOptions(cursorBlock, vecArray[cursorBlock.face], { delta, forceLook: 'ignore' }).catch(console.warn)\n        } else {\n          // https://discord.com/channels/413438066984747026/413438150594265099/1198724637572477098\n          const oldLookAt = bot.lookAt\n          //@ts-expect-error\n          bot.lookAt = (pos) => { }\n          //@ts-expect-error\n          // TODO it still must 1. fire block place 2. swing arm (right)\n          bot.activateBlock(cursorBlock, vecArray[cursorBlock.face], delta).finally(() => {\n            bot.lookAt = oldLookAt\n          }).catch(console.warn)\n        }\n        viewer.world.changeHandSwingingState(true, false)\n        viewer.world.changeHandSwingingState(false, false)\n      } else if (!stop) {\n        const offhand = activate ? false : activatableItems(bot.inventory.slots[45]?.name ?? '')\n        bot.activateItem(offhand) // todo offhand\n        const item = offhand ? bot.inventory.slots[45] : bot.heldItem\n        if (item) {\n          customEvents.emit('activateItem', item, offhand ? 45 : bot.quickBarSlot, offhand)\n        }\n        itemBeingUsed.name = (offhand ? bot.inventory.slots[45]?.name : bot.heldItem?.name) ?? null\n        itemBeingUsed.hand = offhand ? 1 : 0\n      }\n      this.lastBlockPlaced = 0\n    }\n    // stop using activated item (cancel)\n    if (itemBeingUsed.name && !this.buttons[2]) {\n      itemBeingUsed.name = null\n      // \"only foods and bow can be deactivated\" - not true, shields also can be deactivated and client always sends this\n      // if (bot.heldItem && (loadedData.foodsArray.map((f) => f.name).includes(bot.heldItem.name) || bot.heldItem.name === 'bow')) {\n      bot.deactivateItem()\n      // }\n    }\n\n    // Stop break\n    if ((!this.buttons[0] && this.lastButtons[0]) || cursorChanged) {\n      try {\n        bot.stopDigging() // this shouldnt throw anything...\n      } catch (e) { } // to be reworked in mineflayer, then remove the try here\n    }\n    // We stopped breaking\n    if ((!this.buttons[0] && this.lastButtons[0])) {\n      this.lastDugBlock = null\n      this.breakStartTime = undefined\n      this.debugDigStatus = 'cancelled'\n    }\n\n    const onGround = bot.entity.onGround || bot.game.gameMode === 'creative'\n    this.prevOnGround ??= onGround // todo this should be fixed in mineflayer to involve correct calculations when this changes as this is very important when mining straight down // todo this should be fixed in mineflayer to involve correct calculations when this changes as this is very important when mining straight down // todo this should be fixed in mineflayer to involve correct calculations when this changes as this is very important when mining straight down\n    // Start break\n    // todo last check doesnt work as cursorChanged happens once (after that check is false)\n    if (\n      this.buttons[0]\n    ) {\n      if (cursorBlockDiggable\n        && (!this.lastButtons[0] || ((cursorChanged || (this.lastDugBlock && !this.lastDugBlock.equals(cursorBlock!.position))) && Date.now() - (this.lastDigged ?? 0) > 300) || onGround !== this.prevOnGround)\n        && onGround) {\n        this.lastDugBlock = null\n        this.debugDigStatus = 'breaking'\n        this.currentDigTime = bot.digTime(cursorBlockDiggable)\n        this.breakStartTime = performance.now()\n        const vecArray = [new Vec3(0, -1, 0), new Vec3(0, 1, 0), new Vec3(0, 0, -1), new Vec3(0, 0, 1), new Vec3(-1, 0, 0), new Vec3(1, 0, 0)]\n        bot.dig(\n          //@ts-expect-error\n          cursorBlockDiggable, 'ignore', vecArray[cursorBlockDiggable.face]\n        ).catch((err) => {\n          if (err.message === 'Digging aborted') return\n          throw err\n        })\n        customEvents.emit('digStart')\n        this.lastDigged = Date.now()\n        viewer.world.changeHandSwingingState(true, false)\n      } else if (performance.now() - this.lastSwing > 200) {\n        bot.swingArm('right')\n        this.lastSwing = performance.now()\n      }\n    }\n    if (!this.buttons[0] && this.lastButtons[0]) {\n      viewer.world.changeHandSwingingState(false, false)\n    }\n    this.prevOnGround = onGround\n\n    // Show cursor\n    const allShapes = [...cursorBlock?.shapes ?? [], ...cursorBlock?.['interactionShapes'] ?? []]\n    if (cursorBlock) {\n      // BREAK MESH\n      // union of all values\n      const breakShape = allShapes.reduce((acc, cur) => {\n        return [\n          Math.min(acc[0], cur[0]),\n          Math.min(acc[1], cur[1]),\n          Math.min(acc[2], cur[2]),\n          Math.max(acc[3], cur[3]),\n          Math.max(acc[4], cur[4]),\n          Math.max(acc[5], cur[5])\n        ]\n      })\n      const { position, width, height, depth } = getDataFromShape(breakShape)\n      this.blockBreakMesh.scale.set(width * 1.001, height * 1.001, depth * 1.001)\n      position.add(cursorBlock.position)\n      this.blockBreakMesh.position.set(position.x, position.y, position.z)\n    }\n\n    // Show break animation\n    if (cursorBlockDiggable && this.breakStartTime && bot.game.gameMode !== 'creative') {\n      const elapsed = performance.now() - this.breakStartTime\n      const time = bot.digTime(cursorBlockDiggable)\n      if (time !== this.currentDigTime) {\n        console.warn('dig time changed! cancelling!', time, 'from', this.currentDigTime) // todo\n        try { bot.stopDigging() } catch { }\n      }\n      const state = Math.floor((elapsed / time) * 10)\n      //@ts-expect-error\n      this.blockBreakMesh.material.map = this.breakTextures[state] ?? this.breakTextures.at(-1)\n      if (state !== this.prevBreakState) {\n        //@ts-expect-error\n        this.blockBreakMesh.material.needsUpdate = true\n      }\n      this.prevBreakState = state\n      this.blockBreakMesh.visible = true\n    } else {\n      this.blockBreakMesh.visible = false\n    }\n\n    // Update state\n    if (cursorChanged) {\n      viewer.world.setHighlightCursorBlock(cursorBlock?.position ?? null, allShapes.map(shape => {\n        return getDataFromShape(shape)\n      }))\n    }\n    this.lastButtons[0] = this.buttons[0]\n    this.lastButtons[1] = this.buttons[1]\n    this.lastButtons[2] = this.buttons[2]\n  }\n}\n\nconst getDataFromShape = (shape) => {\n  const width = shape[3] - shape[0]\n  const height = shape[4] - shape[1]\n  const depth = shape[5] - shape[2]\n  const centerX = (shape[3] + shape[0]) / 2\n  const centerY = (shape[4] + shape[1]) / 2\n  const centerZ = (shape[5] + shape[2]) / 2\n  const position = new Vec3(centerX, centerY, centerZ)\n  return { position, width, height, depth }\n}\n\nexport const getEntityCursor = () => {\n  const entity = bot.nearestEntity((e) => {\n    if (e.position.distanceTo(bot.entity.position) <= (bot.game.gameMode === 'creative' ? 5 : 3)) {\n      const dir = getViewDirection(bot.entity.pitch, bot.entity.yaw)\n      const { width, height } = e\n      const { x: eX, y: eY, z: eZ } = e.position\n      const { x: bX, y: bY, z: bZ } = bot.entity.position\n      const box = new THREE.Box3(\n        new THREE.Vector3(eX - width / 2, eY, eZ - width / 2),\n        new THREE.Vector3(eX + width / 2, eY + height, eZ + width / 2)\n      )\n\n      const r = new THREE.Raycaster(\n        new THREE.Vector3(bX, bY + 1.52, bZ),\n        new THREE.Vector3(dir.x, dir.y, dir.z)\n      )\n      const int = r.ray.intersectBox(box, new THREE.Vector3(eX, eY, eZ))\n      return int !== null\n    }\n\n    return false\n  })\n  return entity\n}\n\nconst worldInteraction = new WorldInteraction()\nglobalThis.worldInteraction = worldInteraction\nexport default worldInteraction\n","// global variables useful for debugging\n\nimport fs from 'fs'\nimport { WorldRendererThree } from 'prismarine-viewer/viewer/lib/worldrendererThree'\nimport { getEntityCursor } from './worldInteractions'\n\nwindow.cursorBlockRel = (x = 0, y = 0, z = 0) => {\n  const newPos = bot.blockAtCursor(5)?.position.offset(x, y, z)\n  if (!newPos) return\n  return bot.world.getBlock(newPos)\n}\n\nwindow.cursorEntity = () => {\n  return getEntityCursor()\n}\n\n// wanderer\nwindow.inspectPlayer = () => require('fs').promises.readFile('/world/playerdata/9e487d23-2ffc-365a-b1f8-f38203f59233.dat').then(window.nbt.parse).then(console.log)\n\nObject.defineProperty(window, 'debugSceneChunks', {\n  get () {\n    return (viewer.world as WorldRendererThree).getLoadedChunksRelative?.(bot.entity.position, true)\n  },\n})\n\nwindow.len = (obj) => Object.keys(obj).length\n\ncustomEvents.on('gameLoaded', () => {\n  bot._client.on('packet', (data, { name }) => {\n    if (sessionStorage.ignorePackets?.includes(name)) {\n      console.log('ignoring packet', name)\n      const oldEmit = bot._client.emit\n      let i = 0\n      // ignore next 3 emits\n      //@ts-expect-error\n      bot._client.emit = (...args) => {\n        if (i++ === 3) {\n          oldEmit.apply(bot._client, args)\n          bot._client.emit = oldEmit\n        }\n      }\n    }\n  })\n})\n\nwindow.inspectPacket = (packetName, fullOrListener: boolean | ((...args) => void) = false) => {\n  const listener = typeof fullOrListener === 'function' ? fullOrListener : (...args) => console.log('packet', packetName, fullOrListener ? args : args[0])\n  const attach = () => {\n    bot?._client.prependListener(packetName, listener)\n  }\n  attach()\n  customEvents.on('mineflayerBotCreated', attach)\n  const returnobj = {}\n  Object.defineProperty(returnobj, 'detach', {\n    get () {\n      bot?.removeListener(packetName, listener)\n      customEvents.removeListener('mineflayerBotCreated', attach)\n      return true\n    },\n  })\n  return returnobj\n}\n\nwindow.downloadFile = async (path: string) => {\n  if (!path.startsWith('/') && localServer) path = `${localServer.options.worldFolder}/${path}`\n  const data = await fs.promises.readFile(path)\n  const blob = new Blob([data], { type: 'application/octet-stream' })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = path.split('/').at(-1)!\n  a.click()\n  URL.revokeObjectURL(url)\n}\n","import { Entity } from 'prismarine-entity'\nimport { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\nimport tracker from '@nxg-org/mineflayer-tracker'\nimport { loader as autoJumpPlugin } from '@nxg-org/mineflayer-auto-jump'\nimport { subscribeKey } from 'valtio/utils'\nimport { options, watchValue } from './optionsStorage'\nimport { miscUiState } from './globalState'\n\n\nconst updateAutoJump = () => {\n  if (!bot?.autoJumper) return\n  const autoJump = options.autoParkour || (options.autoJump === 'auto' ? miscUiState.currentTouch && !miscUiState.usingGamepadInput : options.autoJump === 'always')\n  bot.autoJumper.setOpts({\n    jumpIntoWater: options.autoParkour,\n    jumpOnAllEdges: options.autoParkour,\n    // strictBlockCollision: true,\n  })\n  if (autoJump === bot.autoJumper.enabled) return\n  if (autoJump) {\n    bot.autoJumper.enable()\n  } else {\n    bot.autoJumper.disable()\n  }\n}\nsubscribeKey(options, 'autoJump', () => {\n  updateAutoJump()\n})\nsubscribeKey(options, 'autoParkour', () => {\n  updateAutoJump()\n})\nsubscribeKey(miscUiState, 'usingGamepadInput', () => {\n  updateAutoJump()\n})\nsubscribeKey(miscUiState, 'currentTouch', () => {\n  updateAutoJump()\n})\n\ncustomEvents.on('gameLoaded', () => {\n  bot.loadPlugin(tracker)\n  bot.loadPlugin(autoJumpPlugin)\n  updateAutoJump()\n\n  // todo cleanup (move to viewer, also shouldnt be used at all)\n  const playerPerAnimation = {} as Record<string, string>\n  const entityData = (e: Entity) => {\n    if (!e.username) return\n    window.debugEntityMetadata ??= {}\n    window.debugEntityMetadata[e.username] = e\n    // todo entity spawn timing issue, check perf\n    const playerObject = viewer.entities.entities[e.id]?.playerObject\n    if (playerObject) {\n      // todo throttle!\n      bot.tracker.trackEntity(e)\n      playerObject.backEquipment = e.equipment.some((item) => item?.name === 'elytra') ? 'elytra' : 'cape'\n      if (playerObject.cape.map === null) {\n        playerObject.cape.visible = false\n      }\n      // todo (easy, important) elytra flying animation\n      // todo cleanup states\n    }\n  }\n\n  let lastCall = 0\n  bot.on('physicsTick', () => {\n    // throttle, tps: 6\n    if (Date.now() - lastCall < 166) return\n    lastCall = Date.now()\n    for (const [id, { tracking, info }] of Object.entries(bot.tracker.trackingData)) {\n      if (!tracking) continue\n      const e = bot.entities[id]\n      if (!e) continue\n      const speed = info.avgSpeed\n      const WALKING_SPEED = 0.03\n      const SPRINTING_SPEED = 0.18\n      const isWalking = Math.abs(speed.x) > WALKING_SPEED || Math.abs(speed.z) > WALKING_SPEED\n      const isSprinting = Math.abs(speed.x) > SPRINTING_SPEED || Math.abs(speed.z) > SPRINTING_SPEED\n      const newAnimation = isWalking ? (isSprinting ? 'running' : 'walking') : 'idle'\n      if (newAnimation !== playerPerAnimation[id]) {\n        viewer.entities.playAnimation(e.id, newAnimation)\n        playerPerAnimation[id] = newAnimation\n      }\n    }\n  })\n\n  bot.on('entitySwingArm', (e) => {\n    if (viewer.entities.entities[e.id]?.playerObject) {\n      viewer.entities.playAnimation(e.id, 'oneSwing')\n    }\n  })\n\n  bot._client.on('damage_event', (data) => {\n    const { entityId, sourceTypeId: damage } = data\n    if (viewer.entities.entities[entityId]) {\n      viewer.entities.handleDamageEvent(entityId, damage)\n    }\n  })\n\n  bot._client.on('entity_status', (data) => {\n    if (versionToNumber(bot.version) >= versionToNumber('1.19.4')) return\n    const { entityId, entityStatus } = data\n    if (entityStatus === 2 && viewer.entities.entities[entityId]) {\n      viewer.entities.handleDamageEvent(entityId, entityStatus)\n    }\n  })\n\n  const loadedSkinEntityIds = new Set<number>()\n\n  const playerRenderSkin = (e: Entity) => {\n    const mesh = viewer.entities.entities[e.id]\n    if (!mesh) return\n    if (!mesh.playerObject || !options.loadPlayerSkins) return\n    const MAX_DISTANCE_SKIN_LOAD = 128\n    const distance = e.position.distanceTo(bot.entity.position)\n    if (distance < MAX_DISTANCE_SKIN_LOAD && distance < (bot.settings.viewDistance as number) * 16) {\n      if (viewer.entities.entities[e.id]) {\n        if (loadedSkinEntityIds.has(e.id)) return\n        loadedSkinEntityIds.add(e.id)\n        viewer.entities.updatePlayerSkin(e.id, e.username, true, true)\n      }\n    }\n  }\n  viewer.entities.addListener('remove', (e) => {\n    loadedSkinEntityIds.delete(e.id)\n    playerPerAnimation[e.id] = ''\n    bot.tracker.stopTrackingEntity(e, true)\n  })\n\n  bot.on('entityMoved', (e) => {\n    playerRenderSkin(e)\n    entityData(e)\n  })\n  bot._client.on('entity_velocity', (packet) => {\n    const e = bot.entities[packet.entityId]\n    if (!e) return\n    entityData(e)\n  })\n\n  viewer.entities.addListener('add', (e) => {\n    if (!viewer.entities.entities[e.id]) throw new Error('mesh still not loaded')\n    playerRenderSkin(e)\n  })\n\n  for (const entity of Object.values(bot.entities)) {\n    if (entity !== bot.entity) {\n      entityData(entity)\n    }\n  }\n\n  bot.on('entitySpawn', entityData)\n  bot.on('entityUpdate', entityData)\n  bot.on('entityEquip', entityData)\n\n  watchValue(options, o => {\n    viewer.entities.setDebugMode(o.showChunkBorders ? 'basic' : 'none')\n  })\n})\n","import { join, dirname, basename } from 'path'\nimport fs from 'fs'\nimport JSZip from 'jszip'\nimport { proxy, subscribe } from 'valtio'\nimport { mkdirRecursive, removeFileRecursiveAsync } from './browserfs'\nimport { setLoadingScreenStatus } from './utils'\nimport { showNotification } from './react/NotificationProvider'\nimport { options } from './optionsStorage'\nimport { showOptionsModal } from './react/SelectOption'\nimport { appStatusState } from './react/AppStatusProvider'\nimport { appReplacableResources, resourcesContentOriginal } from './generated/resources'\nimport { loadedGameState } from './globalState'\n\nexport const resourcePackState = proxy({\n  resourcePackInstalled: false,\n})\n\nconst getLoadedImage = async (url: string) => {\n  const img = new Image()\n  img.src = url\n  await new Promise((resolve, reject) => {\n    img.onload = resolve\n    img.onerror = reject\n  })\n  return img\n}\n\nconst texturePackBasePath = '/data/resourcePacks/'\nexport const uninstallTexturePack = async (name = 'default') => {\n  if (await existsAsync('/resourcepack/pack.mcmeta')) {\n    await removeFileRecursiveAsync('/resourcepack')\n    loadedGameState.usingServerResourcePack = false\n  }\n  const basePath = texturePackBasePath + name\n  if (!(await existsAsync(basePath))) return\n  await removeFileRecursiveAsync(basePath)\n  options.enabledResourcepack = null\n  await updateTexturePackInstalledState()\n}\n\nexport const getResourcePackNames = async () => {\n  // TODO\n  try {\n    return { [await fs.promises.readFile(join(texturePackBasePath, 'default', 'name.txt'), 'utf8')]: true }\n  } catch (err) {\n    return {}\n  }\n}\n\nexport const fromTexturePackPath = (path) => {\n  // return join(texturePackBasePath, path)\n}\n\nexport const updateTexturePackInstalledState = async () => {\n  try {\n    resourcePackState.resourcePackInstalled = await existsAsync(texturePackBasePath + 'default')\n  } catch {\n  }\n}\n\nexport const installTexturePackFromHandle = async () => {\n  // await mkdirRecursive(texturePackBasePath)\n  // await copyFilesAsyncWithProgress('/world', texturePackBasePath)\n  // await completeTexturePackInstall()\n}\n\nexport const installTexturePack = async (file: File | ArrayBuffer, displayName = file['name'], name = 'default', isServer = false) => {\n  const installPath = isServer ? '/resourcepack/' : texturePackBasePath + name\n  try {\n    await uninstallTexturePack(name)\n  } catch (err) {\n  }\n  const showLoader = !isServer\n  const status = 'Installing resource pack: copying all files'\n\n  if (showLoader) {\n    setLoadingScreenStatus(status)\n  }\n  // extract the zip and write to fs every file in it\n  const zip = new JSZip()\n  const zipFile = await zip.loadAsync(file)\n  if (!zipFile.file('pack.mcmeta')) throw new Error('Not a resource pack: missing /pack.mcmeta')\n  await mkdirRecursive(installPath)\n\n  const allFilesArr = Object.entries(zipFile.files)\n    .filter(([path]) => !path.startsWith('.') && !path.startsWith('_') && !path.startsWith('/')) // ignore dot files and __MACOSX\n  let done = 0\n  const upStatus = () => {\n    if (showLoader) {\n      setLoadingScreenStatus(`${status} ${Math.round(done / allFilesArr.length * 100)}%`)\n    }\n  }\n  const createdDirs = new Set<string>()\n  const copyTasks = [] as Array<Promise<void>>\n  await Promise.all(allFilesArr.map(async ([path, file]) => {\n    const writePath = join(installPath, path)\n    if (path.endsWith('/')) return\n    const dir = dirname(writePath)\n    if (!createdDirs.has(dir)) {\n      await mkdirRecursive(dir)\n      createdDirs.add(dir)\n    }\n    if (copyTasks.length > 100) {\n      await Promise.all(copyTasks)\n      copyTasks.length = 0\n    }\n    const promise = fs.promises.writeFile(writePath, Buffer.from(await file.async('arraybuffer')) as any)\n    copyTasks.push(promise)\n    await promise\n    done++\n    upStatus()\n  }))\n  console.log('done')\n  await completeTexturePackInstall(displayName, name, isServer)\n}\n\n// or enablement\nexport const completeTexturePackInstall = async (displayName: string | undefined, name: string, isServer: boolean) => {\n  const basePath = isServer ? '/resourcepack/' : texturePackBasePath + name\n  if (displayName) {\n    await fs.promises.writeFile(join(basePath, 'name.txt'), displayName, 'utf8')\n  }\n\n  await updateTextures()\n  setLoadingScreenStatus(undefined)\n  showNotification('Texturepack installed & enabled')\n  await updateTexturePackInstalledState()\n  if (isServer) {\n    loadedGameState.usingServerResourcePack = true\n  } else {\n    options.enabledResourcepack = name\n  }\n}\n\nconst existsAsync = async (path) => {\n  try {\n    await fs.promises.stat(path)\n    return true\n  } catch (err) {\n    return false\n  }\n}\n\nconst arrEqual = (a: any[], b: any[]) => a.length === b.length && a.every((x) => b.includes(x))\n\nconst getSizeFromImage = async (filePath: string) => {\n  const probeImg = new Image()\n  const file = await fs.promises.readFile(filePath, 'base64')\n  probeImg.src = `data:image/png;base64,${file}`\n  await new Promise((resolve, reject) => {\n    probeImg.addEventListener('load', resolve)\n  })\n  if (probeImg.width !== probeImg.height) throw new Error(`Probe texture ${filePath} is not square`)\n  return probeImg.width\n}\n\nexport const getActiveTexturepackBasePath = async () => {\n  if (await existsAsync('/resourcepack/pack.mcmeta')) {\n    return '/resourcepack'\n  }\n  const { enabledResourcepack } = options\n  // const enabledResourcepack = 'default'\n  if (!enabledResourcepack) {\n    return null\n  }\n  if (await existsAsync(`/data/resourcePacks/${enabledResourcepack}/pack.mcmeta`)) {\n    return `/data/resourcePacks/${enabledResourcepack}`\n  }\n  return null\n}\n\nexport const getResourcepackTiles = async (type: 'blocks' | 'items', existingTextures: string[]) => {\n  const basePath = await getActiveTexturepackBasePath()\n  if (!basePath) return\n  const texturesCommonBasePath = `${basePath}/assets/minecraft/textures`\n  let texturesBasePath = `${texturesCommonBasePath}/${type === 'blocks' ? 'block' : 'item'}`\n  const texturesBasePathAlt = `${texturesCommonBasePath}/${type === 'blocks' ? 'blocks' : 'items'}`\n  if (!(await existsAsync(texturesBasePath))) {\n    if (await existsAsync(texturesBasePathAlt)) {\n      texturesBasePath = texturesBasePathAlt\n    }\n  }\n  const allInterestedPaths = existingTextures.map(tex => {\n    if (tex.includes('/')) {\n      return join(`${texturesCommonBasePath}/${tex}`)\n    }\n    return join(texturesBasePath, tex)\n  })\n  const allInterestedPathsPerDir = new Map<string, string[]>()\n  for (const path of allInterestedPaths) {\n    const dir = dirname(path)\n    if (!allInterestedPathsPerDir.has(dir)) {\n      allInterestedPathsPerDir.set(dir, [])\n    }\n    const file = basename(path)\n    allInterestedPathsPerDir.get(dir)!.push(file)\n  }\n  // filter out by readdir each dir\n  const allInterestedImages = [] as string[]\n  for (const [dir, paths] of allInterestedPathsPerDir) {\n    if (!await existsAsync(dir)) {\n      continue\n    }\n    const dirImages = (await fs.promises.readdir(dir)).filter(f => f.endsWith('.png')).map(f => f.replace('.png', ''))\n    allInterestedImages.push(...dirImages.filter(image => paths.includes(image)).map(image => `${dir}/${image}`))\n  }\n\n  if (allInterestedImages.length === 0) {\n    return\n  }\n\n  if (appStatusState.status) {\n    setLoadingScreenStatus(`Generating atlas texture for ${type}`)\n  }\n\n  const firstImageFile = allInterestedImages[0]!\n\n  let firstTextureSize: number | undefined\n  try {\n    // todo compare sizes from atlas\n    firstTextureSize = await getSizeFromImage(`${firstImageFile}.png`)\n  } catch (err) { }\n  const textures = Object.fromEntries(await Promise.all(allInterestedImages.map(async (image) => {\n    const imagePath = `${image}.png`\n    const contents = await fs.promises.readFile(imagePath, 'base64')\n    const img = await getLoadedImage(`data:image/png;base64,${contents}`)\n    const imageRelative = image.replace(`${texturesBasePath}/`, '').replace(`${texturesCommonBasePath}/`, '')\n    return [imageRelative, img]\n  })))\n  return {\n    firstTextureSize,\n    textures\n  }\n}\n\nconst prepareBlockstatesAndModels = async () => {\n  viewer.world.customBlockStates = undefined\n  viewer.world.customModels = undefined\n  const basePath = await getActiveTexturepackBasePath()\n  if (!basePath) return\n  if (appStatusState.status) {\n    setLoadingScreenStatus('Reading resource pack blockstates and models')\n  }\n  const readData = async (namespaceDir: string) => {\n    const blockstatesPath = `${basePath}/assets/${namespaceDir}/blockstates`\n    const modelsPath = `${basePath}/assets/${namespaceDir}/models/block` // todo also models/item\n    const getAllJson = async (path: string, type: 'models' | 'blockstates') => {\n      if (!(await existsAsync(path))) return\n      const files = await fs.promises.readdir(path)\n      const jsons = {} as Record<string, any>\n      await Promise.all(files.map(async (file) => {\n        const filePath = `${path}/${file}`\n        if (file.endsWith('.json')) {\n          const contents = await fs.promises.readFile(filePath, 'utf8')\n          let name = file.replace('.json', '')\n          if (type === 'models') {\n            name = `block/${name}`\n          }\n          if (namespaceDir !== 'minecraft') {\n            name = `${namespaceDir}:${name}`\n          }\n          jsons[name] = JSON.parse(contents)\n        }\n      }))\n      return jsons\n    }\n    viewer.world.customBlockStates = await getAllJson(blockstatesPath, 'blockstates')\n    viewer.world.customModels = await getAllJson(modelsPath, 'models')\n  }\n  try {\n    const assetsDirs = await fs.promises.readdir(join(basePath, 'assets'))\n    for (const assetsDir of assetsDirs) {\n      await readData(assetsDir)\n    }\n  } catch (err) {\n    console.error('Failed to read some of resource pack blockstates and models', err)\n    viewer.world.customBlockStates = undefined\n    viewer.world.customModels = undefined\n  }\n}\n\nconst downloadAndUseResourcePack = async (url: string): Promise<void> => {\n  console.log('Downloading server resource pack', url)\n  const response = await fetch(url)\n  const resourcePackData = await response.arrayBuffer()\n  showNotification('Installing resource pack...')\n  installTexturePack(resourcePackData, undefined, undefined, true).catch((err) => {\n    console.error(err)\n    showNotification('Failed to install resource pack: ' + err.message)\n  })\n}\n\nexport const onAppLoad = () => {\n  customEvents.on('mineflayerBotCreated', () => {\n    // todo also handle resourcePack\n    const handleResourcePackRequest = async (packet) => {\n      if (options.serverResourcePacks === 'never') return\n      const promptMessagePacket = ('promptMessage' in packet && packet.promptMessage) ? packet.promptMessage : undefined\n      const promptMessageText = promptMessagePacket ? '' : 'Do you want to use server resource pack?'\n      // TODO!\n      const hash = 'hash' in packet ? packet.hash : '-'\n      const forced = 'forced' in packet ? packet.forced : false\n      const choice = options.serverResourcePacks === 'always'\n        ? true\n        : await showOptionsModal(promptMessageText, ['Download & Install (recommended)', 'Pretend Installed (not recommended)'], {\n          cancel: !forced,\n          minecraftJsonMessage: promptMessagePacket,\n        })\n      if (!choice) return\n      bot.acceptResourcePack()\n      if (choice === 'Download & Install (recommended)') {\n        await downloadAndUseResourcePack(packet.url).catch((err) => {\n          console.error(err)\n          showNotification('Failed to download resource pack: ' + err.message)\n        })\n      }\n    }\n    bot._client.on('resource_pack_send', handleResourcePackRequest)\n    bot._client.on('add_resource_pack' as any, handleResourcePackRequest)\n  })\n\n  subscribe(resourcePackState, () => {\n    if (!resourcePackState.resourcePackInstalled) return\n    void updateAllReplacableTextures()\n  })\n}\n\nconst updateAllReplacableTextures = async () => {\n  const basePath = await getActiveTexturepackBasePath()\n  const setCustomCss = async (path: string | null, varName: string, repeat = 1) => {\n    if (path && await existsAsync(path)) {\n      const contents = await fs.promises.readFile(path, 'base64')\n      const dataUrl = `data:image/png;base64,${contents}`\n      document.body.style.setProperty(varName, repeatArr(`url(${dataUrl})`, repeat).join(', '))\n    } else {\n      document.body.style.setProperty(varName, '')\n    }\n  }\n  const setCustomPicture = async (key: string, path: string) => {\n    let contents = resourcesContentOriginal[key]\n    if (await existsAsync(path)) {\n      const file = await fs.promises.readFile(path, 'base64')\n      const dataUrl = `data:image/png;base64,${file}`\n      contents = dataUrl\n    }\n    appReplacableResources[key].content = contents\n  }\n  const vars = Object.entries(appReplacableResources).filter(([, x]) => x.cssVar)\n  for (const [key, { cssVar, cssVarRepeat, resourcePackPath }] of vars) {\n    const resPath = `${basePath}/assets/${resourcePackPath}`\n    if (cssVar) {\n      // eslint-disable-next-line no-await-in-loop\n      await setCustomCss(resPath, cssVar, cssVarRepeat ?? 1)\n    } else {\n      // eslint-disable-next-line no-await-in-loop\n      await setCustomPicture(key, resPath)\n    }\n  }\n}\n\nconst repeatArr = (arr, i) => Array.from({ length: i }, () => arr)\n\nconst updateTextures = async () => {\n  const blocksFiles = Object.keys(viewer.world.blocksAtlases.latest.textures)\n  const itemsFiles = Object.keys(viewer.world.itemsAtlases.latest.textures)\n  const blocksData = await getResourcepackTiles('blocks', blocksFiles)\n  const itemsData = await getResourcepackTiles('items', itemsFiles)\n  await updateAllReplacableTextures()\n  await prepareBlockstatesAndModels()\n  viewer.world.customTextures = {}\n  if (blocksData) {\n    viewer.world.customTextures.blocks = {\n      tileSize: blocksData.firstTextureSize,\n      textures: blocksData.textures\n    }\n  }\n  if (itemsData) {\n    viewer.world.customTextures.items = {\n      tileSize: itemsData.firstTextureSize,\n      textures: itemsData.textures\n    }\n  }\n  if (viewer.world.active) {\n    await viewer.world.updateTexturesData()\n  }\n}\n\nexport const resourcepackReload = async (version) => {\n  await updateTextures()\n}\n","import fs from 'fs'\nimport path from 'path'\nimport * as nbt from 'prismarine-nbt'\nimport { proxy } from 'valtio'\nimport { gzip } from 'node-gzip'\nimport { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\nimport { options } from './optionsStorage'\nimport { nameToMcOfflineUUID, disconnect } from './flyingSquidUtils'\nimport { existsViaStats, forceCachedDataPaths, forceRedirectPaths, mkdirRecursive } from './browserfs'\nimport { isMajorVersionGreater } from './utils'\n\nimport { activeModalStacks, insertActiveModalStack, miscUiState } from './globalState'\nimport supportedVersions from './supportedVersions.mjs'\n\n// todo include name of opened handle (zip)!\n// additional fs metadata\nexport const fsState = proxy({\n  isReadonly: false,\n  syncFs: false,\n  inMemorySave: false,\n  saveLoaded: false,\n  openReadOperations: 0,\n  openWriteOperations: 0,\n  remoteBackend: false\n})\n\nconst PROPOSE_BACKUP = true\n\nexport function longArrayToNumber (longArray: number[]) {\n  const [high, low] = longArray\n  return (high << 32) + low\n}\n\nexport const readLevelDat = async (path) => {\n  let levelDatContent\n  try {\n    // todo-low cache reading\n    levelDatContent = await fs.promises.readFile(`${path}/level.dat`)\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      return undefined\n    }\n    throw err\n  }\n  const { parsed } = await nbt.parse(Buffer.from(levelDatContent))\n  const levelDat: import('./mcTypes').LevelDat = nbt.simplify(parsed).Data\n  return { levelDat, dataRaw: parsed.value.Data!.value as Record<string, any> }\n}\n\nexport const loadSave = async (root = '/world') => {\n  // todo test\n  if (miscUiState.gameLoaded) {\n    await disconnect()\n    await new Promise(resolve => {\n      setTimeout(resolve)\n    })\n  }\n\n  const disablePrompts = options.disableLoadPrompts\n\n  // todo do it in singleplayer as well\n  // eslint-disable-next-line guard-for-in\n  for (const key in forceCachedDataPaths) {\n\n    delete forceCachedDataPaths[key]\n  }\n  // eslint-disable-next-line guard-for-in\n  for (const key in forceRedirectPaths) {\n\n    delete forceRedirectPaths[key]\n  }\n  // todo check jsHeapSizeLimit\n\n  const warnings: string[] = []\n  const { levelDat, dataRaw } = (await readLevelDat(root))!\n  if (levelDat === undefined) {\n    if (fsState.isReadonly) {\n      throw new Error('level.dat not found, ensure you are loading world folder')\n    } else {\n      warnings.push('level.dat not found, world in current folder will be created')\n    }\n  }\n\n  let version: string | undefined | null\n  let isFlat = false\n  if (levelDat) {\n    const qs = new URLSearchParams(window.location.search)\n    version = qs.get('mapVersion') ?? levelDat.Version?.Name\n    if (!version) {\n      // const newVersion = disablePrompts ? '1.8.8' : prompt(`In 1.8 and before world save doesn't contain version info, please enter version you want to use to load the world.\\nSupported versions ${supportedVersions.join(', ')}`, '1.8.8')\n      // if (!newVersion) return\n      // todo detect world load issues\n      const newVersion = '1.8.8'\n      version = newVersion\n    }\n    const lastSupportedVersion = supportedVersions.at(-1)!\n    const firstSupportedVersion = supportedVersions[0]\n    const lowerBound = isMajorVersionGreater(firstSupportedVersion, version)\n    const upperBound = versionToNumber(version) > versionToNumber(lastSupportedVersion)\n    if (lowerBound || upperBound) {\n      version = prompt(`Version ${version} is not supported, supported versions are ${supportedVersions.join(', ')}, what try to use instead?`, lowerBound ? firstSupportedVersion : lastSupportedVersion)\n      if (!version) return\n    }\n    if (levelDat.WorldGenSettings) {\n      for (const [key, value] of Object.entries(levelDat.WorldGenSettings.dimensions)) {\n        if (key.slice(10) === 'overworld') {\n          if (value.generator.type === 'flat') isFlat = true\n          break\n        }\n      }\n    }\n\n    if (levelDat.generatorName) {\n      isFlat = levelDat.generatorName === 'flat'\n    }\n    if (!isFlat && levelDat.generatorName !== 'default' && levelDat.generatorName !== 'customized') {\n      // warnings.push(`Generator ${levelDat.generatorName} may not be supported yet, be careful of new chunks writes`)\n    }\n\n    const playerUuid = nameToMcOfflineUUID(options.localUsername)\n    const playerDatPath = `${root}/playerdata/${playerUuid}.dat`\n    const playerDataOverride = dataRaw.Player\n    if (playerDataOverride) {\n      const playerDat = await gzip(nbt.writeUncompressed({ name: '', ...playerDataOverride }))\n      if (fsState.isReadonly) {\n        forceCachedDataPaths[playerDatPath] = playerDat\n      } else {\n        await mkdirRecursive(path.dirname(playerDatPath))\n        await fs.promises.writeFile(playerDatPath, playerDat)\n      }\n    }\n  }\n\n  if (warnings.length && !disablePrompts) {\n    const doContinue = confirm(`Continue with following warnings?\\n${warnings.join('\\n')}`)\n    if (!doContinue) return\n  }\n\n  if (PROPOSE_BACKUP) {\n    // const doBackup = options.alwaysBackupWorldBeforeLoading ?? confirm('Do you want to backup your world files before loading it?')\n    // // const doBackup = true\n    // if (doBackup) {\n    //   // todo do it in flying squid instead\n    //   await fs.promises.copyFile('/world/level.dat', `/world/level.dat_old`)\n    //   try {\n    //     await fs.promises.mkdir('/backups/region.old', { recursive: true })\n    //   } catch (err) { }\n    //   const files = await fs.promises.readdir('/world/region')\n    //   for (const file of files) {\n    //     await fs.promises.copyFile(`/world/region/${file}`, `/world/region.old/${file}`)\n    //   }\n    // }\n  }\n\n  if (!fsState.isReadonly && !fsState.inMemorySave && !disablePrompts) {\n    // todo allow also to ctrl+s\n    alert('Note: the world is saved on interval, /save or disconnect! Ensure you have backup and be careful of new chunks writes!')\n  }\n\n  // improve compatibility with community saves\n  const rootRemapFiles = ['Warp files']\n  for (const rootRemapFile of rootRemapFiles) {\n    // eslint-disable-next-line no-await-in-loop\n    if (await existsViaStats(path.join(root, '..', rootRemapFile))) {\n      forceRedirectPaths[path.join(root, rootRemapFile)] = path.join(root, '..', rootRemapFile)\n    }\n  }\n\n  // todo reimplement\n  if (activeModalStacks['main-menu']) {\n    insertActiveModalStack('main-menu')\n  }\n  // todo use general logic\n  // if (activeModalStack.at(-1)?.reactType === 'app-status' && !appStatusState.isError) {\n  //   alert('Wait for operations to finish before loading a new world')\n  //   return\n  // }\n  // for (const _i of activeModalStack) {\n  //   hideModal(undefined, undefined, { force: true })\n  // }\n\n  // todo should not be set here\n  fsState.saveLoaded = true\n  window.dispatchEvent(new CustomEvent('singleplayer', {\n    // todo check gamemode level.dat data etc\n    detail: {\n      version,\n      ...isFlat ? {\n        generation: {\n          name: 'superflat'\n        }\n      } : {},\n      ...root === '/world' ? {} : {\n        'worldFolder': root\n      }\n    },\n  }))\n}\n","import * as crypto from 'crypto'\nimport UUID from 'uuid-1345'\nimport { fsState } from './loadSave'\n\n\n// https://github.com/PrismarineJS/node-minecraft-protocol/blob/cf1f67117d586b5e6e21f0d9602da12e9fcf46b6/src/server/login.js#L170\nfunction javaUUID (s: string) {\n  const hash = crypto.createHash('md5')\n  hash.update(s, 'utf8')\n  const buffer = hash.digest()\n  buffer[6] = (buffer[6] & 15) | 48\n  buffer[8] = (buffer[8] & 63) | 128\n  return buffer\n}\n\nexport function nameToMcOfflineUUID (name) {\n  return (new UUID(javaUUID('OfflinePlayer:' + name))).toString()\n}\n\nexport async function savePlayers (autoSave: boolean) {\n  if (autoSave && new URL(location.href).searchParams.get('noSave') === 'true') return\n  //@ts-expect-error TODO\n  await localServer!.savePlayersSingleplayer()\n}\n\n// todo flying squid should expose save function instead\nexport const saveServer = async (autoSave = true) => {\n  if (!localServer || fsState.isReadonly) return\n  // todo\n  console.time('save server')\n  const worlds = [(localServer as any).overworld] as Array<import('prismarine-world').world.World>\n  await Promise.all([localServer.writeLevelDat(), savePlayers(autoSave), ...worlds.map(async world => world.saveNow())])\n  console.timeEnd('save server')\n}\nexport const disconnect = async () => {\n  if (localServer) {\n    await saveServer()\n    void localServer.quit() // todo investigate we should await\n  }\n  window.history.replaceState({}, '', `${window.location.pathname}`) // remove qs\n  bot.end('You left the server')\n  location.reload()\n}\n","import { saveServer } from './flyingSquidUtils'\nimport { isGameActive, activeModalStack } from './globalState'\nimport { options } from './optionsStorage'\n\nwindow.addEventListener('unload', (e) => {\n  if (!window.justReloaded) {\n    sessionStorage.justReloaded = false\n  }\n  void saveServer()\n})\n\ndocument.addEventListener('visibilitychange', () => {\n  if (document.visibilityState === 'hidden') void saveServer()\n})\ndocument.addEventListener('blur', () => {\n  void saveServer()\n})\n\nwindow.addEventListener('beforeunload', (event) => {\n  if (!window.justReloaded) {\n    sessionStorage.justReloaded = false\n  }\n\n  // todo-low maybe exclude chat?\n  if (!isGameActive(true) && activeModalStack.at(-1)?.elem?.id !== 'chat') return\n  if (sessionStorage.lastReload && !options.preventDevReloadWhilePlaying) return\n  if (!options.closeConfirmation) return\n\n  // For major browsers doning only this is enough\n  event.preventDefault()\n\n  // Display a confirmation prompt\n  event.returnValue = '' // Required for some browsers\n  return 'The game is running. Are you sure you want to close this page?'\n})\n","import { getRenamedData } from 'flying-squid/dist/blockRenames'\nimport collisionShapesInit from '../generated/latestBlockCollisionsShapes.json'\n\n// defining globally to be used in loaded data, not sure of better workaround\nwindow.globalGetCollisionShapes = (version) => {\n  // todo use the same in resourcepack\n  const versionFrom = collisionShapesInit.version\n  const renamedBlocks = getRenamedData('blocks', Object.keys(collisionShapesInit.blocks), versionFrom, version)\n  const collisionShapes = {\n    ...collisionShapesInit,\n    blocks: Object.fromEntries(Object.entries(collisionShapesInit.blocks).map(([, shape], i) => [renamedBlocks[i], shape]))\n  }\n  return collisionShapes\n}\n","import { proxy } from 'valtio'\nimport { subscribeKey } from 'valtio/utils'\nimport { options, watchValue } from './optionsStorage'\n\nexport const currentScaling = proxy({\n  scale: 1,\n})\nwindow.currentScaling = currentScaling\n\nconst setScale = () => {\n  const scaleValues = [\n    { maxWidth: 971, maxHeight: null, scale: 2 },\n    { maxWidth: null, maxHeight: 390, scale: 1.5 }, // todo allow to set the scaling at 360-400 (dynamic scaling setting)\n    { maxWidth: 590, maxHeight: null, scale: 1 },\n\n    { maxWidth: 590, minHeight: 240, scale: 1.4 },\n  ]\n\n  const { innerWidth, innerHeight } = window\n\n  let result = options.guiScale\n  for (const { maxWidth, maxHeight, scale, minHeight } of scaleValues) {\n    if ((!maxWidth || innerWidth <= maxWidth) && (!maxHeight || innerHeight <= maxHeight) && (!minHeight || innerHeight >= minHeight)) {\n      result = scale\n    }\n  }\n\n  currentScaling.scale = result\n}\n\n\nsetScale()\nsubscribeKey(options, 'guiScale', setScale)\nwatchValue(currentScaling, (c) => {\n  document.documentElement.style.setProperty('--guiScale', String(c.scale))\n})\nwindow.addEventListener('resize', setScale)\n","\nexport const descriptionGenerators = new Map<RegExp | string[], string | ((name) => string)>()\ndescriptionGenerators.set(/_slab$/, name => 'Craft it by placing 3 blocks of the material in a row in a crafting table.')\ndescriptionGenerators.set(/_stairs$/, name => 'Craft it by placing 6 blocks of the material in a stair shape in a crafting table.')\ndescriptionGenerators.set(/_log$/, name => 'You can get it by chopping down a tree. To chop down a tree, hold down the left mouse button until the tree breaks.')\ndescriptionGenerators.set(/_leaves$/, name => 'You can get it by breaking the leaves of a tree with a tool that has the Silk Touch enchantment or by using shears.')\ndescriptionGenerators.set(['mangrove_roots'], name => 'You can get it by breaking the roots of a mangrove tree.')\ndescriptionGenerators.set(['mud'], 'Mud is a block found abundantly in mangrove swamps or created by using a water bottle on a dirt block. It can be used for crafting or converted into clay using pointed dripstone.')\ndescriptionGenerators.set(['clay'], 'Clay is a block found underwater or created by using a water bottle on a mud block. It can be used for crafting or converted into terracotta using a furnace.')\ndescriptionGenerators.set(['terracotta'], 'Terracotta is a block created by smelting clay in a furnace. It can be used for crafting or decoration.')\ndescriptionGenerators.set(['stone'], 'Stone is a block found underground.')\ndescriptionGenerators.set(['dirt'], 'Dirt is a block found on the surface.')\ndescriptionGenerators.set(['sand'], 'Sand is a block found on the surface near water.')\ndescriptionGenerators.set(['gravel'], 'Gravel is a block found on the surface and sometimes underground.')\ndescriptionGenerators.set(['sandstone'], 'Sandstone is a block found in deserts.')\ndescriptionGenerators.set(['red_sandstone'], 'Red sandstone is a block found in mesas.')\ndescriptionGenerators.set(['granite', 'diorite', 'andesite'], name => `${name.charAt(0).toUpperCase() + name.slice(1)} is a block found underground.`)\ndescriptionGenerators.set(['netherrack', 'soul_sand', 'soul_soil', 'glowstone'], name => `${name.charAt(0).toUpperCase() + name.slice(1)} is a block found in the Nether.`)\ndescriptionGenerators.set(['end_stone'], 'End stone is a block found in the End.')\ndescriptionGenerators.set(['obsidian'], 'Obsidian is a block created by pouring water on lava.')\ndescriptionGenerators.set(['glass'], 'Glass is a block created by smelting sand in a furnace.')\ndescriptionGenerators.set(['bedrock'], 'Bedrock is an indestructible block found at the bottom of the world in the Overworld and at the top of the world in the Nether.')\ndescriptionGenerators.set(['water', 'lava'], name => `${name.charAt(0).toUpperCase() + name.slice(1)} is a fluid found in the Overworld.`)\ndescriptionGenerators.set(/_sapling$/, name => `${name} drops from the leaves of a tree when it decays or is broken. It can be planted on dirt to grow a new tree.`)\ndescriptionGenerators.set(/^stripped_/, name => `${name} is created by using an axe on the block.`)\ndescriptionGenerators.set(['sponge'], 'Sponge is a block found in ocean monuments.')\ndescriptionGenerators.set(/^music_disc_/, name => `Music discs are rare items that can be found in dungeons or by trading with villagers. Also dropped by creepers when killed by a skeleton.`)\ndescriptionGenerators.set(/^enchanted_book$/, 'Enchanted books are rare items that can be found in dungeons or by trading with villagers.')\ndescriptionGenerators.set(/_spawn_egg$/, name => `${name} is an item that can be used to spawn a mob in Creative mode. Cannot be obtained in Survival mode.`)\ndescriptionGenerators.set(/_pottery_sherd$/, name => `${name} can be obtained only by brushing suspicious blocks, with the variants of sherd obtainable being dependent on the structure.`)\ndescriptionGenerators.set(['cracked_deepslate_bricks'], `Deepslate Bricks and Cracked Deepslate Bricks generate naturally in ancient cities.`)\n\nconst moreGeneratedBlocks = {\n  'natural_blocks': {\n    'air': {\n      'obtained_from': 'Naturally occurs in the world.'\n    },\n    'deepslate': {\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 16.',\n      'rarity': 'Common'\n    },\n    'cobbled_deepslate': {\n      'obtained_from': 'Mined from deepslate with any pickaxe.'\n    },\n    'calcite': {\n      'obtained_from': 'Mined with a pickaxe, found in geodes.'\n    },\n    'tuff': {\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 16.',\n      'rarity': 'Common'\n    },\n    'chiseled_tuff': {\n      'obtained_from': 'Crafted from tuff.'\n    },\n    'polished_tuff': {\n      'obtained_from': 'Crafted from tuff.'\n    },\n    'tuff_bricks': {\n      'obtained_from': 'Crafted from tuff.'\n    },\n    'chiseled_tuff_bricks': {\n      'obtained_from': 'Crafted from tuff bricks.'\n    },\n    'grass_block': {\n      'obtained_from': 'Mined with a tool enchanted with Silk Touch.'\n    },\n    'podzol': {\n      'obtained_from': 'Mined with a tool enchanted with Silk Touch, found in giant tree taiga biomes.'\n    },\n    'rooted_dirt': {\n      'obtained_from': 'Mined with a shovel, found under azalea trees.'\n    },\n    'crimson_nylium': {\n      'obtained_from': 'Mined with a pickaxe, found in the Nether.'\n    },\n    'warped_nylium': {\n      'obtained_from': 'Mined with a pickaxe, found in the Nether.'\n    },\n    'cobblestone': {\n      'obtained_from': 'Mined from stone, or from breaking stone structures.'\n    },\n    'mangrove_propagule': {\n      'obtained_from': 'Harvested from mangrove trees.'\n    },\n    'suspicious_sand': {\n      'obtained_from': 'Found in deserts and beaches.'\n    },\n    'suspicious_gravel': {\n      'obtained_from': 'Found underwater.'\n    },\n    'red_sand': {\n      'obtained_from': 'Mined from red sand in badlands biomes.'\n    },\n    'coal_ore': {\n      'obtained_from': 'Mined with a pickaxe in layers 0 to 128.',\n      'rarity': 'Common'\n    },\n    'deepslate_coal_ore': {\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 0.',\n      'rarity': 'Rare'\n    },\n    'iron_ore': {\n      'obtained_from': 'Mined with a pickaxe in layers 0 to 63.',\n      'rarity': 'Common'\n    },\n    'deepslate_iron_ore': {\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 0.',\n      'rarity': 'Uncommon'\n    },\n    'copper_ore': {\n      'obtained_from': 'Mined with a pickaxe in layers 0 to 96.',\n      'rarity': 'Common'\n    },\n    'deepslate_copper_ore': {\n      'obtained_from': 'Mined with a pickaxe in layers -16 to 64.',\n      'rarity': 'Uncommon'\n    },\n    'gold_ore': {\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 32.',\n      'rarity': 'Uncommon'\n    },\n    'deepslate_gold_ore': {\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 0.',\n      'rarity': 'Rare'\n    },\n    'redstone_ore': {\n      'obtained_from': 'Mined with an iron pickaxe or higher in layers -64 to 16.',\n      'rarity': 'Uncommon'\n    },\n    'deepslate_redstone_ore': {\n      'obtained_from': 'Mined with an iron pickaxe or higher in layers -64 to 0.',\n      'rarity': 'Uncommon'\n    },\n    'emerald_ore': {\n      'obtained_from': 'Mined with an iron pickaxe or higher in mountain biomes, layers -16 to 256.',\n      'rarity': 'Rare'\n    },\n    'deepslate_emerald_ore': {\n      'obtained_from': 'Mined with an iron pickaxe or higher in mountain biomes, layers -64 to 0.',\n      'rarity': 'Very Rare'\n    },\n    'lapis_ore': {\n      'obtained_from': 'Mined with a stone pickaxe or higher in layers -64 to 32.',\n      'rarity': 'Uncommon'\n    },\n    'deepslate_lapis_ore': {\n      'obtained_from': 'Mined with a stone pickaxe or higher in layers -64 to 0.',\n      'rarity': 'Rare'\n    },\n    'diamond_ore': {\n      'obtained_from': 'Mined with an iron pickaxe or higher in layers -64 to 16.',\n      'rarity': 'Rare'\n    },\n    'deepslate_diamond_ore': {\n      'obtained_from': 'Mined with an iron pickaxe or higher in layers -64 to 0.',\n      'rarity': 'Very Rare'\n    },\n    'nether_gold_ore': {\n      'obtained_from': 'Mined with any pickaxe in the Nether.'\n    },\n    'nether_quartz_ore': {\n      'obtained_from': 'Mined with any pickaxe in the Nether.'\n    },\n    'ancient_debris': {\n      'obtained_from': 'Mined with a diamond or netherite pickaxe in the Nether, layers 8 to 22.',\n      'rarity': 'Very Rare'\n    },\n    'budding_amethyst': {\n      'obtained_from': 'Found in amethyst geodes, cannot be obtained as an item.'\n    },\n    'exposed_copper': {\n      'obtained_from': 'Exposed copper block obtained through mining.'\n    },\n    'weathered_copper': {\n      'obtained_from': 'Weathered copper block obtained through mining.'\n    },\n    'oxidized_copper': {\n      'obtained_from': 'Oxidized copper block obtained through mining.'\n    },\n    'chiseled_copper': {\n      'obtained_from': 'Crafted from copper blocks.'\n    },\n    'exposed_chiseled_copper': {\n      'obtained_from': 'Exposed chiseled copper block obtained through mining.'\n    },\n    'weathered_chiseled_copper': {\n      'obtained_from': 'Weathered chiseled copper block obtained through mining.'\n    },\n    'oxidized_chiseled_copper': {\n      'obtained_from': 'Oxidized chiseled copper block obtained through mining.'\n    },\n    'waxed_chiseled_copper': {\n      'obtained_from': 'Crafted from copper blocks, waxed to prevent oxidation.'\n    },\n    'waxed_exposed_chiseled_copper': {\n      'obtained_from': 'Waxed exposed chiseled copper block obtained through mining.'\n    },\n    'waxed_weathered_chiseled_copper': {\n      'obtained_from': 'Waxed weathered chiseled copper block obtained through mining.'\n    },\n    'waxed_oxidized_chiseled_copper': {\n      'obtained_from': 'Waxed oxidized chiseled copper block obtained through mining.'\n    },\n    'crimson_stem': {\n      'obtained_from': 'Mined from crimson trees in the Nether.'\n    },\n    'warped_stem': {\n      'obtained_from': 'Mined from warped trees in the Nether.'\n    },\n    'stripped_crimson_stem': {\n      'obtained_from': 'Stripped from crimson stem with an axe.'\n    },\n    'stripped_warped_stem': {\n      'obtained_from': 'Stripped from warped stem with an axe.'\n    },\n    'stripped_bamboo_block': {\n      'obtained_from': 'Crafted from bamboo.'\n    },\n    'sponge': {\n      'obtained_from': 'Found in ocean monuments.'\n    },\n    'wet_sponge': {\n      'obtained_from': 'Absorbs water, can be dried in a furnace.'\n    },\n    'cobweb': {\n      'obtained_from': 'Mined with a sword or shears, found in mineshafts.'\n    },\n    'short_grass': {\n      'obtained_from': 'Sheared from grass.'\n    },\n    'fern': {\n      'obtained_from': 'Sheared from ferns in forest biomes.'\n    },\n    'azalea': {\n      'obtained_from': 'Found in lush caves.'\n    },\n    'flowering_azalea': {\n      'obtained_from': 'Found in lush caves.'\n    },\n    'dead_bush': {\n      'obtained_from': 'Mined with shears in desert biomes.'\n    },\n    'seagrass': {\n      'obtained_from': 'Sheared from underwater grass.'\n    },\n    'sea_pickle': {\n      'obtained_from': 'Mined with shears from coral reefs.'\n    },\n    'dandelion': {\n      'type': 'natural',\n      'description': 'Dandelions are common flowers that spawn in plains, forests, and meadows.',\n      'spawn_range': 'Surface'\n    },\n    'poppy': {\n      'type': 'natural',\n      'description': 'Poppies are common flowers that generate in plains, forests, and meadows.',\n      'spawn_range': 'Surface'\n    },\n    'blue_orchid': {\n      'type': 'natural',\n      'description': 'Blue orchids spawn naturally in swamp biomes.',\n      'spawn_range': 'Surface'\n    },\n    'allium': {\n      'type': 'natural',\n      'description': 'Alliums are flowers that generate in flower forest biomes.',\n      'spawn_range': 'Surface'\n    },\n    'azure_bluet': {\n      'type': 'natural',\n      'description': 'Azure bluets are common flowers that spawn in plains and flower forest biomes.',\n      'spawn_range': 'Surface'\n    },\n    'red_tulip': {\n      'type': 'natural',\n      'description': 'Red tulips are flowers found in flower forests and plains.',\n      'spawn_range': 'Surface'\n    },\n    'orange_tulip': {\n      'type': 'natural',\n      'description': 'Orange tulips are flowers found in flower forests and plains.',\n      'spawn_range': 'Surface'\n    },\n    'white_tulip': {\n      'type': 'natural',\n      'description': 'White tulips are flowers found in flower forests and plains.',\n      'spawn_range': 'Surface'\n    },\n    'pink_tulip': {\n      'type': 'natural',\n      'description': 'Pink tulips are flowers found in flower forests and plains.',\n      'spawn_range': 'Surface'\n    },\n    'oxeye_daisy': {\n      'type': 'natural',\n      'description': 'Oxeye daisies are common flowers that generate in plains and flower forest biomes.',\n      'spawn_range': 'Surface'\n    },\n    'cornflower': {\n      'type': 'natural',\n      'description': 'Cornflowers spawn in plains, flower forests, and meadows.',\n      'spawn_range': 'Surface'\n    },\n    'lily_of_the_valley': {\n      'type': 'natural',\n      'description': 'Lily of the valleys generate in flower forest biomes.',\n      'spawn_range': 'Surface'\n    },\n    'wither_rose': {\n      'type': 'dropped',\n      'description': 'Wither roses are dropped when a mob is killed by the Wither boss.',\n      'spawn_range': 'N/A'\n    },\n    'torchflower': {\n      'type': 'crafted',\n      'description': 'Torchflowers can be grown using torchflower seeds, which are found in archeology loot or by trading.',\n      'spawn_range': 'N/A'\n    },\n    'pitcher_plant': {\n      'type': 'crafted',\n      'description': 'Pitcher plants can be grown using pitcher pods, which are found in archeology loot or by trading.',\n      'spawn_range': 'N/A'\n    },\n    'spore_blossom': {\n      'type': 'natural',\n      'description': 'Spore blossoms generate naturally on the ceilings of lush caves.',\n      'spawn_range': 'Underground'\n    },\n    'brown_mushroom': {\n      'type': 'natural',\n      'description': 'Brown mushrooms are found in dark areas, swamps, mushroom fields, and forests.',\n      'spawn_range': 'Surface'\n    },\n    'red_mushroom': {\n      'type': 'natural',\n      'description': 'Red mushrooms are found in dark areas, swamps, mushroom fields, and forests.',\n      'spawn_range': 'Surface'\n    },\n    'crimson_fungus': {\n      'type': 'natural',\n      'description': 'Crimson fungi generate naturally in crimson forests in the Nether.',\n      'spawn_range': 'Nether'\n    },\n    'warped_fungus': {\n      'type': 'natural',\n      'description': 'Warped fungi generate naturally in warped forests in the Nether.',\n      'spawn_range': 'Nether'\n    },\n    'crimson_roots': {\n      'type': 'natural',\n      'description': 'Crimson roots generate naturally in crimson forests in the Nether.',\n      'spawn_range': 'Nether'\n    },\n    'warped_roots': {\n      'type': 'natural',\n      'description': 'Warped roots generate naturally in warped forests in the Nether.',\n      'spawn_range': 'Nether'\n    },\n    'nether_sprouts': {\n      'type': 'natural',\n      'description': 'Nether sprouts generate naturally in warped forests in the Nether.',\n      'spawn_range': 'Nether'\n    },\n    'weeping_vines': {\n      'type': 'natural',\n      'description': 'Weeping vines generate naturally in crimson forests in the Nether and grow downward from netherrack.',\n      'spawn_range': 'Nether'\n    },\n    'twisting_vines': {\n      'type': 'natural',\n      'description': 'Twisting vines generate naturally in warped forests in the Nether and grow upward from the ground.',\n      'spawn_range': 'Nether'\n    },\n    'sugar_cane': {\n      'type': 'natural',\n      'description': 'Sugar cane is found near water in most biomes.',\n      'spawn_range': 'Surface'\n    },\n    'kelp': {\n      'type': 'natural',\n      'description': 'Kelp generates underwater in most ocean biomes.',\n      'spawn_range': 'Water'\n    },\n    'pink_petals': {\n      'type': 'natural',\n      'description': 'Pink petals generate naturally in cherry grove biomes.',\n      'spawn_range': 'Surface'\n    },\n    'moss_block': {\n      'type': 'natural',\n      'description': 'Moss blocks generate in lush caves and can also be obtained through trading or by using bone meal on moss carpets.',\n      'spawn_range': 'Underground'\n    },\n    'hanging_roots': {\n      'type': 'natural',\n      'description': 'Hanging roots generate naturally in lush caves.',\n      'spawn_range': 'Underground'\n    },\n    'big_dripleaf': {\n      'type': 'natural',\n      'description': 'Big dripleaf plants generate in lush caves and can also be obtained through trading.',\n      'spawn_range': 'Underground'\n    },\n    'small_dripleaf': {\n      'type': 'natural',\n      'description': 'Small dripleaf plants generate in lush caves and can also be obtained through trading.',\n      'spawn_range': 'Underground'\n    },\n    'bamboo': {\n      'type': 'natural',\n      'description': 'Bamboo generates in jungle biomes, especially bamboo jungles.',\n      'spawn_range': 'Surface'\n    },\n    'smooth_quartz': {\n      'type': 'crafted',\n      'description': 'Smooth quartz is obtained by smelting blocks of quartz.',\n      'spawn_range': 'N/A'\n    },\n    'smooth_red_sandstone': {\n      'type': 'crafted',\n      'description': 'Smooth red sandstone is obtained by smelting red sandstone.',\n      'spawn_range': 'N/A'\n    },\n    'smooth_sandstone': {\n      'type': 'crafted',\n      'description': 'Smooth sandstone is obtained by smelting sandstone.',\n      'spawn_range': 'N/A'\n    },\n    'smooth_stone': {\n      'type': 'crafted',\n      'description': 'Smooth stone is obtained by smelting regular stone.',\n      'spawn_range': 'N/A'\n    },\n    'chorus_plant': {\n      'type': 'natural',\n      'description': 'Chorus plants generate naturally in the End and can be grown from chorus flowers.',\n      'spawn_range': 'End'\n    },\n    'chorus_flower': {\n      'type': 'natural',\n      'description': 'Chorus flowers generate naturally in the End on top of chorus plants.',\n      'spawn_range': 'End'\n    },\n    'spawner': {\n      'type': 'natural',\n      'description': 'Spawners generate in dungeons, mineshafts, and other structures.',\n      'spawn_range': 'Underground'\n    },\n    'farmland': {\n      'type': 'crafted',\n      'description': 'Farmland is created by using a hoe on dirt or grass blocks.',\n      'spawn_range': 'N/A'\n    },\n    'ice': {\n      'type': 'natural',\n      'description': 'Ice generates in snowy and icy biomes and can also be obtained by breaking ice blocks with a Silk Touch tool.',\n      'spawn_range': 'Surface'\n    },\n    'cactus': {\n      'type': 'natural',\n      'description': 'Cacti generate naturally in desert biomes.',\n      'spawn_range': 'Surface'\n    },\n    'pumpkin': {\n      'type': 'natural',\n      'description': 'Pumpkins generate naturally in most grassy biomes and can also be grown from pumpkin seeds.',\n      'spawn_range': 'Surface'\n    },\n    'carved_pumpkin': {\n      'type': 'crafted',\n      'description': 'Carved pumpkins are obtained by using shears on a pumpkin.',\n      'spawn_range': 'N/A'\n    },\n    'basalt': {\n      'type': 'natural',\n      'description': 'Basalt generates in the Nether in basalt deltas and can also be created by lava flowing over soul soil next to blue ice.',\n      'spawn_range': 'Nether'\n    },\n    'smooth_basalt': {\n      'type': 'natural',\n      'description': 'Smooth basalt is found around amethyst geodes or can be obtained by smelting basalt.',\n      'spawn_range': 'Underground'\n    },\n    'infested_stone': {\n      'type': 'natural',\n      'description': 'Infested stone blocks contain silverfish and generate in strongholds, underground.',\n      'spawn_range': 'Underground'\n    },\n    'infested_cobblestone': {\n      'type': 'natural',\n      'description': 'Infested cobblestone blocks contain silverfish and generate in strongholds, underground.',\n      'spawn_range': 'Underground'\n    },\n    'infested_stone_bricks': {\n      'type': 'natural',\n      'description': 'Infested stone bricks contain silverfish and generate in strongholds, underground.',\n      'spawn_range': 'Underground'\n    },\n    'infested_mossy_stone_bricks': {\n      'type': 'natural',\n      'description': 'Infested mossy stone bricks contain silverfish and generate in strongholds, underground.',\n      'spawn_range': 'Underground'\n    },\n    'infested_cracked_stone_bricks': {\n      'type': 'natural',\n      'description': 'Infested cracked stone bricks contain silverfish and generate in strongholds, underground.',\n      'spawn_range': 'Underground'\n    },\n    'infested_chiseled_stone_bricks': {\n      'type': 'natural',\n      'description': 'Infested chiseled stone bricks contain silverfish and generate in strongholds, underground.',\n      'spawn_range': 'Underground'\n    },\n    'infested_deepslate': {\n      'type': 'natural',\n      'description': 'Infested deepslate contains silverfish and generates in the deepslate layer underground.',\n      'spawn_range': 'Underground'\n    },\n    'cracked_stone_bricks': {\n      'type': 'crafted',\n      'description': 'Cracked stone bricks are obtained by smelting stone bricks.',\n      'spawn_range': 'N/A'\n    },\n    'cracked_deepslate_bricks': {\n      'type': 'crafted',\n      'description': 'Cracked deepslate bricks are obtained by smelting deepslate bricks.',\n      'spawn_range': 'N/A'\n    },\n    'cracked_deepslate_tiles': {\n      'type': 'crafted',\n      'description': 'Cracked deepslate tiles are obtained by smelting deepslate tiles.',\n      'spawn_range': 'N/A'\n    },\n    'reinforced_deepslate': {\n      'type': 'crafted',\n      'description': 'Reinforced deepslate is a strong block that cannot be obtained in survival mode.',\n      'spawn_range': 'N/A'\n    },\n    'brown_mushroom_block': {\n      'type': 'natural',\n      'description': 'Brown mushroom blocks generate as part of huge mushrooms in dark forest biomes and mushroom fields.',\n      'spawn_range': 'Surface'\n    },\n    'red_mushroom_block': {\n      'type': 'natural',\n      'description': 'Red mushroom blocks generate as part of huge mushrooms in dark forest biomes and mushroom fields.',\n      'spawn_range': 'Surface'\n    },\n    'mushroom_stem': {\n      'type': 'natural',\n      'description': 'Mushroom stems generate as part of huge mushrooms in dark forest biomes and mushroom fields.',\n      'spawn_range': 'Surface'\n    },\n    'vine': {\n      'type': 'natural',\n      'description': 'Vines generate naturally on trees and walls in jungle biomes, swamps, and lush caves.',\n      'spawn_range': 'Surface'\n    },\n    'glow_lichen': {\n      'type': 'natural',\n      'description': 'Glow lichen generates naturally in caves and can spread to other blocks using bone meal.',\n      'spawn_range': 'Underground'\n    },\n    'mycelium': {\n      'type': 'natural',\n      'description': 'Mycelium generates naturally in mushroom field biomes and spreads to dirt blocks.',\n      'spawn_range': 'Surface'\n    },\n    'lily_pad': {\n      'type': 'natural',\n      'description': 'Lily pads generate naturally on the surface of water in swamps.',\n      'spawn_range': 'Water'\n    },\n    'cracked_nether_bricks': {\n      'type': 'crafted',\n      'description': 'Cracked nether bricks are obtained by smelting nether bricks.',\n      'spawn_range': 'N/A'\n    },\n    'sculk': {\n      'type': 'natural',\n      'description': 'Sculk generates naturally in the deep dark biome and spreads using a sculk catalyst.',\n      'spawn_range': 'Underground'\n    },\n    'sculk_vein': {\n      'type': 'natural',\n      'description': 'Sculk veins generate naturally in the deep dark biome and spread using a sculk catalyst.',\n      'spawn_range': 'Underground'\n    },\n    'sculk_catalyst': {\n      'type': 'natural',\n      'description': 'Sculk catalysts generate naturally in the deep dark biome and spread sculk blocks when mobs die nearby.',\n      'spawn_range': 'Underground'\n    },\n    'sculk_shrieker': {\n      'type': 'natural',\n      'description': 'Sculk shriekers generate naturally in the deep dark biome and emit a loud shriek when activated.',\n      'spawn_range': 'Underground'\n    },\n    'end_portal_frame': {\n      'type': 'natural',\n      'description': 'End portal frames generate naturally in strongholds, forming the structure of end portals.',\n      'spawn_range': 'Underground'\n    },\n    'dragon_egg': {\n      'type': 'dropped',\n      'description': 'The dragon egg is dropped when the Ender Dragon is defeated for the first time.',\n      'spawn_range': 'End'\n    },\n    'command_block': {\n      'type': 'crafted',\n      'description': 'Command blocks are powerful blocks used in commands and redstone, obtainable only via commands.',\n      'spawn_range': 'N/A'\n    },\n    'chipped_anvil': {\n      'type': 'crafted',\n      'description': 'Chipped anvils are damaged versions of anvils and are used for repairing and enchanting.',\n      'spawn_range': 'N/A'\n    },\n    'damaged_anvil': {\n      'type': 'crafted',\n      'description': 'Damaged anvils are further damaged versions of anvils and are used for repairing and enchanting.',\n      'spawn_range': 'N/A'\n    },\n    'barrier': {\n      'type': 'crafted',\n      'description': 'Barriers are invisible blocks used in map-making and obtainable only via commands.',\n      'spawn_range': 'N/A'\n    },\n    'light': {\n      'type': 'crafted',\n      'description': 'Light blocks are invisible blocks that emit light, obtainable only via commands.',\n      'spawn_range': 'N/A'\n    },\n    'dirt_path': {\n      'type': 'crafted',\n      'description': 'Dirt paths are created by using a shovel on grass blocks and are commonly found in villages.',\n      'spawn_range': 'Surface'\n    },\n    'sunflower': {\n      'type': 'natural',\n      'description': 'Sunflowers generate naturally in sunflower plains biomes.',\n      'spawn_range': 'Surface'\n    },\n    'lilac': {\n      'type': 'natural',\n      'description': 'Lilacs generate naturally in forest biomes.',\n      'spawn_range': 'Surface'\n    },\n    'rose_bush': {\n      'type': 'natural',\n      'description': 'Rose bushes generate naturally in forest biomes.',\n      'spawn_range': 'Surface'\n    },\n    'peony': {\n      'type': 'natural',\n      'description': 'Peonies generate naturally in forest biomes.',\n      'spawn_range': 'Surface'\n    },\n    'tall_grass': {\n      'type': 'natural',\n      'description': 'Tall grass generates naturally in various biomes and can be grown using bone meal.',\n      'spawn_range': 'Surface'\n    },\n    'large_fern': {\n      'type': 'natural',\n      'description': 'Large ferns generate naturally in taiga biomes.',\n      'spawn_range': 'Surface'\n    },\n    'repeating_command_block': {\n      'type': 'crafted',\n      'description': 'Repeating command blocks execute commands every tick and are obtainable only via commands.',\n      'spawn_range': 'N/A'\n    },\n    'chain_command_block': {\n      'type': 'crafted',\n      'description': 'Chain command blocks execute commands when triggered and are obtainable only via commands.',\n      'spawn_range': 'N/A'\n    },\n    'warped_wart_block': {\n      'type': 'natural',\n      'description': 'Warped wart blocks generate naturally in warped forests in the Nether.',\n      'spawn_range': 'Nether'\n    },\n    'structure_void': {\n      'type': 'crafted',\n      'description': 'Structure voids are used in structure blocks to exclude certain blocks from being saved and are obtainable only via commands.',\n      'spawn_range': 'N/A'\n    },\n    'white_shulker_box': {\n      'type': 'crafted',\n      'description': 'White shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'orange_shulker_box': {\n      'type': 'crafted',\n      'description': 'Orange shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'magenta_shulker_box': {\n      'type': 'crafted',\n      'description': 'Magenta shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'light_blue_shulker_box': {\n      'type': 'crafted',\n      'description': 'Light blue shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'yellow_shulker_box': {\n      'type': 'crafted',\n      'description': 'Yellow shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'lime_shulker_box': {\n      'type': 'crafted',\n      'description': 'Lime shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'pink_shulker_box': {\n      'type': 'crafted',\n      'description': 'Pink shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'gray_shulker_box': {\n      'type': 'crafted',\n      'description': 'Gray shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'light_gray_shulker_box': {\n      'type': 'crafted',\n      'description': 'Light gray shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'cyan_shulker_box': {\n      'type': 'crafted',\n      'description': 'Cyan shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'purple_shulker_box': {\n      'type': 'crafted',\n      'description': 'Purple shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'blue_shulker_box': {\n      'type': 'crafted',\n      'description': 'Blue shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'brown_shulker_box': {\n      'type': 'crafted',\n      'description': 'Brown shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'green_shulker_box': {\n      'type': 'crafted',\n      'description': 'Green shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'red_shulker_box': {\n      'type': 'crafted',\n      'description': 'Red shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'black_shulker_box': {\n      'type': 'crafted',\n      'description': 'Black shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\n      'spawn_range': 'N/A'\n    },\n    'white_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'White glazed terracotta is obtained by smelting white terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'orange_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Orange glazed terracotta is obtained by smelting orange terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'magenta_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Magenta glazed terracotta is obtained by smelting magenta terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'light_blue_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Light blue glazed terracotta is obtained by smelting light blue terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'yellow_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Yellow glazed terracotta is obtained by smelting yellow terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'lime_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Lime glazed terracotta is obtained by smelting lime terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'pink_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Pink glazed terracotta is obtained by smelting pink terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'gray_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Gray glazed terracotta is obtained by smelting gray terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'light_gray_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Light gray glazed terracotta is obtained by smelting light gray terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'cyan_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Cyan glazed terracotta is obtained by smelting cyan terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'purple_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Purple glazed terracotta is obtained by smelting purple terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'blue_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Blue glazed terracotta is obtained by smelting blue terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'brown_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Brown glazed terracotta is obtained by smelting brown terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'green_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Green glazed terracotta is obtained by smelting green terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'red_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Red glazed terracotta is obtained by smelting red terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'black_glazed_terracotta': {\n      'type': 'crafted',\n      'description': 'Black glazed terracotta is obtained by smelting black terracotta and features decorative patterns.',\n      'spawn_range': 'N/A'\n    },\n    'white_concrete': {\n      'type': 'crafted',\n      'description': 'White concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'orange_concrete': {\n      'type': 'crafted',\n      'description': 'Orange concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'magenta_concrete': {\n      'type': 'crafted',\n      'description': 'Magenta concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'light_blue_concrete': {\n      'type': 'crafted',\n      'description': 'Light blue concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'yellow_concrete': {\n      'type': 'crafted',\n      'description': 'Yellow concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'lime_concrete': {\n      'type': 'crafted',\n      'description': 'Lime concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'pink_concrete': {\n      'type': 'crafted',\n      'description': 'Pink concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'gray_concrete': {\n      'type': 'crafted',\n      'description': 'Gray concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'light_gray_concrete': {\n      'type': 'crafted',\n      'description': 'Light gray concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'cyan_concrete': {\n      'type': 'crafted',\n      'description': 'Cyan concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'purple_concrete': {\n      'type': 'crafted',\n      'description': 'Purple concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'blue_concrete': {\n      'type': 'crafted',\n      'description': 'Blue concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'brown_concrete': {\n      'type': 'crafted',\n      'description': 'Brown concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'green_concrete': {\n      'type': 'crafted',\n      'description': 'Green concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'red_concrete': {\n      'type': 'crafted',\n      'description': 'Red concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'black_concrete': {\n      'type': 'crafted',\n      'description': 'Black concrete is crafted from concrete powder and hardens when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'white_concrete_powder': {\n      'type': 'crafted',\n      'description': 'White concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'orange_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Orange concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'magenta_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Magenta concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'light_blue_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Light blue concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'yellow_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Yellow concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'lime_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Lime concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'pink_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Pink concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'gray_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Gray concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'light_gray_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Light gray concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'cyan_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Cyan concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'purple_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Purple concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'blue_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Blue concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'brown_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Brown concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'green_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Green concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'red_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Red concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'black_concrete_powder': {\n      'type': 'crafted',\n      'description': 'Black concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\n      'spawn_range': 'N/A'\n    },\n    'cyan_candle': {\n      'type': 'crafted',\n      'description': 'Cyan candles are crafted from string and dye and can be placed on blocks to emit light.',\n      'spawn_range': 'N/A'\n    },\n    'pink_candle': {\n      'type': 'crafted',\n      'description': 'Pink candles are crafted from string and dye and can be placed on blocks to emit light.',\n      'spawn_range': 'N/A'\n    },\n    'purple_candle': {\n      'type': 'crafted',\n      'description': 'Purple candles are crafted from string and dye and can be placed on blocks to emit light.',\n      'spawn_range': 'N/A'\n    },\n    'blue_candle': {\n      'type': 'crafted',\n      'description': 'Blue candles are crafted from string and dye and can be placed on blocks to emit light.',\n      'spawn_range': 'N/A'\n    },\n    'brown_candle': {\n      'type': 'crafted',\n      'description': 'Brown candles are crafted from string and dye and can be placed on blocks to emit light.',\n      'spawn_range': 'N/A'\n    },\n    'green_candle': {\n      'type': 'crafted',\n      'description': 'Green candles are crafted from string and dye and can be placed on blocks to emit light.',\n      'spawn_range': 'N/A'\n    },\n    'red_candle': {\n      'type': 'crafted',\n      'description': 'Red candles are crafted from string and dye and can be placed on blocks to emit light.',\n      'spawn_range': 'N/A'\n    },\n    'black_candle': {\n      'type': 'crafted',\n      'description': 'Black candles are crafted from string and dye and can be placed on blocks to emit light.',\n      'spawn_range': 'N/A'\n    },\n    'turtle_egg': 'can be obtained via turtle breeding on beaches, where turtles lay eggs that can be collected.',\n    'sniffer_egg': 'can be found in buried treasure or ancient ruins, used to hatch sniffers.',\n    'dead_tube_coral_block': 'can be obtained by mining tube coral blocks with a pickaxe without Silk Touch or when exposed to air.',\n    'dead_brain_coral_block': 'can be obtained by mining brain coral blocks with a pickaxe without Silk Touch or when exposed to air.',\n    'dead_bubble_coral_block': 'can be obtained by mining bubble coral blocks with a pickaxe without Silk Touch or when exposed to air.',\n    'dead_fire_coral_block': 'can be obtained by mining fire coral blocks with a pickaxe without Silk Touch or when exposed to air.',\n    'dead_horn_coral_block': 'can be obtained by mining horn coral blocks with a pickaxe without Silk Touch or when exposed to air.',\n    'tube_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'brain_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'bubble_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'fire_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'horn_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'tube_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'brain_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'bubble_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'fire_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'horn_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'dead_brain_coral': 'can be obtained by mining brain coral without Silk Touch or when exposed to air.',\n    'dead_bubble_coral': 'can be obtained by mining bubble coral without Silk Touch or when exposed to air.',\n    'dead_fire_coral': 'can be obtained by mining fire coral without Silk Touch or when exposed to air.',\n    'dead_horn_coral': 'can be obtained by mining horn coral without Silk Touch or when exposed to air.',\n    'dead_tube_coral': 'can be obtained by mining tube coral without Silk Touch or when exposed to air.',\n    'tube_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'brain_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'bubble_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'fire_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'horn_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\n    'dead_tube_coral_fan': 'can be obtained by mining tube coral fans without Silk Touch or when exposed to air.',\n    'dead_brain_coral_fan': 'can be obtained by mining brain coral fans without Silk Touch or when exposed to air.',\n    'dead_bubble_coral_fan': 'can be obtained by mining bubble coral fans without Silk Touch or when exposed to air.',\n    'dead_fire_coral_fan': 'can be obtained by mining fire coral fans without Silk Touch or when exposed to air.',\n    'dead_horn_coral_fan': 'can be obtained by mining horn coral fans without Silk Touch or when exposed to air.',\n    'sculk_sensor': 'can be obtained via Silk Touch enchantment on a pickaxe or found in ancient cities in the deep dark biome.',\n    'copper_door': 'can be crafted using copper ingots.',\n    'exposed_copper_door': 'can be obtained by allowing copper doors to oxidize or can be crafted directly.',\n    'weathered_copper_door': 'can be obtained by allowing exposed copper doors to further oxidize or can be crafted directly.',\n    'oxidized_copper_door': 'can be obtained by allowing weathered copper doors to fully oxidize or can be crafted directly.',\n    'waxed_copper_door': 'can be crafted using copper ingots and honeycomb.',\n    'waxed_exposed_copper_door': 'can be crafted using exposed copper doors and honeycomb.',\n    'waxed_weathered_copper_door': 'can be crafted using weathered copper doors and honeycomb.',\n    'waxed_oxidized_copper_door': 'can be crafted using oxidized copper doors and honeycomb.',\n    'copper_trapdoor': 'can be crafted using copper ingots.',\n    'exposed_copper_trapdoor': 'can be obtained by allowing copper trapdoors to oxidize or can be crafted directly.',\n    'weathered_copper_trapdoor': 'can be obtained by allowing exposed copper trapdoors to further oxidize or can be crafted directly.',\n    'oxidized_copper_trapdoor': 'can be obtained by allowing weathered copper trapdoors to fully oxidize or can be crafted directly.',\n    'waxed_copper_trapdoor': 'can be crafted using copper ingots and honeycomb.',\n    'waxed_exposed_copper_trapdoor': 'can be crafted using exposed copper trapdoors and honeycomb.',\n    'waxed_weathered_copper_trapdoor': 'can be crafted using weathered copper trapdoors and honeycomb.',\n    'waxed_oxidized_copper_trapdoor': 'can be crafted using oxidized copper trapdoors and honeycomb.',\n    'saddle': 'can be obtained from fishing, dungeon chests, or trading with leatherworkers.',\n    'elytra': 'can be found in end ships within end cities.',\n    'structure_block': 'can be obtained using commands or in creative mode, used to save and load structures.',\n    'jigsaw': 'can be obtained using commands or in creative mode, used to generate structures.',\n    'scute': 'can be obtained when baby turtles grow into adults.',\n    'apple': 'can be obtained by breaking oak and dark oak leaves or found in chests.',\n    'charcoal': 'can be obtained by smelting logs or wood in a furnace.',\n    'quartz': 'can be obtained by mining nether quartz ore in the Nether.',\n    'amethyst_shard': 'can be obtained by mining amethyst clusters found in geodes with a pickaxe.',\n    'netherite_scrap': 'can be obtained by smelting ancient debris found in the Nether.',\n    'netherite_sword': 'can be crafted using a diamond sword and netherite ingot.',\n    'netherite_shovel': 'can be crafted using a diamond shovel and netherite ingot.',\n    'netherite_pickaxe': 'can be crafted using a diamond pickaxe and netherite ingot.',\n    'netherite_axe': 'can be crafted using a diamond axe and netherite ingot.',\n    'netherite_hoe': 'can be crafted using a diamond hoe and netherite ingot.',\n    'string': 'can be obtained from killing spiders or breaking cobwebs.',\n    'feather': 'can be obtained from killing chickens.',\n    'gunpowder': 'can be obtained from killing creepers, ghasts, and witches.',\n    'wheat_seeds': 'can be obtained by breaking tall grass or harvesting wheat crops.',\n    'chainmail_helmet': 'can be obtained from chest loot, trading with villagers, or killing mobs wearing it.',\n    'chainmail_chestplate': 'can be obtained from chest loot, trading with villagers, or killing mobs wearing it.',\n    'chainmail_leggings': 'can be obtained from chest loot, trading with villagers, or killing mobs wearing it.',\n    'chainmail_boots': 'can be obtained from chest loot, trading with villagers, or killing mobs wearing it.',\n    'netherite_helmet': 'can be crafted using a diamond helmet and netherite ingot.',\n    'netherite_chestplate': 'can be crafted using a diamond chestplate and netherite ingot.',\n    'netherite_leggings': 'can be crafted using diamond leggings and netherite ingot.',\n    'netherite_boots': 'can be crafted using diamond boots and netherite ingot.',\n    'flint': 'can be obtained by breaking gravel blocks.',\n    'porkchop': 'can be obtained by killing pigs.',\n    'cooked_porkchop': 'can be obtained by cooking porkchop in a furnace, smoker, or campfire.',\n    'enchanted_golden_apple': 'can be found in dungeon, bastion remnant, and mineshaft chests.',\n    'water_bucket': 'can be obtained by using a bucket on a water source block.',\n    'lava_bucket': 'can be obtained by using a bucket on a lava source block.',\n    'powder_snow_bucket': 'can be obtained by using a bucket on powder snow.',\n    'snowball': 'can be obtained by breaking snow blocks or using a shovel on snow.',\n    'milk_bucket': 'can be obtained by using a bucket on a cow or mooshroom.',\n    'pufferfish_bucket': 'can be obtained by using a bucket on a pufferfish in water.',\n    'salmon_bucket': 'can be obtained by using a bucket on a salmon in water.',\n    'cod_bucket': 'can be obtained by using a bucket on a cod in water.',\n    'tropical_fish_bucket': 'can be obtained by using a bucket on a tropical fish in water.',\n    'axolotl_bucket': 'can be obtained by using a bucket on an axolotl in water.',\n    'tadpole_bucket': 'can be obtained by using a bucket on a tadpole in water.',\n    'brick': 'can be obtained by smelting clay in a furnace.',\n    'clay_ball': 'can be obtained by breaking clay blocks or from chest loot.',\n    'egg': 'can be obtained from chickens periodically.',\n    'bundle': 'can be crafted using rabbit hide and string.',\n    'glowstone_dust': 'can be obtained by breaking glowstone blocks or killing witches.',\n    'cod': 'can be obtained by fishing or killing cod in water.',\n    'salmon': 'can be obtained by fishing or killing salmon in water.',\n    'tropical_fish': 'can be obtained by fishing or killing tropical fish in water.',\n    'pufferfish': 'can be obtained by fishing or killing pufferfish in water.',\n    'cooked_cod': 'can be obtained by cooking cod in a furnace, smoker, or campfire.',\n    'cooked_salmon': 'can be obtained by cooking salmon in a furnace, smoker, or campfire.',\n    'ink_sac': 'can be obtained by killing squid or as loot from wandering traders.',\n    'glow_ink_sac': 'can be obtained by killing glow squid.',\n    'cocoa_beans': 'can be obtained from cocoa pods found on jungle trees.',\n    'green_dye': 'can be obtained by smelting cactus in a furnace.',\n    'bone': 'can be obtained by killing skeletons or from chest loot.',\n    'crafter': 'can be obtained via crafting using specific materials (details vary by mod or version).',\n    'filled_map': 'can be obtained by using an empty map item.',\n    'melon_slice': 'can be obtained by breaking melon blocks.',\n    'beef': 'can be obtained by killing cows.',\n    'cooked_beef': 'can be obtained by cooking beef in a furnace, smoker, or campfire.',\n    'chicken': 'can be obtained by killing chickens.',\n    'cooked_chicken': 'can be obtained by cooking chicken in a furnace, smoker, or campfire.',\n    'rotten_flesh': 'can be obtained by killing zombies or drowned.',\n    'ender_pearl': 'can be obtained by killing endermen.',\n    'blaze_rod': 'can be obtained by killing blazes in the Nether.',\n    'ghast_tear': 'can be obtained by killing ghasts in the Nether.',\n    'nether_wart': 'can be found in Nether fortresses and bastion remnants.',\n    'potion': 'can be brewed using a brewing stand with various ingredients.',\n    'spider_eye': 'can be obtained by killing spiders or witches.',\n    'experience_bottle': 'can be obtained from trading with villagers or found in chest loot.',\n    'written_book': 'can be crafted using a book and quill after writing in it.',\n    'carrot': 'can be obtained by harvesting carrot crops or found in village farms.',\n    'potato': 'can be obtained by harvesting potato crops or found in village farms.',\n    'baked_potato': 'can be obtained by cooking potatoes in a furnace, smoker, or campfire.',\n    'poisonous_potato': 'can be obtained by harvesting potato crops (rare chance).',\n    'skeleton_skull': 'can be obtained by killing skeletons with a charged creeper explosion.',\n    'wither_skeleton_skull': 'can be obtained by killing wither skeletons (rare drop).',\n    'player_head': 'can be obtained via commands or by killing players in certain conditions (e.g., with a charged creeper).',\n    'zombie_head': 'can be obtained by killing zombies with a charged creeper explosion.',\n    'creeper_head': 'can be obtained by killing creepers with a charged creeper explosion.',\n    'dragon_head': 'can be found at the end of end ships in end cities.',\n    'piglin_head': 'can be obtained by killing piglins with a charged creeper explosion.',\n    'nether_star': 'can be obtained by defeating the Wither boss.',\n    'firework_star': 'can be crafted using gunpowder and dye.',\n    'nether_brick': 'can be obtained by smelting netherrack in a furnace or found in Nether fortresses.',\n    'prismarine_shard': 'can be obtained by killing guardians and elder guardians.',\n    'prismarine_crystals': 'can be obtained by killing guardians and elder guardians or breaking sea lanterns.',\n    'rabbit': 'can be obtained by killing rabbits.',\n    'cooked_rabbit': 'can be obtained by cooking rabbit in a furnace, smoker, or campfire.',\n    'rabbit_foot': 'can be obtained by killing rabbits (rare drop).',\n    'rabbit_hide': 'can be obtained by killing rabbits.',\n    'iron_horse_armor': 'can be found in dungeon, temple, and stronghold chests.',\n    'golden_horse_armor': 'can be found in dungeon, temple, and stronghold chests.',\n    'diamond_horse_armor': 'can be found in dungeon, temple, and stronghold chests.',\n    'name_tag': 'can be obtained by fishing, dungeon chests, or trading with librarians.',\n    'command_block_minecart': 'can be obtained using commands in creative mode.',\n    'mutton': 'can be obtained by killing sheep.',\n    'cooked_mutton': 'can be obtained by cooking mutton in a furnace, smoker, or campfire.',\n    'chorus_fruit': 'can be obtained by breaking chorus plants found in the End.',\n    'popped_chorus_fruit': 'can be obtained by smelting chorus fruit in a furnace.',\n    'torchflower_seeds': 'can be obtained from torchflower plants, used for breeding and decoration.',\n    'pitcher_pod': 'can be obtained from pitcher plants, used for breeding and decoration.',\n    'beetroot': 'can be obtained by harvesting beetroot crops or found in village farms.',\n    'beetroot_seeds': 'can be obtained by harvesting beetroot crops or from chests.',\n    'dragon_breath': 'can be obtained by using an empty bottle on the ender dragon\\'s breath attack.',\n    'splash_potion': 'can be brewed using a brewing stand and gunpowder with various potions.',\n    'tipped_arrow': 'can be crafted using arrows and lingering potions.',\n    'lingering_potion': 'can be brewed using a brewing stand and dragon\\'s breath with various potions.',\n    'totem_of_undying': 'can be obtained by killing evokers in woodland mansions and during raids.',\n    'shulker_shell': 'can be obtained by killing shulkers in end cities.',\n    'knowledge_book': 'can be obtained using commands or given in custom advancements.',\n    'debug_stick': 'can be obtained using commands in creative mode.',\n    'disc_fragment_5': 'can be found in ancient city chests, used to craft music disc 5.',\n    'trident': 'can be obtained by killing drowned (rare drop).',\n    'phantom_membrane': 'can be obtained by killing phantoms.',\n    'nautilus_shell': 'can be obtained from fishing, drowned, or wandering traders.',\n    'heart_of_the_sea': 'can be found in buried treasure chests.',\n    'suspicious_stew': 'can be crafted using mushrooms and various flowers or found in chests.',\n    'globe_banner_pattern': 'can be obtained from trading with cartographer villagers.',\n    'piglin_banner_pattern': 'can be obtained from bastion remnant chests.',\n    'goat_horn': 'can be obtained when a goat rams a solid block.',\n    'bell': 'can be obtained from village structures or crafted using iron ingots and wood.',\n    'sweet_berries': 'can be obtained from sweet berry bushes found in taiga biomes.',\n    'glow_berries': 'can be found in lush cave biomes or by trading with wandering traders.',\n    'shroomlight': 'can be obtained by breaking shroomlights found in Nether forests.',\n    'honeycomb': 'can be obtained by using shears on beehives or bee nests.',\n    'bee_nest': 'can be found in forest biomes with birch or oak trees, especially in flower forests.',\n    'crying_obsidian': 'can be found in ruined portals, bastion remnants, or bartered from piglins.',\n    'blackstone': 'can be found in basalt deltas, bastion remnants, or crafted from polished blackstone.',\n    'gilded_blackstone': 'can be found in bastion remnants.',\n    'cracked_polished_blackstone_bricks': 'can be obtained by smelting polished blackstone bricks.',\n    'small_amethyst_bud': 'can be found growing in amethyst geodes.',\n    'medium_amethyst_bud': 'can be found growing in amethyst geodes.',\n    'large_amethyst_bud': 'can be found growing in amethyst geodes.',\n    'amethyst_cluster': 'can be found growing in amethyst geodes.',\n    'pointed_dripstone': 'can be found in dripstone caves or created by placing a dripstone block under a water source block.',\n    'ochre_froglight': 'can be obtained by leading a frog to eat a magma cube, dropping this item.',\n    'verdant_froglight': 'can be obtained by leading a frog to eat a magma cube, dropping this item.',\n    'pearlescent_froglight': 'can be obtained by leading a frog to eat a magma cube, dropping this item.',\n    'frogspawn': 'Frogspawn is an item that can be found in the game Minecraft and is primarily used to breed frogs.',\n    'echo_shard': 'Echo Shard is an item in Minecraft Dungeons, primarily used as a currency for trading with Piglin vendors.',\n    'copper_grate': 'Copper Grate is a block in Minecraft that can be crafted from copper ingots, primarily used as a decorative block.',\n    'exposed_copper_grate': 'Exposed Copper Grate is a variant of Copper Grate in Minecraft that has weathered to the exposed state over time.',\n    'weathered_copper_grate': 'Weathered Copper Grate is a variant of Copper Grate in Minecraft that has weathered to the weathered state over time.',\n    'oxidized_copper_grate': 'Oxidized Copper Grate is a variant of Copper Grate in Minecraft that has weathered to the oxidized state over time.',\n    'waxed_copper_grate': 'Waxed Copper Grate is a variant of Copper Grate in Minecraft that has been waxed to prevent further weathering.',\n    'waxed_exposed_copper_grate': 'Waxed Exposed Copper Grate is a variant of Exposed Copper Grate in Minecraft that has been waxed to prevent further weathering.',\n    'waxed_weathered_copper_grate': 'Waxed Weathered Copper Grate is a variant of Weathered Copper Grate in Minecraft that has been waxed to prevent further weathering.',\n    'waxed_oxidized_copper_grate': 'Waxed Oxidized Copper Grate is a variant of Oxidized Copper Grate in Minecraft that has been waxed to prevent further weathering.',\n    'copper_bulb': 'Copper Bulb is a block in Minecraft that can be crafted from copper ingots, primarily used as a decorative block.',\n    'exposed_copper_bulb': 'Exposed Copper Bulb is a variant of Copper Bulb in Minecraft that has weathered to the exposed state over time.',\n    'weathered_copper_bulb': 'Weathered Copper Bulb is a variant of Copper Bulb in Minecraft that has weathered to the weathered state over time.',\n    'oxidized_copper_bulb': 'Oxidized Copper Bulb is a variant of Copper Bulb in Minecraft that has weathered to the oxidized state over time.',\n    'waxed_copper_bulb': 'Waxed Copper Bulb is a variant of Copper Bulb in Minecraft that has been waxed to prevent further weathering.',\n    'waxed_exposed_copper_bulb': 'Waxed Exposed Copper Bulb is a variant of Exposed Copper Bulb in Minecraft that has been waxed to prevent further weathering.',\n    'waxed_weathered_copper_bulb': 'Waxed Weathered Copper Bulb is a variant of Weathered Copper Bulb in Minecraft that has been waxed to prevent further weathering.',\n    'waxed_oxidized_copper_bulb': 'Waxed Oxidized Copper Bulb is a variant of Oxidized Copper Bulb in Minecraft that has been waxed to prevent further weathering.',\n    'trial_spawner': 'Trial Spawner is an item in Minecraft Dungeons, used in the Ancient Hunt game mode to summon trials for unique rewards.',\n    'trial_key': 'Trial Key is an item in Minecraft Dungeons, obtained from defeating Ancient mobs in the Ancient Hunt game mode, used to unlock trials.'\n  }\n}\n\nconst lowerCaseFirstLetter = (string) => string.charAt(0).toLowerCase() + string.slice(1)\nfor (const [name, data] of Object.entries(moreGeneratedBlocks.natural_blocks)) {\n  let description = '' as string | ((name: string) => string)\n  if (typeof data === 'object') {\n    const obtainedFrom = 'obtained_from' in data ? data.obtained_from : 'description' in data ? data.description : ''\n    description = obtainedFrom + ('rarity' in data ? ` Rarity: ${data.rarity}` : '') + ('spawn_range' in data ? ` Spawn range: ${data.spawn_range}` : '')\n  } else {\n    description = (name) => `${lowerCaseFirstLetter(name)}: ${data}`\n  }\n  descriptionGenerators.set([name], description)\n}\n\nexport const getItemDescription = (item: import('prismarine-item').Item) => {\n  const { name } = item\n  let result: string | ((name: string) => string) = ''\n  for (const [names, description] of descriptionGenerators) {\n    if (Array.isArray(names) && names.includes(name)) {\n      result = description\n    }\n    if (typeof names === 'string' && names === name) {\n      result = description\n    }\n    if (names instanceof RegExp && names.test(name)) {\n      result = description\n    }\n  }\n  return typeof result === 'function' ? result(item.displayName) : result\n}\n","import Stats from 'stats.js'\nimport StatsGl from 'stats-gl'\nimport { isCypress } from './standaloneUtils'\n\nconst stats = new Stats()\nconst stats2 = new Stats()\nconst hasRamPanel = stats2.dom.children.length === 3\nconst statsGl = new StatsGl({ minimal: true })\n// in my case values are good: gpu: < 0.5, cpu < 0.15\n\nstats2.showPanel(2)\n\n// prod or small screen\nconst denseMode = process.env.NODE_ENV === 'production' || window.innerHeight < 500\n\nlet total = 0\nconst addStat = (dom, size = 80) => {\n  dom.style.position = 'absolute'\n  if (denseMode) dom.style.height = '12px'\n  dom.style.overflow = 'hidden'\n  dom.style.left = ''\n  dom.style.top = 0\n  dom.style.right = `${total}px`\n  dom.style.width = '80px'\n  dom.style.zIndex = 1\n  dom.style.opacity = '0.8'\n  document.body.appendChild(dom)\n  total += size\n}\nconst addStatsGlStat = (canvas) => {\n  const container = document.createElement('div')\n  canvas.style.position = 'static'\n  canvas.style.display = 'block'\n  container.appendChild(canvas)\n  addStat(container)\n}\naddStat(stats.dom)\nif (hasRamPanel) {\n  addStat(stats2.dom)\n}\n\nexport const toggleStatsVisibility = (visible: boolean) => {\n  if (visible) {\n    stats.dom.style.display = 'block'\n    stats2.dom.style.display = 'block'\n    statsGl.container.style.display = 'block'\n  } else {\n    stats.dom.style.display = 'none'\n    stats2.dom.style.display = 'none'\n    statsGl.container.style.display = 'none'\n  }\n}\n\nconst hideStats = localStorage.hideStats || isCypress()\nif (hideStats) {\n  toggleStatsVisibility(false)\n}\n\nexport const initWithRenderer = (canvas) => {\n  if (hideStats) return\n  statsGl.init(canvas)\n  // if (statsGl.gpuPanel && process.env.NODE_ENV !== 'production') {\n  //   addStatsGlStat(statsGl.gpuPanel.canvas)\n  // }\n  // addStatsGlStat(statsGl.msPanel.canvas)\n  statsGl.container.style.display = 'flex'\n  statsGl.container.style.justifyContent = 'flex-end'\n  let i = 0\n  for (const _child of statsGl.container.children) {\n    const child = _child as HTMLElement\n    if (i++ === 0) {\n      child.style.display = 'none'\n    }\n    child.style.position = ''\n  }\n}\n\nexport const statsStart = () => {\n  stats.begin()\n  stats2.begin()\n  statsGl.begin()\n}\nexport const statsEnd = () => {\n  stats.end()\n  stats2.end()\n  statsGl.end()\n}\n\n// for advanced debugging, use with watch expression\n\nwindow.statsPerSecAvg = {}\nlet currentStatsPerSec = {} as Record<string, number[]>\nconst waitingStatsPerSec = {}\nwindow.markStart = (label) => {\n  waitingStatsPerSec[label] ??= []\n  waitingStatsPerSec[label][0] = performance.now()\n}\nwindow.markEnd = (label) => {\n  if (!waitingStatsPerSec[label]?.[0]) return\n  currentStatsPerSec[label] ??= []\n  currentStatsPerSec[label].push(performance.now() - waitingStatsPerSec[label][0])\n  delete waitingStatsPerSec[label]\n}\nconst updateStatsPerSecAvg = () => {\n  window.statsPerSecAvg = Object.fromEntries(Object.entries(currentStatsPerSec).map(([key, value]) => {\n    return [key, {\n      avg: value.reduce((a, b) => a + b, 0) / value.length,\n      count: value.length\n    }]\n  }))\n  currentStatsPerSec = {}\n}\n\n\nwindow.statsPerSec = {}\nlet statsPerSecCurrent = {}\nlet lastReset = performance.now()\nwindow.addStatPerSec = (name) => {\n  statsPerSecCurrent[name] ??= 0\n  statsPerSecCurrent[name]++\n}\nwindow.statsPerSecCurrent = statsPerSecCurrent\nsetInterval(() => {\n  window.statsPerSec = { duration: Math.floor(performance.now() - lastReset), ...statsPerSecCurrent, }\n  statsPerSecCurrent = {}\n  window.statsPerSecCurrent = statsPerSecCurrent\n  updateStatsPerSecAvg()\n  lastReset = performance.now()\n}, 1000)\n","import './deathScreen.css'\nimport type { MessageFormatPart } from '../chatUtils'\nimport MessageFormatted from './MessageFormatted'\nimport Button from './Button'\n\ntype Props = {\n  dieReasonMessage: MessageFormatPart[]\n  respawnCallback: () => void\n  disconnectCallback: () => void\n}\n\nexport default ({ dieReasonMessage, respawnCallback, disconnectCallback }: Props) => {\n  return (\n    <div className='deathScreen-container'>\n      <div className=\"deathScreen\">\n        <h1 className='deathScreen-title'>You Died!</h1>\n        <h5 className='deathScreen-reason'>\n          <MessageFormatted parts={dieReasonMessage} />\n        </h5>\n        <div className='deathScreen-buttons-grouped'>\n          <Button\n            label=\"Respawn\" onClick={() => {\n              respawnCallback()\n            }}\n          />\n          <Button\n            label=\"Disconnnect\" onClick={() => {\n              disconnectCallback()\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { useEffect } from 'react'\nimport { proxy, useSnapshot } from 'valtio'\nimport { disconnect } from '../flyingSquidUtils'\nimport { MessageFormatPart, formatMessage } from '../chatUtils'\nimport { showModal, hideModal } from '../globalState'\nimport { options } from '../optionsStorage'\nimport DeathScreen from './DeathScreen'\nimport { useIsModalActive } from './utilsApp'\n\nconst dieReasonProxy = proxy({ value: null as MessageFormatPart[] | null })\n\nexport default () => {\n  const { value: dieReasonMessage } = useSnapshot(dieReasonProxy)\n  const isModalActive = useIsModalActive('death-screen')\n\n  useEffect(() => {\n    bot._client.on('death_combat_event', (data) => {\n      try {\n        if (data.playerId !== bot.entity.id) return\n        const messageParsed = JSON.parse(data.message)\n        const parts = formatMessage(messageParsed)\n        dieReasonProxy.value = parts\n      } catch (err) {\n        console.error(err)\n      }\n    })\n    bot.on('health', () => { // bot.isAlive can be already false so can't use death event (respawn packet)\n      if (dieReasonProxy.value || bot.health > 0) return\n      dieReasonProxy.value = []\n    })\n\n    bot.on('respawn', () => {\n      // todo don't close too early, instead wait for health event and make button disabled?\n      dieReasonProxy.value = null\n    })\n\n    if (bot.health === 0) {\n      dieReasonProxy.value = []\n    }\n  }, [])\n\n  useEffect(() => {\n    if (dieReasonProxy.value) {\n      if (!isModalActive) showModal({ reactType: 'death-screen' })\n    } else if (isModalActive) {\n      hideModal({ reactType: 'death-screen' })\n    }\n  }, [dieReasonMessage, isModalActive])\n\n  if (!isModalActive || !dieReasonMessage || options.autoRespawn) return null\n\n  return <DeathScreen\n    dieReasonMessage={dieReasonMessage as MessageFormatPart[]}\n    respawnCallback={() => {\n      bot._client.write('client_command', bot.supportFeature('respawnIsPayload') ? { payload: 0 } : { actionId: 0 })\n    }}\n    disconnectCallback={() => {\n      void disconnect()\n    }}\n  />\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"slider-container\":\"slider-container-k26jGw\",\"sliderContainer\":\"slider-container-k26jGw\",\"slider-thumb\":\"slider-thumb-kWeJYr\",\"sliderThumb\":\"slider-thumb-kWeJYr\",\"slider\":\"slider-pQg1Tc\",\"disabled\":\"disabled-vWN9n8\",\"label\":\"label-My4K1P\"};","// Slider.tsx\nimport React, { useState, useEffect } from 'react'\nimport styles from './slider.module.css'\nimport SharedHudVars from './SharedHudVars'\n\ninterface Props extends React.ComponentProps<'div'> {\n  label: string;\n  value: number;\n  unit?: string;\n  width?: number;\n  valueDisplay?: string | number;\n  min?: number;\n  max?: number;\n  disabledReason?: string;\n\n  updateValue?: (value: number) => void;\n  updateOnDragEnd?: boolean;\n}\n\nconst Slider: React.FC<Props> = ({\n  label,\n  unit = '%',\n  width,\n  value: valueProp,\n  valueDisplay,\n  min = 0,\n  max = 100,\n  disabledReason,\n\n  updateOnDragEnd = false,\n  updateValue,\n  ...divProps\n}) => {\n  const [value, setValue] = useState(valueProp)\n  const getRatio = (v = value) => Math.max(Math.min((v - min) / (max - min), 1), 0)\n  const [ratio, setRatio] = useState(getRatio())\n\n  useEffect(() => {\n    setValue(valueProp)\n  }, [valueProp])\n  useEffect(() => {\n    setRatio(getRatio())\n  }, [value, min, max])\n\n  const fireValueUpdate = (dragEnd: boolean, v = value) => {\n    if (updateOnDragEnd !== dragEnd) return\n    updateValue?.(v)\n  }\n\n  return (\n    <SharedHudVars>\n      <div className={styles['slider-container']} style={{ width }} {...divProps}>\n        <input\n          type=\"range\"\n          className={styles.slider}\n          min={min}\n          max={max}\n          value={value}\n          disabled={!!disabledReason}\n          onChange={(e) => {\n            const newValue = Number(e.target.value)\n            setValue(newValue)\n            fireValueUpdate(false, newValue)\n          }}\n          // todo improve correct handling of drag end\n          onLostPointerCapture={() => {\n            fireValueUpdate(true)\n          }}\n          onPointerUp={() => {\n            fireValueUpdate(true)\n          }}\n          onKeyUp={() => {\n            fireValueUpdate(true)\n          }}\n        />\n        <div className={styles.disabled} title={disabledReason} />\n        <div className={styles['slider-thumb']} style={{ left: `calc((100% * ${ratio}) - (8px * ${ratio}))` }} />\n        <label className={styles.label}>\n          {label}: {valueDisplay ?? value} {unit}\n        </label>\n      </div>\n    </SharedHudVars>\n  )\n}\n\nexport default Slider\n","import { useSnapshot } from 'valtio'\nimport { noCase } from 'change-case'\nimport { titleCase } from 'title-case'\nimport { useMemo } from 'react'\nimport { options, qsOptions } from '../optionsStorage'\nimport { miscUiState } from '../globalState'\nimport Button from './Button'\nimport Slider from './Slider'\nimport Screen from './Screen'\nimport { showOptionsModal } from './SelectOption'\n\ntype GeneralItem<T extends string | number | boolean> = {\n  id?: string\n  text?: string,\n  disabledReason?: string,\n  disabledDuringGame?: boolean\n  tooltip?: string\n  // description?: string\n  enableWarning?: string\n  willHaveNoEffect?: boolean\n  values?: Array<T | [T, string]>\n  disableIf?: [option: keyof typeof options, value: any]\n}\n\nexport type OptionMeta<T = any> = GeneralItem<T & string> & ({\n  type: 'toggle',\n} | {\n  type: 'slider'\n  min?: number,\n  max?: number,\n  valueText?: (value: number) => string,\n  unit?: string,\n  delayApply?: boolean,\n} | {\n  type: 'element'\n  render: () => React.ReactNode,\n})\n\n// todo not reactive\nconst isLocked = (item: GeneralItem<any>) => {\n  return Object.keys(qsOptions).includes(item.id!)\n}\n\nconst useCommonComponentsProps = (item: OptionMeta) => {\n  let disabledBecauseOfSetting = false\n\n  if (item.disableIf) {\n    // okay to use hook conditionally as disableIf must be a constant\n    const disableIfSetting = useSnapshot(options)[item.disableIf[0]]\n    disabledBecauseOfSetting = disableIfSetting === item.disableIf[1]\n  }\n\n  return {\n    disabledBecauseOfSetting\n  }\n}\n\nexport const OptionButton = ({ item }: { item: Extract<OptionMeta, { type: 'toggle' }> }) => {\n  const { disabledBecauseOfSetting } = useCommonComponentsProps(item)\n\n  const optionValue = useSnapshot(options)[item.id!]\n\n  const valuesTitlesMap = useMemo(() => {\n    if (!item.values) {\n      return {\n        true: 'ON',\n        false: 'OFF',\n      }\n    }\n    return Object.fromEntries(item.values.map((value) => {\n      if (typeof value === 'string') {\n        return [value, titleCase(noCase(value))]\n      } else {\n        return [value[0], value[1]]\n      }\n    }))\n  }, [item.values])\n\n  let { disabledReason } = item\n  if (disabledBecauseOfSetting) disabledReason = `Disabled because ${item.disableIf![0]} is ${item.disableIf![1]}`\n\n  return <Button\n    data-setting={item.id}\n    label={`${item.text}: ${valuesTitlesMap[optionValue]}`}\n    onClick={async () => {\n      if (disabledReason) {\n        await showOptionsModal(`The option is unavailable. ${disabledReason}`, [])\n        return\n      }\n      if (item.enableWarning && !options[item.id!]) {\n        const result = await showOptionsModal(item.enableWarning, ['Enable'])\n        if (!result) return\n      }\n      const { values } = item\n      if (values) {\n        const getOptionValue = (arrItem) => {\n          if (typeof arrItem === 'string') {\n            return arrItem\n          } else {\n            return arrItem[0]\n          }\n        }\n        const currentIndex = values.findIndex((value) => {\n          return getOptionValue(value) === optionValue\n        })\n        if (currentIndex === -1) {\n          options[item.id!] = getOptionValue(values[0])\n        } else {\n          options[item.id!] = getOptionValue(values[(currentIndex + 1) % values.length])\n        }\n      } else {\n        options[item.id!] = !options[item.id!]\n      }\n    }}\n    title={disabledReason ? `${disabledReason} | ${item.tooltip}` : item.tooltip}\n    disabled={disabledBecauseOfSetting || !!item.disabledReason || isLocked(item)}\n    style={{\n      width: 150,\n    }}\n  />\n}\n\nexport const OptionSlider = ({ item }: { item: Extract<OptionMeta, { type: 'slider' }> }) => {\n  const { disabledBecauseOfSetting } = useCommonComponentsProps(item)\n\n  const optionValue = useSnapshot(options)[item.id!]\n\n  const valueDisplay = useMemo(() => {\n    if (item.valueText) return item.valueText(optionValue)\n    return undefined // default display\n  }, [optionValue])\n\n  return (\n    <Slider\n      label={item.text!}\n      value={options[item.id!]}\n      data-setting={item.id}\n      disabledReason={isLocked(item) ? 'qs' : disabledBecauseOfSetting ? `Disabled because ${item.disableIf![0]} is ${item.disableIf![1]}` : item.disabledReason}\n      min={item.min}\n      max={item.max}\n      unit={item.unit}\n      valueDisplay={valueDisplay}\n      updateOnDragEnd={item.delayApply}\n      updateValue={(value) => {\n        options[item.id!] = value\n      }}\n    />\n  )\n}\n\nconst OptionElement = ({ item }: { item: Extract<OptionMeta, { type: 'element' }> }) => {\n  return item.render()\n}\n\nconst RenderOption = ({ item }: { item: OptionMeta }) => {\n  const { gameLoaded } = useSnapshot(miscUiState)\n  if (item.id) {\n    item.text ??= titleCase(noCase(item.id))\n  }\n  if (item.disabledDuringGame && gameLoaded) {\n    item.disabledReason = 'Cannot be changed during game'\n  }\n\n  let baseElement = null as React.ReactNode | null\n  if (item.type === 'toggle') baseElement = <OptionButton item={item} />\n  if (item.type === 'slider') baseElement = <OptionSlider item={item} />\n  if (item.type === 'element') baseElement = <OptionElement item={item} />\n  return baseElement\n  // if (!item.description && item.type === 'element') return baseElement\n\n  // return <div>\n  //   {baseElement}\n  //   {item.description && <div style={{ fontSize: 9, color: 'gray' }}>{item.description}</div>}\n  // </div>\n}\n\ninterface Props {\n  readonly items: OptionMeta[]\n  title: string\n  backButtonAction?: () => void\n}\n\nexport default ({ items, title, backButtonAction }: Props) => {\n  return <Screen\n    title={title}\n  >\n    <div className='screen-items'>\n      {items.map((element, i) => {\n        // make sure its unique!\n        return <RenderOption key={element.id ?? `${title}-${i}`} item={element} />\n      })}\n    </div>\n    {backButtonAction && <Button onClick={() => backButtonAction()}>Back</Button>}\n  </Screen>\n}\n","import { useRef, useState } from 'react'\nimport { useSnapshot } from 'valtio'\nimport { openURL } from 'prismarine-viewer/viewer/lib/simpleUtils'\nimport { noCase } from 'change-case'\nimport { loadedGameState, miscUiState, openOptionsMenu, showModal } from './globalState'\nimport { AppOptions, options } from './optionsStorage'\nimport Button from './react/Button'\nimport { OptionMeta, OptionSlider } from './react/OptionsItems'\nimport Slider from './react/Slider'\nimport { getScreenRefreshRate, setLoadingScreenStatus } from './utils'\nimport { openFilePicker, resetLocalStorageWithoutWorld } from './browserfs'\nimport { completeTexturePackInstall, getResourcePackNames, resourcePackState, uninstallTexturePack } from './resourcePack'\nimport { downloadPacketsReplay, packetsReplaceSessionState } from './packetsReplay'\nimport { showOptionsModal } from './react/SelectOption'\n\nexport const guiOptionsScheme: {\n  [t in OptionsGroupType]: Array<{ [K in keyof AppOptions]?: Partial<OptionMeta<AppOptions[K]>> } & { custom? }>\n} = {\n  render: [\n    {\n      custom () {\n        const frameLimitValue = useSnapshot(options).frameLimit\n        const [frameLimitMax, setFrameLimitMax] = useState(null as number | null)\n\n        return <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n          <Slider\n            style={{ width: 130 }}\n            label='Frame Limit'\n            disabledReason={frameLimitMax ? undefined : 'press lock button first'}\n            unit={frameLimitValue ? 'fps' : ''}\n            valueDisplay={frameLimitValue || 'VSync'}\n            value={frameLimitValue || frameLimitMax! + 1} min={20}\n            max={frameLimitMax! + 1} updateValue={(newVal) => {\n              options.frameLimit = newVal > frameLimitMax! ? false : newVal\n            }}\n          />\n          <Button\n            style={{ width: 20 }} icon='pixelarticons:lock-open' onClick={async () => {\n              const rate = await getScreenRefreshRate()\n              setFrameLimitMax(rate)\n            }}\n          />\n        </div>\n      }\n    },\n    {\n      gpuPreference: {\n        text: 'GPU Preference',\n        tooltip: 'You will need to reload the page for this to take effect.',\n        values: [['default', 'Auto'], ['high-performance', 'Dedicated'], ['low-power', 'Low Power']]\n      },\n    },\n    {\n      custom () {\n        return <Button label='Guide: Disable VSync' onClick={() => openURL('https://gist.github.com/zardoy/6e5ce377d2b4c1e322e660973da069cd')} inScreen />\n      },\n    },\n    {\n      backgroundRendering: {\n        text: 'Background FPS limit',\n        values: [\n          ['full', 'NO'],\n          ['5fps', '5 FPS'],\n          ['20fps', '20 FPS'],\n        ],\n      },\n    },\n    {\n      custom () {\n        return <Category>Experimental</Category>\n      },\n      dayCycleAndLighting: {\n        text: 'Day Cycle',\n      },\n      smoothLighting: {},\n      newVersionsLighting: {\n        text: 'Lighting in Newer Versions',\n      },\n      lowMemoryMode: {\n        text: 'Low Memory Mode',\n        enableWarning: 'Enabling it will make chunks load ~4x slower',\n        disabledDuringGame: true\n      },\n      starfieldRendering: {},\n      renderEntities: {},\n      keepChunksDistance: {\n        max: 5,\n        unit: '',\n        tooltip: 'Additional distance to keep the chunks loading before unloading them by marking them as too far',\n      },\n      handDisplay: {},\n      renderDebug: {\n        values: [\n          'advanced',\n          'basic',\n          'none'\n        ],\n      },\n    },\n    {\n      custom () {\n        return <Category>Resource Packs</Category>\n      },\n      serverResourcePacks: {\n        text: 'Download From Server',\n        values: [\n          'prompt',\n          'always',\n          'never'\n        ],\n      }\n    }\n  ],\n  main: [\n    {\n      fov: {\n        min: 30,\n        max: 110,\n        unit: '',\n      }\n    },\n    {\n      custom () {\n        const sp = miscUiState.singleplayer || !miscUiState.gameLoaded\n        const id = sp ? 'renderDistance' : 'multiplayerRenderDistance' // cant be changed when settings are open\n        return <OptionSlider item={{\n          type: 'slider',\n          id,\n          text: 'Render Distance',\n          unit: '',\n          max: sp ? 16 : 12,\n          min: 1\n        }}\n        />\n      },\n    },\n    {\n      custom () {\n        return <Button label='Render...' onClick={() => openOptionsMenu('render')} inScreen />\n      },\n    },\n    {\n      custom () {\n        return <Button label='Interface...' onClick={() => openOptionsMenu('interface')} inScreen />\n      },\n    },\n    {\n      custom () {\n        return <Button label='Controls...' onClick={() => openOptionsMenu('controls')} inScreen />\n      },\n    },\n    {\n      custom () {\n        return <Button label='Sound...' onClick={() => openOptionsMenu('sound')} inScreen />\n      },\n    },\n    {\n      custom () {\n        const { resourcePackInstalled } = useSnapshot(resourcePackState)\n        const { usingServerResourcePack } = useSnapshot(loadedGameState)\n        const { enabledResourcepack } = useSnapshot(options)\n        return <Button\n          label={`Resource Pack: ${usingServerResourcePack ? 'SERVER ON' : resourcePackInstalled ? enabledResourcepack ? 'ON' : 'OFF' : 'NO'}`} inScreen onClick={async () => {\n            if (resourcePackState.resourcePackInstalled) {\n              const names = Object.keys(await getResourcePackNames())\n              const name = names[0]\n              const choices = [\n                options.enabledResourcepack ? 'Disable' : 'Enable',\n                'Uninstall',\n              ]\n              const choice = await showOptionsModal(`Resource Pack ${name} action`, choices)\n              if (!choice) return\n              if (choice === 'Disable') {\n                options.enabledResourcepack = null\n                return\n              }\n              if (choice === 'Enable') {\n                options.enabledResourcepack = name\n                await completeTexturePackInstall(name, name, false)\n                return\n              }\n              if (choice === 'Uninstall') {\n              // todo make hidable\n                setLoadingScreenStatus('Uninstalling texturepack')\n                await uninstallTexturePack()\n                setLoadingScreenStatus(undefined)\n              }\n            } else {\n            // if (!fsState.inMemorySave && isGameActive(false)) {\n            //   alert('Unable to install resource pack in loaded save for now')\n            //   return\n            // }\n              openFilePicker('resourcepack')\n            }\n          }}\n        />\n      },\n    },\n    {\n      custom () {\n        return <Button label='Advanced...' onClick={() => openOptionsMenu('advanced')} inScreen />\n      },\n    },\n    {\n      custom () {\n        return <Button label='VR...' onClick={() => openOptionsMenu('VR')} inScreen />\n      },\n    }\n  ],\n  interface: [\n    {\n      guiScale: {\n        max: 4,\n        min: 1,\n        unit: '',\n        delayApply: true,\n      },\n      custom () {\n        return <Category>Chat</Category>\n      },\n      chatWidth: {\n        max: 320,\n        unit: 'px',\n      },\n      chatHeight: {\n        max: 180,\n        unit: 'px',\n      },\n      chatOpacity: {\n      },\n      chatOpacityOpened: {\n      },\n      chatSelect: {\n      },\n    },\n    {\n      custom () {\n        return <Category>Sign Editor</Category>\n      },\n      autoSignEditor: {\n        text: 'Enable Sign Editor',\n      },\n      wysiwygSignEditor: {\n        text: 'WYSIWG Editor',\n        values: [\n          'auto',\n          'always',\n          'never'\n        ],\n      },\n    },\n    {\n      custom () {\n        return <Category>Map</Category>\n      },\n      showMinimap: {\n        text: 'Enable Minimap',\n        values: [\n          'always',\n          'singleplayer',\n          'never'\n        ],\n      },\n    },\n    {\n      custom () {\n        return <Category>Experimental</Category>\n      },\n      displayBossBars: {\n        text: 'Boss Bars',\n      },\n    },\n    {\n      custom () {\n        return <UiToggleButton name='title' addUiText />\n      },\n    },\n    {\n      custom () {\n        return <UiToggleButton name='chat' addUiText />\n      },\n    },\n    {\n      custom () {\n        return <UiToggleButton name='scoreboard' addUiText />\n      },\n    },\n    {\n      custom () {\n        return <UiToggleButton name='effects-indicators' />\n      },\n    },\n    {\n      custom () {\n        return <UiToggleButton name='hotbar' />\n      },\n    },\n  ],\n  controls: [\n    {\n      custom () {\n        return <Category>Keyboard & Mouse</Category>\n      },\n    },\n    {\n      custom () {\n        return <Button\n          inScreen\n          onClick={() => {\n            showModal({ reactType: 'keybindings' })\n          }}\n        >Keybindings\n        </Button>\n      },\n      mouseSensX: {},\n      mouseSensY: {\n        min: -1,\n        valueText (value) {\n          return value === -1 ? 'Same as X' : `${value}`\n        },\n      },\n      mouseRawInput: {\n        tooltip: 'Wether to disable any mouse acceleration (MC does it by default). Most probably it is still supported only by Chrome.',\n        // eslint-disable-next-line no-extra-boolean-cast\n        disabledReason: Boolean(document.documentElement.requestPointerLock) ? undefined : 'Your browser does not support pointer lock.',\n      },\n      autoFullScreen: {\n        tooltip: 'Auto Fullscreen allows you to use Ctrl+W and Escape having to wait/click on screen again.',\n        disabledReason: navigator['keyboard'] ? undefined : 'Your browser doesn\\'t support keyboard lock API'\n      },\n      autoExitFullscreen: {\n        tooltip: 'Exit fullscreen on escape (pause menu open). But note you can always do it with F11.',\n      },\n    },\n    {\n      custom () {\n        return <Category>Touch Controls</Category>\n      },\n      alwaysShowMobileControls: {\n        text: 'Always Mobile Controls',\n      },\n      touchButtonsSize: {\n        min: 40,\n        disableIf: [\n          'touchControlsType',\n          'joystick-buttons'\n        ],\n      },\n      touchButtonsOpacity: {\n        min: 10,\n        max: 90,\n        disableIf: [\n          'touchControlsType',\n          'joystick-buttons'\n        ],\n      },\n      touchButtonsPosition: {\n        max: 80,\n        disableIf: [\n          'touchControlsType',\n          'joystick-buttons'\n        ],\n      },\n      touchControlsType: {\n        values: [['classic', 'Classic'], ['joystick-buttons', 'New']],\n      },\n    },\n    {\n      custom () {\n        const { touchControlsType } = useSnapshot(options)\n        return <Button label='Setup Touch Buttons' onClick={() => showModal({ reactType: 'touch-buttons-setup' })} inScreen disabled={touchControlsType !== 'joystick-buttons'} />\n      },\n    },\n    {\n      custom () {\n        return <Category>Auto Jump</Category>\n      },\n      autoJump: {\n        values: [\n          'always',\n          'auto',\n          'never'\n        ],\n        disableIf: [\n          'autoParkour',\n          true\n        ],\n      },\n      autoParkour: {},\n    }\n  ],\n  sound: [\n    { volume: {} },\n    {\n      custom () {\n        return <Button label='Sound Muffler' onClick={() => showModal({ reactType: 'sound-muffler' })} inScreen />\n      },\n    }\n    // { ignoreSilentSwitch: {} },\n  ],\n\n  VR: [\n    {\n      custom () {\n        return (\n          <>\n            <span style={{ fontSize: 9, display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n              VR currently has basic support\n            </span>\n            <div />\n          </>\n        )\n      },\n      vrSupport: {}\n    },\n  ],\n  advanced: [\n    {\n      custom () {\n        return <Button\n          inScreen\n          onClick={() => {\n            if (confirm('Are you sure you want to reset all settings?')) resetLocalStorageWithoutWorld()\n          }}\n        >Reset all settings</Button>\n      },\n    },\n    {\n      custom () {\n        return <Category>Developer</Category>\n      },\n    },\n    {\n      custom () {\n        const { active } = useSnapshot(packetsReplaceSessionState)\n        return <Button\n          inScreen\n          onClick={() => {\n            packetsReplaceSessionState.active = !active\n          }}\n        >{active ? 'Disable' : 'Enable'} Packets Replay</Button>\n      },\n    },\n    {\n      custom () {\n        const { active } = useSnapshot(packetsReplaceSessionState)\n        return <Button\n          disabled={!active}\n          inScreen\n          onClick={() => {\n            void downloadPacketsReplay()\n          }}\n        >Download Packets Replay</Button>\n      },\n    }\n  ],\n}\nexport type OptionsGroupType = 'main' | 'render' | 'interface' | 'controls' | 'sound' | 'advanced' | 'VR'\n\nconst Category = ({ children }) => <div style={{\n  fontSize: 9,\n  textAlign: 'center',\n  gridColumn: 'span 2'\n}}>{children}</div>\n\nconst UiToggleButton = ({ name, addUiText = false, label = noCase(name) }) => {\n  const { disabledUiParts } = useSnapshot(options)\n\n  const currentlyDisabled = disabledUiParts.includes(name)\n  if (addUiText) label = `${label} UI`\n  return <Button\n    inScreen\n    onClick={() => {\n      const newDisabledUiParts = currentlyDisabled ? disabledUiParts.filter(x => x !== name) : [...disabledUiParts, name]\n      options.disabledUiParts = newDisabledUiParts\n    }}\n  >{currentlyDisabled ? 'Enable' : 'Disable'} {label}</Button>\n}\n\nexport const tryFindOptionConfig = (option: keyof AppOptions) => {\n  for (const group of Object.values(guiOptionsScheme)) {\n    for (const optionConfig of group) {\n      if (option in optionConfig) {\n        return optionConfig[option]\n      }\n    }\n  }\n\n  return null\n}\n","import { titleCase } from 'title-case'\nimport { options } from '../optionsStorage'\nimport { OptionsGroupType, guiOptionsScheme } from '../optionsGuiScheme'\nimport OptionsItems, { OptionMeta } from './OptionsItems'\n\nexport const optionValueToType = (optionValue: any, item: OptionMeta) => {\n  if (typeof optionValue === 'boolean' || item.values) return 'toggle'\n  if (typeof optionValue === 'number') return 'slider'\n  if (typeof optionValue === 'string') return 'element'\n}\n\nconst finalItemsScheme: Record<keyof typeof guiOptionsScheme, OptionMeta[]> = Object.fromEntries(Object.entries(guiOptionsScheme).map(([groupName, optionsArr]) => {\n  return [groupName, optionsArr.flatMap((optionsObj) => {\n    return Object.entries(optionsObj).map(([optionKey, metaMerge]) => {\n      const optionValue = options[optionKey]\n\n      const type = optionValueToType(optionValue, metaMerge)\n      const meta: OptionMeta = {\n        id: optionKey === 'custom' ? undefined : optionKey,\n        type,\n        // todo I don't like the whole idea of custom. Why it is even here?\n        ...optionKey === 'custom' ? {\n          type: 'element',\n          render: metaMerge\n        } : {\n          ...metaMerge,\n        }\n      }\n      return meta\n    })\n  })]\n}))\n\nexport default ({ group, backButtonAction }: { group: OptionsGroupType, backButtonAction? }) => {\n  const items = finalItemsScheme[group]\n\n  const title = group === 'main' ? 'Settings' : `${titleCase(group)} Settings`\n  return <OptionsItems items={items} title={title} backButtonAction={backButtonAction} />\n}\n","import { useSnapshot } from 'valtio'\nimport { activeModalStack, hideCurrentModal } from '../globalState'\nimport { OptionsGroupType } from '../optionsGuiScheme'\nimport OptionsGroup from './OptionsGroup'\nimport { useIsModalActive } from './utilsApp'\n\nexport default () => {\n  useIsModalActive('options-*')\n  const { reactType } = useSnapshot(activeModalStack).at(-1) ?? {}\n  if (!reactType?.startsWith('options-')) return\n  const settingsGroup = reactType.slice('options-'.length) as OptionsGroupType\n\n  return <OptionsGroup group={settingsGroup} backButtonAction={hideCurrentModal} />\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"root\":\"root-ZQcBnP\",\"game-title\":\"game-title-HS2Boh\",\"gameTitle\":\"game-title-HS2Boh\",\"minec\":\"minec-LtvUe5\",\"minecraft\":\"minecraft-WAwwet\",\"raft\":\"raft-pGttvN\",\"edition\":\"edition-X71qt9\",\"splash\":\"splash-T86ZOq\",\"splashAnim\":\"splashAnim-hJpV1p\",\"menu\":\"menu-AViyuB\",\"menu-row\":\"menu-row-Ua3i92\",\"menuRow\":\"menu-row-Ua3i92\",\"bottom-info\":\"bottom-info-XUJ4_b\",\"bottomInfo\":\"bottom-info-XUJ4_b\",\"product-description\":\"product-description-mpFNW4\",\"productDescription\":\"product-description-mpFNW4\",\"product-link\":\"product-link-iL2GHi\",\"productLink\":\"product-link-iL2GHi\",\"maps-provider\":\"maps-provider-JGaNCh\",\"mapsProvider\":\"maps-provider-JGaNCh\"};","import { useEffect, useRef, useState } from 'react'\nimport { useFloating, arrow, FloatingArrow, offset as offsetMiddleware, Placement } from '@floating-ui/react'\nimport Button from './Button'\n\ninterface Props extends React.ComponentProps<typeof Button> {\n  initialTooltip: {\n    content: string\n    placement?: Placement\n    localStorageKey?: string | null\n    offset?: number\n  }\n}\n\nconst ARROW_HEIGHT = 7\nconst GAP = 0\n\nexport default ({ initialTooltip, ...args }: Props) => {\n  const { localStorageKey = 'firstTimeTooltip', offset = 0 } = initialTooltip\n  const [showTooltips, setShowTooltips] = useState(localStorageKey ? localStorage[localStorageKey] !== 'false' : true)\n\n  useEffect(() => {\n    let timeout\n    function hide () {\n      if (!localStorageKey) return\n      localStorage[localStorageKey] = 'false'\n      setShowTooltips(false)\n    }\n    if (showTooltips && localStorageKey) {\n      // todo wait for user interaction mouseoe\n      timeout = setTimeout(() => {\n        hide()\n      }, 10_000)\n    }\n\n    return () => {\n      // unmounted, probably switched view\n      if (timeout) clearTimeout(timeout)\n      hide()\n    }\n  }, [])\n\n  const arrowRef = useRef<any>(null)\n  const { refs, floatingStyles, context } = useFloating({\n    middleware: [\n      arrow({\n        element: arrowRef\n      }),\n      offsetMiddleware(ARROW_HEIGHT + GAP + offset),\n    ],\n    placement: initialTooltip.placement,\n  })\n\n  return <>\n    <Button {...args} rootRef={refs.setReference} />\n    <div\n      ref={refs.setFloating}\n      style={{\n        ...floatingStyles,\n        background: 'rgba(0, 0, 0, 0.3)',\n        fontSize: 8,\n        pointerEvents: 'none',\n        userSelect: 'text',\n        padding: '2px 4px',\n        opacity: showTooltips ? 1 : 0,\n        transition: 'opacity 0.3s ease-in-out',\n        textShadow: '1px 1px 2px BLACK',\n        zIndex: 11\n      }}\n    >\n      {initialTooltip.content}\n      <FloatingArrow ref={arrowRef} context={context} style={{ opacity: 0.7 }} />\n    </div>\n  </>\n}\n","import React, { useEffect, useState } from 'react'\nimport { openURL } from 'prismarine-viewer/viewer/lib/simpleUtils'\nimport { haveDirectoryPicker } from '../utils'\nimport { activeModalStack } from '../globalState'\nimport styles from './mainMenu.module.css'\nimport Button from './Button'\nimport ButtonWithTooltip from './ButtonWithTooltip'\nimport { pixelartIcons } from './PixelartIcon'\n\ntype Action = (e: React.MouseEvent<HTMLButtonElement>) => void\n\ninterface Props {\n  connectToServerAction?: Action\n  singleplayerAction?: Action\n  optionsAction?: Action\n  githubAction?: Action\n  linksButton?: JSX.Element\n  openFileAction?: Action\n  mapsProvider?: string\n  versionStatus?: string\n  versionTitle?: string\n  onVersionStatusClick?: () => void\n  bottomRightLinks?: string\n  versionText?: string\n  onVersionTextClick?: () => void\n}\n\nconst httpsRegex = /^https?:\\/\\//\n\nexport default ({\n  connectToServerAction,\n  mapsProvider,\n  singleplayerAction,\n  optionsAction,\n  githubAction,\n  linksButton,\n  openFileAction,\n  versionText,\n  onVersionTextClick,\n  versionStatus,\n  versionTitle,\n  onVersionStatusClick,\n  bottomRightLinks\n}: Props) => {\n  if (!bottomRightLinks?.trim()) bottomRightLinks = undefined\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  const linksParsed = bottomRightLinks?.split(/;|\\n/g).map(l => {\n    const parts = l.split(':')\n    return [parts[0], parts.slice(1).join(':')]\n  }) as Array<[string, string]> | undefined\n\n  return (\n    <div className={styles.root}>\n      <div className={styles['game-title']}>\n        <div className={styles.minecraft}>\n          <div className={styles.edition} />\n          <span className={styles.splash}>Prismarine is a beautiful block</span>\n        </div>\n      </div>\n\n      <div className={styles.menu}>\n        <ButtonWithTooltip\n          initialTooltip={{\n            content: 'Connect to Java servers!',\n            placement: 'top',\n          }}\n          onClick={connectToServerAction}\n          data-test-id='servers-screen-button'\n        >\n          Connect to server\n        </ButtonWithTooltip>\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n          <ButtonWithTooltip\n            style={{ width: 150 }}\n            onClick={singleplayerAction}\n            data-test-id='singleplayer-button'\n            initialTooltip={{\n              content: 'Create worlds and play offline',\n              placement: 'left',\n              offset: -40\n            }}\n          >\n            Singleplayer\n          </ButtonWithTooltip>\n\n          <ButtonWithTooltip\n            disabled={!mapsProvider}\n            // className={styles['maps-provider']}\n            icon={pixelartIcons.map}\n            initialTooltip={{ content: 'Explore maps to play from provider!', placement: 'top-start' }}\n            onClick={() => mapsProvider && openURL(httpsRegex.test(mapsProvider) ? mapsProvider : 'https://' + mapsProvider, false)}\n          />\n\n          <ButtonWithTooltip\n            data-test-id='select-file-folder'\n            icon={pixelartIcons.folder}\n            onClick={openFileAction}\n            initialTooltip={{\n              content: 'Load any Java world save' + (haveDirectoryPicker() ? '' : ' (zip)!'),\n              placement: 'bottom-start',\n            }}\n          />\n        </div>\n        <Button\n          onClick={optionsAction}\n        >\n          Options\n        </Button>\n        <div className={styles['menu-row']}>\n          <ButtonWithTooltip\n            initialTooltip={{\n              content: 'Report bugs or request features!',\n            }}\n            style={{ width: '98px' }}\n            onClick={githubAction}\n          >\n            GitHub\n          </ButtonWithTooltip>\n          {linksButton}\n        </div>\n      </div>\n\n      <div className={styles['bottom-info']}>\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n          <span style={{ fontSize: 10, color: 'gray' }} onClick={onVersionTextClick}>{versionText}</span>\n          <span\n            title={`${versionTitle} (click to reload)`}\n            onClick={onVersionStatusClick}\n            className={styles['product-info']}\n          >\n            Prismarine Web Client {versionStatus}\n          </span>\n        </div>\n        <span className={styles['product-description']}>\n          <div className={styles['product-link']}>\n            {linksParsed?.map(([name, link], i, arr) => {\n              if (!link.startsWith('http')) link = `https://${link}`\n              return <div style={{\n                color: 'lightgray',\n                fontSize: 8,\n              }}>\n                <a\n                  key={name}\n                  style={{\n                    whiteSpace: 'nowrap',\n                  }} href={link}\n                >{name}\n                </a>\n                {i < arr.length - 1 && <span style={{ marginLeft: 2 }}></span>}\n              </div>\n            })}\n          </div>\n          <span>A Minecraft client in the browser!</span>\n        </span>\n      </div>\n    </div>\n  )\n}\n","import { useFloating, arrow, FloatingArrow, offset as offsetMiddleware, Placement, autoPlacement } from '@floating-ui/react'\nimport { openURL } from 'prismarine-viewer/viewer/lib/simpleUtils'\nimport { CSSProperties, useState } from 'react'\nimport Button from './Button'\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\n\nexport const DiscordButton = () => {\n  const links: DropdownButtonItem[] = [\n    {\n      text: 'Support Official Server (mcraft.fun)',\n      clickHandler: () => openURL('https://discord.gg/xzGRhxtRUt')\n    },\n    {\n      text: 'Community Server (PrismarineJS)',\n      clickHandler: () => openURL('https://discord.gg/4Ucm684Fq3')\n    }\n  ]\n\n  return <DropdownButton text=\"Discord\" links={links} />\n}\n\nexport type DropdownButtonItem = {\n  text: string,\n  clickHandler: () => void\n}\n\nexport const DropdownButton = ({ text, links }: { text: string, links: DropdownButtonItem[] }) => {\n  const [isOpen, setIsOpen] = useState(false)\n  const { refs, floatingStyles } = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen,\n    middleware: [\n      autoPlacement()\n    ],\n  })\n\n  const styles: CSSProperties = {\n    ...floatingStyles,\n    background: 'rgba(0, 0, 0, 0.3)',\n    fontSize: 8,\n    userSelect: 'text',\n    padding: '2px 4px',\n    opacity: 1,\n    transition: 'opacity 0.3s ease-in-out',\n    textShadow: '1px 1px 2px BLACK',\n    display: 'flex',\n    flexDirection: 'column',\n    zIndex: 11\n  }\n\n  return <>\n    <Button\n      style={{ position: 'relative', width: '98px' }}\n      rootRef={refs.setReference}\n      onClick={() => {\n        setIsOpen(!isOpen)\n      }}\n    >{text}<PixelartIcon\n        styles={{ position: 'absolute', top: '5px', right: '5px' }}\n        iconName={isOpen ? pixelartIcons['chevron-up'] : pixelartIcons['chevron-down']}\n      />\n    </Button>\n    {\n      isOpen && <div ref={refs.setFloating} style={styles}>\n        {links.map(el => {\n          return <Button\n            key={el.text}\n            style={{ width: '98px', fontSize: '7px' }}\n            onClick={el.clickHandler}\n          >{el.text}\n          </Button>\n        })}\n      </div>\n    }\n  </>\n}\n","import fs from 'fs'\nimport { Transition } from 'react-transition-group'\nimport { proxy, subscribe, useSnapshot } from 'valtio'\nimport { useEffect, useState } from 'react'\nimport { activeModalStack, miscUiState, openOptionsMenu, showModal } from '../globalState'\nimport { openGithub, setLoadingScreenStatus } from '../utils'\nimport { openFilePicker, copyFilesAsync, mkdirRecursive, openWorldDirectory, removeFileRecursiveAsync } from '../browserfs'\n\nimport MainMenu from './MainMenu'\nimport { DiscordButton } from './DiscordButton'\n\nconst refreshApp = async (failedUpdate = false) => {\n  const registration = await navigator.serviceWorker.getRegistration()\n  await registration?.unregister()\n  if (failedUpdate) {\n    await new Promise(resolve => {\n      setTimeout(resolve, 2000)\n    })\n  }\n  if (activeModalStack.length !== 0) return\n  if (failedUpdate) {\n    sessionStorage.justReloaded = false\n    // try to force bypass cache\n    location.search = '?update=true'\n  } else {\n    window.justReloaded = true\n    sessionStorage.justReloaded = true\n    window.location.reload()\n  }\n}\n\nexport const mainMenuState = proxy({\n  serviceWorkerLoaded: false,\n})\n\n// todo clean\nlet disableAnimation = false\nexport default () => {\n  const haveModals = useSnapshot(activeModalStack).length\n  const { gameLoaded, appLoaded, appConfig } = useSnapshot(miscUiState)\n\n  const noDisplay = haveModals || gameLoaded || !appLoaded\n\n  useEffect(() => {\n    if (noDisplay && appLoaded) disableAnimation = true\n  }, [noDisplay])\n\n  const [versionStatus, setVersionStatus] = useState('')\n  const [versionTitle, setVersionTitle] = useState('')\n\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      setVersionStatus('(dev)')\n    } else {\n      fetch('./version.txt').then(async (f) => {\n        if (f.status === 404) return\n        const contents = await f.text()\n        const isLatest = contents === process.env.BUILD_VERSION\n        if (!isLatest && sessionStorage.justReloaded) {\n          setVersionStatus('(force reloading, wait)')\n          void refreshApp(true)\n          return\n        }\n        const upStatus = () => {\n          setVersionStatus(`(${isLatest ? 'latest' : 'new version available'}${mainMenuState.serviceWorkerLoaded ? ', Downloaded' : ''})`)\n        }\n        subscribe(mainMenuState, upStatus)\n        upStatus()\n        setVersionTitle(`Loaded: ${process.env.BUILD_VERSION}. Remote: ${contents}`)\n      }, () => {\n        setVersionStatus('(offline)')\n      })\n    }\n  }, [])\n\n  let mapsProviderUrl = appConfig?.mapsProvider\n  if (mapsProviderUrl && location.origin !== 'https://mcraft.fun') mapsProviderUrl = mapsProviderUrl + '?to=' + encodeURIComponent(location.href)\n\n  // todo clean, use custom csstransition\n  return <Transition in={!noDisplay} timeout={disableAnimation ? 0 : 100} mountOnEnter unmountOnExit>\n    {(state) => <div style={{ transition: state === 'exiting' || disableAnimation ? '' : '100ms opacity ease-in', ...state === 'entered' ? { opacity: 1 } : { opacity: 0 } }}>\n      <MainMenu\n        connectToServerAction={() => showModal({ reactType: 'serversList' })}\n        singleplayerAction={async () => {\n          const oldFormatSave = fs.existsSync('./world/level.dat')\n          if (oldFormatSave) {\n            setLoadingScreenStatus('Migrating old save, don\\'t close the page')\n            try {\n              await mkdirRecursive('/data/worlds/local')\n              await copyFilesAsync('/world/', '/data/worlds/local')\n              try {\n                await removeFileRecursiveAsync('/world/')\n              } catch (err) {\n                console.error(err)\n              }\n            } catch (err) {\n              console.warn(err)\n              alert('Failed to migrate world from localStorage')\n            } finally {\n              setLoadingScreenStatus(undefined)\n            }\n          }\n          showModal({ reactType: 'singleplayer' })\n        }}\n        githubAction={() => openGithub()}\n        optionsAction={() => openOptionsMenu('main')}\n        linksButton={<DiscordButton />}\n        bottomRightLinks={process.env.MAIN_MENU_LINKS}\n        openFileAction={e => {\n          if (!!window.showDirectoryPicker && !e.shiftKey) {\n            void openWorldDirectory()\n          } else {\n            openFilePicker()\n          }\n        }}\n        mapsProvider={mapsProviderUrl}\n        versionStatus={versionStatus}\n        versionTitle={versionTitle}\n        onVersionStatusClick={async () => {\n          setVersionStatus('(reloading)')\n          await refreshApp()\n        }}\n        onVersionTextClick={async () => {\n          openGithub('/releases')\n        }}\n        versionText={process.env.RELEASE_TAG}\n      />\n    </div>}\n  </Transition>\n}\n","import fs from 'fs'\nimport { join } from 'path'\nimport JSZip from 'jszip'\nimport { readLevelDat } from './loadSave'\nimport { closeWan, openToWanAndCopyJoinLink } from './localServerMultiplayer'\nimport { copyFilesAsync, uniqueFileNameFromWorldName } from './browserfs'\nimport { saveServer } from './flyingSquidUtils'\nimport { setLoadingScreenStatus } from './utils'\nimport { displayClientChat } from './botUtils'\n\nconst notImplemented = () => {\n  return 'Not implemented yet'\n}\n\nasync function addFolderToZip (folderPath, zip, relativePath) {\n  const entries = await fs.promises.readdir(folderPath)\n\n  for (const entry of entries) {\n    const entryPath = join(folderPath, entry)\n    const stats = await fs.promises.stat(entryPath)\n\n    const zipEntryPath = join(relativePath, entry)\n\n    if (stats.isDirectory()) {\n      const subZip = zip.folder(zipEntryPath)\n      await addFolderToZip(entryPath, subZip, zipEntryPath)\n    } else {\n      const fileData = await fs.promises.readFile(entryPath)\n      zip.file(entry, fileData)\n    }\n  }\n}\n\nexport const exportWorld = async (path: string, type: 'zip' | 'folder', zipName = 'world-prismarine-exported') => {\n  try {\n    if (type === 'zip') {\n      setLoadingScreenStatus('Generating zip, this may take a few minutes')\n      const zip = new JSZip()\n      await addFolderToZip(path, zip, '')\n\n      // Generate the ZIP archive content\n      const zipContent = await zip.generateAsync({ type: 'blob' })\n\n      // Create a download link and trigger the download\n      const downloadLink = document.createElement('a')\n      downloadLink.href = URL.createObjectURL(zipContent)\n      // todo use loaded zip/folder name\n      downloadLink.download = `${zipName}.zip`\n      downloadLink.click()\n\n      // Clean up the URL object after download\n      URL.revokeObjectURL(downloadLink.href)\n    } else {\n      setLoadingScreenStatus('Preparing export folder')\n      let dest = '/'\n      if ((await fs.promises.readdir('/export')).length) {\n        const { levelDat } = (await readLevelDat(path))!\n        dest = await uniqueFileNameFromWorldName(levelDat.LevelName, path)\n      }\n      setLoadingScreenStatus(`Copying files to ${dest} of selected folder`)\n      await copyFilesAsync(path, '/export' + dest)\n    }\n  } finally {\n    setLoadingScreenStatus(undefined)\n  }\n}\n\n// todo include in help\nconst exportLoadedWorld = async () => {\n  await saveServer()\n  let { worldFolder } = localServer!.options\n  if (!worldFolder.startsWith('/')) worldFolder = `/${worldFolder}`\n  await exportWorld(worldFolder, 'zip')\n}\n\nwindow.exportWorld = exportLoadedWorld\n\nconst writeText = (text) => {\n  displayClientChat(text)\n}\n\nconst commands: Array<{\n  command: string[],\n  invoke (args: string[]): Promise<void> | void\n  //@ts-format-ignore-region\n}> = [\n  {\n    command: ['/download', '/export'],\n    invoke: exportLoadedWorld\n  },\n  {\n    command: ['/publish', '/share'],\n    async invoke () {\n      const text = await openToWanAndCopyJoinLink(writeText)\n      if (text) writeText(text)\n    }\n  },\n  {\n    command: ['/close'],\n    invoke () {\n      const text = closeWan()\n      if (text) writeText(text)\n    }\n  },\n  {\n    command: ['/save'],\n    async invoke () {\n      await saveServer(false)\n      writeText('Saved to browser memory')\n    }\n  },\n  {\n    command: ['/pos'],\n    async invoke ([type]) {\n      let pos: string | undefined\n      if (type === 'block') {\n        pos = window.cursorBlockRel()?.position?.toString().slice(1, -1)\n      } else {\n        pos = bot.entity.position.toString().slice(1, -1)\n      }\n      if (!pos) return\n      await navigator.clipboard.writeText(pos)\n      writeText(`Copied position to clipboard: ${pos}`)\n    }\n  }\n]\n//@ts-format-ignore-endregion\n\nexport const getBuiltinCommandsList = () => commands.flatMap(command => command.command)\n\nexport const tryHandleBuiltinCommand = (message: string) => {\n  if (!localServer) return\n  const [userCommand, ...args] = message.split(' ')\n\n  for (const command of commands) {\n    if (command.command.includes(userCommand)) {\n      void command.invoke(args) // ignoring for now\n      return true\n    }\n  }\n}\n","import { GoogleOAuthProvider, useGoogleLogin } from '@react-oauth/google'\nimport { proxy, ref, subscribe } from 'valtio'\nimport React from 'react'\nimport { loadScript } from 'prismarine-viewer/viewer/lib/utils'\nimport { loadGoogleDriveApi, loadInMemorySave } from './react/SingleplayerProvider'\nimport { setLoadingScreenStatus } from './utils'\nimport { mountGoogleDriveFolder } from './browserfs'\nimport { showOptionsModal } from './react/SelectOption'\n\nconst CLIENT_ID = '137156026346-igv2gkjsj2hlid92rs3q7cjjnc77s132.apps.googleusercontent.com'\n// const CLIENT_ID = process.env.GOOGLE_CLIENT_ID\nconst SCOPES = 'https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.install'\nexport const APP_ID = CLIENT_ID.split('-')[0]\n\nexport const GoogleDriveProvider = ({ children }) => {\n  return React.createElement(GoogleOAuthProvider, { clientId: CLIENT_ID } as any, children)\n  // return <GoogleOAuthProvider clientId={CLIENT_ID}><Root /></GoogleOAuthProvider>\n}\n\nexport const isGoogleDriveAvailable = () => {\n  return !!CLIENT_ID\n}\n\nexport const useGoogleLogIn = () => {\n  const login = useGoogleLogin({\n    onSuccess (tokenResponse) {\n      localStorage.hasEverLoggedIn = true\n      googleProviderState.accessToken = tokenResponse.access_token\n      googleProviderState.expiresIn = ref(new Date(Date.now() + tokenResponse.expires_in * 1000))\n      googleProviderState.hasEverLoggedIn = true\n    },\n    // prompt: hasEverLoggedIn ? 'none' : 'consent',\n    scope: SCOPES,\n    flow: 'implicit',\n    onError (error) {\n      const accessDenied = error.error === 'access_denied' || error.error === 'invalid_scope' || (error as any).error_subtype === 'access_denied'\n      if (accessDenied) {\n        googleProviderState.hasEverLoggedIn = false\n      }\n    }\n  })\n  return () => login({\n    prompt: googleProviderState.hasEverLoggedIn ? 'none' : 'consent'\n  })\n}\n\nexport const possiblyHandleStateVariable = async () => {\n  const stateParam = new URLSearchParams(window.location.search).get('state')\n  if (!stateParam) return\n  setLoadingScreenStatus('Opening world in read only mode, waiting for login...')\n  await loadGoogleDriveApi()\n  await loadScript('https://accounts.google.com/gsi/client')\n  const parsed = JSON.parse(stateParam) as {\n    ids: [string]\n    action: 'open'\n    userId: string\n  }\n  const tokenClient = window.google.accounts.oauth2.initTokenClient({\n    client_id: CLIENT_ID,\n    scope: SCOPES,\n    async callback (response) {\n      if (response.error) {\n        setLoadingScreenStatus('Error: ' + response.error, true)\n        googleProviderState.hasEverLoggedIn = false\n        return\n      }\n      setLoadingScreenStatus('Opening world in read only mode...')\n      googleProviderState.accessToken = response.access_token\n      await mountGoogleDriveFolder(true, parsed.ids[0])\n      await loadInMemorySave('/google')\n    }\n  })\n  const choice = await showOptionsModal('Select an action...', ['Login'])\n  if (choice === 'Login') {\n    tokenClient.requestAccessToken({\n      prompt: googleProviderState.hasEverLoggedIn ? '' : 'consent',\n    })\n  } else {\n    window.close()\n  }\n}\n\nexport const googleProviderState = proxy({\n  accessToken: (localStorage.saveAccessToken ? localStorage.accessToken : null) as string | null,\n  hasEverLoggedIn: !!(localStorage.hasEverLoggedIn),\n  isReady: false,\n  expiresIn: localStorage.saveAccessToken ? ref(new Date(Date.now() + 1000 * 60 * 60)) : null,\n  readonlyMode: localStorage.googleReadonlyMode ? localStorage.googleReadonlyMode === 'true' : true,\n  lastSelectedFolder: (localStorage.lastSelectedFolder ? JSON.parse(localStorage.lastSelectedFolder) : null) as {\n    id: string\n    name: string\n  } | null\n})\n\nsubscribe(googleProviderState, () => {\n  localStorage.googleReadonlyMode = googleProviderState.readonlyMode\n  localStorage.lastSelectedFolder = googleProviderState.lastSelectedFolder ? JSON.stringify(googleProviderState.lastSelectedFolder) : null\n  if (googleProviderState.hasEverLoggedIn) {\n    localStorage.hasEverLoggedIn = true\n  } else {\n    delete localStorage.hasEverLoggedIn\n  }\n\n  if (localStorage.saveAccessToken && googleProviderState) {\n    // For testing only\n    localStorage.accessToken = googleProviderState.accessToken || null\n  } else {\n    delete localStorage.accessToken\n  }\n})\n","import './GoogleButton.css'\n\nexport default ({ onClick }) => {\n  return <button\n    className=\"gsi-material-button\" onClick={onClick} style={{\n      transform: 'scale(0.55) translate(-20%)',\n    }}\n  >\n    <div className=\"gsi-material-button-state\" />\n    <div className=\"gsi-material-button-content-wrapper\">\n      <div className=\"gsi-material-button-icon\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\n          <path fill=\"#EA4335\" d=\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\" />\n          <path fill=\"#4285F4\" d=\"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\" />\n          <path fill=\"#FBBC05\" d=\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\" />\n          <path fill=\"#34A853\" d=\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\" />\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n        </svg>\n      </div>\n      <span className=\"gsi-material-button-contents\">Continue with Google</span>\n      <span style={{ display: 'none' }}>Continue with Google</span>\n    </div>\n  </button>\n}\n","import fs from 'fs'\nimport { proxy, subscribe, useSnapshot } from 'valtio'\nimport { useEffect, useRef, useState } from 'react'\nimport { loadScript } from 'prismarine-viewer/viewer/lib/utils'\nimport { fsState, loadSave, longArrayToNumber, readLevelDat } from '../loadSave'\nimport { googleDriveGetFileIdFromPath, mountExportFolder, mountGoogleDriveFolder, removeFileRecursiveAsync } from '../browserfs'\nimport { hideCurrentModal, showModal } from '../globalState'\nimport { haveDirectoryPicker, setLoadingScreenStatus } from '../utils'\nimport { exportWorld } from '../builtinCommands'\nimport { googleProviderState, useGoogleLogIn, GoogleDriveProvider, isGoogleDriveAvailable, APP_ID } from '../googledrive'\nimport Singleplayer, { WorldProps } from './Singleplayer'\nimport { useIsModalActive } from './utilsApp'\nimport { showOptionsModal } from './SelectOption'\nimport Input from './Input'\nimport GoogleButton from './GoogleButton'\n\nconst worldsProxy = proxy({\n  value: null as null | WorldProps[],\n  brokenWorlds: [] as string[],\n  selectedProvider: 'local' as 'local' | 'google',\n  selectedGoogleId: '',\n  error: '',\n})\n\nexport const getWorldsPath = () => {\n  return worldsProxy.selectedProvider === 'local' ? `/data/worlds` : worldsProxy.selectedProvider === 'google' ? `/google/${'/'.replace(/\\/$/, '')}` : ''\n}\n\nconst providersEnableFeatures = {\n  local: {\n    calculateSize: true,\n    delete: true,\n    export: true,\n    icon: true\n  },\n  google: {\n    calculateSize: false,\n    // TODO\n    delete: false,\n    export: false,\n    icon: true\n  }\n}\n\nexport const readWorlds = (abortController: AbortController) => {\n  if (abortController.signal.aborted) return\n  worldsProxy.error = ''\n  worldsProxy.brokenWorlds = [];\n  (async () => {\n    const brokenWorlds = [] as string[]\n    try {\n      const loggedIn = !!googleProviderState.accessToken\n      worldsProxy.value = null\n      if (worldsProxy.selectedProvider === 'google' && !loggedIn) {\n        worldsProxy.value = []\n        return\n      }\n      const worldsPath = getWorldsPath()\n      const provider = worldsProxy.selectedProvider\n\n      const worlds = await fs.promises.readdir(worldsPath)\n\n      const newMappedWorlds = (await Promise.allSettled(worlds.map(async (folder) => {\n        const { levelDat } = (await readLevelDat(`${worldsPath}/${folder}`))!\n        const levelDatStat = await fs.promises.stat(`${worldsPath}/${folder}/level.dat`)\n        let size = 0\n        if (providersEnableFeatures[provider].calculateSize) {\n          // todo use whole dir size\n          for (const region of await fs.promises.readdir(`${worldsPath}/${folder}/region`)) {\n            // eslint-disable-next-line no-await-in-loop -- it's still fast enough, nobody complains about it\n            const stat = await fs.promises.stat(`${worldsPath}/${folder}/region/${region}`)\n            size += stat.size\n          }\n        }\n        let iconBase64 = ''\n        if (providersEnableFeatures[provider].icon) {\n          const iconPath = `${worldsPath}/${folder}/icon.png`\n          try {\n            iconBase64 = await fs.promises.readFile(iconPath, 'base64')\n          } catch {\n            // ignore\n          }\n        }\n        const levelName = levelDat.LevelName as string | undefined\n        return {\n          name: folder,\n          title: levelName ?? folder,\n          lastPlayed: levelDat.LastPlayed && longArrayToNumber(levelDat.LastPlayed),\n          detail: `${levelDat.Version?.Name ?? 'unknown version'}, ${folder}`,\n          iconSrc: iconBase64 ? `data:image/png;base64,${iconBase64}` : undefined,\n          size,\n          lastModified: levelDatStat.mtimeMs,\n        } satisfies WorldProps & { lastModified?: number }\n      }))).filter((x, i) => {\n        if (x.status === 'rejected') {\n          console.warn(x.reason)\n          brokenWorlds.push(worlds[i])\n          return false\n        }\n        return true\n      }).map(x => (x as Extract<typeof x, { value }>).value).sort((a, b) => {\n        const getScore = (x: typeof a) => {\n          return x.lastModified ?? 0\n        }\n        return getScore(b) - getScore(a)\n      })\n      if (abortController.signal.aborted) return\n      worldsProxy.value = newMappedWorlds\n    } catch (err) {\n      if (err.name === 'AbortError') return\n      console.warn(err)\n      worldsProxy.value = null\n      worldsProxy.error = err.message\n    }\n    worldsProxy.brokenWorlds = brokenWorlds\n  })().catch((err) => {\n    // todo it still doesn't work for some reason!\n    worldsProxy.error = err.message\n  })\n}\n\nexport const loadInMemorySave = async (worldPath: string) => {\n  fsState.saveLoaded = false\n  fsState.isReadonly = false\n  fsState.syncFs = false\n  fsState.inMemorySave = true\n  await loadSave(worldPath)\n}\n\nexport default () => {\n  const active = useIsModalActive('singleplayer')\n\n  if (!active) return null\n\n  return <GoogleDriveProvider>\n    <Inner />\n  </GoogleDriveProvider>\n}\n\nexport const loadGoogleDriveApi = async () => {\n  const scriptEl = await loadScript('https://apis.google.com/js/api.js')\n  if (!scriptEl) return // already loaded\n  return new Promise<void>((resolve) => {\n    gapi.load('client', () => {\n      gapi.load('client:picker', () => {\n        void gapi.client.load('https://www.googleapis.com/discovery/v1/apis/drive/v3/rest').then(() => {\n          googleProviderState.isReady = true\n          resolve()\n        })\n      })\n    })\n  })\n}\n\nconst Inner = () => {\n  const worlds = useSnapshot(worldsProxy).value as WorldProps[] | null\n  const { selectedProvider, error, brokenWorlds, selectedGoogleId } = useSnapshot(worldsProxy)\n  const readWorldsAbortController = useRef(new AbortController())\n\n  // 3rd party providers\n  useEffect(() => {\n    if (selectedProvider !== 'google') return\n    void loadGoogleDriveApi()\n  }, [selectedProvider])\n\n  const loggedIn = !!useSnapshot(googleProviderState).accessToken\n  const googleDriveReadonly = useSnapshot(googleProviderState).readonlyMode\n\n  useEffect(() => {\n    (async () => {\n      if (selectedProvider === 'google') {\n        if (!selectedGoogleId) {\n          worldsProxy.value = []\n          return\n        }\n        await mountGoogleDriveFolder(googleProviderState.readonlyMode, selectedGoogleId)\n        const exists = async (path) => {\n          try {\n            await fs.promises.stat(path)\n            return true\n          } catch {\n            return false\n          }\n        }\n        if (await exists(`${getWorldsPath()}/level.dat`)) {\n          await loadInMemorySave(getWorldsPath())\n          return\n        }\n      }\n      if (selectedProvider === 'local' && !(await fs.promises.stat('/data/worlds').catch(() => false))) {\n        await fs.promises.mkdir('/data/worlds')\n      }\n      readWorlds(readWorldsAbortController.current)\n    })()\n\n    return () => {\n      readWorldsAbortController.current.abort()\n      readWorldsAbortController.current = new AbortController()\n    }\n  }, [selectedProvider, loggedIn, googleDriveReadonly, selectedGoogleId])\n\n  const googleLogIn = useGoogleLogIn()\n\n  const googlePicker = useRef/* <google.picker.Picker | null> */(null as any)\n\n  useEffect(() => {\n    return () => {\n      googlePicker.current?.dispose()\n    }\n  })\n\n  const selectGoogleFolder = async () => {\n    if (googleProviderState.lastSelectedFolder) {\n      // ask to use saved previous fodler\n      const choice = await showOptionsModal(`Use previously selected folder \"${googleProviderState.lastSelectedFolder.name}\"?`, ['Yes', 'No'])\n      if (!choice) return\n      if (choice === 'Yes') {\n        worldsProxy.selectedGoogleId = googleProviderState.lastSelectedFolder.id\n        return\n      }\n    }\n\n    const { google } = window\n\n    const view = new google.picker.DocsView(google.picker.ViewId.FOLDERS)\n      .setIncludeFolders(true)\n      .setMimeTypes('application/vnd.google-apps.folder')\n      .setSelectFolderEnabled(true)\n      .setParent('root')\n\n\n    googlePicker.current = new google.picker.PickerBuilder()\n      .enableFeature(google.picker.Feature.NAV_HIDDEN)\n      .enableFeature(google.picker.Feature.MULTISELECT_ENABLED)\n      .setDeveloperKey('AIzaSyBTiHpEqaLL7mEcrsnSS4M-z8cpRH5UwY0')\n      .setAppId(APP_ID)\n      .setOAuthToken(googleProviderState.accessToken)\n      .addView(view)\n      .addView(new google.picker.DocsUploadView())\n      .setTitle('Select a folder with your worlds')\n      .setCallback((data) => {\n        if (data.action === google.picker.Action.PICKED) {\n          googleProviderState.lastSelectedFolder = {\n            id: data.docs[0].id,\n            name: data.docs[0].name,\n          }\n          worldsProxy.selectedGoogleId = data.docs[0].id\n        }\n      })\n      .build()\n    googlePicker.current.setVisible(true)\n  }\n\n  const isGoogleProviderReady = useSnapshot(googleProviderState).isReady\n  const providerActions = loggedIn && selectedProvider === 'google' && isGoogleProviderReady && !selectedGoogleId ? {\n    'Select Folder': selectGoogleFolder\n  } : selectedProvider === 'google' ? isGoogleProviderReady ? loggedIn ? {\n    'Log Out' () {\n      googleProviderState.hasEverLoggedIn = false\n      googleProviderState.accessToken = null\n      googleProviderState.lastSelectedFolder = null\n      window.google.accounts.oauth2.revoke(googleProviderState.accessToken)\n    },\n    async [`Read Only: ${googleDriveReadonly ? 'ON' : 'OFF'}`] () {\n      if (googleProviderState.readonlyMode) {\n        const choice = await showOptionsModal('[Unstable Feature] Enabling world save might corrupt your worlds, eg remove entities (note: you can always restore previous version of files in Drive)', ['Continue'])\n        if (choice !== 'Continue') return\n      }\n      googleProviderState.readonlyMode = !googleProviderState.readonlyMode\n    },\n    'Select Folder': selectGoogleFolder,\n    // 'Worlds Path': <Input rootStyles={{ width: 100 }} placeholder='Worlds path' defaultValue={worldsPath} onBlur={(e) => {\n    //   googleProviderData.worldsPath = e.target.value\n    // }} />\n  } : {\n    'Log In': <GoogleButton onClick={googleLogIn} />\n  } : {\n    'Loading...' () { }\n  } : undefined\n  // end\n\n  return <Singleplayer\n    error={error}\n    isReadonly={selectedProvider === 'google' && (googleDriveReadonly || !isGoogleProviderReady || !selectedGoogleId)}\n    providers={{\n      local: 'Local',\n      google: 'Google Drive',\n    }}\n    disabledProviders={[...isGoogleDriveAvailable() ? [] : ['google']]}\n    worldData={worlds}\n    providerActions={providerActions}\n    activeProvider={selectedProvider}\n    setActiveProvider={(provider) => {\n      worldsProxy.selectedProvider = provider as any\n    }}\n    warning={brokenWorlds.length ? `Some worlds are broken: ${brokenWorlds.join(', ')}` : undefined}\n    warningAction={async () => {\n      for (const brokenWorld of worldsProxy.brokenWorlds) {\n        setLoadingScreenStatus(`Removing broken world ${brokenWorld}`)\n        // eslint-disable-next-line no-await-in-loop\n        await removeFileRecursiveAsync(`${getWorldsPath()}/${brokenWorld}`)\n      }\n      setLoadingScreenStatus(undefined)\n    }}\n    warningActionLabel='Remove broken worlds'\n    onWorldAction={async (action, worldName) => {\n      const worldPath = `${getWorldsPath()}/${worldName}`\n      const openInGoogleDrive = () => {\n        const fileId = googleDriveGetFileIdFromPath(worldPath.replace('/google/', ''))\n        if (!fileId) return alert('File not found')\n        window.open(`https://drive.google.com/drive/folders/${fileId}`)\n      }\n\n      if (action === 'load') {\n        setLoadingScreenStatus(`Starting loading world ${worldName}`)\n        await loadInMemorySave(worldPath)\n        return\n      }\n      if (action === 'delete') {\n        if (selectedProvider === 'google') {\n          openInGoogleDrive()\n          return\n        }\n\n        if (!confirm('Are you sure you want to delete current world')) return\n        setLoadingScreenStatus(`Removing world ${worldName}`)\n        await removeFileRecursiveAsync(worldPath)\n        setLoadingScreenStatus(undefined)\n        readWorlds(readWorldsAbortController.current)\n      }\n      if (action === 'export') {\n        if (selectedProvider === 'google') {\n          openInGoogleDrive()\n          return\n        }\n\n        const selectedVariant =\n          haveDirectoryPicker()\n            ? await showOptionsModal('Select export type', ['Select folder (recommended)', 'Download ZIP file'])\n            : await showOptionsModal('Select export type', ['Download ZIP file'])\n        if (!selectedVariant) return\n        if (selectedVariant === 'Select folder (recommended)') {\n          const success = await mountExportFolder()\n          if (!success) return\n        }\n        await exportWorld(worldPath, selectedVariant === 'Select folder (recommended)' ? 'folder' : 'zip', worldName)\n      }\n    }}\n    onGeneralAction={(action) => {\n      if (action === 'cancel') {\n        hideCurrentModal()\n      }\n      if (action === 'create') {\n        showModal({ reactType: 'create-world' })\n      }\n    }}\n  />\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"world_layers_container\":\"world_layers_container-YYXzJi\",\"worldLayersContainer\":\"world_layers_container-YYXzJi\"};","import { useEffect, useState } from 'react'\nimport { proxy, useSnapshot } from 'valtio'\nimport { filesize } from 'filesize'\nimport Input from './Input'\nimport Screen from './Screen'\nimport Button from './Button'\nimport SelectGameVersion from './SelectGameVersion'\nimport styles from './createWorld.module.css'\n\n// const worldTypes = ['default', 'flat', 'largeBiomes', 'amplified', 'customized', 'buffet', 'debug_all_block_states']\nconst worldTypes = ['default', 'flat'/* , 'void' */]\nconst gameModes = ['survival', 'creative'/* , 'adventure', 'spectator' */]\n\nexport const creatingWorldState = proxy({\n  title: '',\n  type: worldTypes[0],\n  gameMode: gameModes[0],\n  version: ''\n})\n\nexport default ({ cancelClick, createClick, customizeClick, versions, defaultVersion }) => {\n  const [quota, setQuota] = useState('')\n\n  const { title, type, version, gameMode } = useSnapshot(creatingWorldState)\n  useEffect(() => {\n    creatingWorldState.version = defaultVersion\n    void navigator.storage?.estimate?.().then(({ quota, usage }) => {\n      setQuota(`Storage usage: ${usage === undefined ? '?' : filesize(usage)} / ${quota ? filesize(quota) : '?'}`)\n    })\n  }, [])\n\n  return <Screen title=\"Create world\" backdrop=\"dirt\">\n    <form\n      style={{ display: 'flex' }} onSubmit={(e) => {\n        e.preventDefault()\n        createClick()\n      }}\n    >\n      <Input\n        autoFocus\n        value={title}\n        onChange={({ target: { value } }) => {\n          creatingWorldState.title = value\n        }}\n        placeholder='World name'\n      />\n      <SelectGameVersion\n        versions={versions.map((obj) => { return { value: obj.version, label: obj.version } })}\n        selected={{ value: defaultVersion, label: defaultVersion }}\n        onChange={(value) => {\n          creatingWorldState.version = value ?? defaultVersion\n        }}\n        containerStyle={{ width: '100px' }}\n      />\n      <button type='submit' style={{ visibility: 'hidden' }} />\n    </form>\n    <div style={{ display: 'flex' }}>\n      <Button onClick={() => {\n        const index = worldTypes.indexOf(type)\n        creatingWorldState.type = worldTypes[index === worldTypes.length - 1 ? 0 : index + 1]\n      }}\n      >World Type: {type}\n      </Button>\n      {/* <Button onClick={() => customizeClick()} disabled>\n        Customize\n      </Button> */}\n      <Button onClick={() => {\n        const index = gameModes.indexOf(gameMode)\n        creatingWorldState.gameMode = gameModes[index === gameModes.length - 1 ? 0 : index + 1]\n      }}\n      >\n        Gamemode: {gameMode}\n      </Button>\n    </div>\n    <div className='muted' style={{ fontSize: 8 }}>Default and other world types are WIP</div>\n\n    <div style={{ display: 'flex' }}>\n      <Button onClick={() => {\n        cancelClick()\n      }}\n      >Cancel\n      </Button>\n      <Button disabled={!title} onClick={createClick}>Create</Button>\n    </div>\n    <div className='muted' style={{ fontSize: 9 }}>Note: save important worlds in folders on your hard drive!</div>\n    <div className='muted' style={{ fontSize: 9 }}>{quota}</div>\n  </Screen>\n}\n\nexport const WorldCustomize = ({ backClick }) => {\n  const { type } = useSnapshot(creatingWorldState)\n\n  return <Screen title='Customize world' backdrop='dirt'>\n    <div className={styles.world_layers_container}>\n      <div className=\"world_layer\" />\n    </div>\n    <Button onClick={backClick}>Back</Button>\n  </Screen>\n}\n","import { hideCurrentModal, showModal } from '../globalState'\nimport defaultLocalServerOptions from '../defaultLocalServerOptions'\nimport { mkdirRecursive, uniqueFileNameFromWorldName } from '../browserfs'\nimport supportedVersions from '../supportedVersions.mjs'\nimport CreateWorld, { WorldCustomize, creatingWorldState } from './CreateWorld'\nimport { getWorldsPath } from './SingleplayerProvider'\nimport { useIsModalActive } from './utilsApp'\n\nexport default () => {\n  const activeCreate = useIsModalActive('create-world')\n  const activeCustomize = useIsModalActive('customize-world')\n  if (activeCreate) {\n    const versionsPerMinor = Object.fromEntries(supportedVersions.map(x => [x.split('.').slice(0, 2), x]))\n    const versions = Object.values(versionsPerMinor).map(x => {\n      return {\n        version: x,\n        label: x === defaultLocalServerOptions.version ? `${x} (available offline)` : x\n      }\n    })\n    return <CreateWorld\n      defaultVersion={defaultLocalServerOptions.version}\n      cancelClick={() => {\n        hideCurrentModal()\n      }}\n      createClick={async () => {\n        // create new world\n        const { title, type, version, gameMode } = creatingWorldState\n        // todo display path in ui + disable if exist\n        const savePath = await uniqueFileNameFromWorldName(title, getWorldsPath())\n        await mkdirRecursive(savePath)\n        let generation\n        if (type === 'flat') {\n          generation = {\n            name: 'superflat',\n          }\n        }\n        if (type === 'void') {\n          generation = {\n            name: 'superflat',\n            layers: [],\n            noDefaults: true\n          }\n        }\n        if (type === 'nether') {\n          generation = {\n            name: 'nether'\n          }\n        }\n        hideCurrentModal()\n        window.dispatchEvent(new CustomEvent('singleplayer', {\n          detail: {\n            levelName: title,\n            version,\n            generation,\n            'worldFolder': savePath,\n            gameMode: gameMode === 'survival' ? 0 : 1,\n          },\n        }))\n      }}\n      customizeClick={() => {\n        showModal({ reactType: 'customize-world' })\n      }}\n      versions={versions}\n    />\n  }\n  if (activeCustomize) {\n    return <WorldCustomize backClick={() => hideCurrentModal()} />\n  }\n  return null\n}\n","import { useEffect, useState } from 'react'\nimport { useSnapshot } from 'valtio'\nimport { activeModalStack, miscUiState } from '../globalState'\nimport Button from './Button'\nimport { useUsingTouch } from './utilsApp'\nimport { pixelartIcons } from './PixelartIcon'\n\nconst hideOnModals = new Set(['chat'])\n\nexport default () => {\n  const [fullScreen, setFullScreen] = useState(false)\n  useEffect(() => {\n    document.documentElement.addEventListener('fullscreenchange', () => {\n      setFullScreen(!!document.fullscreenElement)\n    })\n  }, [])\n  const { gameLoaded } = useSnapshot(miscUiState)\n\n  const activeStack = useSnapshot(activeModalStack)\n\n  const inMainMenu = activeStack.length === 0 && !gameLoaded\n\n  const usingTouch = useUsingTouch()\n  const hideButton = activeStack.some(x => hideOnModals.has(x.reactType))\n\n  if (hideButton || !usingTouch || !document.documentElement.requestFullscreen || fullScreen) return null\n\n  return <Button\n    icon={pixelartIcons.scale}\n    style={{\n      position: 'fixed',\n      top: 5,\n      left: inMainMenu ? 35 : 5,\n      width: 22,\n    }}\n    onClick={() => {\n      void document.documentElement.requestFullscreen()\n    }}\n  />\n}\n","import { useEffect, useMemo, useRef, useState } from 'react'\nimport { useSnapshot } from 'valtio'\nimport { formatMessage } from '../chatUtils'\nimport { getBuiltinCommandsList, tryHandleBuiltinCommand } from '../builtinCommands'\nimport { hideCurrentModal, loadedGameState, miscUiState } from '../globalState'\nimport { options } from '../optionsStorage'\nimport Chat, { Message, fadeMessage } from './Chat'\nimport { useIsModalActive } from './utilsApp'\nimport { hideNotification, showNotification } from './NotificationProvider'\nimport { updateLoadedServerData } from './ServersListProvider'\nimport { lastConnectOptions } from './AppStatusProvider'\n\nexport default () => {\n  const [messages, setMessages] = useState([] as Message[])\n  const isChatActive = useIsModalActive('chat')\n  const { messagesLimit, chatOpacity, chatOpacityOpened } = options\n  const lastMessageId = useRef(0)\n  const usingTouch = useSnapshot(miscUiState).currentTouch\n  const { chatSelect } = useSnapshot(options)\n  const isUsingMicrosoftAuth = useMemo(() => !!lastConnectOptions.value?.authenticatedAccount, [])\n\n  useEffect(() => {\n    bot.addListener('message', (jsonMsg, position) => {\n      const parts = formatMessage(jsonMsg)\n\n      setMessages(m => {\n        lastMessageId.current++\n        const newMessage: Message = {\n          parts,\n          id: lastMessageId.current,\n          faded: false,\n        }\n        fadeMessage(newMessage, true, () => {\n          // eslint-disable-next-line max-nested-callbacks\n          setMessages(m => [...m])\n        })\n        return [...m, newMessage].slice(-messagesLimit)\n      })\n    })\n  }, [])\n\n  return <Chat\n    allowSelection={chatSelect}\n    usingTouch={!!usingTouch}\n    opacity={(isChatActive ? chatOpacityOpened : chatOpacity) / 100}\n    messages={messages}\n    opened={isChatActive}\n    // inputDisabled={isUsingMicrosoftAuth ? 'Chat signing is not supported with Microsoft auth yet' : ''}\n    sendMessage={(message) => {\n      const builtinHandled = tryHandleBuiltinCommand(message)\n      if (miscUiState.loadedServerIndex && (message.startsWith('/login') || message.startsWith('/register'))) {\n        showNotification('Click here to save your password in browser for auto-login', undefined, false, undefined, () => {\n          updateLoadedServerData((server) => {\n            server.autoLogin ??= {}\n            const password = message.split(' ')[1]\n            server.autoLogin[loadedGameState.username] = password\n            return server\n          })\n          hideNotification()\n        })\n      }\n      if (!builtinHandled) {\n        bot.chat(message)\n      }\n    }}\n    onClose={() => {\n      hideCurrentModal()\n    }}\n    fetchCompletionItems={async (triggerKind, completeValue) => {\n      if ((triggerKind === 'explicit' || options.autoRequestCompletions)) {\n        let items = [] as string[]\n        try {\n          items = await bot.tabComplete(completeValue, true, true)\n        } catch (err) { }\n        if (typeof items[0] === 'object') {\n          // @ts-expect-error\n          if (items[0].match) items = items.map(i => i.match)\n        }\n        if (completeValue === '/') {\n          if (!items[0]?.startsWith('/')) {\n            // normalize\n            items = items.map(item => `/${item}`)\n          }\n          if (localServer) {\n            items = [...items, ...getBuiltinCommandsList()]\n          }\n        }\n        return items\n      }\n    }}\n  />\n}\n","import { useState, useEffect } from 'react'\nimport { Transition } from 'react-transition-group'\nimport MessageFormattedString from './MessageFormattedString'\nimport './Title.css'\n\nexport type AnimationTimes = {\n  fadeIn: number,\n  stay: number,\n  fadeOut: number\n}\n\ntype TitleProps = {\n  title: string | Record<string, any>,\n  subtitle: string | Record<string, any>,\n  actionBar: string | Record<string, any>,\n  transitionTimes: AnimationTimes,\n  openTitle: boolean,\n  openActionBar: boolean\n}\n\nconst Title = ({\n  title,\n  subtitle,\n  actionBar,\n  transitionTimes,\n  openTitle = false,\n  openActionBar = false\n}: TitleProps) => {\n  const [mounted, setMounted] = useState(false)\n  const [useEnterTransition, setUseEnterTransition] = useState(true)\n\n  const defaultDuration = 500\n  const startStyle = {\n    opacity: 1,\n    transition: `${transitionTimes.fadeIn}ms ease-in-out all` }\n  const endExitStyle = {\n    opacity: 0,\n    transition: `${transitionTimes.fadeOut}ms ease-in-out all` }\n\n  const stateStyles = {\n    entering: startStyle,\n    entered: { opacity: 1 },\n    exiting: endExitStyle,\n    exited: { opacity: 0 },\n  }\n\n  useEffect(() => {\n    if (!mounted && (openTitle || openActionBar)) {\n      setMounted(true)\n    }\n  }, [openTitle, openActionBar])\n\n  return (\n    <div className='title-container'>\n      <Transition\n        in={openTitle}\n        timeout={transitionTimes ? {\n          enter: transitionTimes.fadeIn,\n          exit: transitionTimes.fadeOut,\n        } : defaultDuration}\n        mountOnEnter\n        unmountOnExit\n        enter={useEnterTransition}\n        onExiting={() => {\n          setUseEnterTransition(prev => false)\n        }}\n        onExited={() => {\n          setUseEnterTransition(prev => true)\n        }}\n      >\n        {(state) => {\n          return (\n            <div style={{ ...stateStyles[state] }}>\n              <h1 className='message-title'>\n                <MessageFormattedString message={title} />\n              </h1>\n              <h4 className='message-subtitle'>\n                <MessageFormattedString message={subtitle} />\n              </h4>\n            </div>\n          )\n        }}\n      </Transition>\n      <Transition\n        in={openActionBar}\n        timeout={transitionTimes ? {\n          enter: transitionTimes.fadeIn,\n          exit: transitionTimes.fadeOut,\n        } : defaultDuration}\n        mountOnEnter\n        unmountOnExit\n        // enter={useEnterTransition}\n        // onExiting={() => {\n        //   setUseEnterTransition(prev => false)\n        // }}\n        // onExited={() => {\n        //   setUseEnterTransition(prev => true)\n        // }}\n      >\n        {(state) => {\n          return (\n            <div style={{ ...stateStyles[state] }}>\n              <div className='action-bar'>\n                <MessageFormattedString message={actionBar} />\n              </div>\n            </div>\n          )\n        }}\n      </Transition>\n    </div>\n  )\n}\n\nexport default Title\n","import { useEffect, useMemo, useState } from 'react'\nimport type { ClientOnMap } from '../generatedServerPackets'\nimport Title from './Title'\nimport type { AnimationTimes } from './Title'\n\n\nconst defaultText: Record<string, any> = { 'text': '' }\nconst defaultTimings: AnimationTimes = { fadeIn: 400, stay: 3800, fadeOut: 800 }\n\nconst ticksToMs = (ticks: AnimationTimes) => {\n  ticks.fadeIn *= 50\n  ticks.stay *= 50\n  ticks.fadeOut *= 50\n  return ticks\n}\n\nexport default () => {\n  const [title, setTitle] = useState<string | Record<string, any>>(defaultText)\n  const [subtitle, setSubtitle] = useState<string | Record<string, any>>(defaultText)\n  const [actionBar, setActionBar] = useState<string | Record<string, any>>(defaultText)\n  const [animTimes, setAnimTimes] = useState<AnimationTimes>(defaultTimings)\n  const [openTitle, setOpenTitle] = useState(false)\n  const [openActionBar, setOpenActionBar] = useState(false)\n\n  useMemo(() => {\n    // todo move to mineflayer\n    bot._client.on('set_title_text', (packet) => {\n      setTitle(JSON.parse(packet.text))\n      setOpenTitle(true)\n    })\n    bot._client.on('set_title_subtitle', (packet) => {\n      setSubtitle(JSON.parse(packet.text))\n    })\n    bot._client.on('action_bar', (packet) => {\n      setActionBar(JSON.parse(packet.text))\n      setOpenActionBar(true)\n    })\n    bot._client.on('set_title_time', (packet) => {\n      setAnimTimes(ticksToMs(packet))\n    })\n    bot._client.on('clear_titles', (mes) => {\n      setOpenTitle(false)\n      setOpenActionBar(false)\n      if (mes.reset) {\n        setTitle(defaultText)\n        setSubtitle(defaultText)\n        setActionBar(defaultText)\n        setAnimTimes(defaultTimings)\n      }\n    })\n\n\n    bot.on('actionBar', (packet) => {\n      setActionBar(packet)\n      setOpenActionBar(true)\n    })\n\n    // before 1.17\n    bot._client.on('title', (packet: ClientOnMap['title'] | string) => {\n      let mes: ClientOnMap['title']\n      if (typeof packet === 'string') {\n        mes = JSON.parse(packet)\n      } else {\n        mes = packet\n      }\n      switch (mes.action) {\n        case 0:\n          setTitle(JSON.parse(mes.text))\n          setOpenTitle(true)\n          break\n        case 1:\n          setSubtitle(JSON.parse(mes.text))\n          break\n        case 2:\n          setActionBar(JSON.parse(mes.text))\n          setOpenActionBar(true)\n          break\n        case 3:\n          setAnimTimes(ticksToMs({ fadeIn: mes.fadeIn, stay: mes.stay, fadeOut: mes.fadeOut }))\n          break\n        case 4:\n          setOpenTitle(false)\n          setOpenActionBar(false)\n          break\n        case 5:\n          setOpenTitle(false)\n          setOpenActionBar(false)\n          setTitle(defaultText)\n          setSubtitle(defaultText)\n          setActionBar(defaultText)\n          setAnimTimes(defaultTimings)\n          break\n      }\n    })\n  }, [])\n\n  useEffect(() => {\n    const id = setTimeout(() => {\n      setOpenTitle(false)\n    }, animTimes.stay) // only initial stay time is used for title\n\n    return () => {\n      clearTimeout(id)\n    }\n  }, [title, subtitle])\n\n  useEffect(() => {\n    let id: any = null\n    if (!openTitle) {\n      id = setTimeout(() => {\n        setSubtitle(defaultText)\n      }, animTimes.fadeOut)\n    }\n\n    return () => {\n      if (id) {\n        clearTimeout(id)\n      }\n    }\n  }, [openTitle])\n\n  useEffect(() => {\n    const id = setTimeout(() => {\n      setOpenActionBar(false)\n    }, animTimes.stay)\n\n    return () => {\n      clearTimeout(id)\n    }\n  }, [actionBar])\n\n  return <Title\n    title={title}\n    subtitle={subtitle}\n    actionBar={actionBar}\n    transitionTimes={animTimes}\n    openTitle={openTitle}\n    openActionBar={openActionBar}\n  />\n}\n","import './Scoreboard.css'\nimport MessageFormattedString from './MessageFormattedString'\nimport { reactKeyForMessage } from './utils'\n\n\nexport type ScoreboardItems = Array<{ name: string, value: number, displayName?: any }>\n\ntype ScoreboardProps = {\n  title: string,\n  items: ScoreboardItems,\n  open: boolean\n  style?: React.CSSProperties\n}\n\nexport default function Scoreboard ({ title, items, open, style }: ScoreboardProps) {\n\n  if (!open) return null\n  return (\n    <div className='scoreboard-container' style={style}>\n      <div className='scoreboard-title'>\n        <MessageFormattedString message={title} />\n      </div>\n      {\n        items.map((item) => {\n          const message = item.displayName ?? item.name\n          return <div key={reactKeyForMessage(message) + '_' + item.value} className='item-container'>\n            <div className='item-name'>\n              <MessageFormattedString message={message} />\n            </div>\n            <div className='item-value'>\n              {item.value}\n            </div>\n          </div>\n        })\n      }\n    </div>\n  )\n}\n","import { useMemo, useState } from 'react'\nimport Scoreboard from './Scoreboard'\nimport type { ScoreboardItems } from './Scoreboard'\n\n\nexport default function ScoreboardProvider () {\n  const [title, setTitle] = useState('Scoreboard')\n  const [items, setItems] = useState<ScoreboardItems>([])\n  const [open, setOpen] = useState(false)\n\n  useMemo(() => { // useMemo instead of useEffect to register them asap and not after the initial dom render\n    const updateSidebarScoreboard = () => {\n      addStatPerSec('scoreboard')\n      if (bot.scoreboard.sidebar) {\n        setTitle(bot.scoreboard.sidebar.title)\n        setItems([...bot.scoreboard.sidebar.items])\n        setOpen(true)\n      } else {\n        setOpen(false)\n      }\n    }\n\n    bot.on('scoreboardCreated', updateSidebarScoreboard) // not used atm but still good to have\n    bot.on('scoreboardTitleChanged', updateSidebarScoreboard)\n    bot.on('scoreUpdated', updateSidebarScoreboard)\n    bot.on('scoreRemoved', updateSidebarScoreboard)\n    bot.on('scoreboardDeleted', updateSidebarScoreboard)\n    bot.on('scoreboardPosition', () => {\n      void Promise.resolve().then(() => {\n        updateSidebarScoreboard()\n      }) // mineflayer bug: wait for the next tick to get the correct scoreboard position\n    })\n  }, [])\n\n  return (\n    <Scoreboard\n      title={title}\n      items={items}\n      open={open}\n    />\n  )\n}\n","import { remark } from 'remark'\n\nexport default (markdown: string) => {\n  const arr = markdown.split('\\n\\n')\n  const lines = ['', '', '', '']\n  for (const [i, ast] of arr.map(md => remark().parse(md)).entries()) {\n    lines[i] = transformToMinecraftJSON(ast as Element)\n  }\n  return lines\n}\n\nfunction transformToMinecraftJSON (element: Element): any {\n  switch (element.type) {\n    case 'root': {\n      if (!element.children) return\n      return element.children.map(child => transformToMinecraftJSON(child)).filter(Boolean)\n    }\n    case 'paragraph': {\n      if (!element.children) return\n      const transformedChildren = element.children.map(child => transformToMinecraftJSON(child)).filter(Boolean)\n      return transformedChildren.flat()\n    }\n    case 'strong': {\n      if (!element.children) return\n      return [{ bold: true, text: element.children[0].value }]\n    }\n    case 'text': {\n      return { text: element.value }\n    }\n    case 'emphasis': {\n      if (!element.children) return\n      return [{ italic: true, text: element.children[0].value }]\n    }\n    default:\n      // todo leave untouched eg links\n      return element.value\n  }\n}\n\ninterface Position {\n  start: {\n    line: number;\n    column: number;\n    offset: number;\n  };\n  end: {\n    line: number;\n    column: number;\n    offset: number;\n  };\n}\n\ninterface Element {\n  type: string;\n  children?: Element[];\n  value?: string;\n  position: Position;\n}\n","import { EditorView } from 'prosemirror-view'\nimport { EditorState } from 'prosemirror-state'\nimport { schema, defaultMarkdownParser, defaultMarkdownSerializer } from 'prosemirror-markdown'\nimport { exampleSetup, buildMenuItems } from 'prosemirror-example-setup'\nimport { MarkSpec } from 'prosemirror-model'\nimport { toggleMark } from 'prosemirror-commands'\n\nexport class ProseMirrorView {\n  view\n\n  constructor (target, content) {\n    console.log('schema.marks', schema.marks)\n    //@ts-expect-error\n    schema.marks.textColor = {\n      spec: {\n        attrs: { color: {} },\n        inline: true,\n        parseDOM: [\n          {\n            style: 'color',\n            getAttrs: value => ({ color: value })\n          }\n        ],\n        toDOM: mark => ['span', { style: `color: ${mark.attrs.color}` }, 0]\n      },\n    }\n\n    const fullMenu = buildMenuItems(schema).fullMenu as Array<Array<import('prosemirror-menu').MenuItem>>\n    fullMenu[0] = fullMenu[0].filter(item => item.spec.title !== 'Add or remove link' && item.spec.title !== 'Toggle code font')\n    fullMenu.splice(3, 1); // remove the insert list, quote & checkbox menu\n    (fullMenu[1][0] as any).options.label = 'Color' // check-build error: fullMenu[1][0].options.label = 'Color'\n    // fullMenu[1][0].content[0].spec.label = 'Red'\n    // fullMenu[1][0].content[0].spec.run = (state, dispatch, view) => {\n    // console.log('state', state)\n    // // make <p style=\"color: red\">...</p>\n    // const { from, to } = state.selection\n    // const { tr } = state\n    // console.log(schema.marks)\n    // tr.addMark(from, to, schema.marks.textColor.create({ color: 'red' }))\n    // dispatch(tr)\n    //   toggleMark(schema.marks.textColor, { color: 'red' })(state, dispatch, view)\n    // }\n    fullMenu[1].splice(1, 1) // remove the type menu\n    console.log('fullMenu', fullMenu)\n    this.view = new EditorView(target, {\n      state: EditorState.create({\n        doc: defaultMarkdownParser.parse(content) ?? undefined,\n        plugins: exampleSetup({\n          schema,\n          menuContent: fullMenu,\n        }),\n      }),\n      attributes (state) {\n        return {\n          autocorrect: 'off',\n          autocapitalize: 'off',\n          spellcheck: 'false',\n          autofocus: 'true',\n        }\n      },\n    })\n  }\n\n  get content () {\n    const content = defaultMarkdownSerializer.serialize(this.view.state.doc)\n    console.log('content', content)\n    return content\n  }\n\n  focus () {\n    this.view.focus()\n  }\n\n  destroy () {\n    this.view.destroy()\n  }\n}\n","import { useEffect, useRef } from 'react'\nimport { focusable } from 'tabbable'\nimport markdownToFormattedText from '../markdownToFormattedText'\nimport { ProseMirrorView } from './prosemirror-markdown'\nimport Button from './Button'\nimport 'prosemirror-view/style/prosemirror.css'\nimport 'prosemirror-menu/style/menu.css'\nimport './SignEditor.css'\n\n\nconst imageSource = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAMCAYAAAB4MH11AAABbElEQVR4AY3BQY6cMBBA0Q+yQZZVi+ndcJVcKGfMgegdvShKVtuokzGSWwwiUd7rfv388Vst0UgMXCobmgsSA5VaQmKgUks0EgNHji8SA9W8GJCQwVNpLhzJ4KFs4B1HEgPVvBiQkMFTaS44tYTEQDXdIkfiHbuyobmguaDPFzIWGrWExEA13SJH4h1uzS/WbPyvroM1v6jWbFRrNv7GfX5EdmXjzTvUEjJ4zjQXjiQGdmXjzTvUEjJ4HF/UEt/kQqW5UEkMzIshY08jg6dRS3yTC5XmgpsXY7pFztQSEgPNJCNv3lGpJVSfTLfImVpCYsB1HdwfxpU1G9eeNF0H94dxZc2G+/yI7MoG3vEv82LI2NNIDLyVDbzjzFE2mnkxZOy5IoNnkpFGc2FXNpp5MWTsOXJ4h1qikrGnkhjYlY1m1icy9lQSA+TCzjvUEpWMPZXEwK5suPvDOFuzcdZ1sOYX1ZqNas3GlTUbzR+jQbEAcs8ZQAAAAABJRU5ErkJggg=='\n\ntype Props = {\n  handleInput: (target: HTMLInputElement) => void,\n  isWysiwyg: boolean,\n  handleClick?: (view: ResultType) => void\n}\n\nexport type ResultType = {\n  plainText: string[]\n} | {\n  dataText: string[]\n}\n\nexport default ({ handleInput, isWysiwyg, handleClick }: Props) => {\n  const prosemirrorContainer = useRef(null)\n  const editorView = useRef<ProseMirrorView | null>(null)\n\n  useEffect(() => {\n    if (isWysiwyg) {\n      editorView.current = new ProseMirrorView(prosemirrorContainer.current, '')\n    }\n  }, [isWysiwyg])\n\n  return <div\n    className='signs-editor-container'\n    onKeyDown={(e) => {\n      // arrow down/up, Enter to navigate between lines\n      if (isWysiwyg) return // todo\n      let { code } = e\n      if ((e.target as HTMLElement).matches('input') && e.key === 'Enter') code = 'ArrowDown'\n      if (code === 'ArrowDown' || code === 'ArrowUp') {\n        e.preventDefault()\n        const dir = code === 'ArrowDown' ? 1 : -1\n        const elements = focusable(e.currentTarget)\n        const focusedElemIndex = elements.indexOf(document.activeElement as HTMLElement)\n        if (focusedElemIndex === -1) return\n        const nextElem = elements[focusedElemIndex + dir]\n        nextElem?.focus()\n      }\n    }}\n  >\n    <div className='signs-editor-inner-container'>\n      <img className='signs-editor-bg-image' src={imageSource} alt='' />\n      {isWysiwyg ? (\n        <p ref={prosemirrorContainer} className='wysiwyg-editor' />\n      ) : [1, 2, 3, 4].map((value, index) => {\n        return <input\n          className='sign-editor'\n          key={index}\n          data-key={index}\n          maxLength={15} // overriden by handleInput\n          onChange={(e) => {\n            handleInput(e.currentTarget)\n          }}\n        />\n      })}\n      <Button\n        onClick={async () => {\n          if (handleClick) {\n            if (isWysiwyg) {\n              const text = markdownToFormattedText(editorView.current!.content)\n              handleClick({ dataText: text })\n            } else {\n              const text = [] as string[]\n              for (const input of document.getElementsByClassName('sign-editor')) {\n                text.push((input as HTMLInputElement).value)\n              }\n              handleClick({ plainText: text })\n            }\n          }\n        }} className='sign-editor-button' label=\"Done\"\n      />\n    </div>\n  </div>\n}\n","import { useMemo, useEffect, useState, useRef } from 'react'\nimport { showModal, hideModal } from '../globalState'\nimport { options } from '../optionsStorage'\nimport { useIsModalActive } from './utilsApp'\nimport SignEditor, { ResultType } from './SignEditor'\n\n\nconst isWysiwyg = async () => {\n  const items = await bot.tabComplete('/', true, true)\n  const commands = new Set<string>(['data'])\n  for (const item of items) {\n    if (commands.has(item.match as unknown as string)) {\n      return true\n    }\n  }\n  return false\n}\n\nexport default () => {\n  const [location, setLocation] = useState<{ x: number, y: number, z: number } | null>(null)\n  const [isFrontText, setIsFrontText] = useState(true)\n  const text = useRef<string[]>(['', '', '', ''])\n  const [enableWysiwyg, setEnableWysiwyg] = useState(false)\n  const isModalActive = useIsModalActive('signs-editor-screen')\n\n  const handleClick = (result: ResultType) => {\n    hideModal({ reactType: 'signs-editor-screen' })\n    if ('plainText' in result) {\n      bot._client.write('update_sign', {\n        location,\n        isFrontText,\n        text1: result.plainText[0],\n        text2: result.plainText[1],\n        text3: result.plainText[2],\n        text4: result.plainText[3]\n      })\n    } else {\n      if (!location) return\n      const command = `/data merge block ${location.x} ${location.y} ${location.z} {Text1:'` + JSON.stringify(result.dataText[0]) + '\\',Text2: \\'' + JSON.stringify(result.dataText[1]) + '\\',Text3:\\'' + JSON.stringify(result.dataText[2]) + '\\',Text4:\\'' + JSON.stringify(result.dataText[3]) + '\\'}' // mojangson\n      bot.chat(command)\n    }\n  }\n\n  const handleInput = (target: HTMLInputElement) => {\n    const smallSymbols = /[()[\\]{} ]/\n    const largeSymbols = /[;|',.]/\n    let addLength = 0\n    for (const letter of target.value) {\n      if (smallSymbols.test(letter)) {\n        addLength += 1 - 1 / 1.46\n      } else if (largeSymbols.test(letter)) {\n        addLength += 1 - 1 / 3\n      }\n    }\n    text.current[Number(target.dataset.key)] = target.value\n    target.setAttribute('maxlength', `${15 + Math.ceil(addLength)}`)\n  }\n\n  useMemo(() => {\n    bot._client.on('open_sign_entity', (packet) => {\n      if (!options.autoSignEditor) return\n      setIsFrontText((packet as any).isFrontText ?? true)\n      setLocation(prev => packet.location)\n      showModal({ reactType: 'signs-editor-screen' })\n      if (options.wysiwygSignEditor === 'auto') {\n        void isWysiwyg().then((value) => {\n          setEnableWysiwyg(value)\n        })\n      } else if (options.wysiwygSignEditor === 'always') {\n        setEnableWysiwyg(true)\n      } else {\n        setEnableWysiwyg(false)\n      }\n    })\n  }, [])\n\n  if (!isModalActive) return null\n  return <SignEditor isWysiwyg={enableWysiwyg} handleInput={handleInput} handleClick={handleClick} />\n}\n","import { useMemo, useEffect, useRef } from 'react'\nimport PixelartIcon from './PixelartIcon'\nimport './IndicatorEffects.css'\n\n\n\nfunction formatTime (seconds: number): string {\n  if (seconds < 0) return ''\n  const minutes = Math.floor(seconds / 60)\n  const remainingSeconds = Math.floor(seconds % 60)\n  const formattedMinutes = String(minutes).padStart(2, '0')\n  const formattedSeconds = String(remainingSeconds)\n  return `${formattedMinutes}:${formattedSeconds}`\n}\n\nexport type EffectType = {\n  image: string,\n  time: number,\n  level: number,\n  removeEffect: (image: string) => void,\n  reduceTime: (image: string) => void\n}\n\nconst EffectBox = ({ image, time, level }: Pick<EffectType, 'image' | 'time' | 'level'>) => {\n\n  const formattedTime = useMemo(() => formatTime(time), [time])\n\n  return <div className='effect-box'>\n    <img className='effect-box__image' src={image} alt='' />\n    <div>\n      {formattedTime ? (\n        // if time is negative then effect is shown without time.\n        // Component should be removed manually with time = 0\n        <div className='effect-box__time'>{formattedTime}</div>\n      ) : null}\n      {level > 0 && level < 256 ? (\n        <div className='effect-box__level'>{level + 1}</div>\n      ) : null}\n    </div>\n  </div>\n}\n\nexport const defaultIndicatorsState = {\n  chunksLoading: false,\n  readingFiles: false,\n  readonlyFiles: false,\n  writingFiles: false, // saving\n  appHasErrors: false,\n}\n\nconst indicatorIcons: Record<keyof typeof defaultIndicatorsState, string> = {\n  chunksLoading: 'add-grid',\n  readingFiles: 'arrow-bar-down',\n  writingFiles: 'arrow-bar-up',\n  appHasErrors: 'alert',\n  readonlyFiles: 'file-off',\n}\n\nexport default ({ indicators, effects }: { indicators: typeof defaultIndicatorsState, effects: readonly EffectType[] }) => {\n  const effectsRef = useRef(effects)\n  useEffect(() => {\n    effectsRef.current = effects\n  }, [effects])\n\n  useEffect(() => {\n    // todo use more precise timer for each effect\n    const interval = setInterval(() => {\n      for (const [index, effect] of effectsRef.current.entries()) {\n        if (effect.time === 0) {\n          // effect.removeEffect(effect.image)\n          return\n        }\n        effect.reduceTime(effect.image)\n      }\n    }, 1000)\n\n    return () => {\n      clearInterval(interval)\n    }\n  }, [])\n\n  const indicatorsMapped = Object.entries(defaultIndicatorsState).map(([key, state]) => ({\n    icon: indicatorIcons[key],\n    // preserve order\n    state: indicators[key],\n  }))\n  return <div className='effectsScreen-container'>\n    <div className='indicators-container'>\n      {\n        indicatorsMapped.map((indicator) => <div\n          key={indicator.icon} style={{\n            opacity: indicator.state ? 1 : 0,\n            transition: 'opacity 0.1s',\n          }}\n        >\n          <PixelartIcon iconName={indicator.icon} />\n        </div>)\n      }\n    </div>\n    <div className='effects-container'>\n      {\n        effects.map((effect) => <EffectBox\n          key={`effectBox-${effect.image}`}\n          image={effect.image}\n          time={effect.time}\n          level={effect.level}\n        />)\n      }\n    </div>\n  </div>\n}\n","import absorption from 'mc-assets/dist/other-textures/latest/mob_effect/absorption.png'\nimport glowing from 'mc-assets/dist/other-textures/latest/mob_effect/glowing.png'\nimport instant_health from 'mc-assets/dist/other-textures/latest/mob_effect/instant_health.png'\nimport nausea from 'mc-assets/dist/other-textures/latest/mob_effect/nausea.png'\nimport slow_falling from 'mc-assets/dist/other-textures/latest/mob_effect/slow_falling.png'\nimport weakness from 'mc-assets/dist/other-textures/latest/mob_effect/weakness.png'\nimport bad_omen from 'mc-assets/dist/other-textures/latest/mob_effect/bad_omen.png'\nimport haste from 'mc-assets/dist/other-textures/latest/mob_effect/haste.png'\nimport invisibility from 'mc-assets/dist/other-textures/latest/mob_effect/invisibility.png'\nimport night_vision from 'mc-assets/dist/other-textures/latest/mob_effect/night_vision.png'\nimport slowness from 'mc-assets/dist/other-textures/latest/mob_effect/slowness.png'\nimport wither from 'mc-assets/dist/other-textures/latest/mob_effect/wither.png'\nimport blindness from 'mc-assets/dist/other-textures/latest/mob_effect/blindness.png'\nimport health_boost from 'mc-assets/dist/other-textures/latest/mob_effect/health_boost.png'\nimport jump_boost from 'mc-assets/dist/other-textures/latest/mob_effect/jump_boost.png'\nimport poison from 'mc-assets/dist/other-textures/latest/mob_effect/poison.png'\nimport speed from 'mc-assets/dist/other-textures/latest/mob_effect/speed.png'\nimport conduit_power from 'mc-assets/dist/other-textures/latest/mob_effect/conduit_power.png'\nimport hero_of_the_village from 'mc-assets/dist/other-textures/latest/mob_effect/hero_of_the_village.png'\nimport levitation from 'mc-assets/dist/other-textures/latest/mob_effect/levitation.png'\nimport regeneration from 'mc-assets/dist/other-textures/latest/mob_effect/regeneration.png'\nimport strength from 'mc-assets/dist/other-textures/latest/mob_effect/strength.png'\nimport dolphins_grace from 'mc-assets/dist/other-textures/latest/mob_effect/dolphins_grace.png'\nimport hunger from 'mc-assets/dist/other-textures/latest/mob_effect/hunger.png'\nimport luck from 'mc-assets/dist/other-textures/latest/mob_effect/luck.png'\nimport resistance from 'mc-assets/dist/other-textures/latest/mob_effect/resistance.png'\nimport unluck from 'mc-assets/dist/other-textures/latest/mob_effect/unluck.png'\nimport fire_resistance from 'mc-assets/dist/other-textures/latest/mob_effect/fire_resistance.png'\nimport instant_damage from 'mc-assets/dist/other-textures/latest/mob_effect/instant_damage.png'\nimport mining_fatigue from 'mc-assets/dist/other-textures/latest/mob_effect/mining_fatigue.png'\nimport saturation from 'mc-assets/dist/other-textures/latest/mob_effect/saturation.png'\nimport water_breathing from 'mc-assets/dist/other-textures/latest/mob_effect/water_breathing.png'\nimport darkness from 'mc-assets/dist/other-textures/latest/mob_effect/darkness.png'\n\ninterface Images {\n  [key: string]: string;\n}\n\n// Export an object containing image URLs\nexport const images: Images = {\n  absorption,\n  glowing,\n  instant_health,\n  nausea,\n  slow_falling,\n  weakness,\n  bad_omen,\n  haste,\n  invisibility,\n  night_vision,\n  slowness,\n  wither,\n  blindness,\n  health_boost,\n  jump_boost,\n  poison,\n  speed,\n  conduit_power,\n  hero_of_the_village,\n  levitation,\n  regeneration,\n  strength,\n  dolphins_grace,\n  hunger,\n  luck,\n  resistance,\n  unluck,\n  bad_luck: unluck,\n  good_luck: luck,\n  fire_resistance,\n  instant_damage,\n  mining_fatigue,\n  saturation,\n  water_breathing,\n  darkness\n}\n","import { proxy, useSnapshot } from 'valtio'\nimport { useEffect, useMemo } from 'react'\nimport { inGameError } from '../utils'\nimport { fsState } from '../loadSave'\nimport { miscUiState } from '../globalState'\nimport { options } from '../optionsStorage'\nimport IndicatorEffects, { EffectType, defaultIndicatorsState } from './IndicatorEffects'\nimport { images } from './effectsImages'\n\nexport const state = proxy({\n  indicators: {\n    chunksLoading: false\n  },\n  effects: [] as EffectType[]\n})\n\nexport const addEffect = (newEffect: Omit<EffectType, 'reduceTime' | 'removeEffect'>) => {\n  const effectIndex = getEffectIndex(newEffect as EffectType)\n  if (typeof effectIndex === 'number') {\n    state.effects[effectIndex].time = newEffect.time\n    state.effects[effectIndex].level = newEffect.level\n  } else {\n    const effect = { ...newEffect, reduceTime, removeEffect }\n    state.effects.push(effect)\n  }\n}\n\nconst removeEffect = (image: string) => {\n  for (const [index, effect] of (state.effects).entries()) {\n    if (effect.image === image) {\n      state.effects.splice(index, 1)\n    }\n  }\n}\n\nconst reduceTime = (image: string) => {\n  for (const [index, effect] of (state.effects).entries()) {\n    if (effect.image === image) {\n      effect.time -= 1\n    }\n  }\n}\n\nconst getEffectIndex = (newEffect: EffectType) => {\n  for (const [index, effect] of (state.effects).entries()) {\n    if (effect.image === newEffect.image) {\n      return index\n    }\n  }\n  return null\n}\n\nexport default () => {\n  const stateIndicators = useSnapshot(state.indicators)\n  const { hasErrors } = useSnapshot(miscUiState)\n  const { disabledUiParts } = useSnapshot(options)\n  const { isReadonly, openReadOperations, openWriteOperations } = useSnapshot(fsState)\n  const allIndicators: typeof defaultIndicatorsState = {\n    readonlyFiles: isReadonly,\n    writingFiles: openWriteOperations > 0,\n    readingFiles: openReadOperations > 0,\n    appHasErrors: hasErrors,\n    ...stateIndicators,\n  }\n\n  useEffect(() => {\n    let alreadyWaiting = false\n    const listener = () => {\n      if (alreadyWaiting) return\n      state.indicators.chunksLoading = true\n      alreadyWaiting = true\n      void viewer.waitForChunksToRender().then(() => {\n        state.indicators.chunksLoading = false\n        alreadyWaiting = false\n      })\n    }\n    viewer.world.renderUpdateEmitter.on('dirty', listener)\n\n    return () => {\n      viewer.world.renderUpdateEmitter.off('dirty', listener)\n    }\n  }, [])\n\n  const effects = useSnapshot(state.effects)\n\n  useMemo(() => {\n    const effectsImages = Object.fromEntries(loadedData.effectsArray.map((effect) => {\n      const nameKebab = effect.name.replaceAll(/[A-Z]/g, (letter) => `_${letter.toLowerCase()}`).slice(1)\n      return [effect.id, images[nameKebab]]\n    }))\n    bot.on('entityEffect', (entity, effect) => {\n      if (entity.id !== bot.entity.id) return\n      const image = effectsImages[effect.id] ?? null\n      if (!image) {\n        inGameError(`received unknown effect id ${effect.id}}`)\n        return\n      }\n      const newEffect = {\n        image,\n        time: effect.duration / 20, // duration received in ticks\n        level: effect.amplifier,\n      }\n      addEffect(newEffect)\n    })\n    bot.on('entityEffectEnd', (entity, effect) => {\n      if (entity.id !== bot.entity.id) return\n      const image = effectsImages[effect.id] ?? null\n      if (!image) {\n        inGameError(`received unknown effect id ${effect.id}}}`)\n        return\n      }\n      removeEffect(image)\n    })\n  }, [])\n\n  return <IndicatorEffects\n    indicators={allIndicators}\n    effects={effects}\n  />\n}\n","import MessageFormattedString from './MessageFormattedString'\nimport './PlayerListOverlay.css'\n\n\ntype PlayersLists = Array<Array<Pick<import('mineflayer').Player, 'uuid' | 'username' | 'ping'>>>\n\ntype PlayerListOverlayProps = {\n  playersLists: PlayersLists,\n  clientId: string,\n  tablistHeader: string | Record<string, any> | null,\n  tablistFooter: string | Record<string, any> | null,\n  serverIP: string\n  style?: React.CSSProperties\n}\n\nexport default ({ playersLists, clientId, tablistHeader, tablistFooter, serverIP, style }: PlayerListOverlayProps) => {\n\n  return <div className=\"playerlist-container\" id=\"playerlist-container\" style={style}>\n    <span className=\"playerlist-title\">Server IP: {serverIP}</span>\n    <div className='playerlist-header'>\n      <MessageFormattedString message={tablistHeader} />\n    </div>\n    <div className=\"player-lists\">\n      {playersLists.map((list, index) => (\n        <div key={index} className=\"player-list\">\n          {list.map(player => (\n            <div key={player.uuid ?? player.username} className={`playerlist-entry${clientId === player.uuid ? ' active-player' : ''}`} id={`plist-player-${player.uuid}`}>\n              <MessageFormattedString message={player.username} />\n              <div className=\"playerlist-ping\">\n                <p className=\"playerlist-ping-value\">{player.ping}</p>\n                <p className=\"playerlist-ping-label\">ms</p>\n              </div>\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n    <div className='playerlist-footer'>\n      <MessageFormattedString message={tablistFooter} />\n    </div>\n  </div>\n}\n","import { useSnapshot } from 'valtio'\nimport { useState, useEffect, useMemo } from 'react'\nimport { isGameActive, loadedGameState } from '../globalState'\nimport PlayerListOverlay from './PlayerListOverlay'\nimport './PlayerListOverlay.css'\n\nconst MAX_ROWS_PER_COL = 10\n\ntype Players = typeof bot.players\n\nexport default () => {\n  const { serverIp } = useSnapshot(loadedGameState)\n  const [clientId, setClientId] = useState('')\n  const [players, setPlayers] = useState<Players>({})\n  const [isOpen, setIsOpen] = useState(false)\n\n  const handleKeyDown = (e) => {\n    if (!isGameActive(true)) return\n    if (e.key === 'Tab') {\n      setIsOpen(prev => true)\n      e.preventDefault()\n    }\n  }\n\n  const handleKeyUp = (e) => {\n    if (e.key === 'Tab') {\n      setIsOpen(prev => false)\n      e.preventDefault()\n    }\n  }\n\n  useMemo(() => {\n    function requestUpdate () {\n      // Placeholder for requestUpdate logic\n      setPlayers(bot.players)\n    }\n\n    bot.on('playerUpdated', () => requestUpdate())\n    bot.on('playerJoined', () => requestUpdate())\n    bot.on('playerLeft', () => requestUpdate())\n  }, [])\n\n  useEffect(() => {\n    setPlayers(bot.players)\n    if (bot.player) {\n      setClientId(bot.player.uuid)\n    } else {\n      bot._client.on('player_info', () => {\n        setClientId(bot.player?.uuid)\n      })\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    document.addEventListener('keyup', handleKeyUp)\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown)\n      document.removeEventListener('keyup', handleKeyUp)\n    }\n  }, [serverIp])\n\n\n  const playersArray = Object.values(players).sort((a, b) => {\n    if (a.username > b.username) return 1\n    if (a.username < b.username) return -1\n    return 0\n  })\n  const lists = [] as Array<typeof playersArray>\n\n  let tempList = [] as typeof playersArray\n  for (let i = 0; i < playersArray.length; i++) {\n    tempList.push(playersArray[i])\n\n    if ((i + 1) % MAX_ROWS_PER_COL === 0 || i + 1 === playersArray.length) {\n      lists.push([...tempList])\n      tempList = []\n    }\n  }\n\n  if (!isOpen) return null\n\n  return <PlayerListOverlay\n    playersLists={lists}\n    clientId={clientId}\n    tablistHeader={bot.tablist.header}\n    tablistFooter={bot.tablist.footer}\n    serverIP={serverIp ?? ''}\n  />\n}\n","export const INVISIBLE_BLOCKS = new Set(['air', 'void_air', 'cave_air', 'barrier'])\n","import { Vec3 } from 'vec3'\nimport { useRef, useEffect, useState, CSSProperties, Dispatch, SetStateAction } from 'react'\nimport { WorldWarp } from 'flying-squid/dist/lib/modules/warps'\nimport { TransformWrapper, TransformComponent, ReactZoomPanPinchRef } from 'react-zoom-pan-pinch'\nimport { MinimapDrawer, DrawerAdapter, ChunkInfo } from './MinimapDrawer'\nimport Button from './Button'\nimport Input from './Input'\nimport './Fullmap.css'\n\n\ntype FullmapProps = {\n  toggleFullMap: () => void,\n  adapter: DrawerAdapter,\n  drawer: MinimapDrawer | null,\n  canvasRef: any\n}\n\nexport default ({ toggleFullMap, adapter }: FullmapProps) => {\n  const [grid, setGrid] = useState(() => new Set<string>())\n  const zoomRef = useRef<ReactZoomPanPinchRef>(null)\n  const redrawCell = useRef(false)\n  const [lastWarpPos, setLastWarpPos] = useState({ x: 0, y: 0, z: 0 })\n  const stateRef = useRef({ scale: 1, positionX: 0, positionY: 0 })\n  const cells = useRef({ columns: 0, rows: 0 })\n  const [isWarpInfoOpened, setIsWarpInfoOpened] = useState(false)\n  const [initWarp, setInitWarp] = useState<WorldWarp | undefined>(undefined)\n  const [warpPreview, setWarpPreview] = useState<{ name: string, x: number, z: number, clientX: number, clientY: number } | undefined>(undefined)\n\n  const updateGrid = () => {\n    const wrapperRect = zoomRef.current?.instance.wrapperComponent?.getBoundingClientRect()\n    if (!wrapperRect) return\n    const cellSize = 64\n    const columns = Math.ceil(wrapperRect.width / (cellSize * stateRef.current.scale))\n    const rows = Math.ceil(wrapperRect.height / (cellSize * stateRef.current.scale))\n    cells.current.rows = rows\n    cells.current.columns = columns\n    const leftBorder = - Math.floor(stateRef.current.positionX / (stateRef.current.scale * cellSize)) * cellSize\n    const topBorder = - Math.floor(stateRef.current.positionY / (stateRef.current.scale * cellSize)) * cellSize\n    const newGrid = new Set<string>()\n    for (let row = -1; row < rows; row += 1) {\n      for (let col = -1; col < columns; col += 1) {\n        const x = leftBorder + col * cellSize\n        const y = topBorder + row * cellSize\n        newGrid.add(`${x},${y}`)\n      }\n    }\n    setGrid(newGrid)\n  }\n\n  useEffect(() => {\n    adapter.full = true\n    console.log('[fullmap] set full property to true')\n    updateGrid()\n  }, [])\n\n  return <div\n    style={{\n      position: 'fixed',\n      isolation: 'isolate',\n      inset: '0px',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: 'rgba(0, 0, 0, 0.4)',\n      zIndex: 100\n    }}\n  >\n    {window.screen.width > 500 ? <div\n      style={{\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        zIndex: '-1'\n      }}\n      onClick={toggleFullMap}\n    />\n      : <Button\n        icon=\"close-box\"\n        onClick={toggleFullMap}\n        style={{\n          position: 'absolute',\n          top: '20px',\n          right: '20px',\n          zIndex: 1\n        }}\n      />}\n    <TransformWrapper\n      limitToBounds={false}\n      ref={zoomRef}\n      minScale={0.1}\n      doubleClick={{\n        disabled: false\n      }}\n      panning={{\n        allowLeftClickPan: true,\n        allowRightClickPan: false\n      }}\n      onTransformed={(ref, state) => {\n        stateRef.current = { ...state }\n      }}\n      onPanningStop={() => {\n        updateGrid()\n      }}\n      onZoomStop={() => {\n        updateGrid()\n      }}\n    >\n      <TransformComponent\n        wrapperClass=\"map\"\n        wrapperStyle={{\n          willChange: 'transform',\n        }}\n      >\n        {[...grid].map((cellCoords) => {\n          const [x, y] = cellCoords.split(',').map(Number)\n          const playerChunkLeft = Math.floor(adapter.playerPosition.x / 16) * 16\n          const playerChunkTop = Math.floor(adapter.playerPosition.z / 16) * 16\n          const wrapperRect = zoomRef.current?.instance.wrapperComponent?.getBoundingClientRect()\n          const offsetX = Math.floor((wrapperRect?.width ?? 0) / (8 * 16)) * 16\n          const offsetY = Math.floor((wrapperRect?.height ?? 0) / (8 * 16)) * 16\n\n          return <MapChunk\n            key={'mapcell:' + cellCoords}\n            x={x}\n            y={y}\n            scale={stateRef.current.scale}\n            adapter={adapter}\n            worldX={playerChunkLeft + x / 4 - offsetX}\n            worldZ={playerChunkTop + y / 4 - offsetY}\n            setIsWarpInfoOpened={setIsWarpInfoOpened}\n            setLastWarpPos={setLastWarpPos}\n            redraw={redrawCell.current}\n            setInitWarp={setInitWarp}\n            setWarpPreview={setWarpPreview}\n          />\n        })}\n      </TransformComponent>\n    </TransformWrapper>\n    {warpPreview && <div\n      style={{\n        position: 'absolute',\n        top: warpPreview.clientY - 70,\n        left: warpPreview.clientX - 70,\n        textAlign: 'center',\n        fontSize: '1.5em',\n        textShadow: '0.1em 0 black, 0 0.1em black, -0.1em 0 black, 0 -0.1em black, -0.1em -0.1em black, -0.1em 0.1em black, 0.1em -0.1em black, 0.1em 0.1em black'\n      } as any}\n    >\n      {warpPreview.name}\n      <div>\n        {warpPreview.x} {warpPreview.z}\n      </div>\n    </div>}\n    {\n      isWarpInfoOpened && <WarpInfo\n        adapter={adapter}\n        warpPos={lastWarpPos}\n        setIsWarpInfoOpened={setIsWarpInfoOpened}\n        afterWarpIsSet={() => {\n          redrawCell.current = !redrawCell.current\n        }}\n        initWarp={initWarp}\n        setInitWarp={setInitWarp}\n        toggleFullMap={toggleFullMap}\n      />\n    }\n  </div>\n}\n\n\nconst MapChunk = (\n  { x, y, scale, adapter, worldX, worldZ, setIsWarpInfoOpened, setLastWarpPos, redraw, setInitWarp, setWarpPreview }:\n  {\n    x: number,\n    y: number,\n    scale: number,\n    adapter: DrawerAdapter,\n    worldX: number,\n    worldZ: number,\n    setIsWarpInfoOpened: (x: boolean) => void,\n    setLastWarpPos: (obj: { x: number, y: number, z: number }) => void,\n    redraw?: boolean\n    setInitWarp?: (warp: WorldWarp | undefined) => void\n    setWarpPreview?: (warpInfo) => void\n  }\n) => {\n  const containerRef = useRef(null)\n  const drawerRef = useRef<MinimapDrawer | null>(null)\n  const touchTimer = useRef<ReturnType<typeof setTimeout> | null>(null)\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const [isCanvas, setIsCanvas] = useState(false)\n\n  const longPress = (e) => {\n    touchTimer.current = setTimeout(() => {\n      touchTimer.current = null\n      handleClick(e)\n    }, 500)\n  }\n\n  const cancel = () => {\n    if (touchTimer.current) clearTimeout(touchTimer.current)\n  }\n\n  const handleClick = (e: MouseEvent | TouchEvent) => {\n    // console.log('click:', e)\n    if (!drawerRef.current) return\n    let clientX: number\n    let clientY: number\n    if ('buttons' in e && e.button === 2) {\n      clientX = e.clientX\n      clientY = e.clientY\n    } else if ('changedTouches' in e) {\n      clientX = (e).changedTouches[0].clientX\n      clientY = (e).changedTouches[0].clientY\n    } else { return }\n    const [x, z] = getXZ(clientX, clientY)\n    const mapX = Math.floor(x + worldX)\n    const mapZ = Math.floor(z + worldZ)\n    const y = adapter.getHighestBlockY(mapX, mapZ)\n    drawerRef.current.setWarpPosOnClick(new Vec3(mapX, y, mapZ))\n    setLastWarpPos(drawerRef.current.lastWarpPos)\n    const { lastWarpPos } = drawerRef.current\n    const initWarp = adapter.warps.find(warp => Math.hypot(lastWarpPos.x - warp.x, lastWarpPos.z - warp.z) < 2)\n    setInitWarp?.(initWarp)\n    setIsWarpInfoOpened(true)\n  }\n\n  const getXZ = (clientX: number, clientY: number) => {\n    const rect = canvasRef.current!.getBoundingClientRect()\n    const factor = scale * (drawerRef.current?.mapPixel ?? 1)\n    const x = (clientX - rect.left) / factor\n    const y = (clientY - rect.top) / factor\n    return [x, y]\n  }\n\n  const handleMouseMove = (e: MouseEvent) => {\n    const [x, z] = getXZ(e.clientX, e.clientY)\n    const warp = adapter.warps.find(w => Math.hypot(w.x - x - worldX, w.z - z - worldZ) < 2)\n    setWarpPreview?.(\n      warp ? { name: warp.name, x: warp.x, z: warp.z, clientX: e.clientX, clientY: e.clientY } : undefined\n    )\n  }\n\n  const handleRedraw = (key?: string, chunk?: ChunkInfo) => {\n    if (key !== `${worldX / 16},${worldZ / 16}`) return\n    adapter.mapDrawer.canvas = canvasRef.current!\n    adapter.mapDrawer.full = true\n    // console.log('handle redraw:', key)\n    // if (chunk) {\n    //   drawerRef.current?.chunksStore.set(key, chunk)\n    // }\n    if (!adapter.chunksStore.has(key)) {\n      adapter.chunksStore.set(key, 'requested')\n      void adapter.loadChunk(key)\n      return\n    }\n    const timeout = setTimeout(() => {\n      const center = new Vec3(worldX + 8, 0, worldZ + 8)\n      drawerRef.current!.lastBotPos = center\n      drawerRef.current?.drawChunk(key)\n      // drawerRef.current?.drawWarps(center)\n      // drawerRef.current?.drawPlayerPos(center.x, center.z)\n      clearTimeout(timeout)\n    }, 100)\n  }\n\n  useEffect(() => {\n    // if (canvasRef.current && !drawerRef.current) {\n    //   drawerRef.current = adapter.mapDrawer\n    // } else if (canvasRef.current && drawerRef.current) {\n    // }\n    if (canvasRef.current) void adapter.drawChunkOnCanvas(`${worldX / 16},${worldZ / 16}`, canvasRef.current)\n  }, [canvasRef.current])\n\n  useEffect(() => {\n    canvasRef.current?.addEventListener('contextmenu', handleClick)\n    canvasRef.current?.addEventListener('touchstart', longPress)\n    canvasRef.current?.addEventListener('touchend', cancel)\n    canvasRef.current?.addEventListener('touchmove', cancel)\n    canvasRef.current?.addEventListener('mousemove', handleMouseMove)\n\n    return () => {\n      canvasRef.current?.removeEventListener('contextmenu', handleClick)\n      canvasRef.current?.removeEventListener('touchstart', longPress)\n      canvasRef.current?.removeEventListener('touchend', cancel)\n      canvasRef.current?.removeEventListener('touchmove', cancel)\n      canvasRef.current?.removeEventListener('mousemove', handleMouseMove)\n    }\n  }, [canvasRef.current, scale])\n\n  useEffect(() => {\n    // handleRedraw()\n  }, [drawerRef.current, redraw])\n\n  useEffect(() => {\n    const intersectionObserver = new IntersectionObserver((entries) => {\n      for (const entry of entries) {\n        if (entry.isIntersecting) {\n          setIsCanvas(true)\n        }\n      }\n    })\n    intersectionObserver.observe(containerRef.current!)\n\n    // adapter.on('chunkReady', handleRedraw)\n\n    return () => {\n      intersectionObserver.disconnect()\n      // adapter.off('chunkReady', handleRedraw)\n    }\n  }, [])\n\n  return <div\n    ref={containerRef}\n    style={{\n      position: 'absolute',\n      width: '64px',\n      height: '64px',\n      top: `${y}px`,\n      left: `${x}px`,\n    }}\n  >\n    <canvas\n      ref={canvasRef}\n      style={{\n        width: '100%',\n        height: '100%',\n        imageRendering: 'pixelated'\n      }}\n      width={64}\n      height={64}\n    />\n  </div>\n}\n\nconst WarpInfo = (\n  { adapter, warpPos, setIsWarpInfoOpened, afterWarpIsSet, initWarp, toggleFullMap }:\n  {\n    adapter: DrawerAdapter,\n    warpPos: { x: number, y: number, z: number },\n    setIsWarpInfoOpened: Dispatch<SetStateAction<boolean>>,\n    afterWarpIsSet?: () => void\n    initWarp?: WorldWarp,\n    setInitWarp?: React.Dispatch<React.SetStateAction<WorldWarp | undefined>>,\n    toggleFullMap?: ({ command }: { command: string }) => void\n  }\n) => {\n  const [warp, setWarp] = useState<WorldWarp>(initWarp ?? {\n    name: '',\n    x: warpPos?.x ?? 100,\n    y: warpPos?.y ?? 100,\n    z: warpPos?.z ?? 100,\n    color: '',\n    disabled: false,\n    world: adapter.world\n  })\n\n  const posInputStyle: CSSProperties = {\n    flexGrow: '1',\n  }\n  const fieldCont: CSSProperties = {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '5px'\n  }\n\n  const updateChunk = () => {\n    for (let i = -1; i < 2; i += 1) {\n      for (let j = -1; j < 2; j += 1) {\n        adapter.emit(\n          'chunkReady',\n          `${Math.floor(warp.x / 16) + j},${Math.floor(warp.z / 16) + i}`\n        )\n      }\n    }\n  }\n\n  const tpNow = () => {\n    adapter.off('updateChunk', tpNow)\n  }\n\n  const quickTp = () => {\n    toggleFullMap?.({ command: 'ui.toggleMap' })\n    adapter.quickTp?.(warp.x, warp.z)\n  }\n\n  return <div\n    style={{\n      position: 'absolute',\n      inset: '0px',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexDirection: 'column',\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      fontSize: '0.8em',\n      transform: 'scale(2)'\n    }}\n  >\n    <form\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '10px',\n        width: window.screen.width > 500 ? '100%' : '50%',\n        minWidth: '100px',\n        maxWidth: '300px',\n        padding: '20px',\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        border: '2px solid black'\n      }}\n    >\n      <h2 style={{ alignSelf: 'center' }}>Point on the map</h2>\n      <div style={fieldCont}>\n        <div>\n          Name:\n        </div>\n        <Input\n          defaultValue={warp.name}\n          onChange={(e) => {\n            if (!e.target) return\n            setWarp(prev => { return { ...prev, name: e.target.value } })\n          }}\n          autoFocus\n        />\n      </div>\n      <div style={fieldCont}>\n        <div>\n          X:\n        </div>\n        <Input\n          rootStyles={posInputStyle}\n          defaultValue={warp.x ?? 100}\n          onChange={(e) => {\n            if (!e.target) return\n            setWarp(prev => { return { ...prev, x: Number(e.target.value) } })\n          }}\n        />\n        <div>\n          Z:\n        </div>\n        <Input\n          rootStyles={posInputStyle}\n          defaultValue={warp.z ?? 100}\n          onChange={(e) => {\n            if (!e.target) return\n            setWarp(prev => { return { ...prev, z: Number(e.target.value) } })\n          }}\n        />\n      </div>\n      <div style={fieldCont}>\n        <div>Color:</div>\n        <Input\n          type='color'\n          defaultValue={warp.color === '' ? '#232323' : warp.color}\n          onChange={(e) => {\n            if (!e.target) return\n            setWarp(prev => { return { ...prev, color: e.target.value } })\n          }}\n          rootStyles={{ width: '30px', }}\n          style={{ left: '0px' }}\n        />\n      </div>\n      <div style={fieldCont} >\n        <label htmlFor='warp-disabled'>Disabled:</label>\n        <input\n          id='warp-disabled'\n          type=\"checkbox\"\n          checked={warp.disabled ?? false}\n          onChange={(e) => {\n            if (!e.target) return\n            setWarp(prev => { return { ...prev, disabled: e.target.checked } })\n          }}\n        />\n      </div>\n      <Button\n        style={{ alignSelf: 'center' }}\n        onClick={() => {\n          quickTp()\n        }}\n      >Quick TP</Button>\n      <div style={fieldCont}>\n        <Button\n          onClick={() => {\n            setIsWarpInfoOpened(false)\n          }}\n        >Cancel</Button>\n        <Button\n          onClick={() => {\n            adapter.setWarp({ ...warp })\n            console.log(adapter.warps)\n            setIsWarpInfoOpened(false)\n            updateChunk()\n            afterWarpIsSet?.()\n          }}\n          type='submit'\n        >Add Warp</Button>\n        {initWarp && <Button\n          onClick={() => {\n            const index = adapter.warps.findIndex(thisWarp => thisWarp.name === warp.name)\n            if (index !== -1) {\n              adapter.setWarp({ name: warp.name, x: 0, y: 0, z: 0, color: '', disabled: false, world: '' }, true)\n              setIsWarpInfoOpened(false)\n              updateChunk()\n              afterWarpIsSet?.()\n            }\n          }}\n        >Delete</Button>}\n      </div>\n    </form>\n  </div>\n}\n","import { useRef, useEffect, useState } from 'react'\nimport { MinimapDrawer, DrawerAdapter, ChunkInfo } from './MinimapDrawer'\nimport Fullmap from './Fullmap'\n\n\nexport type DisplayMode = 'fullmapOnly' | 'minimapOnly'\n\nexport default (\n  { adapter, showMinimap, showFullmap, singleplayer, fullMap, toggleFullMap, displayMode }:\n  {\n    adapter: DrawerAdapter,\n    showMinimap: string,\n    showFullmap: string,\n    singleplayer: boolean,\n    fullMap?: boolean,\n    toggleFullMap?: ({ command }: { command: string }) => void\n    displayMode?: DisplayMode\n  }\n) => {\n  const full = useRef(false)\n  const canvasTick = useRef(0)\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const warpsAndPartsCanvasRef = useRef<HTMLCanvasElement>(null)\n  const playerPosCanvasRef = useRef<HTMLCanvasElement>(null)\n  const warpsDrawerRef = useRef<MinimapDrawer | null>(null)\n  const drawerRef = useRef<MinimapDrawer | null>(null)\n  const playerPosDrawerRef = useRef<MinimapDrawer | null>(null)\n  const [position, setPosition] = useState({ x: 0, y: 0, z: 0 })\n\n  const updateMap = () => {\n    setPosition({ x: adapter.playerPosition.x, y: adapter.playerPosition.y, z: adapter.playerPosition.z })\n    if (drawerRef.current) {\n      if (!full.current) {\n        rotateMap()\n        drawerRef.current.draw(adapter.playerPosition)\n        drawerRef.current.drawPlayerPos()\n        drawerRef.current.drawWarps()\n      }\n      if (canvasTick.current % 300 === 0 && !fullMap) {\n        if ('requestIdleCallback' in window) {\n          requestIdleCallback(() => {\n            drawerRef.current?.clearChunksStore()\n          })\n        } else {\n          drawerRef.current.clearChunksStore()\n        }\n        canvasTick.current = 0\n      }\n    }\n    canvasTick.current += 1\n  }\n\n  const updateWarps = () => { }\n\n  const rotateMap = () => {\n    if (!drawerRef.current) return\n    drawerRef.current.canvas.style.transform = `rotate(${adapter.yaw}rad)`\n    if (!warpsDrawerRef.current) return\n    warpsDrawerRef.current.canvas.style.transform = `rotate(${adapter.yaw}rad)`\n  }\n\n  const updateChunkOnMap = (key: string, chunk: ChunkInfo) => {\n    adapter.chunksStore.set(key, chunk)\n  }\n\n  useEffect(() => {\n    if (canvasRef.current && !drawerRef.current) {\n      drawerRef.current = adapter.mapDrawer\n      drawerRef.current.canvas = canvasRef.current\n      // drawerRef.current.adapter.on('chunkReady', updateChunkOnMap)\n    } else if (canvasRef.current && drawerRef.current) {\n      drawerRef.current.canvas = canvasRef.current\n    }\n\n  }, [canvasRef.current])\n\n  // useEffect(() => {\n  //   if (warpsAndPartsCanvasRef.current && !warpsDrawerRef.current) {\n  //     warpsDrawerRef.current = new MinimapDrawer(warpsAndPartsCanvasRef.current, adapter)\n  //   } else if (warpsAndPartsCanvasRef.current && warpsDrawerRef.current) {\n  //     warpsDrawerRef.current.canvas = warpsAndPartsCanvasRef.current\n  //   }\n  // }, [warpsAndPartsCanvasRef.current])\n\n  // useEffect(() => {\n  //   if (playerPosCanvasRef.current && !playerPosDrawerRef.current) {\n  //     playerPosDrawerRef.current = new MinimapDrawer(playerPosCanvasRef.current, adapter)\n  //   } else if (playerPosCanvasRef.current && playerPosDrawerRef.current) {\n  //     playerPosDrawerRef.current.canvas = playerPosCanvasRef.current\n  //   }\n  // }, [playerPosCanvasRef.current])\n\n  useEffect(() => {\n    adapter.on('updateMap', updateMap)\n    adapter.on('updateWaprs', updateWarps)\n\n    return () => {\n      adapter.off('updateMap', updateMap)\n      adapter.off('updateWaprs', updateWarps)\n    }\n  }, [adapter])\n\n  useEffect(() => {\n    return () => {\n      // if (drawerRef.current) drawerRef.current.adapter.off('chunkReady', updateChunkOnMap)\n    }\n  }, [])\n\n  const displayFullmap = fullMap && displayMode !== 'minimapOnly' && (showFullmap === 'singleplayer' && singleplayer || showFullmap === 'always')\n  const displayMini = displayMode !== 'fullmapOnly' && (showMinimap === 'singleplayer' && singleplayer || showMinimap === 'always')\n  return displayFullmap\n    ? <Fullmap\n      toggleFullMap={() => {\n        toggleFullMap?.({ command: 'ui.toggleMap' })\n      }}\n      adapter={adapter}\n      drawer={drawerRef.current}\n      canvasRef={canvasRef}\n    />\n    : displayMini\n      ? <div\n        className='minimap'\n        style={{\n          position: 'absolute',\n          right: '0px',\n          top: '0px',\n          padding: '5px 5px 0px 0px',\n          textAlign: 'center',\n        }}\n        onClick={() => {\n          toggleFullMap?.({ command: 'ui.toggleMap' })\n        }}\n      >\n        <canvas\n          style={{\n            transition: '0.5s',\n            transitionTimingFunction: 'ease-out',\n            borderRadius: '1000px'\n          }}\n          width={80}\n          height={80}\n          ref={canvasRef}\n        />\n        <canvas\n          style={{\n            transition: '0.5s',\n            transitionTimingFunction: 'ease-out',\n            position: 'absolute',\n            left: '0px'\n          }}\n          width={80}\n          height={80}\n          ref={warpsAndPartsCanvasRef}\n        />\n        <canvas\n          style={{\n            transition: '0.5s',\n            transitionTimingFunction: 'ease-out',\n            position: 'absolute',\n            left: '0px'\n          }}\n          width={80}\n          height={80}\n          ref={playerPosCanvasRef}\n        />\n        <div\n          style={{\n            fontSize: '0.5em',\n            textShadow: '0.1em 0 black, 0 0.1em black, -0.1em 0 black, 0 -0.1em black, -0.1em -0.1em black, -0.1em 0.1em black, 0.1em -0.1em black, 0.1em 0.1em black'\n          }}\n        >\n          {position.x.toFixed(2)} {position.y.toFixed(2)} {position.z.toFixed(2)}\n        </div>\n      </div> : null\n}\n","import { Vec3 } from 'vec3'\nimport { TypedEventEmitter } from 'contro-max/build/typedEventEmitter'\nimport { WorldWarp } from 'flying-squid/dist/lib/modules/warps'\nimport { Chunk } from 'prismarine-world/types/world'\n\nexport type MapUpdates = {\n  updateBlockColor: (pos: Vec3) => void\n  updatePlayerPosition: () => void\n  updateWarps: () => void\n}\n\nexport interface DrawerAdapter extends TypedEventEmitter<MapUpdates> {\n  getHighestBlockY: (x: number, z: number, chunk?: Chunk) => number\n  clearChunksStore: (x: number, z: number) => void\n  chunksStore: Map<string, undefined | null | 'requested' | ChunkInfo >\n  playerPosition: Vec3\n  warps: WorldWarp[]\n  loadingChunksQueue: Set<string>\n  mapDrawer: MinimapDrawer\n  yaw: number\n  full: boolean\n  world: string\n  setWarp: (warp: WorldWarp, remove?: boolean) => void\n  quickTp?: (x: number, z: number) => void\n  loadChunk: (key: string) => Promise<void>\n  drawChunkOnCanvas: (key: string, canvas: HTMLCanvasElement) => Promise<void>\n}\n\nexport type ChunkInfo = {\n  heightmap: Uint8Array,\n  colors: string[],\n}\n\nexport class MinimapDrawer {\n  canvasWidthCenterX: number\n  canvasWidthCenterY: number\n  _mapSize: number\n  radius: number\n  ctx: CanvasRenderingContext2D\n  _canvas: HTMLCanvasElement\n  chunksInView = new Set<string>()\n  lastBotPos: Vec3\n  lastWarpPos: Vec3\n  mapPixel: number\n  yaw: number\n  chunksStore = new Map<string, undefined | null | 'requested' | ChunkInfo >()\n  loadingChunksQueue: undefined | Set<string>\n  warps: WorldWarp[]\n  loadChunk: undefined | ((key: string) => Promise<void>)\n  _full = false\n\n  setMapPixel () {\n    if (this.full) {\n      this.radius = Math.floor(Math.min(this.canvas.width, this.canvas.height) / 2)\n      this._mapSize = 16\n    } else {\n      this.radius = Math.floor(Math.min(this.canvas.width, this.canvas.height) / 2.2)\n      this._mapSize = this.radius * 2\n    }\n    this.mapPixel = Math.floor(this.radius * 2 / this.mapSize)\n  }\n\n  get full () {\n    return this._full\n  }\n\n  set full (full: boolean) {\n    this._full = full\n    this.setMapPixel()\n  }\n\n  get canvas () {\n    return this._canvas\n  }\n\n  set canvas (canvas: HTMLCanvasElement) {\n    this.ctx = canvas.getContext('2d', { willReadFrequently: true })!\n    this.ctx.imageSmoothingEnabled = false\n    this.canvasWidthCenterX = canvas.width / 2\n    this.canvasWidthCenterY = canvas.height / 2\n    this._canvas = canvas\n    this.setMapPixel()\n  }\n\n  get mapSize () {\n    return this._mapSize\n  }\n\n  set mapSize (mapSize: number) {\n    this._mapSize = mapSize\n    this.mapPixel = Math.floor(this.radius * 2 / this.mapSize)\n    this.draw(this.lastBotPos)\n  }\n\n  draw (botPos: Vec3,) {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\n    this.lastBotPos = botPos\n    this.updateChunksInView()\n    for (const key of this.chunksInView) {\n      if (!this.chunksStore.has(key) && !this.loadingChunksQueue?.has(key)) {\n        void this.loadChunk?.(key)\n      }\n      this.drawChunk(key)\n    }\n    if (!this.full) this.drawPartsOfWorld()\n  }\n\n  updateChunksInView (viewX?: number, viewZ?: number) {\n    const worldCenterX = viewX ?? this.lastBotPos.x\n    const worldCenterZ = viewZ ?? this.lastBotPos.z\n\n    const radius = this.mapSize / 2\n    const leftViewBorder = Math.floor((worldCenterX - radius) / 16) - 1\n    const rightViewBorder = Math.ceil((worldCenterX + radius) / 16)\n    const topViewBorder = Math.floor((worldCenterZ - radius) / 16) - 1\n    const bottomViewBorder = Math.ceil((worldCenterZ + radius) / 16)\n\n    this.chunksInView.clear()\n    for (let i = topViewBorder; i <= bottomViewBorder; i += 1) {\n      for (let j = leftViewBorder; j <= rightViewBorder; j += 1) {\n        this.chunksInView.add(`${j},${i}`)\n      }\n    }\n  }\n\n  drawChunk (key: string, chunkInfo?: ChunkInfo | null) {\n    const [chunkX, chunkZ] = key.split(',').map(Number)\n    const chunkWorldX = chunkX * 16\n    const chunkWorldZ = chunkZ * 16\n    const chunkCanvasX = Math.floor((chunkWorldX - this.lastBotPos.x) * this.mapPixel + this.canvasWidthCenterX)\n    const chunkCanvasY = Math.floor((chunkWorldZ - this.lastBotPos.z) * this.mapPixel + this.canvasWidthCenterY)\n    const chunk = chunkInfo ?? this.chunksStore.get(key)\n    if (typeof chunk !== 'object') {\n      const chunkSize = this.mapPixel * 16\n      this.ctx.fillStyle = chunk === 'requested' ? 'rgb(200, 200, 200)' : 'rgba(0, 0, 0, 0.5)'\n      this.ctx.fillRect(chunkCanvasX, chunkCanvasY, chunkSize, chunkSize)\n      return\n    }\n    for (let row = 0; row < 16; row += 1) {\n      for (let col = 0; col < 16; col += 1) {\n        const index = row * 16 + col\n        const color = chunk?.colors[index] ?? 'rgb(255, 0, 0)'\n        const pixelX = chunkCanvasX + this.mapPixel * col\n        const pixelY = chunkCanvasY + this.mapPixel * row\n        this.drawPixel(pixelX, pixelY, color)\n      }\n    }\n  }\n\n  drawPixel (pixelX: number, pixelY: number, color: string) {\n    // if (!this.full && Math.hypot(pixelX - this.canvasWidthCenterX, pixelY - this.canvasWidthCenterY) > this.radius) {\n    //   this.ctx.clearRect(pixelX, pixelY, this.mapPixel, this.mapPixel)\n    //   return\n    // }\n    this.ctx.fillStyle = color\n    this.ctx.fillRect(\n      pixelX,\n      pixelY,\n      this.mapPixel,\n      this.mapPixel\n    )\n  }\n\n  clearChunksStore () {\n    for (const key of this.chunksStore.keys()) {\n      const [x, z] = key.split(',').map(x => Number(x) * 16)\n      if (Math.hypot((this.lastBotPos.x - x), (this.lastBotPos.z - z)) > this.radius * 5) {\n        this.chunksStore.delete(key)\n      }\n    }\n  }\n\n  setWarpPosOnClick (mousePos: Vec3) {\n    this.lastWarpPos = new Vec3(mousePos.x, mousePos.y, mousePos.z)\n  }\n\n  drawWarps (centerPos?: Vec3) {\n    for (const warp of this.warps) {\n      // if (!full) {\n      //   const distance = this.getDistance(\n      //     centerPos?.x ?? this.adapter.playerPosition.x,\n      //     centerPos?.z ?? this.adapter.playerPosition.z,\n      //     warp.x,\n      //     warp.z\n      //   )\n      //   if (distance > this.mapSize) continue\n      // }\n      const offset = this.full ? 0 : this.radius * 0.1\n      const z = Math.floor(\n        (this.mapSize / 2 - (centerPos?.z ?? this.lastBotPos.z) + warp.z) * this.mapPixel\n      ) + offset\n      const x = Math.floor(\n        (this.mapSize / 2 - (centerPos?.x ?? this.lastBotPos.x) + warp.x) * this.mapPixel\n      ) + offset\n      const dz = z - this.canvasWidthCenterX\n      const dx = x - this.canvasWidthCenterY\n      const circleDist = Math.hypot(dx, dz)\n\n      const angle = Math.atan2(dz, dx)\n      const circleZ = circleDist > this.mapSize / 2 && !this.full ?\n        this.canvasWidthCenterX + this.mapSize / 2 * Math.sin(angle)\n        : z\n      const circleX = circleDist > this.mapSize / 2 && !this.full ?\n        this.canvasWidthCenterY + this.mapSize / 2 * Math.cos(angle)\n        : x\n      this.ctx.beginPath()\n      this.ctx.arc(\n        circleX,\n        circleZ,\n        circleDist > this.mapSize / 2 && !this.full\n          ? this.mapPixel * 1.5\n          : this.full ? this.mapPixel : this.mapPixel * 2,\n        0,\n        Math.PI * 2,\n        false\n      )\n      this.ctx.strokeStyle = 'black'\n      this.ctx.lineWidth = this.mapPixel\n      this.ctx.stroke()\n      this.ctx.fillStyle = warp.disabled ? 'rgba(255, 255, 255, 0.4)' : warp.color ?? '#d3d3d3'\n      this.ctx.fill()\n      this.ctx.closePath()\n    }\n  }\n\n  drawPartsOfWorld () {\n    this.ctx.fillStyle = 'white'\n    this.ctx.shadowOffsetX = 1\n    this.ctx.shadowOffsetY = 1\n    this.ctx.shadowColor = 'black'\n    this.ctx.font = `${this.radius / 4}px serif`\n    this.ctx.textAlign = 'center'\n    this.ctx.textBaseline = 'middle'\n    this.ctx.strokeStyle = 'black'\n    this.ctx.lineWidth = 1\n\n    const angle = - Math.PI / 2\n    const angleS = angle + Math.PI\n    const angleW = angle + Math.PI * 3 / 2\n    const angleE = angle + Math.PI / 2\n\n    this.ctx.strokeText(\n      'N',\n      this.canvasWidthCenterX + this.radius * Math.cos(angle),\n      this.canvasWidthCenterY + this.radius * Math.sin(angle)\n    )\n    this.ctx.strokeText(\n      'S',\n      this.canvasWidthCenterX + this.radius * Math.cos(angleS),\n      this.canvasWidthCenterY + this.radius * Math.sin(angleS)\n    )\n    this.ctx.strokeText(\n      'W',\n      this.canvasWidthCenterX + this.radius * Math.cos(angleW),\n      this.canvasWidthCenterY + this.radius * Math.sin(angleW)\n    )\n    this.ctx.strokeText(\n      'E',\n      this.canvasWidthCenterX + this.radius * Math.cos(angleE),\n      this.canvasWidthCenterY + this.radius * Math.sin(angleE)\n    )\n    this.ctx.fillText(\n      'N',\n      this.canvasWidthCenterX + this.radius * Math.cos(angle),\n      this.canvasWidthCenterY + this.radius * Math.sin(angle)\n    )\n    this.ctx.fillText(\n      'S',\n      this.canvasWidthCenterX + this.radius * Math.cos(angleS),\n      this.canvasWidthCenterY + this.radius * Math.sin(angleS)\n    )\n    this.ctx.fillText(\n      'W',\n      this.canvasWidthCenterX + this.radius * Math.cos(angleW),\n      this.canvasWidthCenterY + this.radius * Math.sin(angleW)\n    )\n    this.ctx.fillText(\n      'E',\n      this.canvasWidthCenterX + this.radius * Math.cos(angleE),\n      this.canvasWidthCenterY + this.radius * Math.sin(angleE)\n    )\n\n    this.ctx.shadowOffsetX = 0\n    this.ctx.shadowOffsetY = 0\n  }\n\n  drawPlayerPos (canvasWorldCenterX?: number, canvasWorldCenterZ?: number, disableTurn?: boolean) {\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0)\n\n    const x = (this.lastBotPos.x - (canvasWorldCenterX ?? this.lastBotPos.x)) * this.mapPixel\n    const z = (this.lastBotPos.z - (canvasWorldCenterZ ?? this.lastBotPos.z)) * this.mapPixel\n    const center = this.mapSize / 2 * this.mapPixel + (this.full ? 0 : this.radius * 0.1)\n    this.ctx.translate(center + x, center + z)\n    if (!disableTurn) this.ctx.rotate(-this.yaw)\n\n    const size = 3\n    const factor = this.full ? 2 : 1\n    const width = size * factor\n    const height = size * factor\n\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, -height)\n    this.ctx.lineTo(-width, height)\n    this.ctx.lineTo(width, height)\n    this.ctx.closePath()\n\n    this.ctx.strokeStyle = '#000000'\n    this.ctx.lineWidth = this.full ? 2 : 1\n    this.ctx.stroke()\n    this.ctx.fillStyle = '#FFFFFF'\n    this.ctx.fill()\n\n    // Reset transformations\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0)\n  }\n\n  rotateMap (angle: number) {\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0)\n    this.ctx.translate(this.canvasWidthCenterX, this.canvasWidthCenterY)\n    this.ctx.rotate(angle)\n    this.ctx.translate(-this.canvasWidthCenterX, -this.canvasWidthCenterY)\n  }\n}\n","import { useEffect, useState } from 'react'\nimport { versions } from 'minecraft-data'\nimport { simplify } from 'prismarine-nbt'\nimport RegionFile from 'prismarine-provider-anvil/src/region'\nimport { Vec3 } from 'vec3'\nimport { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\nimport { WorldWarp } from 'flying-squid/dist/lib/modules/warps'\nimport { TypedEventEmitter } from 'contro-max/build/typedEventEmitter'\nimport { PCChunk } from 'prismarine-chunk'\nimport { Chunk } from 'prismarine-world/types/world'\nimport { Block } from 'prismarine-block'\nimport { INVISIBLE_BLOCKS } from 'prismarine-viewer/viewer/lib/mesher/worldConstants'\nimport { getRenamedData } from 'flying-squid/dist/blockRenames'\nimport { useSnapshot } from 'valtio'\nimport BlockData from '../../prismarine-viewer/viewer/lib/moreBlockDataGenerated.json'\nimport preflatMap from '../preflatMap.json'\nimport { contro } from '../controls'\nimport { gameAdditionalState, showModal, hideModal, miscUiState, loadedGameState, activeModalStack } from '../globalState'\nimport { options } from '../optionsStorage'\nimport Minimap, { DisplayMode } from './Minimap'\nimport { ChunkInfo, DrawerAdapter, MapUpdates, MinimapDrawer } from './MinimapDrawer'\nimport { useIsModalActive } from './utilsApp'\n\nconst getBlockKey = (x: number, z: number) => {\n  return `${x},${z}`\n}\n\nconst findHeightMap = (obj: PCChunk): number[] | undefined => {\n  function search (obj: any): any | undefined {\n    for (const key in obj) {\n      if (['heightmap', 'heightmaps'].includes(key.toLowerCase())) {\n        return obj[key]\n      } else if (typeof obj[key] === 'object' && obj[key] !== null) {\n        const result = search(obj[key])\n        return result\n      }\n    }\n  }\n  return search(obj)\n}\n\nexport class DrawerAdapterImpl extends TypedEventEmitter<MapUpdates> implements DrawerAdapter {\n  playerPosition: Vec3\n  yaw: number\n  mapDrawer = new MinimapDrawer()\n  warps: WorldWarp[]\n  world: string\n  chunksStore = new Map<string, undefined | null | 'requested' | ChunkInfo >()\n  loadingChunksQueue = new Set<string>()\n  currChunk: PCChunk | undefined\n  currChunkPos: { x: number, z: number } = { x: 0, z: 0 }\n  isOldVersion: boolean\n  blockData: any\n  heightMap: Record<string, number> = {}\n  regions = new Map<string, RegionFile>()\n  chunksHeightmaps: Record<string, any> = {}\n  loadChunk: (key: string) => Promise<void>\n  loadChunkFullmap: ((key: string) => Promise<ChunkInfo | null | undefined>) | undefined\n  _full: boolean\n  isBuiltinHeightmapAvailable = false\n\n  constructor (pos?: Vec3) {\n    super()\n    this.full = false\n    this.playerPosition = pos ?? new Vec3(0, 0, 0)\n    this.warps = gameAdditionalState.warps\n    this.mapDrawer.warps = this.warps\n    this.mapDrawer.loadChunk = this.loadChunk\n    this.mapDrawer.loadingChunksQueue = this.loadingChunksQueue\n    this.mapDrawer.chunksStore = this.chunksStore\n\n    // check if should use heightmap\n    if (localServer) {\n      const chunkX = Math.floor(this.playerPosition.x / 16)\n      const chunkZ = Math.floor(this.playerPosition.z / 16)\n      const regionX = Math.floor(chunkX / 32)\n      const regionZ = Math.floor(chunkZ / 32)\n      const regionKey = `${regionX},${regionZ}`\n      const worldFolder = this.getSingleplayerRootPath()\n      if (worldFolder && options.minimapOptimizations) {\n        const path = `${worldFolder}/region/r.${regionX}.${regionZ}.mca`\n        const region = new RegionFile(path)\n        void region.initialize()\n        this.regions.set(regionKey, region)\n        const readX = chunkX % 32\n        const readZ = chunkZ % 32\n        void this.regions.get(regionKey)!.read(readX, readZ).then((rawChunk) => {\n          const chunk = simplify(rawChunk as any)\n          const heightmap = findHeightMap(chunk)\n          if (heightmap) {\n            this.isBuiltinHeightmapAvailable = true\n            this.loadChunkFullmap = this.loadChunkFromRegion\n            console.log('using heightmap')\n          } else {\n            this.isBuiltinHeightmapAvailable = false\n            this.loadChunkFullmap = this.loadChunkNoRegion\n            console.log('[minimap] not using heightmap')\n          }\n        }).catch(err => {\n          console.error(err)\n          this.isBuiltinHeightmapAvailable = false\n          this.loadChunkFullmap = this.loadChunkFromViewer\n        })\n      } else {\n        this.isBuiltinHeightmapAvailable = false\n        this.loadChunkFullmap = this.loadChunkFromViewer\n      }\n    } else {\n      this.isBuiltinHeightmapAvailable = false\n      this.loadChunkFullmap = this.loadChunkFromViewer\n    }\n    // if (localServer) {\n    //   this.overwriteWarps(localServer.warps)\n    //   this.on('cellReady', (key: string) => {\n    //     if (this.loadingChunksQueue.size === 0) return\n    //     const [x, z] = this.loadingChunksQueue.values().next().value.split(',').map(Number)\n    //     this.loadChunk(x, z)\n    //     this.loadingChunksQueue.delete(`${x},${z}`)\n    //   })\n    // } else {\n    //   const storageWarps = localStorage.getItem(`warps: ${loadedGameState.username} ${loadedGameState.serverIp ?? ''}`)\n    //   this.overwriteWarps(JSON.parse(storageWarps ?? '[]'))\n    // }\n    this.isOldVersion = versionToNumber(bot.version) < versionToNumber('1.13')\n    this.blockData = {}\n    for (const blockKey of Object.keys(BlockData.colors)) {\n      const renamedKey = getRenamedData('blocks', blockKey, '1.20.2', bot.version)\n      this.blockData[renamedKey as string] = BlockData.colors[blockKey]\n    }\n\n    viewer.world?.renderUpdateEmitter.on('chunkFinished', (key) => {\n      if (!this.loadingChunksQueue.has(key)) return\n      void this.loadChunk(key)\n      this.loadingChunksQueue.delete(key)\n    })\n  }\n\n  get full () {\n    return this._full\n  }\n\n  set full (full: boolean) {\n    console.log('this is minimap')\n    this.loadChunk = this.loadChunkMinimap\n    this.mapDrawer.loadChunk = this.loadChunk\n    this._full = full\n  }\n\n  overwriteWarps (newWarps: WorldWarp[]) {\n    this.warps.splice(0, this.warps.length)\n    for (const warp of newWarps) {\n      this.warps.push({ ...warp })\n    }\n  }\n\n  setWarp (warp: WorldWarp, remove?: boolean): void {\n    this.world = bot.game.dimension\n    const index = this.warps.findIndex(w => w.name === warp.name)\n    if (index === -1) {\n      this.warps.push(warp)\n    } else if (remove && index !== -1) {\n      this.warps.splice(index, 1)\n    } else {\n      this.warps[index] = warp\n    }\n    if (localServer) {\n      // type suppressed until server is updated. It works fine\n      void (localServer as any).setWarp(warp, remove)\n    } else if (remove) {\n      localStorage.removeItem(`warps: ${loadedGameState.username} ${loadedGameState.serverIp}`)\n    } else {\n      localStorage.setItem(`warps: ${loadedGameState.username} ${loadedGameState.serverIp}`, JSON.stringify(this.warps))\n    }\n    this.emit('updateWarps')\n  }\n\n  getHighestBlockY (x: number, z: number, chunk?: Chunk) {\n    const chunkX = Math.floor(x / 16) * 16\n    const chunkZ = Math.floor(z / 16) * 16\n    if (this.chunksHeightmaps[`${chunkX},${chunkZ}`]) {\n      return this.chunksHeightmaps[`${chunkX},${chunkZ}`][x - chunkX + (z - chunkZ) * 16] - 1\n    }\n    const source = chunk ?? bot.world\n    const { height, minY } = (bot.game as any)\n    for (let i = height; i > 0; i -= 1) {\n      const block = source.getBlock(new Vec3(x & 15, minY + i, z & 15))\n      if (block && !INVISIBLE_BLOCKS.has(block.name)) {\n        return minY + i\n      }\n    }\n    return minY\n  }\n\n  async getChunkSingleplayer (chunkX: number, chunkZ: number) {\n    // absolute coords\n    const region = (localServer!.overworld.storageProvider as any).getRegion(chunkX * 16, chunkZ * 16)\n    if (!region) return 'unavailable'\n    const chunk = await localServer!.players[0]!.world.getColumn(chunkX, chunkZ)\n    return chunk\n  }\n\n  async loadChunkMinimap (key: string) {\n    const [chunkX, chunkZ] = key.split(',').map(Number)\n    const chunkWorldX = chunkX * 16\n    const chunkWorldZ = chunkZ * 16\n    if (viewer.world.finishedChunks[`${chunkWorldX},${chunkWorldZ}`]) {\n      const heightmap = new Uint8Array(256)\n      const colors = Array.from({ length: 256 }).fill('') as string[]\n      for (let z = 0; z < 16; z += 1) {\n        for (let x = 0; x < 16; x += 1) {\n          const blockX = chunkWorldX + x\n          const blockZ = chunkWorldZ + z\n          const hBlock = viewer.world.highestBlocks.get(`${blockX},${blockZ}`)\n          const block = bot.world.getBlock(new Vec3(blockX, hBlock?.y ?? 0, blockZ))\n          // const block = Block.fromStateId(hBlock?.stateId ?? -1, hBlock?.biomeId ?? -1)\n          const index = z * 16 + x\n          if (!block || !hBlock) {\n            console.warn(`[loadChunk] ${chunkX}, ${chunkZ}, ${chunkWorldX + x}, ${chunkWorldZ + z}`)\n            heightmap[index] = 0\n            colors[index] = 'rgba(0, 0, 0, 0.5)'\n            continue\n          }\n          heightmap[index] = hBlock.y\n          let color: string\n          if (this.isOldVersion) {\n            color = BlockData.colors[preflatMap.blocks[`${block.type}:${block.metadata}`]?.replaceAll(/\\[.*?]/g, '')]\n            ?? 'rgb(0, 0, 255)'\n          } else {\n            color = this.blockData[block.name] ?? 'rgb(0, 255, 0)'\n          }\n          colors[index] = color\n        }\n      }\n      const chunk = { heightmap, colors }\n      this.applyShadows(chunk)\n      this.chunksStore.set(key, chunk)\n      this.emit(`chunkReady`, `${chunkX},${chunkZ}`)\n    } else {\n      this.loadingChunksQueue.add(`${chunkX},${chunkZ}`)\n      this.chunksStore.set(key, 'requested')\n    }\n  }\n\n  async loadChunkNoRegion (key: string) {\n    const [chunkX, chunkZ] = key.split(',').map(Number)\n    const chunkWorldX = chunkX * 16\n    const chunkWorldZ = chunkZ * 16\n    const chunkInfo = await this.getChunkSingleplayer(chunkX, chunkZ)\n    if (chunkInfo === 'unavailable') return null\n    const heightmap = new Uint8Array(256)\n    const colors = Array.from({ length: 256 }).fill('') as string[]\n    for (let z = 0; z < 16; z += 1) {\n      for (let x = 0; x < 16; x += 1) {\n        const blockX = chunkWorldX + x\n        const blockZ = chunkWorldZ + z\n        const blockY = this.getHighestBlockY(blockX, blockZ, chunkInfo)\n        const block = chunkInfo.getBlock(new Vec3(blockX & 15, blockY, blockZ & 15))\n        if (!block) {\n          console.warn(`[cannot get the block] ${chunkX}, ${chunkZ}, ${chunkWorldX + x}, ${chunkWorldZ + z}`)\n          return null\n        }\n        const index = z * 16 + x\n        heightmap[index] = blockY\n        const color = this.isOldVersion ? BlockData.colors[preflatMap.blocks[`${block.type}:${block.metadata}`]?.replaceAll(/\\[.*?]/g, '')] ?? 'rgb(0, 0, 255)' : this.blockData[block.name] ?? 'rgb(0, 255, 0)'\n        colors[index] = color\n      }\n    }\n    const chunk: ChunkInfo = { heightmap, colors }\n    this.applyShadows(chunk)\n    return chunk\n  }\n\n  async loadChunkFromRegion (key: string): Promise<ChunkInfo | null | undefined> {\n    const [chunkX, chunkZ] = key.split(',').map(Number)\n    const chunkWorldX = chunkX * 16\n    const chunkWorldZ = chunkZ * 16\n    const heightmap = await this.getChunkHeightMapFromRegion(chunkX, chunkZ) as unknown as Uint8Array\n    if (!heightmap) return null\n    const chunkInfo = await this.getChunkSingleplayer(chunkX, chunkZ)\n    if (chunkInfo === 'unavailable') return null\n    const colors = Array.from({ length: 256 }).fill('') as string[]\n    for (let z = 0; z < 16; z += 1) {\n      for (let x = 0; x < 16; x += 1) {\n        const blockX = chunkWorldX + x\n        const blockZ = chunkWorldZ + z\n        const index = z * 16 + x\n        heightmap[index] -= 1\n        if (heightmap[index] < 0) heightmap[index] = 0\n        const blockY = heightmap[index]\n        const block = chunkInfo.getBlock(new Vec3(blockX & 15, blockY, blockZ & 15))\n        if (!block) {\n          console.warn(`[cannot get the block] ${chunkX}, ${chunkZ}, ${chunkWorldX + x}, ${chunkWorldZ + z}`)\n          return null\n        }\n        const color = this.isOldVersion ? BlockData.colors[preflatMap.blocks[`${block.type}:${block.metadata}`]?.replaceAll(/\\[.*?]/g, '')] ?? 'rgb(0, 0, 255)' : this.blockData[block.name] ?? 'rgb(0, 255, 0)'\n        colors[index] = color\n      }\n    }\n    const chunk: ChunkInfo = { heightmap, colors }\n    this.applyShadows(chunk)\n    return chunk\n  }\n\n  getSingleplayerRootPath (): string | undefined {\n    return localServer!.options.worldFolder\n  }\n\n  async getChunkHeightMapFromRegion (chunkX: number, chunkZ: number, cb?: (hm: number[]) => void) {\n    const regionX = Math.floor(chunkX / 32)\n    const regionZ = Math.floor(chunkZ / 32)\n    const regionKey = `${regionX},${regionZ}`\n    if (!this.regions.has(regionKey)) {\n      const worldFolder = this.getSingleplayerRootPath()\n      if (!worldFolder) return\n      const path = `${worldFolder}/region/r.${regionX}.${regionZ}.mca`\n      const region = new RegionFile(path)\n      await region.initialize()\n      this.regions.set(regionKey, region)\n    }\n    const rawChunk = await this.regions.get(regionKey)!.read(chunkX % 32, chunkZ % 32)\n    const chunk = simplify(rawChunk as any)\n    console.log(`chunk ${chunkX}, ${chunkZ}:`, chunk)\n    const heightmap = findHeightMap(chunk)\n    console.log(`heightmap ${chunkX}, ${chunkZ}:`, heightmap)\n    cb?.(heightmap!)\n    return heightmap\n    // this.chunksHeightmaps[`${chunkX},${chunkZ}`] = heightmap\n  }\n\n  async loadChunkFromViewer (key: string) {\n    const [chunkX, chunkZ] = key.split(',').map(Number)\n    const chunkWorldX = chunkX * 16\n    const chunkWorldZ = chunkZ * 16\n    if (viewer.world.finishedChunks[`${chunkWorldX},${chunkWorldZ}`]) {\n      const heightmap = new Uint8Array(256)\n      const colors = Array.from({ length: 256 }).fill('') as string[]\n      for (let z = 0; z < 16; z += 1) {\n        for (let x = 0; x < 16; x += 1) {\n          const blockX = chunkWorldX + x\n          const blockZ = chunkWorldZ + z\n          const hBlock = viewer.world.highestBlocks.get(`${blockX},${blockZ}`)\n          const block = bot.world.getBlock(new Vec3(blockX, hBlock?.y ?? 0, blockZ))\n          // const block = Block.fromStateId(hBlock?.stateId ?? -1, hBlock?.biomeId ?? -1)\n          const index = z * 16 + x\n          if (!block || !hBlock) {\n            console.warn(`[loadChunk] ${chunkX}, ${chunkZ}, ${chunkWorldX + x}, ${chunkWorldZ + z}`)\n            heightmap[index] = 0\n            colors[index] = 'rgba(0, 0, 0, 0.5)'\n            continue\n          }\n          heightmap[index] = hBlock.y\n          const color = this.isOldVersion ? BlockData.colors[preflatMap.blocks[`${block.type}:${block.metadata}`]?.replaceAll(/\\[.*?]/g, '')] ?? 'rgb(0, 0, 255)' : this.blockData[block.name] ?? 'rgb(0, 255, 0)'\n          colors[index] = color\n        }\n      }\n      const chunk = { heightmap, colors }\n      this.applyShadows(chunk)\n      return chunk\n    } else {\n      return null\n    }\n  }\n\n  applyShadows (chunk: ChunkInfo) {\n    for (let j = 0; j < 16; j += 1) {\n      for (let i = 0; i < 16; i += 1) {\n        const index = j * 16 + i\n        const color = chunk.colors[index]\n        // if (i === 0 || j === 0 || i === 15 || j === 16) {\n        //   const r = Math.floor(Math.random() * 2)\n        //   chunk.colors[index] = r===0 ? this.makeDarker(color) : this.makeLighter(color)\n        //   continue\n        // }\n\n        const h = chunk.heightmap[index]\n        let isLighterOrDarker = 0\n\n        const r = chunk.heightmap[index + 1] ?? 0\n        const u = chunk.heightmap[index - 16] ?? 0\n        const ur = chunk.heightmap[index - 15] ?? 0\n        if (r > h || u > h || ur > h) {\n          chunk.colors[index] = this.makeDarker(color)\n          isLighterOrDarker -= 1\n        }\n\n        const l = chunk.heightmap[index - 1] ?? 0\n        const d = chunk.heightmap[index + 16] ?? 0\n        const dl = chunk.heightmap[index + 15] ?? 0\n        if (l > h || d > h || dl > h) {\n          chunk.colors[index] = this.makeLighter(color)\n          isLighterOrDarker += 1\n        }\n\n        let linkedIndex: number | undefined\n        if (i === 1) {\n          linkedIndex = index - 1\n        } else if (i === 14) {\n          linkedIndex = index + 1\n        } else if (j === 1) {\n          linkedIndex = index - 16\n        } else if (j === 14) {\n          linkedIndex = index + 16\n        }\n        if (linkedIndex !== undefined) {\n          const linkedColor = chunk.colors[linkedIndex]\n          switch (isLighterOrDarker) {\n            case 1:\n              chunk.colors[linkedIndex] = this.makeLighter(linkedColor)\n              break\n            case -1:\n              chunk.colors[linkedIndex] = this.makeDarker(linkedColor)\n              break\n            default:\n              break\n          }\n        }\n      }\n    }\n  }\n\n  makeDarker (color: string) {\n    let rgbArray = color.match(/\\d+/g)?.map(Number) ?? []\n    if (rgbArray.length !== 3) return color\n    rgbArray = rgbArray.map(element => {\n      let newColor = element - 20\n      if (newColor < 0) newColor = 0\n      return newColor\n    })\n    return `rgb(${rgbArray.join(',')})`\n  }\n\n  makeLighter (color: string) {\n    let rgbArray = color.match(/\\d+/g)?.map(Number) ?? []\n    if (rgbArray.length !== 3) return color\n    rgbArray = rgbArray.map(element => {\n      let newColor = element + 20\n      if (newColor > 255) newColor = 255\n      return newColor\n    })\n    return `rgb(${rgbArray.join(',')})`\n  }\n\n  clearChunksStore (x: number, z: number) {\n    for (const key of Object.keys(this.chunksStore)) {\n      const [chunkX, chunkZ] = key.split(',').map(Number)\n      if (Math.hypot((chunkX - x), (chunkZ - z)) > 300) {\n        delete this.chunksStore[key]\n        delete this.chunksHeightmaps[key]\n        for (let i = 0; i < 16; i += 1) {\n          for (let j = 0; j < 16; j += 1) {\n            delete this.heightMap[`${chunkX + i},${chunkZ + j}`]\n          }\n        }\n      }\n    }\n  }\n\n  quickTp (x: number, z: number) {\n    const y = this.getHighestBlockY(x, z)\n    bot.chat(`/tp ${x} ${y + 20} ${z}`)\n    const timeout = setTimeout(() => {\n      const y = this.getHighestBlockY(x, z)\n      bot.chat(`/tp ${x} ${y + 20} ${z}`)\n      clearTimeout(timeout)\n    }, 500)\n  }\n\n  async drawChunkOnCanvas (key: string, canvas: HTMLCanvasElement) {\n    // console.log('chunk', key, 'on canvas')\n    if (!this.loadChunkFullmap) {\n      // wait for it to be available\n      await new Promise(resolve => {\n        const interval = setInterval(() => {\n          if (this.loadChunkFullmap) {\n            clearInterval(interval)\n            resolve(undefined)\n          }\n        }, 100)\n        setTimeout(() => {\n          clearInterval(interval)\n          resolve(undefined)\n        }, 10_000)\n      })\n      if (!this.loadChunkFullmap) {\n        throw new Error('loadChunkFullmap not available')\n      }\n    }\n    const chunk = await this.loadChunkFullmap(key)\n    const [worldX, worldZ] = key.split(',').map(x => Number(x) * 16)\n    const center = new Vec3(worldX + 8, 0, worldZ + 8)\n    this.mapDrawer.lastBotPos = center\n    this.mapDrawer.canvas = canvas\n    this.mapDrawer.full = true\n    this.mapDrawer.drawChunk(key, chunk)\n  }\n}\n\nconst Inner = (\n  { adapter, displayMode, toggleFullMap }:\n  {\n    adapter: DrawerAdapterImpl\n    displayMode?: DisplayMode,\n    toggleFullMap?: ({ command }: { command?: string }) => void\n  }\n) => {\n\n  const updateWarps = (newWarps: WorldWarp[] | Error) => {\n    if (newWarps instanceof Error) {\n      console.error('An error occurred:', newWarps.message)\n      return\n    }\n\n    adapter.overwriteWarps(newWarps)\n  }\n\n  const updateMap = () => {\n    if (!adapter) return\n    adapter.playerPosition = bot.entity.position\n    adapter.yaw = bot.entity.yaw\n    adapter.emit('updateMap')\n  }\n\n  useEffect(() => {\n    bot.on('move', updateMap)\n    localServer?.on('warpsUpdated' as keyof ServerEvents, updateWarps)\n\n    return () => {\n      bot?.off('move', updateMap)\n      localServer?.off('warpsUpdated' as keyof ServerEvents, updateWarps)\n    }\n  }, [])\n\n  return <div>\n    <Minimap\n      adapter={adapter}\n      showMinimap={options.showMinimap}\n      showFullmap='always'\n      singleplayer={miscUiState.singleplayer}\n      fullMap={displayMode === 'fullmapOnly'}\n      toggleFullMap={toggleFullMap}\n      displayMode={displayMode}\n    />\n  </div>\n}\n\nexport default ({ displayMode }: { displayMode?: DisplayMode }) => {\n  const [adapter] = useState(() => new DrawerAdapterImpl(bot.entity.position))\n\n  const { showMinimap } = useSnapshot(options)\n  const fullMapOpened = useIsModalActive('full-map')\n\n\n  const readChunksHeightMaps = async () => {\n    const { worldFolder } = localServer!.options\n    const path = `${worldFolder}/region/r.0.0.mca`\n    const region = new RegionFile(path)\n    await region.initialize()\n    const chunks: Record<string, any> = {}\n    console.log('Reading chunks...')\n    console.log(chunks)\n    let versionDetected = false\n    for (const [i, _] of Array.from({ length: 32 }).entries()) {\n      for (const [k, _] of Array.from({ length: 32 }).entries()) {\n        // todo, may use faster reading, but features is not commonly used\n        // eslint-disable-next-line no-await-in-loop\n        const nbt = await region.read(i, k)\n        chunks[`${i},${k}`] = nbt\n        if (nbt && !versionDetected) {\n          const simplified = simplify(nbt)\n          const version = versions.pc.find(x => x['dataVersion'] === simplified.DataVersion)?.minecraftVersion\n          console.log('Detected version', version ?? 'unknown')\n          versionDetected = true\n        }\n      }\n    }\n    Object.defineProperty(chunks, 'simplified', {\n      get () {\n        const mapped = {}\n        for (const [i, _] of Array.from({ length: 32 }).entries()) {\n          for (const [k, _] of Array.from({ length: 32 }).entries()) {\n            const key = `${i},${k}`\n            const chunk = chunks[key]\n            if (!chunk) continue\n            mapped[key] = simplify(chunk)\n          }\n        }\n        return mapped\n      },\n    })\n    console.log('Done!', chunks)\n  }\n\n  if (\n    displayMode === 'minimapOnly'\n      ? showMinimap === 'never' || (showMinimap === 'singleplayer' && !miscUiState.singleplayer)\n      : !fullMapOpened\n  ) {\n    return null\n  }\n\n  const toggleFullMap = () => {\n    if (activeModalStack.at(-1)?.reactType === 'full-map') {\n      hideModal({ reactType: 'full-map' })\n    } else {\n      showModal({ reactType: 'full-map' })\n    }\n  }\n\n  return <Inner adapter={adapter} displayMode={displayMode} toggleFullMap={toggleFullMap} />\n}\n","interface Armor {\n  'helmet': number;\n  'chestplate': number | null;\n  'leggings': number | null;\n  'boots': number | null;\n}\n\nexport const armor: { [material: string]: Armor } = {\n  'turtle': {\n    'helmet': 2,\n    'chestplate': null,\n    'leggings': null,\n    'boots': null\n  },\n  'leather': {\n    'helmet': 1,\n    'chestplate': 3,\n    'leggings': 2,\n    'boots': 1\n  },\n  'golden': {\n    'helmet': 2,\n    'chestplate': 5,\n    'leggings': 3,\n    'boots': 1\n  },\n  'chainmail': {\n    'helmet': 2,\n    'chestplate': 5,\n    'leggings': 4,\n    'boots': 1\n  },\n  'iron': {\n    'helmet': 2,\n    'chestplate': 6,\n    'leggings': 5,\n    'boots': 2\n  },\n  'diamond': {\n    'helmet': 3,\n    'chestplate': 8,\n    'leggings': 6,\n    'boots': 3\n  },\n  'netherite': {\n    'helmet': 3,\n    'chestplate': 8,\n    'leggings': 6,\n    'boots': 3\n  }\n}\n\n","const getEffectClass = (effect) => {\n  switch (effect.id) {\n    case 19:\n      return 'poisoned'\n    case 20:\n      return 'withered'\n    case 22:\n      return 'absorption'\n    default:\n      return ''\n  }\n}\n\nexport const barEffectAdded = (htmlElement, effect) => {\n  const effectClass = getEffectClass(effect)\n  if (effectClass) {\n    htmlElement.classList.add(effectClass)\n  }\n}\n\nexport const barEffectEnded = (htmlElement, effect) => {\n  const effectClass = getEffectClass(effect)\n  if (effectClass) {\n    htmlElement.classList.remove(effectClass)\n  }\n}\n","import { useRef, useEffect } from 'react'\nimport SharedHudVars from './SharedHudVars'\nimport './HealthBar.css'\nimport { barEffectAdded, barEffectEnded } from './BarsCommon'\n\n\nexport type HealthBarProps = {\n  gameMode?: string,\n  isHardcore: boolean,\n  damaged: boolean,\n  healthValue: number,\n  effectToAdd?: number | null,\n  effectToRemove?: number | null,\n  resetEffects?: () => void\n  style?: React.CSSProperties\n}\n\nexport default ({\n  gameMode,\n  isHardcore,\n  damaged,\n  healthValue,\n  effectToAdd,\n  effectToRemove,\n  resetEffects,\n  style\n}: HealthBarProps) => {\n  const healthRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    if (healthRef.current) {\n      healthRef.current.classList.toggle('creative', gameMode === 'creative' || gameMode === 'spectator')\n    }\n  }, [gameMode])\n\n  useEffect(() => {\n    if (healthRef.current) {\n      if (isHardcore) {\n        healthRef.current.classList.add('hardcore')\n      } else {\n        healthRef.current.classList.remove('hardcore')\n      }\n    }\n  }, [isHardcore])\n\n  useEffect(() => {\n    if (healthRef.current) {\n      if (damaged) {\n        healthRef.current.classList.add('damaged')\n        console.log('damage')\n      } else {\n        healthRef.current.classList.remove('damaged')\n      }\n    }\n  }, [damaged])\n\n  useEffect(() => {\n    if (healthRef.current) {\n      if (healthValue <= 4) {\n        healthRef.current.classList.add('low')\n      } else {\n        healthRef.current.classList.remove('low')\n      }\n\n      const healthElement = healthRef.current\n      const hearts = healthElement.children\n\n      for (const heart of hearts) {\n        heart.classList.remove('full')\n        heart.classList.remove('half')\n      }\n\n      for (let i = 0; i < Math.ceil(healthValue / 2); i++) {\n        if (i >= hearts.length) break\n\n        if (healthValue % 2 !== 0 && Math.ceil(healthValue / 2) === i + 1) {\n          hearts[i].classList.add('half')\n        } else {\n          hearts[i].classList.add('full')\n        }\n      }\n    }\n  }, [healthValue])\n\n  useEffect(() => {\n    if (effectToAdd) {\n      barEffectAdded(healthRef.current, effectToAdd)\n    }\n    if (effectToRemove) {\n      barEffectEnded(healthRef.current, effectToRemove)\n    }\n    resetEffects?.()\n  }, [effectToAdd, effectToRemove])\n\n  return <SharedHudVars>\n    <div ref={healthRef} className='health' style={style}>\n      {\n        Array.from({ length: 10 }, () => 0)\n          .map((num, index) => <div\n            key={`heart-${index}`}\n            className='heart'\n          />)\n      }\n    </div>\n  </SharedHudVars>\n}\n","import { useRef, useState, useEffect } from 'react'\nimport SharedHudVars from './SharedHudVars'\nimport './FoodBar.css'\nimport { barEffectAdded, barEffectEnded } from './BarsCommon'\n\n\nexport type FoodBarProps = {\n  gameMode?: string,\n  food: number,\n  effectToAdd?: number | null,\n  effectToRemove?: number | null,\n  resetEffects?: () => void,\n  style?: React.CSSProperties\n}\n\nexport default ({\n  gameMode,\n  food,\n  effectToAdd,\n  effectToRemove,\n  resetEffects,\n  style\n}: FoodBarProps) => {\n  const foodRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    if (foodRef.current) {\n      foodRef.current.classList.toggle('creative', gameMode === 'creative' || gameMode === 'spectator')\n    }\n  }, [gameMode])\n\n  useEffect(() => {\n    const foodbar = foodRef.current\n    if (foodbar) {\n      foodbar.classList.toggle('low', food <= 5)\n\n      const foods = foodbar.children\n\n      for (const food of foods) {\n        food.classList.remove('full')\n        food.classList.remove('half')\n      }\n\n      for (let i = 0; i < Math.ceil(food / 2); i++) {\n        if (i >= foods.length) break\n\n        if (food % 2 !== 0 && Math.ceil(food / 2) === i + 1) {\n          foods[i].classList.add('half')\n        } else {\n          foods[i].classList.add('full')\n        }\n      }\n    }\n  }, [food])\n\n  useEffect(() => {\n    if (effectToAdd) {\n      barEffectAdded(foodRef.current, effectToAdd)\n    }\n    if (effectToRemove) {\n      barEffectEnded(foodRef.current, effectToRemove)\n    }\n    resetEffects?.()\n  }, [effectToAdd, effectToRemove])\n\n  return <SharedHudVars>\n    <div ref={foodRef} className='foodbar' style={style}>\n      {\n        Array.from({ length: 10 }, () => 0)\n          .map((num, index) => <div\n            key={`food-${index}`}\n            className='food'\n          />)\n      }\n    </div>\n  </SharedHudVars>\n}\n","import { useRef, useState, useEffect, CSSProperties } from 'react'\nimport SharedHudVars from './SharedHudVars'\nimport './ArmorBar.css'\n\n\nexport type ArmorBarProps = {\n  armorValue: number,\n  style?: CSSProperties\n}\n\nexport default ({\n  armorValue,\n  style\n}: ArmorBarProps) => {\n  const armorRef = useRef<HTMLDivElement>(null!)\n\n  useEffect(() => {\n    const armorElement = armorRef.current\n    const armors = armorElement.children\n\n    for (const armor of armors) {\n      armor.classList.remove('full')\n      armor.classList.remove('half')\n    }\n\n    for (let i = 0; i < Math.ceil(armorValue / 2); i++) {\n      if (i >= armors.length) break\n\n      if (armorValue % 2 !== 0 && Math.ceil(armorValue / 2) === i + 1) {\n        armors[i].classList.add('half')\n      } else {\n        armors[i].classList.add('full')\n      }\n    }\n  }, [armorValue])\n\n  return <SharedHudVars>\n    <div style={style ?? {}} ref={armorRef} className='armor_container' >\n      {\n        Array.from({ length: 10 }, () => 0)\n          .map((num, index) => <div\n            key={`armor-${index}`}\n            className='armor'\n          />)\n      }\n    </div>\n  </SharedHudVars>\n}\n","import { useRef, useEffect } from 'react'\nimport SharedHudVars from './SharedHudVars'\nimport './BreathBar.css'\n\nexport type BreathBarProps = {\n  oxygen: number,\n}\n\nexport default ({\n  oxygen,\n}: BreathBarProps) => {\n  const breathRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    const breathbar = breathRef.current\n    if (breathbar && oxygen < 20) {\n      breathbar.style.display = 'flex'\n      breathbar.classList.toggle('low', oxygen <= 5)\n\n      const breaths = breathbar.children\n\n      for (const breath of breaths) {\n        breath.classList.remove('full')\n        breath.classList.remove('half')\n      }\n\n      for (let i = 0; i < Math.ceil(oxygen / 2); i++) {\n        if (i >= breaths.length) break\n\n        if (oxygen % 2 !== 0 && Math.ceil(oxygen / 2) === i + 1) {\n          breaths[i].classList.add('half')\n        } else {\n          breaths[i].classList.add('full')\n        }\n      }\n    } else if (breathbar && oxygen >= 20) {\n      breathbar.style.display = 'none'\n    }\n  }, [oxygen])\n\n  return <SharedHudVars>\n    <div ref={breathRef} className='breathbar'>\n      {\n        Array.from({ length: 10 }, () => 0)\n          .map((num, index) => <div\n            key={`breath-${index}`}\n            className='breath'\n          />)\n      }\n    </div>\n  </SharedHudVars>\n}\n","import { useRef, useState, useMemo } from 'react'\nimport { GameMode } from 'mineflayer'\nimport { armor } from './armorValues'\nimport HealthBar from './HealthBar'\nimport FoodBar from './FoodBar'\nimport ArmorBar from './ArmorBar'\nimport BreathBar from './BreathBar'\nimport './HealthBar.css'\n\nexport default () => {\n  const [damaged, setDamaged] = useState(false)\n  const [healthValue, setHealthValue] = useState(bot.health)\n  const [food, setFood] = useState(bot.food)\n  const [oxygen, setOxygen] = useState(bot.oxygenLevel)\n  const [armorValue, setArmorValue] = useState(0)\n  const [gameMode, setGameMode] = useState<GameMode | ''>(bot.game.gameMode)\n  const [isHardcore, setIsHardcore] = useState(false)\n  const [effectToAdd, setEffectToAdd] = useState<number | null>(null)\n  const [effectToRemove, setEffectToRemove] = useState<number | null>(null)\n  const hurtTimeout = useRef<ReturnType<typeof setTimeout> | null>(null)\n\n  const getEffectClass = (effect) => {\n    switch (effect) {\n      case 19:\n        return 'poisoned'\n      case 20:\n        return 'withered'\n      case 22:\n        return 'absorption'\n      default:\n        return ''\n    }\n  }\n\n  const onDamage = () => {\n    setDamaged(prev => true)\n    if (hurtTimeout.current) clearTimeout(hurtTimeout.current)\n    hurtTimeout.current = setTimeout(() => {\n      setDamaged(prev => false)\n    }, 1000)\n  }\n\n  const updateHealth = (hValue) => {\n    setHealthValue(prev => hValue)\n  }\n\n  useMemo(() => {\n    bot.on('entityHurt', (entity) => {\n      if (entity !== bot.entity) return\n      onDamage()\n    })\n\n    bot.on('game', () => {\n      setGameMode(prev => bot.game.gameMode)\n      setIsHardcore(prev => bot.game.hardcore)\n    })\n\n    bot.on('entityEffect', (entity, effect) => {\n      if (entity !== bot.entity) return\n      setEffectToAdd(prev => effect.id)\n    })\n\n    bot.on('entityEffectEnd', (entity, effect) => {\n      if (entity !== bot.entity) return\n      setEffectToRemove(prev => effect.id)\n    })\n\n    bot.on('health', () => {\n      if (bot.health < healthValue) onDamage()\n      updateHealth(bot.health)\n      setFood(prev => bot.food)\n    })\n\n    bot.on('breath', () => {\n      setOxygen(prev => bot.oxygenLevel)\n    })\n\n    const upArmour = () => {\n      const armorSlots = new Set([5, 6, 7, 8])\n      let points = 0\n      for (const slotIndex of armorSlots) {\n        const item = bot.inventory.slots[slotIndex] ?? null\n        if (!item) continue\n        const armorName = item.name.split('_')\n        points += armor[armorName[0]]?.[armorName[1]] ?? 0\n      }\n      setArmorValue(points)\n    }\n    bot.inventory.on('updateSlot', upArmour)\n    upArmour()\n  }, [])\n\n  return <div>\n    <HealthBar\n      gameMode={gameMode}\n      isHardcore={isHardcore}\n      damaged={damaged}\n      healthValue={healthValue}\n      effectToAdd={effectToAdd}\n      effectToRemove={effectToRemove}\n      resetEffects={() => {\n        setEffectToAdd(null)\n        setEffectToRemove(null)\n      }}\n    />\n    <ArmorBar\n      armorValue={armorValue}\n      style={gameMode !== 'survival' && gameMode !== 'adventure' ? { display: 'none' } : { display: 'flex' }}\n    />\n    <FoodBar\n      gameMode={gameMode}\n      food={food}\n      effectToAdd={effectToAdd}\n      effectToRemove={effectToRemove}\n      resetEffects={() => {\n        setEffectToAdd(null)\n        setEffectToRemove(null)\n      }}\n    />\n    <BreathBar\n      oxygen={gameMode !== 'survival' && gameMode !== 'adventure' ? 0 : oxygen}\n    />\n  </div>\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"xp-bar-bg\":\"xp-bar-bg-Ugs21v\",\"xpBarBg\":\"xp-bar-bg-Ugs21v\",\"xp-bar\":\"xp-bar-Vg4hn0\",\"xpBar\":\"xp-bar-Vg4hn0\",\"xp-label\":\"xp-label-omcEHZ\",\"xpLabel\":\"xp-label-omcEHZ\"};","import SharedHudVars from './SharedHudVars'\nimport styles from './XPBar.module.css'\n\nexport default ({ progress, level, gamemode }: { progress: number; level: number, gamemode: string }) => (\n  <SharedHudVars>\n    <div\n      id=\"xp-bar-bg\"\n      className={styles['xp-bar-bg']}\n      style={{ display: gamemode === 'creative' || gamemode === 'spectator' ? 'none' : 'block' }}\n    >\n      <div className={styles['xp-bar']} style={{ width: `${182 * progress}px` }} />\n      <span className={styles['xp-label']} style={{ display: level > 0 ? 'block' : 'none' }}>{level}</span>\n    </div>\n  </SharedHudVars>\n)\n","import { useState, useMemo } from 'react'\nimport { GameMode } from 'mineflayer'\nimport XPBar from './XPBar'\n\n\nexport default () => {\n  const [progress, setProgress] = useState(0)\n  const [level, setLevel] = useState(0)\n  const [gamemode, setGamemode] = useState<GameMode | ''>(bot.game.gameMode)\n\n  useMemo(() => {\n    const onXpUpdate = () => {\n      setProgress(bot.experience.progress)\n      setLevel(bot.experience.level)\n    }\n    onXpUpdate()\n\n    bot.on('experience', onXpUpdate)\n\n    bot.on('game', () => {\n      setGamemode(prev => bot.game.gameMode)\n    })\n  }, [])\n\n  return <XPBar progress={progress} level={level} gamemode={gamemode} />\n}\n","import prettyBytes from 'pretty-bytes'\nimport { openWorldFromHttpDir, openWorldZip } from './browserfs'\nimport { getResourcePackNames, installTexturePack, resourcePackState, updateTexturePackInstalledState } from './resourcePack'\nimport { setLoadingScreenStatus } from './utils'\n\nexport const getFixedFilesize = (bytes: number) => {\n  return prettyBytes(bytes, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\n}\n\nconst inner = async () => {\n  const qs = new URLSearchParams(window.location.search)\n  const mapUrlDir = qs.getAll('mapDir')\n  const mapUrlDirGuess = qs.get('mapDirGuess')\n  const mapUrlDirBaseUrl = qs.get('mapDirBaseUrl')\n  if (mapUrlDir.length) {\n    await openWorldFromHttpDir(mapUrlDir, mapUrlDirBaseUrl ?? undefined)\n    return true\n  }\n  if (mapUrlDirGuess) {\n    // await openWorldFromHttpDir(undefined, mapUrlDirGuess)\n    return true\n  }\n  let mapUrl = qs.get('map')\n  const texturepack = qs.get('texturepack')\n  // fixme\n  if (texturepack) mapUrl = texturepack\n  if (!mapUrl) return false\n\n  if (texturepack) {\n    await updateTexturePackInstalledState()\n    if (resourcePackState.resourcePackInstalled) {\n      if (!confirm(`You are going to install a new resource pack, which will REPLACE the current one: ${await getResourcePackNames()[0]} Continue?`)) return\n    }\n  }\n  const name = mapUrl.slice(mapUrl.lastIndexOf('/') + 1).slice(-25)\n  const downloadThing = texturepack ? 'texturepack' : 'world'\n  setLoadingScreenStatus(`Downloading ${downloadThing} ${name}...`)\n\n  const response = await fetch(mapUrl)\n  const contentType = response.headers.get('Content-Type')\n  if (!contentType || !contentType.startsWith('application/zip')) {\n    alert('Invalid map file')\n  }\n  const contentLengthStr = response.headers?.get('Content-Length')\n  const contentLength = contentLengthStr && +contentLengthStr\n  setLoadingScreenStatus(`Downloading ${downloadThing} ${name}: have to download ${contentLength && getFixedFilesize(contentLength)}...`)\n\n  let downloadedBytes = 0\n  const buffer = await new Response(new ReadableStream({\n    async start (controller) {\n      if (!response.body) throw new Error('Server returned no response!')\n      const reader = response.body.getReader()\n\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        const { done, value } = await reader.read()\n\n        if (done) {\n          controller.close()\n          break\n        }\n\n        downloadedBytes += value.byteLength\n\n        // Calculate download progress as a percentage\n        const progress = contentLength ? (downloadedBytes / contentLength) * 100 : undefined\n        setLoadingScreenStatus(`Download ${downloadThing} progress: ${progress === undefined ? '?' : Math.floor(progress)}% (${getFixedFilesize(downloadedBytes)} / ${contentLength && getFixedFilesize(contentLength)})`, false, true)\n\n\n        // Pass the received data to the controller\n        controller.enqueue(value)\n      }\n    },\n  })).arrayBuffer()\n  if (texturepack) {\n    const name = mapUrl.slice(mapUrl.lastIndexOf('/') + 1).slice(-30)\n    await installTexturePack(buffer, name)\n  } else {\n    await openWorldZip(buffer)\n  }\n}\n\nexport default async () => {\n  try {\n    return await inner()\n  } catch (err) {\n    setLoadingScreenStatus(`Failed to download. Either refresh page or remove map param from URL. Reason: ${err.message}`)\n    return true\n  }\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"debug-left-side\":\"debug-left-side-L_D95v\",\"debugLeftSide\":\"debug-left-side-L_D95v\",\"debug-right-side\":\"debug-right-side-mFhvHG\",\"debugRightSide\":\"debug-right-side-mFhvHG\",\"empty\":\"empty-x7G63G\"};","import { useEffect, useRef, useMemo, useState } from 'react'\nimport * as THREE from 'three'\nimport type { Block } from 'prismarine-block'\nimport { getFixedFilesize } from '../downloadAndOpenFile'\nimport { options } from '../optionsStorage'\nimport styles from './DebugOverlay.module.css'\n\nexport default () => {\n  const received = useRef({ ...defaultPacketsCount })\n  const sent = useRef({ ...defaultPacketsCount })\n  const customEntries = useRef({} as any)\n  const receivedTotal = useRef(0)\n  const packetsCountByNamePerSec = useRef({\n    received: {} as { [key: string]: number },\n    sent: {} as { [key: string]: number }\n  })\n  window.packetsCountByNamePerSec = packetsCountByNamePerSec\n  const packetsCountByNamePer10Sec = useRef({\n    received: {} as { [key: string]: number },\n    sent: {} as { [key: string]: number }\n  })\n  window.packetsCountByNamePer10Sec = packetsCountByNamePer10Sec\n  const packetsCountByName = useRef({\n    received: {} as { [key: string]: number },\n    sent: {} as { [key: string]: number }\n  })\n  window.packetsCountByName = packetsCountByName\n  const ignoredPackets = useRef(new Set([] as any[]))\n  const [packetsString, setPacketsString] = useState('')\n  const [showDebug, setShowDebug] = useState(false)\n  const [pos, setPos] = useState<{ x: number, y: number, z: number }>({ x: 0, y: 0, z: 0 })\n  const [skyL, setSkyL] = useState(0)\n  const [blockL, setBlockL] = useState(0)\n  const [biomeId, setBiomeId] = useState(0)\n  const [day, setDay] = useState(0)\n  const [entitiesCount, setEntitiesCount] = useState(0)\n  const [dimension, setDimension] = useState('')\n  const [cursorBlock, setCursorBlock] = useState<Block | null>(null)\n  const minecraftYaw = useRef(0)\n  const minecraftQuad = useRef(0)\n  const { rendererDevice } = viewer.world\n\n  const quadsDescription = [\n    'north (towards negative Z)',\n    'east (towards positive X)',\n    'south (towards positive Z)',\n    'west (towards negative X)'\n  ]\n\n  const viewDegToMinecraft = (yaw) => yaw % 360 - 180 * (yaw < 0 ? -1 : 1)\n\n  const handleF3 = (e) => {\n    if (e.code === 'F3') {\n      setShowDebug(prev => !prev)\n      e.preventDefault()\n    }\n  }\n\n  const readPacket = (data, { name }, _buf, fullBuffer) => {\n    if (fullBuffer) {\n      const size = fullBuffer.byteLength\n      receivedTotal.current += size\n      received.current.size += size\n    }\n    received.current.count++\n    managePackets('received', name, data)\n  }\n\n  const managePackets = (type, name, data) => {\n    packetsCountByName.current[type][name] ??= 0\n    packetsCountByName.current[type][name]++\n    packetsCountByNamePerSec.current[type][name] ??= 0\n    packetsCountByNamePerSec.current[type][name]++\n    packetsCountByNamePer10Sec.current[type][name] ??= 0\n    packetsCountByNamePer10Sec.current[type][name]++\n    if (options.debugLogNotFrequentPackets && !ignoredPackets.current.has(name) && !hardcodedListOfDebugPacketsToIgnore[type].includes(name)) {\n      if (packetsCountByNamePerSec.current[type][name] > 5 || packetsCountByName.current[type][name] > 100) { // todo think of tracking the count within 10s\n        console.info(`[packet ${name} was ${type} too frequent] Ignoring...`)\n        ignoredPackets.current.add(name)\n      } else {\n        console.info(`[packet ${type}] ${name}`, /* ${JSON.stringify(data, null, 2)}` */ data)\n      }\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleF3)\n    let update = 0\n    const packetsUpdateInterval = setInterval(() => {\n      setPacketsString(` ${received.current.count} (${(received.current.size / 1024).toFixed(2)} KB/s, ${getFixedFilesize(receivedTotal.current)})  ${sent.current.count}`)\n      received.current = { ...defaultPacketsCount }\n      sent.current = { ...defaultPacketsCount }\n      packetsCountByNamePerSec.current.received = {}\n      packetsCountByNamePerSec.current.sent = {}\n      if (update++ % 10 === 0) {\n        packetsCountByNamePer10Sec.current.received = {}\n        packetsCountByNamePer10Sec.current.sent = {}\n      }\n    }, 1000)\n\n    const freqUpdateInterval = setInterval(() => {\n      setPos({ ...bot.entity.position })\n      setSkyL(bot.world.getSkyLight(bot.entity.position))\n      setBlockL(bot.world.getBlockLight(bot.entity.position))\n      setBiomeId(bot.world.getBiome(bot.entity.position))\n      setDimension(bot.game.dimension)\n      setDay(bot.time.day)\n      setCursorBlock(bot.blockAtCursor(5))\n      setEntitiesCount(Object.values(bot.entities).length)\n    }, 100)\n\n    // @ts-expect-error\n    bot._client.on('packet', readPacket)\n    // @ts-expect-error\n    bot._client.on('packet_name' as any, (name, data) => readPacket(data, { name })) // custom client\n    bot._client.on('writePacket' as any, (name, data) => {\n      sent.current.count++\n      managePackets('sent', name, data)\n    })\n\n    return () => {\n      document.removeEventListener('keydown', handleF3)\n      clearInterval(packetsUpdateInterval)\n      clearInterval(freqUpdateInterval)\n    }\n  }, [])\n\n  useEffect(() => {\n    minecraftYaw.current = viewDegToMinecraft(bot.entity.yaw * -180 / Math.PI)\n    minecraftQuad.current = Math.floor(((minecraftYaw.current + 180) / 90 + 0.5) % 4)\n  }, [bot.entity.yaw])\n\n  if (!showDebug) return null\n\n  return <>\n    <div className={styles['debug-left-side']}>\n      <p>Prismarine Web Client ({bot.version})</p>\n      <p>E: {entitiesCount}</p>\n      <p>{dimension}</p>\n      <div className={styles.empty} />\n      <p>XYZ: {pos.x.toFixed(3)} / {pos.y.toFixed(3)} / {pos.z.toFixed(3)}</p>\n      <p>Chunk: {Math.floor(pos.x % 16)} ~ {Math.floor(pos.z % 16)} in {Math.floor(pos.x / 16)} ~ {Math.floor(pos.z / 16)}</p>\n      <p>Packets: {packetsString}</p>\n      <p>Facing (viewer): {bot.entity.yaw.toFixed(3)} {bot.entity.pitch.toFixed(3)}</p>\n      <p>Facing (minecraft): {quadsDescription[minecraftQuad.current]} ({minecraftYaw.current.toFixed(1)} {(bot.entity.pitch * -180 / Math.PI).toFixed(1)})</p>\n      <p>Light: {blockL} ({skyL} sky)</p>\n\n      <p>Biome: minecraft:{loadedData.biomesArray[biomeId]?.name ?? 'unknown biome'}</p>\n      <p>Day: {day}</p>\n      <div className={styles.empty} />\n      {Object.entries(customEntries.current).map(([name, value]) => <p key={name}>{name}: {value}</p>)}\n    </div>\n\n    <div className={styles['debug-right-side']}>\n      <p>Renderer: {rendererDevice}</p>\n      <div className={styles.empty} />\n      {cursorBlock ? (<>\n        <p>{cursorBlock.name}</p>\n        {\n          Object.entries(cursorBlock.getProperties()).map(([name, value], idx, arr) => {\n            return <p key={name}>\n              {name}: {\n                typeof value === 'boolean' ? (\n                  <span style={{ color: value ? 'lightgreen' : 'red' }}>{String(value)}</span>\n                ) : value\n              }\n            </p>\n          })\n        }\n      </>)\n        : ''}\n      {cursorBlock ? (\n        <p>Looking at: {cursorBlock.position.x} {cursorBlock.position.y} {cursorBlock.position.z}</p>\n      ) : ''}\n    </div>\n  </>\n}\n\nconst hardcodedListOfDebugPacketsToIgnore = {\n  received: [\n    'entity_velocity',\n    'sound_effect',\n    'rel_entity_move',\n    'entity_head_rotation',\n    'entity_metadata',\n    'entity_move_look',\n    'teams',\n    'entity_teleport',\n    'entity_look',\n    'ping',\n    'entity_update_attributes',\n    'player_info',\n    'update_time',\n    'animation',\n    'entity_equipment',\n    'entity_destroy',\n    'named_entity_spawn',\n    'update_light',\n    'set_slot',\n    'block_break_animation',\n    'map_chunk',\n    'spawn_entity',\n    'world_particles',\n    'keep_alive',\n    'chat',\n    'playerlist_header',\n    'scoreboard_objective',\n    'scoreboard_score',\n    'entity_status'\n  ],\n  sent: [\n    'pong',\n    'position',\n    'look',\n    'keep_alive',\n    'position_look'\n  ]\n}\n\nconst defaultPacketsCount = {\n  count: 0,\n  size: 0\n}\n","import { guiOptionsScheme, tryFindOptionConfig } from './optionsGuiScheme'\nimport { options } from './optionsStorage'\n\nexport const customCommandsConfig = {\n  chat: {\n    input: [\n      {\n        type: 'text',\n        placeholder: 'Command to send e.g. gamemode creative'\n      }\n    ],\n    handler ([command]) {\n      bot.chat(`/${command.replace(/^\\//, '')}`)\n    }\n  },\n  setOrToggleSetting: {\n    input: [\n      {\n        type: 'select',\n        // maybe title case?\n        options: Object.keys(options)\n      },\n      {\n        type: 'select',\n        options: ['toggle', 'set']\n      },\n      ([setting = '', action = ''] = []) => {\n        const value = options[setting]\n        if (!action || value === undefined || action === 'toggle') return null\n        if (action === 'set') {\n          const getBase = () => {\n            const config = tryFindOptionConfig(setting as any)\n            if (config && 'values' in config) {\n              return {\n                type: 'select',\n                options: config.values\n              }\n            }\n            if (config?.type === 'toggle' || typeof value === 'boolean') {\n              return {\n                type: 'select',\n                options: ['true', 'false']\n              }\n            }\n            if (config?.type === 'slider' || value.type === 'number') {\n              return {\n                type: 'number',\n              }\n            }\n            return {\n              type: 'text'\n            }\n          }\n          return {\n            ...getBase(),\n            placeholder: value\n          }\n        }\n      }\n    ],\n    handler ([setting, action, value]) {\n      if (action === 'toggle' || action === undefined) {\n        const value = options[setting]\n        const config = tryFindOptionConfig(setting)\n        if (config && 'values' in config && config.values) {\n          const { values } = config\n          const currentIndex = values.indexOf(value)\n          const nextIndex = (currentIndex + 1) % values.length\n          options[setting] = values[nextIndex]\n        } else {\n          options[setting] = typeof value === 'boolean' ? !value : typeof value === 'number' ? value + 1 : value\n        }\n      } else {\n        options[setting] = value\n      }\n    }\n  },\n  jsScripts: {\n    input: [\n      {\n        type: 'text',\n        placeholder: 'JavaScript code to run in main thread (sensitive!)'\n      }\n    ],\n    handler ([code]) {\n      // eslint-disable-next-line no-new-func -- this is a feature, not a bug\n      new Function(code)()\n    }\n  },\n  // openCommandsScreen: {}\n}\n","import Screen from './Screen'\nimport { useIsWidgetActive } from './utilsApp'\n\nexport default ({ name, title, children }) => {\n  const isWidgetActive = useIsWidgetActive(name)\n\n  if (!isWidgetActive) return null\n\n  return <Screen backdrop title={title}>{children}</Screen>\n}\n","import { useEffect, useRef, useState } from 'react'\nimport { WorldRendererThree } from 'prismarine-viewer/viewer/lib/worldrendererThree'\nimport FullScreenWidget from './FullScreenWidget'\n\nexport const name = 'loaded world signs'\n\nexport default () => {\n  const [selected, setSelected] = useState([] as string[])\n  const allSignsPos = [] as string[]\n  const signs = viewer.world instanceof WorldRendererThree ? [...viewer.world.chunkTextures.values()].flatMap(textures => {\n    return Object.entries(textures).map(([signPosKey, texture]) => {\n      allSignsPos.push(signPosKey)\n      const pos = signPosKey.split(',').map(Number)\n      const isSelected = selected.includes(signPosKey)\n      return <div key={signPosKey}>\n        <div style={{ color: 'white', userSelect: 'text', fontSize: 8, }}>{pos.join(', ')}</div>\n        <div\n          style={{ background: isSelected ? 'rgba(255, 255, 255, 0.8)' : 'rgba(255, 255, 255, 0.5)', padding: 5, borderRadius: 5, cursor: 'pointer' }}\n          onClick={() => setSelected(selected.includes(signPosKey) ? selected.filter(x => x !== signPosKey) : [...selected, signPosKey])}>\n          <AddElem elem={texture.image} />\n        </div>\n      </div>\n    })\n  }) : []\n\n  return <FullScreenWidget name={name} title='Loaded Signs'>\n    <div>\n      {signs.length} signs currently in the scene:\n    </div>\n    <div\n      style={{ cursor: 'pointer', }} onClick={() => {\n        // toggle all\n        if (selected.length === allSignsPos.length) {\n          setSelected([])\n          return\n        }\n        setSelected([...allSignsPos])\n      }}>Select All</div>\n    {selected.length && <div\n      style={{ cursor: 'pointer', }} onClick={() => {\n        void navigator.clipboard.writeText(selected.join('\\n'))\n      }}>Copy Selected Signs</div>}\n    {signs}\n  </FullScreenWidget>\n}\n\nconst AddElem = ({ elem }) => {\n  const ref = useRef<HTMLDivElement>(null)\n  useEffect(() => {\n    elem.style.width = '100%'\n    elem.style.height = '100%'\n    ref.current!.appendChild(elem)\n    return () => {\n      elem.remove()\n    }\n  }, [])\n\n  return <div\n    ref={ref} style={{\n      height: '35px',\n    }} />\n}\n\n// for (const key of Object.keys(viewer.world.sectionObjects)) {\n//   const section = viewer.world.sectionObjects[key]\n//   for (const child of section.children) {\n//     if (child.name === 'mesh') child.visible = false\n//   }\n// }\n","import * as ModuleSignsViewer from './ModuleSignsViewer'\n\nexport default [ModuleSignsViewer]\n","// extracted by css-extract-rspack-plugin\nexport default {\"crosshair\":\"crosshair-eLqfh9\"};","import { proxy, useSnapshot } from 'valtio'\nimport { useEffect } from 'react'\nimport { activeModalStack, miscUiState } from '../globalState'\nimport SharedHudVars from './SharedHudVars'\nimport styles from './GamepadUiCursor.module.css'\n\nexport const gamepadUiCursorState = proxy({\n  x: 50,\n  y: 50,\n  multiply: 1,\n  display: false\n})\n\nexport const moveGamepadCursorByPx = (value: number, isX: boolean) => {\n  value *= gamepadUiCursorState.multiply * 3\n  const valueToPercentage = value / (isX ? window.innerWidth : window.innerHeight) * 100\n  gamepadUiCursorState[isX ? 'x' : 'y'] += valueToPercentage\n}\n\nexport default () => {\n  const hasModals = useSnapshot(activeModalStack).length > 0\n  const { x, y } = useSnapshot(gamepadUiCursorState)\n  const { usingGamepadInput, gameLoaded } = useSnapshot(miscUiState)\n\n  const doDisplay = usingGamepadInput && (hasModals || !gameLoaded)\n\n  useEffect(() => {\n    document.body.style.cursor = gameLoaded && !hasModals && usingGamepadInput ? 'none' : 'auto'\n  }, [usingGamepadInput, hasModals, gameLoaded])\n\n  useEffect(() => {\n    gamepadUiCursorState.display = doDisplay\n  }, [doDisplay])\n\n  if (!doDisplay) return null\n\n  return <SharedHudVars>\n    <div className={styles.crosshair} style={{ left: `${x}%`, top: `${y}%` }} />\n  </SharedHudVars>\n}\n","import { useCallback, useRef, useState } from 'react'\n\ninterface LongPressOptions {\n  shouldPreventDefault?: boolean;\n  delay?: number;\n}\n\nconst useLongPress = (\n  onLongPress: () => void,\n  onClick: () => void,\n  { shouldPreventDefault = true, delay = 300 }: LongPressOptions = {}\n) => {\n  const [longPressTriggered, setLongPressTriggered] = useState(false)\n  const timeout = useRef<number | undefined>()\n  const target = useRef<EventTarget | null>(null)\n\n  const start = useCallback(\n    (event: React.MouseEvent | React.TouchEvent) => {\n      if (shouldPreventDefault && event.target) {\n        event.target.addEventListener('touchend', preventDefault, {\n          passive: false\n        })\n        target.current = event.target\n      }\n      timeout.current = window.setTimeout(() => {\n        onLongPress()\n        setLongPressTriggered(true)\n      }, delay)\n    },\n    [onLongPress, delay, shouldPreventDefault]\n  )\n\n  const clear = useCallback(\n    (event: React.MouseEvent | React.TouchEvent) => {\n      if (timeout.current) clearTimeout(timeout.current)\n      if (!longPressTriggered) onClick()\n      setLongPressTriggered(false)\n      if (shouldPreventDefault && target.current) {\n        target.current.removeEventListener('touchend', preventDefault)\n      }\n    },\n    [shouldPreventDefault, onClick, longPressTriggered]\n  )\n\n  return {\n    onMouseDown: (e: React.MouseEvent) => start(e),\n    onTouchStart: (e: React.TouchEvent) => start(e),\n    onMouseUp: (e: React.MouseEvent) => clear(e),\n    onMouseLeave: (e: React.MouseEvent) => clear(e),\n    onTouchEnd: (e: React.TouchEvent) => clear(e)\n  }\n}\n\nconst preventDefault = (event: Event) => {\n  if (!('touches' in event)) return\n\n  const touchEvent = event as TouchEvent\n  if (touchEvent.touches.length < 2 && event.preventDefault) {\n    event.preventDefault()\n  }\n}\n\nexport default useLongPress\n","// extracted by css-extract-rspack-plugin\nexport default {\"mobile-top-btns\":\"mobile-top-btns-LkVyKp\",\"mobileTopBtns\":\"mobile-top-btns-LkVyKp\",\"pause-btn\":\"pause-btn-tfjBzl\",\"pauseBtn\":\"pause-btn-tfjBzl\",\"chat-btn\":\"chat-btn-BNyPws\",\"chatBtn\":\"chat-btn-BNyPws\",\"debug-btn\":\"debug-btn-aSsISO\",\"debugBtn\":\"debug-btn-aSsISO\"};","import { useEffect, useRef } from 'react'\nimport { f3Keybinds } from '../controls'\nimport { watchValue } from '../optionsStorage'\nimport { showModal, miscUiState, activeModalStack, hideCurrentModal } from '../globalState'\nimport { showOptionsModal } from './SelectOption'\nimport useLongPress from './useLongPress'\nimport styles from './MobileTopButtons.module.css'\n\n\nexport default () => {\n  const elRef = useRef<HTMLDivElement | null>(null)\n\n  const showMobileControls = (bl) => {\n    if (elRef.current) elRef.current.style.display = bl ? 'flex' : 'none'\n  }\n\n  useEffect(() => {\n    watchValue(miscUiState, o => {\n      showMobileControls(o.currentTouch)\n    })\n  }, [])\n\n  const onLongPress = async () => {\n    const select = await showOptionsModal('', f3Keybinds.filter(f3Keybind => f3Keybind.mobileTitle).map(f3Keybind => f3Keybind.mobileTitle))\n    if (!select) return\n    const f3Keybind = f3Keybinds.find(f3Keybind => f3Keybind.mobileTitle === select)\n    if (f3Keybind) f3Keybind.action()\n  }\n\n  const defaultOptions = {\n    shouldPreventDefault: true,\n    delay: 500,\n  }\n  const longPressEvent = useLongPress(onLongPress, () => {}, defaultOptions)\n\n  // ios note: just don't use <button>\n  return <div ref={elRef} className={styles['mobile-top-btns']} id=\"mobile-top\">\n    <div\n      className={styles['debug-btn']} onPointerDown={(e) => {\n        window.dispatchEvent(new MouseEvent('mousedown', { button: 1 }))\n      }}\n    >S\n    </div>\n    <div\n      className={styles['debug-btn']} onPointerDown={(e) => {\n        document.dispatchEvent(new KeyboardEvent('keydown', { code: 'F3' }))\n        document.dispatchEvent(new KeyboardEvent('keyup', { code: 'F3' }))\n      }} {...longPressEvent}\n    >F3\n    </div>\n    <div\n      className={styles['chat-btn']} onPointerDown={(e) => {\n        e.stopPropagation()\n        if (activeModalStack.at(-1)?.reactType === 'chat') {\n          hideCurrentModal()\n        } else {\n          showModal({ reactType: 'chat' })\n        }\n      }}\n    />\n    <div\n      className={styles['pause-btn']} onPointerDown={(e) => {\n        e.stopPropagation()\n        showModal({ reactType: 'pause-screen' })\n      }}\n    />\n  </div>\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"title\":\"title-rz05ZX\",\"pause_container\":\"pause_container-lI8D2f\",\"pauseContainer\":\"pause_container-lI8D2f\",\"row\":\"row-IKim4t\"};","import { join } from 'path'\nimport fs from 'fs'\nimport { useEffect } from 'react'\nimport { subscribe, useSnapshot } from 'valtio'\nimport { usedServerPathsV1 } from 'flying-squid/dist/lib/modules/world'\nimport { openURL } from 'prismarine-viewer/viewer/lib/simpleUtils'\nimport { Vec3 } from 'vec3'\nimport { generateSpiralMatrix } from 'flying-squid/dist/utils'\nimport { subscribeKey } from 'valtio/utils'\nimport {\n  activeModalStack,\n  showModal,\n  hideModal,\n  miscUiState,\n  openOptionsMenu\n} from '../globalState'\nimport { fsState } from '../loadSave'\nimport { disconnect } from '../flyingSquidUtils'\nimport { pointerLock, setLoadingScreenStatus } from '../utils'\nimport { closeWan, openToWanAndCopyJoinLink, getJoinLink } from '../localServerMultiplayer'\nimport { collectFilesToCopy, fileExistsAsyncOptimized, mkdirRecursive, uniqueFileNameFromWorldName } from '../browserfs'\nimport { useIsModalActive } from './utilsApp'\nimport { showOptionsModal } from './SelectOption'\nimport Button from './Button'\nimport Screen from './Screen'\nimport styles from './PauseScreen.module.css'\nimport { DiscordButton } from './DiscordButton'\nimport { showNotification } from './NotificationProvider'\nimport { appStatusState } from './AppStatusProvider'\n\nconst waitForPotentialRender = async () => {\n  return new Promise<void>(resolve => {\n    requestAnimationFrame(() => requestAnimationFrame(resolve as any))\n  })\n}\n\nexport const saveToBrowserMemory = async () => {\n  setLoadingScreenStatus('Saving world')\n  try {\n    await new Promise<void>(resolve => {\n      subscribeKey(appStatusState, 'isDisplaying', () => {\n        if (appStatusState.isDisplaying) {\n          resolve()\n        }\n      })\n    })\n    //@ts-expect-error\n    const { worldFolder } = localServer.options\n    const saveRootPath = await uniqueFileNameFromWorldName(worldFolder.split('/').pop(), `/data/worlds`)\n    await mkdirRecursive(saveRootPath)\n    console.log('made world folder', saveRootPath)\n    const allRootPaths = [...usedServerPathsV1]\n    const allFilesToCopy = [] as string[]\n    for (const dirBase of allRootPaths) {\n      // eslint-disable-next-line no-await-in-loop\n      if (dirBase.includes('.') && await fileExistsAsyncOptimized(join(worldFolder, dirBase))) {\n        allFilesToCopy.push(dirBase)\n        continue\n      }\n      // eslint-disable-next-line no-await-in-loop\n      let res = await collectFilesToCopy(join(worldFolder, dirBase), true)\n      if (dirBase === 'region') {\n        res = res.filter(x => x.endsWith('.mca'))\n      }\n      allFilesToCopy.push(...res.map(x => join(dirBase, x)))\n    }\n    console.log('paths collected')\n    const pathsSplitBasic = allFilesToCopy.filter(path => {\n      if (!path.startsWith('region/')) return true\n      const [x, z] = path.split('/').at(-1)!.split('.').slice(1, 3).map(Number)\n      return Math.abs(x) > 50 || Math.abs(z) > 50 // HACK: otherwise it's too big and we can't handle it in visual display\n    })\n    let copied = 0\n    let isRegionFiles = false\n    const upProgress = (totalSize: number) => {\n      copied++\n      let action = fsState.remoteBackend ? 'Downloading & copying' : 'Copying'\n      action += isRegionFiles ? ' region files (world chunks)' : ' basic save files'\n      setLoadingScreenStatus(`${action} files (${copied}/${totalSize})`)\n    }\n    const copyFiles = async (copyPaths: string[][]) => {\n      const totalSIze = copyPaths.flat().length\n      for (const copyFileGroup of copyPaths) {\n        // eslint-disable-next-line no-await-in-loop, @typescript-eslint/no-loop-func\n        await Promise.all(copyFileGroup.map(async (copyPath) => {\n          const srcPath = join(worldFolder, copyPath)\n          const savePath = join(saveRootPath, copyPath)\n          await mkdirRecursive(savePath)\n          await fs.promises.writeFile(savePath, await fs.promises.readFile(srcPath))\n          upProgress(totalSIze)\n          if (isRegionFiles) {\n            const regionFile = copyPath.split('/').at(-1)!\n            appStatusState.loadingChunksData![regionFile] = 'done'\n          }\n        }))\n        // eslint-disable-next-line no-await-in-loop\n        await waitForPotentialRender()\n      }\n    }\n    // basic save files\n    await copyFiles(splitByCopySize(pathsSplitBasic))\n    setLoadingScreenStatus('Preparing world chunks copying')\n    await waitForPotentialRender()\n\n    // region files\n    isRegionFiles = true\n    copied = 0\n    const regionFiles = allFilesToCopy.filter(x => !pathsSplitBasic.includes(x))\n    const regionFilesNumbers = regionFiles.map(x => x.split('/').at(-1)!.split('.').slice(1, 3).map(Number))\n    const xMin = Math.min(...regionFilesNumbers.flatMap(x => x[0]))\n    const zMin = Math.min(...regionFilesNumbers.flatMap(x => x[1]))\n    const xMax = Math.max(...regionFilesNumbers.flatMap(x => x[0]))\n    const zMax = Math.max(...regionFilesNumbers.flatMap(x => x[1]))\n    const playerPosRegion = bot.entity.position.divide(new Vec3(32 * 16, 32 * 16, 32 * 16)).floored()\n    const maxDistantRegion = Math.max(\n      Math.abs(playerPosRegion.x - xMin),\n      Math.abs(playerPosRegion.z - zMin),\n      Math.abs(playerPosRegion.x - xMax),\n      Math.abs(playerPosRegion.z - zMax)\n    )\n    const spiral = generateSpiralMatrix(maxDistantRegion)\n    const filesWithSpiral = spiral.filter(x => allFilesToCopy.includes(`region/r.${x[0]}.${x[1]}.mca`)).map(x => `region/r.${x[0]}.${x[1]}.mca`)\n    if (filesWithSpiral.length !== regionFiles.length) throw new Error('Something went wrong with region files')\n\n    appStatusState.loadingChunksData = Object.fromEntries(regionFiles.map(x => [x.split('/').at(-1)!, 'loading']))\n    appStatusState.loadingChunksDataPlayerChunk = { x: playerPosRegion.x, z: playerPosRegion.z }\n    await copyFiles(splitByCopySize(filesWithSpiral, 10))\n\n    return saveRootPath\n  } catch (err) {\n    console.error(err)\n    void showOptionsModal(`Error while saving the world: ${err.message}`, [])\n  } finally {\n    setLoadingScreenStatus(undefined)\n  }\n}\n\nconst splitByCopySize = (files: string[], copySize = 15) => {\n  return files.reduce<string[][]>((acc, cur, i) => {\n    if (i % copySize === 0) {\n      acc.push([])\n    }\n    acc.at(-1)!.push(cur)\n    return acc\n  }, [])\n}\n\nexport default () => {\n  const qsParams = new URLSearchParams(window.location.search)\n  const lockConnect = qsParams?.get('lockConnect') === 'true'\n  const isModalActive = useIsModalActive('pause-screen')\n  const fsStateSnap = useSnapshot(fsState)\n  const activeModalStackSnap = useSnapshot(activeModalStack)\n  const { singleplayer, wanOpened, wanOpening } = useSnapshot(miscUiState)\n\n  const handlePointerLockChange = () => {\n    if (!pointerLock.hasPointerLock && activeModalStack.length === 0) {\n      showModal({ reactType: 'pause-screen' })\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('pointerlockchange', handlePointerLockChange)\n\n    return () => {\n      document.removeEventListener('pointerlockchange', handlePointerLockChange)\n    }\n  }, [])\n\n  const onReturnPress = () => {\n    hideModal({ reactType: 'pause-screen' })\n  }\n\n  const clickWebShareButton = async () => {\n    if (!wanOpened) return\n    try {\n      const url = getJoinLink()\n      const shareData = { url }\n      await navigator.share?.(shareData)\n    } catch (err) {\n      console.log(`Error: ${err}`)\n    }\n  }\n\n  const clickJoinLinkButton = async (qr = false) => {\n    if (!qr && wanOpened) {\n      closeWan()\n      return\n    }\n    if (!wanOpened || !qr) {\n      await openToWanAndCopyJoinLink((err) => {\n        if (!miscUiState.wanOpening) return\n        alert(`Something went wrong: ${err}`)\n      }, !qr)\n    }\n    if (qr) {\n      const joinLink = getJoinLink()\n      miscUiState.currentDisplayQr = joinLink ?? null\n    }\n  }\n\n  const openWorldActions = async () => {\n    if (fsStateSnap.inMemorySave || !singleplayer) {\n      return showOptionsModal('World actions...', [])\n    }\n    const action = await showOptionsModal('World actions...', ['Save to browser memory'])\n    if (action === 'Save to browser memory') {\n      const path = await saveToBrowserMemory()\n      if (!path) return\n      const saveName = path.split('/').at(-1)\n      showNotification(`World saved to ${saveName}`, 'Load it to keep your progress!')\n      // fsState.inMemorySave = true\n      // fsState.syncFs = false\n      // fsState.isReadonly = false\n      // fsState.remoteBackend = false\n    }\n  }\n\n  if (!isModalActive) return null\n  return <Screen title='Game Menu'>\n    <Button\n      icon=\"pixelarticons:folder\"\n      style={{ position: 'fixed', top: '5px', left: 'calc(env(safe-area-inset-left) + 5px)' }}\n      onClick={async () => openWorldActions()}\n    />\n    <div className={styles.pause_container}>\n      <Button className=\"button\" style={{ width: '204px' }} onClick={onReturnPress}>Back to Game</Button>\n      <div className={styles.row}>\n        <Button className=\"button\" style={{ width: '98px' }} onClick={() => openURL(process.env.GITHUB_URL!)}>GitHub</Button>\n        <DiscordButton />\n      </div>\n      <Button className=\"button\" style={{ width: '204px' }} onClick={() => openOptionsMenu('main')}>Options</Button>\n      {singleplayer ? (\n        <div className={styles.row}>\n          <Button className=\"button\" style={{ width: '170px' }} onClick={async () => clickJoinLinkButton()}>\n            {wanOpening ? 'Opening, wait...' : wanOpened ? 'Close Wan' : 'Copy Join Link'}\n          </Button>\n          {(navigator.share as typeof navigator.share | undefined) ? (\n            <Button\n              title=\"Share Join Link\"\n              className=\"button\"\n              icon=\"pixelarticons:arrow-up\"\n              style={{ width: '20px' }}\n              onClick={async () => clickWebShareButton()}\n            />\n          ) : null}\n          <Button\n            title='Display QR for the Join Link'\n            className=\"button\"\n            icon=\"pixelarticons:dice\"\n            style={{ width: '20px' }}\n            onClick={async () => clickJoinLinkButton(true)}\n          />\n        </div>\n      ) : null}\n      {!lockConnect && <>\n        <Button className=\"button\" style={{ width: '204px' }} onClick={disconnect}>\n          {localServer && !fsState.syncFs && !fsState.isReadonly ? 'Save & Quit' : 'Disconnect & Reset'}\n        </Button>\n      </>}\n    </div>\n  </Screen>\n}\n","import { subscribeKey } from 'valtio/utils'\nimport { Vec3 } from 'vec3'\nimport { versionToMajor, versionToNumber, versionsMapToMajor } from 'prismarine-viewer/viewer/prepare/utils'\nimport { loadScript } from 'prismarine-viewer/viewer/lib/utils'\nimport type { Block } from 'prismarine-block'\nimport { miscUiState } from './globalState'\nimport { options } from './optionsStorage'\nimport { loadOrPlaySound } from './basicSounds'\nimport { showNotification } from './react/NotificationProvider'\n\nconst globalObject = window as {\n  allSoundsMap?: Record<string, Record<string, string>>,\n  allSoundsVersionedMap?: Record<string, string[]>,\n}\n\nsubscribeKey(miscUiState, 'gameLoaded', async () => {\n  if (!miscUiState.gameLoaded) return\n  const soundsLegacyMap = window.allSoundsVersionedMap as Record<string, string[]>\n  const { allSoundsMap } = globalObject\n  const allSoundsMeta = window.allSoundsMeta as { format: string, baseUrl: string }\n  if (!allSoundsMap) {\n    return\n  }\n\n  const allSoundsMajor = versionsMapToMajor(allSoundsMap)\n  const soundsMap = allSoundsMajor[versionToMajor(bot.version)] ?? Object.values(allSoundsMajor)[0]\n\n  if (!soundsMap || !miscUiState.gameLoaded || !loadedData.sounds) {\n    return\n  }\n\n  // const soundsPerId = Object.fromEntries(Object.entries(soundsMap).map(([id, sound]) => [+id.split(';')[0], sound]))\n  const soundsPerName = Object.fromEntries(Object.entries(soundsMap).map(([id, sound]) => [id.split(';')[1], sound]))\n\n  const playGeneralSound = async (soundKey: string, position?: Vec3, volume = 1, pitch?: number) => {\n    if (!options.volume) return\n    const soundStaticData = soundsPerName[soundKey]?.split(';')\n    if (!soundStaticData) return\n    const soundVolume = +soundStaticData[0]!\n    const soundPath = soundStaticData[1]!\n    const versionedSound = getVersionedSound(bot.version, soundPath, Object.entries(soundsLegacyMap))\n    // todo test versionedSound\n    const url = allSoundsMeta.baseUrl.replace(/\\/$/, '') + (versionedSound ? `/${versionedSound}` : '') + '/minecraft/sounds/' + soundPath + '.' + allSoundsMeta.format\n    const isMuted = options.mutedSounds.includes(soundKey) || options.mutedSounds.includes(soundPath) || options.volume === 0\n    if (position) {\n      if (!isMuted) {\n        viewer.playSound(position, url, soundVolume * Math.max(Math.min(volume, 1), 0) * (options.volume / 100), Math.max(Math.min(pitch ?? 1, 2), 0.5))\n      }\n      if (getDistance(bot.entity.position, position) < 4 * 16) {\n        lastPlayedSounds.lastServerPlayed[soundKey] ??= { count: 0, last: 0 }\n        lastPlayedSounds.lastServerPlayed[soundKey].count++\n        lastPlayedSounds.lastServerPlayed[soundKey].last = Date.now()\n      }\n    } else {\n      if (!isMuted) {\n        await loadOrPlaySound(url, volume)\n      }\n      lastPlayedSounds.lastClientPlayed.push(soundKey)\n      if (lastPlayedSounds.lastClientPlayed.length > 10) {\n        lastPlayedSounds.lastClientPlayed.shift()\n      }\n    }\n  }\n  const playHardcodedSound = async (soundKey: string, position?: Vec3, volume = 1, pitch?: number) => {\n    await playGeneralSound(soundKey, position, volume, pitch)\n  }\n  bot.on('soundEffectHeard', async (soundId, position, volume, pitch) => {\n    await playHardcodedSound(soundId, position, volume, pitch)\n  })\n  bot.on('hardcodedSoundEffectHeard', async (soundIdNum, soundCategory, position, volume, pitch) => {\n    const fixOffset = versionToNumber('1.20.4') === versionToNumber(bot.version) ? -1 : 0\n    const soundKey = loadedData.sounds[soundIdNum + fixOffset]?.name\n    if (soundKey === undefined) return\n    await playGeneralSound(soundKey, position, volume, pitch)\n  })\n  // workaround as mineflayer doesn't support soundEvent\n  bot._client.on('sound_effect', async (packet) => {\n    const soundResource = packet['soundEvent']?.resource as string | undefined\n    if (packet.soundId !== 0 || !soundResource) return\n    const pos = new Vec3(packet.x / 8, packet.y / 8, packet.z / 8)\n    await playHardcodedSound(soundResource.replace('minecraft:', ''), pos, packet.volume, packet.pitch)\n  })\n  bot.on('entityHurt', async (entity) => {\n    if (entity.id === bot.entity.id) {\n      await playHardcodedSound('entity.player.hurt')\n    }\n  })\n\n  const useBlockSound = (blockName: string, category: string, fallback: string) => {\n    blockName = {\n      // todo somehow generated, not full\n      grass_block: 'grass',\n      tall_grass: 'grass',\n      fern: 'grass',\n      large_fern: 'grass',\n      dead_bush: 'grass',\n      seagrass: 'grass',\n      tall_seagrass: 'grass',\n      kelp: 'grass',\n      kelp_plant: 'grass',\n      sugar_cane: 'grass',\n      bamboo: 'grass',\n      vine: 'grass',\n      nether_sprouts: 'grass',\n      nether_wart: 'grass',\n      twisting_vines: 'grass',\n      weeping_vines: 'grass',\n\n      cobblestone: 'stone',\n      stone_bricks: 'stone',\n      mossy_stone_bricks: 'stone',\n      cracked_stone_bricks: 'stone',\n      chiseled_stone_bricks: 'stone',\n      stone_brick_slab: 'stone',\n      stone_brick_stairs: 'stone',\n      stone_brick_wall: 'stone',\n      polished_granite: 'stone',\n    }[blockName] ?? blockName\n    const key = 'block.' + blockName + '.' + category\n    return soundsPerName[key] ? key : fallback\n  }\n\n  const getStepSound = (blockUnder: Block) => {\n    // const soundsMap = globalObject.allSoundsMap?.[bot.version]\n    // if (!soundsMap) return\n    // let soundResult = 'block.stone.step'\n    // for (const x of Object.keys(soundsMap).map(n => n.split(';')[1])) {\n    //   const match = /block\\.(.+)\\.step/.exec(x)\n    //   const block = match?.[1]\n    //   if (!block) continue\n    //   if (loadedData.blocksByName[block]?.name === blockUnder.name) {\n    //     soundResult = x\n    //     break\n    //   }\n    // }\n    return useBlockSound(blockUnder.name, 'step', 'block.stone.step')\n  }\n\n  let lastStepSound = 0\n  const movementHappening = async () => {\n    if (!bot.player) return // no info yet\n    const VELOCITY_THRESHOLD = 0.1\n    const { x, z, y } = bot.player.entity.velocity\n    if (bot.entity.onGround && Math.abs(x) < VELOCITY_THRESHOLD && (Math.abs(z) > VELOCITY_THRESHOLD || Math.abs(y) > VELOCITY_THRESHOLD)) {\n      // movement happening\n      if (Date.now() - lastStepSound > 300) {\n        const blockUnder = bot.world.getBlock(bot.entity.position.offset(0, -1, 0))\n        if (blockUnder) {\n          const stepSound = getStepSound(blockUnder)\n          if (stepSound) {\n            await playHardcodedSound(stepSound, undefined, 0.6)// todo not sure why 0.6\n            lastStepSound = Date.now()\n          }\n        }\n      }\n    }\n  }\n\n  const playBlockBreak = async (blockName: string, position?: Vec3) => {\n    const sound = useBlockSound(blockName, 'break', 'block.stone.break')\n\n    await playHardcodedSound(sound, position, 0.6, 1)\n  }\n\n  const registerEvents = () => {\n    bot.on('move', () => {\n      void movementHappening()\n    })\n    bot._client.on('world_event', async ({ effectId, location, data, global: disablePosVolume }) => {\n      const position = disablePosVolume ? undefined : new Vec3(location.x, location.y, location.z)\n      if (effectId === 2001) {\n        // break event\n        const block = loadedData.blocksByStateId[data]\n        await playBlockBreak(block.name, position)\n      }\n      // these produce glass break sound\n      if (effectId === 2002 || effectId === 2003 || effectId === 2007) {\n        await playHardcodedSound('block.glass.break', position, 1, 1)\n      }\n      if (effectId === 1004) {\n        // firework shoot\n        await playHardcodedSound('entity.firework_rocket.launch', position, 1, 1)\n      }\n      if (effectId === 1006 || effectId === 1007 || effectId === 1014) {\n        // wooden door open/close\n        await playHardcodedSound('block.wooden_door.open', position, 1, 1)\n      }\n      if (effectId === 1002) {\n        // dispenser shoot\n        await playHardcodedSound('block.dispenser.dispense', position, 1, 1)\n      }\n      if (effectId === 1024) {\n        // wither shoot\n        await playHardcodedSound('entity.wither.shoot', position, 1, 1)\n      }\n      if (effectId === 1031) {\n        // anvil land\n        await playHardcodedSound('block.anvil.land', position, 1, 1)\n      }\n      if (effectId === 1010) {\n        console.log('play record', data)\n      }\n      // todo add support for all current world events\n    })\n    let diggingBlock: Block | null = null\n    customEvents.on('digStart', () => {\n      diggingBlock = bot.blockAtCursor(5)\n    })\n    bot.on('diggingCompleted', async () => {\n      if (diggingBlock) {\n        await playBlockBreak(diggingBlock.name, diggingBlock.position)\n      }\n    })\n  }\n\n  registerEvents()\n\n  // 1.20+ soundEffectHeard is broken atm\n  // bot._client.on('packet', (data, { name }, buffer) => {\n  //   if (name === 'sound_effect') {\n  //     console.log(data, buffer)\n  //   }\n  // })\n})\n\n// todo\n// const music = {\n//   activated: false,\n//   playing: '',\n//   activate () {\n//     const gameMusic = Object.entries(globalObject.allSoundsMap?.[bot.version] ?? {}).find(([id, sound]) => sound.includes('music.game'))\n//     if (!gameMusic) return\n//     const soundPath = gameMusic[0].split(';')[1]\n//     const next = () => {}\n//   }\n// }\n\nconst getVersionedSound = (version: string, item: string, itemsMapSortedEntries: Array<[string, string[]]>) => {\n  const verNumber = versionToNumber(version)\n  for (const [itemsVer, items] of itemsMapSortedEntries) {\n    // 1.18 < 1.18.1\n    // 1.13 < 1.13.2\n    if (items.includes(item) && verNumber <= versionToNumber(itemsVer)) {\n      return itemsVer\n    }\n  }\n}\n\nexport const downloadSoundsIfNeeded = async () => {\n  if (!globalObject.allSoundsMap) {\n    try {\n      await loadScript('./sounds.js')\n    } catch (err) {\n      console.warn('Sounds map was not generated. Sounds will not be played.')\n    }\n  }\n}\n\nexport const lastPlayedSounds = {\n  lastClientPlayed: [] as string[],\n  lastServerPlayed: {} as Record<string, { count: number, last: number }>,\n}\n\nconst getDistance = (pos1: Vec3, pos2: Vec3) => {\n  return Math.hypot((pos1.x - pos2.x), (pos1.y - pos2.y), (pos1.z - pos2.z))\n}\n","import { useState } from 'react'\nimport { useSnapshot } from 'valtio'\nimport { hideCurrentModal } from '../globalState'\nimport { lastPlayedSounds } from '../soundSystem'\nimport { options } from '../optionsStorage'\nimport Button from './Button'\nimport Screen from './Screen'\nimport { useIsModalActive } from './utilsApp'\n\nconst SoundRow = ({ sound, children }) => {\n  const { mutedSounds } = useSnapshot(options)\n\n  const isMuted = mutedSounds.includes(sound)\n\n  return <div style={{ display: 'flex', justifyContent: 'space-between', gap: 15 }}>\n    <div>\n      <span style={{ fontSize: 12, marginRight: 2, ...isMuted ? { color: '#af1c1c' } : {} }}>{sound}</span>\n      {children}\n    </div>\n    <Button\n      icon={isMuted ? 'pixelarticons:music' : 'pixelarticons:close'} onClick={() => {\n        if (isMuted) {\n          options.mutedSounds.splice(options.mutedSounds.indexOf(sound), 1)\n        } else {\n          options.mutedSounds.push(sound)\n        }\n      }}\n    />\n  </div>\n}\n\nexport default () => {\n  const isModalActive = useIsModalActive('sound-muffler')\n\n  const [showMuted, setShowMuted] = useState(true)\n  const [i, setI] = useState(0)\n  const { mutedSounds } = useSnapshot(options)\n\n  if (!isModalActive) return null\n\n  return <Screen title='Sound Muffler' backdrop>\n    <div style={{ display: 'flex', gap: 5, flexDirection: 'column' }}>\n      <Button onClick={() => setI(i => i + 1)}>Refresh</Button>\n      <Button onClick={() => setShowMuted(s => !s)}>Show Muted: {showMuted ? 'ON' : 'OFF'}</Button>\n      <span style={{ padding: '3px 0' }}>Last World Played</span>\n      {Object.entries(lastPlayedSounds.lastServerPlayed).map(([key, value]) => {\n        if (!showMuted && mutedSounds.includes(key)) return null\n        return [key, value.count] as const\n      }).filter(a => !!a).sort((a, b) => b[1] - a[1]).slice(0, 20).map(([key, count]) => {\n        return <SoundRow key={key} sound={key}>\n          <span style={{ fontSize: 12, fontWeight: 'bold' }}>{count}</span>\n        </SoundRow>\n      })}\n      <span style={{ padding: '3px 0' }}>Last Client Played</span>\n      {lastPlayedSounds.lastClientPlayed.map((key) => {\n        if (!showMuted && mutedSounds.includes(key)) return null\n        return <SoundRow key={key} sound={key} children={undefined} />\n      })}\n      <Button onClick={() => hideCurrentModal()}>Back</Button>\n    </div>\n  </Screen>\n}\n","import { LeftTouchArea, RightTouchArea, useInterfaceState } from '@dimaka/interface'\nimport { css } from '@emotion/css'\nimport { useSnapshot } from 'valtio'\nimport { contro } from '../controls'\nimport { miscUiState, activeModalStack } from '../globalState'\nimport { watchValue, options } from '../optionsStorage'\nimport { useUsingTouch } from './utilsApp'\n\n// todo\nuseInterfaceState.setState({\n  isFlying: false,\n  uiCustomization: {\n    touchButtonSize: 40,\n  },\n  updateCoord ([coord, state]) {\n    const coordToAction = [\n      ['z', -1, 'KeyW'],\n      ['z', 1, 'KeyS'],\n      ['x', -1, 'KeyA'],\n      ['x', 1, 'KeyD'],\n      ['y', 1, 'Space'], // todo jump\n      ['y', -1, 'ShiftLeft'], // todo jump\n    ]\n    // todo refactor\n    const actionAndState = state === 0 ? coordToAction.filter(([axis]) => axis === coord) : coordToAction.find(([axis, value]) => axis === coord && value === state)\n    if (!bot) return\n    if (state === 0) {\n      // @ts-expect-error\n      for (const action of actionAndState) {\n        contro.pressedKeyOrButtonChanged({ code: action[2] }, false)\n      }\n    } else {\n      //@ts-expect-error\n      contro.pressedKeyOrButtonChanged({ code: actionAndState[2] }, true)\n    }\n  }\n})\n\nwatchValue(options, (o) => {\n  useInterfaceState.setState({\n    uiCustomization: {\n      touchButtonSize: o.touchButtonsSize,\n    },\n  })\n})\n\nexport default () => {\n  // todo setting\n  const usingTouch = useUsingTouch()\n  const { usingGamepadInput } = useSnapshot(miscUiState)\n  const modals = useSnapshot(activeModalStack)\n  const { touchControlsType } = useSnapshot(options)\n\n  if (!usingTouch || usingGamepadInput || touchControlsType !== 'classic') return null\n  return (\n    <div\n      style={{ zIndex: modals.length ? 7 : 8 }}\n      className={css`\n        position: fixed;\n        bottom: 0;\n        /* height: 100%; */\n        display: flex;\n        width: 100%;\n        justify-content: space-between;\n        align-items: flex-end;\n        pointer-events: none;\n        touch-action: none;\n        & > div {\n            pointer-events: auto;\n        }\n    `}\n    >\n      <LeftTouchArea />\n      <div />\n      <RightTouchArea />\n    </div>\n  )\n}\n","import { useSnapshot } from 'valtio'\nimport { miscUiState } from '../globalState'\nimport Input from './Input'\n\nfunction InnerSearch () {\n  const { currentTouch } = useSnapshot(miscUiState)\n\n  return <div style={{\n    position: 'fixed',\n    top: 5,\n    left: 0,\n    right: 0,\n    margin: 'auto',\n    zIndex: 11,\n    width: 'min-content',\n  }}\n  >\n    <Input\n      autoFocus={currentTouch === false}\n      placeholder='Search...'\n      onChange={({ target: { value } }) => {\n        customEvents.emit('search', value)\n      }}\n    />\n  </div>\n}\n\n// todo remove component as its not possible to reuse this component atm\nexport default () => {\n  const { displaySearchInput } = useSnapshot(miscUiState)\n\n  return displaySearchInput ? <InnerSearch /> : null\n}\n","import { CSSProperties, PointerEvent, useEffect, useRef } from 'react'\nimport { proxy, ref, useSnapshot } from 'valtio'\nimport { contro } from '../controls'\nimport worldInteractions from '../worldInteractions'\nimport PixelartIcon from './PixelartIcon'\nimport Button from './Button'\n\nexport type ButtonName = 'action' | 'sneak' | 'break' | 'jump'\n\ntype ButtonsPositions = Record<ButtonName, [number, number]>\n\ninterface Props {\n  touchActive: boolean\n  setupActive: boolean\n  buttonsPositions: ButtonsPositions\n  closeButtonsSetup: (newPositions?: ButtonsPositions) => void\n}\n\nconst getCurrentAppScaling = () => {\n  // body has css property --guiScale\n  const guiScale = getComputedStyle(document.body).getPropertyValue('--guiScale')\n  return parseFloat(guiScale)\n}\n\nexport const joystickPointer = proxy({\n  pointer: null as { x: number, y: number, pointerId: number } | null,\n  joystickInner: null as HTMLDivElement | null,\n})\n\nexport const handleMovementStickDelta = (e?: { clientX, clientY }) => {\n  const max = 32\n  let x = 0\n  let y = 0\n  if (e) {\n    const scale = getCurrentAppScaling()\n    x = e.clientX - joystickPointer.pointer!.x\n    y = e.clientY - joystickPointer.pointer!.y\n    x = Math.min(Math.max(x, -max), max) / scale\n    y = Math.min(Math.max(y, -max), max) / scale\n  }\n\n  joystickPointer.joystickInner!.style.transform = `translate(${x}px, ${y}px)`\n  const vector = {\n    x: x / max,\n    y: 0,\n    z: y / max,\n  }\n  void contro.emit('movementUpdate', {\n    vector,\n    soleVector: vector\n  })\n}\n\nexport default ({ touchActive, setupActive, buttonsPositions, closeButtonsSetup }: Props) => {\n  const bot = window.bot as typeof __type_bot | undefined\n  if (setupActive) touchActive = true\n\n  const joystickOuter = useRef<HTMLDivElement>(null)\n  const joystickInner = useRef<HTMLDivElement>(null)\n\n  const { pointer } = useSnapshot(joystickPointer)\n  // const { isFlying, isSneaking } = useSnapshot(gameAdditionalState)\n  const newButtonPositions = { ...buttonsPositions }\n\n  const buttonProps = (name: ButtonName) => {\n    let active = {\n      action: false,\n      sneak: bot?.getControlState('sneak'),\n      break: false,\n      jump: bot?.getControlState('jump'),\n    }[name]\n    const holdDown = {\n      action () {\n        document.dispatchEvent(new MouseEvent('mousedown', { button: 2 }))\n        worldInteractions.update()\n      },\n      sneak () {\n        void contro.emit('trigger', {\n          command: 'general.toggleSneakOrDown',\n          schema: null as any,\n        })\n        active = bot?.getControlState('sneak')\n      },\n      break () {\n        document.dispatchEvent(new MouseEvent('mousedown', { button: 0 }))\n        worldInteractions.update()\n        active = true\n      },\n      jump () {\n        void contro.emit('trigger', {\n          command: 'general.jump',\n          schema: null as any,\n        })\n        active = bot?.controlState.jump\n      }\n    }\n    const holdUp = {\n      action () {\n        document.dispatchEvent(new MouseEvent('mouseup', { button: 2 }))\n      },\n      sneak () {\n        void contro.emit('release', {\n          command: 'general.toggleSneakOrDown',\n          schema: null as any,\n        })\n        active = bot?.getControlState('sneak')\n      },\n      break () {\n        document.dispatchEvent(new MouseEvent('mouseup', { button: 0 }))\n        worldInteractions.update()\n        active = false\n      },\n      jump () {\n        void contro.emit('release', {\n          command: 'general.jump',\n          schema: null as any,\n        })\n        active = bot?.controlState.jump\n      }\n    }\n\n    type PType = PointerEvent<HTMLDivElement>\n    const pointerup = (e: PType) => {\n      const elem = e.currentTarget as HTMLElement\n      console.log(e.type, elem.hasPointerCapture(e.pointerId))\n      elem.releasePointerCapture(e.pointerId)\n      if (!setupActive) {\n        holdUp[name]()\n        pointerToggledUpdate(e)\n      }\n    }\n    const pointerToggledUpdate = (e) => {\n      e.currentTarget.style.background = active ? 'rgba(0, 0, 0, 0.8)' : 'rgba(0, 0, 0, 0.5)'\n    }\n    let setupPointer = null as { x, y } | null\n    return {\n      style: {\n        position: 'fixed',\n        left: `${buttonsPositions[name][0]}%`,\n        top: `${buttonsPositions[name][1]}%`,\n        borderRadius: '50%',\n        width: '32px',\n        height: '32px',\n        background: active ? 'rgba(0, 0, 0, 0.8)' : 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        transition: 'background 0.1s',\n      } satisfies CSSProperties,\n      onPointerDown (e: PType) {\n        const elem = e.currentTarget as HTMLElement\n        elem.setPointerCapture(e.pointerId)\n        if (setupActive) {\n          setupPointer = { x: e.clientX, y: e.clientY }\n        } else {\n          holdDown[name]()\n          pointerToggledUpdate(e)\n        }\n      },\n      onPointerMove (e: PType) {\n        if (setupPointer) {\n          const elem = e.currentTarget as HTMLElement\n          const size = 32\n          const scale = getCurrentAppScaling()\n          const xPerc = (e.clientX - size / 4 / scale) / window.innerWidth * 100\n          const yPerc = (e.clientY - size / 4 / scale) / window.innerHeight * 100\n          elem.style.left = `${xPerc}%`\n          elem.style.top = `${yPerc}%`\n          newButtonPositions[name] = [xPerc, yPerc]\n        }\n      },\n      onPointerUp: pointerup,\n      // onPointerCancel: pointerup,\n      onLostPointerCapture: pointerup,\n    }\n  }\n\n  useEffect(() => {\n    joystickPointer.joystickInner = joystickInner.current && ref(joystickInner.current)\n    // todo antipattern\n  }, [touchActive])\n\n  if (!touchActive) return null\n\n  return <div>\n    <div\n      className='movement_joystick_outer'\n      ref={joystickOuter}\n      style={{\n        display: pointer ? 'flex' : 'none',\n        borderRadius: '50%',\n        width: 50,\n        height: 50,\n        border: '2px solid rgba(0, 0, 0, 0.5)',\n        backgroundColor: 'rgba(255, 255, div, 0.5)',\n        position: 'fixed',\n        justifyContent: 'center',\n        alignItems: 'center',\n        translate: '-50% -50%',\n        ...pointer ? {\n          left: `${pointer.x / window.innerWidth * 100}%`,\n          top: `${pointer.y / window.innerHeight * 100}%`\n        } : {}\n      }}\n    >\n      <div\n        className='movement_joystick_inner'\n        style={{\n          borderRadius: '50%',\n          width: 20,\n          height: 20,\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          position: 'absolute',\n        }}\n        ref={joystickInner}\n      />\n    </div>\n    <div {...buttonProps('action')}>\n      <PixelartIcon iconName='circle' />\n    </div>\n    <div {...buttonProps('sneak')}>\n      <PixelartIcon iconName='arrow-down' />\n    </div>\n    <div {...buttonProps('jump')}>\n      <PixelartIcon iconName='arrow-up' />\n    </div>\n    <div {...buttonProps('break')}>\n      <MineIcon />\n    </div>\n    {setupActive && <div style={{\n      position: 'fixed',\n      bottom: 0,\n      display: 'flex',\n      justifyContent: 'center',\n      gap: 3\n    }}\n    >\n      <Button onClick={() => {\n        closeButtonsSetup()\n      }}\n      >Cancel\n      </Button>\n      <Button onClick={() => {\n        closeButtonsSetup(newButtonPositions)\n      }}\n      >Apply\n      </Button>\n    </div>}\n  </div>\n}\n\nconst MineIcon = () => {\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26 26\" width={22} height={22}>\n    <path d=\"M 8 0 L 8 2 L 18 2 L 18 0 L 8 0 z M 18 2 L 18 4 L 20 4 L 20 6 L 22 6 L 22 8 L 24 8 L 24 2 L 22 2 L 18 2 z M 24 8 L 24 18 L 26 18 L 26 8 L 24 8 z M 24 18 L 22 18 L 22 20 L 24 20 L 24 18 z M 22 18 L 22 10 L 20 10 L 20 18 L 22 18 z M 20 10 L 20 8 L 18 8 L 18 10 L 20 10 z M 18 10 L 16 10 L 16 12 L 18 12 L 18 10 z M 16 12 L 14 12 L 14 14 L 16 14 L 16 12 z M 14 14 L 12 14 L 12 16 L 14 16 L 14 14 z M 12 16 L 10 16 L 10 18 L 12 18 L 12 16 z M 10 18 L 8 18 L 8 20 L 10 20 L 10 18 z M 8 20 L 6 20 L 6 22 L 8 22 L 8 20 z M 6 22 L 4 22 L 4 24 L 6 24 L 6 22 z M 4 24 L 2 24 L 2 22 L 0 22 L 0 24 L 0 26 L 2 26 L 4 26 L 4 24 z M 2 22 L 4 22 L 4 20 L 2 20 L 2 22 z M 4 20 L 6 20 L 6 18 L 4 18 L 4 20 z M 6 18 L 8 18 L 8 16 L 6 16 L 6 18 z M 8 16 L 10 16 L 10 14 L 8 14 L 8 16 z M 10 14 L 12 14 L 12 12 L 10 12 L 10 14 z M 12 12 L 14 12 L 14 10 L 12 10 L 12 12 z M 14 10 L 16 10 L 16 8 L 14 8 L 14 10 z M 16 8 L 18 8 L 18 6 L 16 6 L 16 8 z M 16 6 L 16 4 L 8 4 L 8 6 L 16 6 z M 8 4 L 8 2 L 6 2 L 6 4 L 8 4 z\" stroke='white' />\n  </svg>\n}\n","import { useSnapshot } from 'valtio'\nimport { activeModalStack, hideModal } from '../globalState'\nimport { options } from '../optionsStorage'\nimport TouchAreasControls from './TouchAreasControls'\nimport { useIsModalActive, useUsingTouch } from './utilsApp'\n\nexport default () => {\n  const usingTouch = useUsingTouch()\n  const hasModals = useSnapshot(activeModalStack).length !== 0\n  const setupActive = useIsModalActive('touch-buttons-setup')\n  const { touchControlsPositions, touchControlsType } = useSnapshot(options)\n\n  return <TouchAreasControls\n    touchActive={!!bot && !!usingTouch && !hasModals && touchControlsType === 'joystick-buttons'}\n    setupActive={setupActive}\n    buttonsPositions={touchControlsPositions as any}\n    closeButtonsSetup={(newPositions) => {\n      if (newPositions) {\n        options.touchControlsPositions = newPositions\n      }\n      hideModal()\n    }}\n  />\n\n}\n","import { subscribe } from 'valtio'\nimport { miscUiState } from './globalState'\n\nlet toCleanup = [] as Array<() => void>\n\nexport const watchUnloadForCleanup = (func: () => void) => {\n  toCleanup.push(func)\n}\n\nsubscribe(miscUiState, () => {\n  if (!miscUiState.gameLoaded) {\n    for (const func of toCleanup) {\n      func()\n    }\n    toCleanup = []\n  }\n})\n","import { useEffect, useRef, useState } from 'react'\nimport { Transition } from 'react-transition-group'\nimport { createPortal } from 'react-dom'\nimport { subscribe, useSnapshot } from 'valtio'\nimport { allImagesLoadedState, getItemNameRaw, openItemsCanvas, openPlayerInventory, upInventoryItems } from '../inventoryWindows'\nimport { activeModalStack, isGameActive, miscUiState } from '../globalState'\nimport { currentScaling } from '../scaleInterface'\nimport { watchUnloadForCleanup } from '../gameUnload'\nimport MessageFormattedString from './MessageFormattedString'\nimport SharedHudVars from './SharedHudVars'\n\n\nconst ItemName = ({ itemKey }: { itemKey: string }) => {\n  const nodeRef = useRef(null)\n  const [show, setShow] = useState(false)\n  const [itemName, setItemName] = useState<Record<string, any> | string>('')\n\n  const duration = 300\n\n  const defaultStyle: React.CSSProperties = {\n    position: 'fixed',\n    bottom: `calc(env(safe-area-inset-bottom) + ${bot ? bot.game.gameMode === 'creative' ? '40px' : '50px' : '50px'})`,\n    left: 0,\n    right: 0,\n    fontSize: 10,\n    textAlign: 'center',\n    transition: `opacity ${duration}ms ease-in-out`,\n    opacity: 0,\n    pointerEvents: 'none',\n  }\n\n  const transitionStyles = {\n    entering: { opacity: 1 },\n    entered: { opacity: 1 },\n    exiting: { opacity: 0 },\n    exited: { opacity: 0 },\n  }\n\n  useEffect(() => {\n    const itemData = itemKey.split('_split_')\n    if (!itemKey) {\n      setItemName('')\n    } else if (itemData[3]) {\n      const customDisplay = getItemNameRaw({\n        nbt: JSON.parse(itemData[3])\n      })\n      if (customDisplay) {\n        setItemName(customDisplay)\n      } else {\n        setItemName(itemData[0])\n      }\n    } else {\n      setItemName(itemData[0])\n    }\n    setShow(true)\n    const id = setTimeout(() => {\n      setShow(false)\n    }, 1500)\n    return () => {\n      setShow(false)\n      clearTimeout(id)\n    }\n  }, [itemKey])\n\n  return <Transition nodeRef={nodeRef} in={show} timeout={duration} >\n    {state => (\n      <SharedHudVars>\n        <div ref={nodeRef} style={{ ...defaultStyle, ...transitionStyles[state] }} className='item-display-name'>\n          <MessageFormattedString message={itemName} />\n        </div>\n      </SharedHudVars>\n    )}\n  </Transition>\n}\n\nconst Inner = () => {\n  const container = useRef<HTMLDivElement>(null!)\n  const [itemKey, setItemKey] = useState('')\n  const hasModals = useSnapshot(activeModalStack).length\n\n  useEffect(() => {\n    const controller = new AbortController()\n\n    const inv = openItemsCanvas('HotbarWin', {\n      clickWindow (slot, mouseButton, mode) {\n        if (mouseButton === 1) {\n          console.log('right click')\n          return\n        }\n        const hotbarSlot = slot - bot.inventory.hotbarStart\n        if (hotbarSlot < 0 || hotbarSlot > 8) return\n        bot.setQuickBarSlot(hotbarSlot)\n      },\n    } as any)\n    const { canvasManager } = inv\n    inv.inventory.supportsOffhand = !bot.supportFeature('doesntHaveOffHandSlot')\n    inv.pwindow.disablePicking = true\n\n    canvasManager.children[0].disableHighlight = true\n    canvasManager.minimizedWindow = true\n    canvasManager.minimizedWindow = true\n\n    function setSize () {\n      canvasManager.setScale(currentScaling.scale)\n\n      canvasManager.windowHeight = 25 * canvasManager.scale\n      canvasManager.windowWidth = (210 - (inv.inventory.supportsOffhand ? 0 : 25) + (miscUiState.currentTouch ? 28 : 0)) * canvasManager.scale\n    }\n    setSize()\n    watchUnloadForCleanup(subscribe(currentScaling, setSize))\n    inv.canvas.style.pointerEvents = 'auto'\n    container.current.appendChild(inv.canvas)\n    const upHotbarItems = () => {\n      if (!viewer.world.currentTextureImage || !allImagesLoadedState.value) return\n      upInventoryItems(true, inv)\n    }\n\n    canvasManager.canvas.onclick = (e) => {\n      if (!isGameActive(true)) return\n      const pos = inv.canvasManager.getMousePos(inv.canvas, e)\n      if (canvasManager.canvas.width - pos.x < 35 * inv.canvasManager.scale) {\n        openPlayerInventory()\n      }\n    }\n\n    upHotbarItems()\n    bot.inventory.on('updateSlot', upHotbarItems)\n    viewer.world.renderUpdateEmitter.on('textureDownloaded', upHotbarItems)\n    const unsub2 = subscribe(allImagesLoadedState, () => {\n      upHotbarItems()\n    })\n\n    const setSelectedSlot = (index: number) => {\n      if (index === bot.quickBarSlot) return\n      bot.setQuickBarSlot(index)\n      if (!bot.inventory.slots?.[bot.quickBarSlot + 36]) setItemKey('')\n    }\n    const heldItemChanged = () => {\n      inv.inventory.activeHotbarSlot = bot.quickBarSlot\n\n      if (!bot.inventory.slots?.[bot.quickBarSlot + 36]) {\n        setItemKey('')\n        return\n      }\n      const item = bot.inventory.slots[bot.quickBarSlot + 36]!\n      const itemNbt = item.nbt ? JSON.stringify(item.nbt) : ''\n      setItemKey(`${item.displayName}_split_${item.type}_split_${item.metadata}_split_${itemNbt}`)\n    }\n    heldItemChanged()\n    bot.on('heldItemChanged' as any, heldItemChanged)\n\n    document.addEventListener('wheel', (e) => {\n      if (!isGameActive(true)) return\n      e.preventDefault()\n      const newSlot = ((bot.quickBarSlot + Math.sign(e.deltaY)) % 9 + 9) % 9\n      setSelectedSlot(newSlot)\n    }, {\n      passive: false,\n      signal: controller.signal\n    })\n\n    document.addEventListener('keydown', (e) => {\n      if (!isGameActive(true)) return\n      const numPressed = +((/Digit(\\d)/.exec(e.code))?.[1] ?? -1)\n      if (numPressed < 1 || numPressed > 9) return\n      setSelectedSlot(numPressed - 1)\n    }, {\n      passive: false,\n      signal: controller.signal\n    })\n\n    let touchStart = 0\n    document.addEventListener('touchstart', (e) => {\n      if ((e.target as HTMLElement).closest('.hotbar')) {\n        touchStart = Date.now()\n      } else {\n        touchStart = 0\n      }\n    })\n    document.addEventListener('touchend', (e) => {\n      if (touchStart && (e.target as HTMLElement).closest('.hotbar') && Date.now() - touchStart > 700) {\n        // drop item\n        bot._client.write('block_dig', {\n          'status': 4,\n          'location': {\n            'x': 0,\n            'z': 0,\n            'y': 0\n          },\n          'face': 0,\n          sequence: 0\n        })\n      }\n      touchStart = 0\n    })\n\n    return () => {\n      inv.destroy()\n      controller.abort()\n      unsub2()\n      viewer.world.renderUpdateEmitter.off('textureDownloaded', upHotbarItems)\n    }\n  }, [])\n\n  return <SharedHudVars>\n    <ItemName itemKey={itemKey} />\n    <Portal>\n      <div\n        className='hotbar' ref={container} style={{\n          position: 'fixed',\n          left: 0,\n          right: 0,\n          display: 'flex',\n          justifyContent: 'center',\n          zIndex: hasModals ? 1 : 8,\n          pointerEvents: 'none',\n          bottom: 'var(--hud-bottom-raw)'\n        }}\n      />\n    </Portal>\n  </SharedHudVars>\n}\n\nexport default () => {\n  const [gameMode, setGameMode] = useState(bot.game?.gameMode ?? 'creative')\n  useEffect(() => {\n    bot.on('game', () => {\n      setGameMode(bot.game.gameMode)\n    })\n  }, [])\n\n  return gameMode === 'spectator' ? null : <Inner />\n}\n\nconst Portal = ({ children, to = document.body }) => {\n  return createPortal(children, to)\n}\n","import { loadSound, playSound } from '../basicSounds'\nimport buttonClickMp3 from '../../assets/button_click.mp3'\nimport { ButtonProvider } from './Button'\n\nvoid loadSound('button_click.mp3', buttonClickMp3)\n\nexport default ({ children }) => {\n  return <ButtonProvider onClick={() => {\n    void playSound('button_click.mp3')\n  }}>{children}</ButtonProvider>\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-dRiZZT\",\"group\":\"group-haorh2\",\"group-category\":\"group-category-HNSIFU\",\"groupCategory\":\"group-category-HNSIFU\",\"actionBinds\":\"actionBinds-MbRkMv\",\"warning-container\":\"warning-container-mgiK4D\",\"warningContainer\":\"warning-container-mgiK4D\",\"actionName\":\"actionName-uFJWW2\",\"undo-keyboard\":\"undo-keyboard-fjpyGp\",\"undoKeyboard\":\"undo-keyboard-fjpyGp\",\"undo-gamepad\":\"undo-gamepad-ZNUg28\",\"undoGamepad\":\"undo-gamepad-ZNUg28\",\"button\":\"button-AF2rj4\",\"margin-left\":\"margin-left-ugrmlI\",\"marginLeft\":\"margin-left-ugrmlI\",\"matched-bind\":\"matched-bind-GFWOr1\",\"matchedBind\":\"matched-bind-GFWOr1\",\"matched-bind-warning\":\"matched-bind-warning-WdXyU1\",\"matchedBindWarning\":\"matched-bind-warning-WdXyU1\",\"chat-command\":\"chat-command-onMok2\",\"chatCommand\":\"chat-command-onMok2\"};","import { useEffect, useState, useContext } from 'react'\nimport { customCommandsConfig } from '../customCommands'\nimport { ButtonWithMatchesAlert, Context } from './KeybindingsScreen'\nimport Button from './Button'\nimport styles from './KeybindingsScreen.module.css'\nimport Input from './Input'\n\n\nexport type CustomCommand = {\n  keys: undefined | string[]\n  gamepad: undefined | string[]\n  type: string\n  inputs: any[]\n}\n\nexport type CustomCommandsMap = Record<string, CustomCommand>\n\nexport default ({\n  customCommands,\n  updateCurrBind,\n  resetBinding,\n}: {\n  customCommands: CustomCommandsMap,\n  updateCurrBind: (group: string, action: string) => void,\n  resetBinding: (group: string, action: string, inputType: string) => void,\n}) => {\n  const { userConfig, setUserConfig } = useContext(Context)\n  const [customConfig, setCustomConfig] = useState<any>({ ...customCommands })\n\n  useEffect(() => {\n    setUserConfig({ ...userConfig, custom: { ...customConfig } })\n  }, [customConfig])\n\n  const addNewCommand = (type: string) => {\n    // max key + 1\n    const newKey = String(Math.max(...Object.keys(customConfig).map(Number).filter(key => !isNaN(key)), 0) + 1)\n    setCustomConfig(prev => {\n      const newCustomConf = { ...prev }\n      newCustomConf[newKey] = {\n        keys: undefined as string[] | undefined,\n        gamepad: undefined as string[] | undefined,\n        type,\n        inputs: [] as any[]\n      }\n      return newCustomConf\n    })\n  }\n\n  return <>\n    <div className={styles.group}>\n      {Object.entries(customCommandsConfig).map(([group, { input }]) => (\n        <div key={`group-container-${group}`} className={styles.group}>\n          <div key={`category-${group}`} className={styles['group-category']}>{group}</div>\n          {Object.entries(customConfig).filter(([key, data]) => data.type === group).map((commandData, indexOption) => {\n            return <CustomCommandContainer\n              key={indexOption}\n              indexOption={indexOption}\n              commandData={commandData}\n              updateCurrBind={updateCurrBind}\n              groupData={[group, { input }]}\n              setCustomConfig={setCustomConfig}\n              resetBinding={resetBinding}\n            />\n          })}\n          <Button\n            onClick={() => addNewCommand(group)}\n            icon=\"pixelarticons:add-box\"\n            style={{\n              alignSelf: 'center'\n            }}\n          />\n        </div>\n      ))}\n    </div>\n  </>\n}\n\nconst CustomCommandContainer = ({\n  indexOption,\n  commandData,\n  updateCurrBind,\n  setCustomConfig,\n  resetBinding,\n  groupData\n}) => {\n  const { userConfig } = useContext(Context)\n\n  const [commandKey, { keys, gamepad, inputs }] = commandData\n  const [group, { input }] = groupData\n\n  const setInputValue = (optionKey, indexInput, value) => {\n    setCustomConfig(prev => {\n      const newConfig = { ...prev }\n      newConfig[optionKey].inputs = [...prev[optionKey].inputs]\n      newConfig[optionKey].inputs[indexInput] = value\n      return newConfig\n    })\n  }\n\n  return <div style={{ padding: '10px' }}>\n    {input.map((obj, indexInput) => {\n      const config = typeof obj === 'function' ? obj(inputs) : obj\n      if (!config) return null\n\n      return config.type === 'select'\n        ? <select\n          key={indexInput} onChange={(e) => {\n            setInputValue(commandKey, indexInput, e.target.value)\n          }}\n        >{config.options.map((option) => <option key={option} value={option}>{option}</option>)}\n        </select>\n        : <Input key={indexInput} rootStyles={{ width: '99%' }} placeholder={config.placeholder} value={inputs[indexInput] ?? ''} onChange={(e) => setInputValue(commandKey, indexInput, e.target.value)} />\n    })}\n    <div className={styles.actionBinds}>\n      {\n        userConfig?.['custom']?.[commandKey]?.keys ? <Button\n          onClick={() => {\n            updateCurrBind(group, commandKey)\n            resetBinding('custom', commandKey, 'keyboard')\n          }}\n          className={styles['undo-keyboard']}\n          icon=\"pixelarticons:undo\"\n        />\n          : null\n      }\n\n      {[0, 1].map((key, index) => <ButtonWithMatchesAlert\n        key={`custom-keyboard-${group}-${commandKey}-${index}`}\n        group=\"custom\"\n        action={commandKey}\n        index={index}\n        inputType=\"keyboard\"\n        keys={keys}\n        gamepad={gamepad}\n      />)}\n\n      <div style={{ marginRight: 'auto' }} />\n\n      {\n        userConfig?.['custom']?.[commandKey]?.gamepad ? <Button\n          onClick={() => {\n            updateCurrBind(group, commandKey)\n            resetBinding('custom', commandKey, 'gamepad')\n          }}\n          className={styles['undo-keyboard']}\n          icon=\"pixelarticons:undo\"\n        />\n          : null\n      }\n      <ButtonWithMatchesAlert\n        group=\"custom\"\n        action={commandKey}\n        index={0}\n        inputType=\"gamepad\"\n        keys={keys}\n        gamepad={gamepad}\n      />\n      <Button\n        onClick={() => {\n          setCustomConfig(prev => {\n            const { [commandKey]: commandToRemove, ...newConfig } = prev\n            return newConfig\n          })\n        }}\n        style={{ color: 'red' }}\n        icon=\"pixelarticons:delete\"\n      />\n    </div>\n  </div>\n}\n","export async function parseBindingName (binding: string) {\n  if (!binding) return ''\n\n  const { keyboard } = (typeof navigator === 'undefined' ? undefined : navigator) ?? {}\n  const layoutMap = await keyboard?.getLayoutMap?.() ?? new Map<string, string>()\n\n  const mapKey = (key: string) => layoutMap.get(key) || key\n\n  const cut = binding.replaceAll(/(Digit|Key)/g, '')\n  const parts = cut.includes('+') ? cut.split('+') : [cut]\n\n  for (let i = 0; i < parts.length; i++) {\n    parts[i] = mapKey(parts[i]).split(/(?<=[a-z])(?=\\d)/).join(' ').split(/(?=[A-Z])/).reverse().join(' ')\n  }\n\n  return parts.join(' + ')\n}\n","import { AllKeyCodes } from 'contro-max'\nimport { useState, useEffect } from 'react'\nimport triangle from './ps_icons/playstation_triangle_console_controller_gamepad_icon.svg'\nimport square from './ps_icons/playstation_square_console_controller_gamepad_icon.svg'\nimport circle from './ps_icons/circle_playstation_console_controller_gamepad_icon.svg'\nimport cross from './ps_icons/cross_playstation_console_controller_gamepad_icon.svg'\nimport { parseBindingName } from './parseKeybindingName'\n\n\ntype Props = {\n  type: 'keyboard' | 'gamepad',\n  val: AllKeyCodes,\n  isPS?: boolean\n}\n\nexport default ({ type, val, isPS }: Props) => {\n  const [bindName, setBindName] = useState('')\n\n  async function setBind () {\n    setBindName(val)\n    const bind = type === 'keyboard' ? await parseBindingName(val) : isPS && buttonsMap[val] ? buttonsMap[val] : val\n    setBindName(bind)\n  }\n\n  useEffect(() => {\n    void setBind()\n  }, [type, val, isPS])\n\n  return <>\n    {bindName}\n  </>\n}\n\nconst buttonsMap = {\n  'A': cross,\n  'B': circle,\n  'X': square,\n  'Y': triangle\n}\n","import { useState, useEffect, useRef, createContext, useContext } from 'react'\nimport { UserOverridesConfig } from 'contro-max/build/types/store'\nimport { AllKeyCodes } from 'contro-max/build/types/keyCodes'\nimport { contro as controEx } from '../controls'\nimport { hideModal } from '../globalState'\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\nimport KeybindingsCustom, { CustomCommandsMap } from './KeybindingsCustom'\nimport { BindingActionsContext } from './KeybindingsScreenProvider'\nimport Button from './Button'\nimport Screen from './Screen'\nimport Keybinding from './Keybinding'\nimport styles from './KeybindingsScreen.module.css'\n\n\ntype HandleClick = (group: string, action: string, index: number, type: string | null) => void\n\ntype setBinding = (data: any, group: string, command: string, buttonIndex: number) => void\n\nexport const Context = createContext({\n  isPS: false as boolean | undefined,\n  userConfig: controEx?.userConfig ?? {} as UserOverridesConfig | undefined,\n  setUserConfig (config) { },\n  handleClick: (() => { }) as HandleClick,\n  bindsMap: { keyboard: {} as any, gamepad: {} as any }\n})\n\nexport default ({\n  contro,\n  isPS,\n}: {\n  contro: typeof controEx,\n  isPS?: boolean\n}) => {\n  const containerRef = useRef<HTMLDivElement | null>(null)\n  const bindsMap = useRef({ keyboard: {} as any, gamepad: {} as any })\n  const { commands } = contro.inputSchema\n  const [userConfig, setUserConfig] = useState(contro.userConfig ?? {})\n  const [awaitingInputType, setAwaitingInputType] = useState(null as null | 'keyboard' | 'gamepad')\n  const [groupName, setGroupName] = useState('')\n  const [actionName, setActionName] = useState('')\n  const [buttonNum, setButtonNum] = useState(0)\n  const { updateBinds } = useContext(BindingActionsContext)\n  const [customCommands, setCustomCommands] = useState<CustomCommandsMap>(userConfig.custom as CustomCommandsMap ?? {})\n\n  const updateCurrBind = (group: string, action: string) => {\n    setGroupName(prev => group)\n    setActionName(prev => action)\n  }\n\n  const handleClick: HandleClick = (group, action, index, type) => {\n    (document.activeElement as HTMLElement)?.blur()\n    setAwaitingInputType(type as any)\n    updateCurrBind(group, action)\n    setButtonNum(prev => index)\n  }\n\n  const setBinding: setBinding = (data, group, command, buttonIndex) => {\n    setUserConfig(prev => {\n      const newConfig = { ...prev }\n      newConfig[group] ??= {}\n      newConfig[group][command] ??= {}\n\n      // keys and buttons should always exist in commands\n      const type = 'code' in data ? 'keys' : 'button' in data ? 'gamepad' : null\n      if (type) {\n        newConfig[group][command][type] ??= group === 'custom' ? [] : [...contro.inputSchema.commands[group][command][type]]\n        newConfig[group][command][type]![buttonIndex] = data.code ?? data.button\n      }\n\n      return newConfig\n    })\n  }\n\n  const resetBinding = (group: string, command: string, inputType: string) => {\n    if (!userConfig?.[group]?.[command]) return\n\n    setUserConfig(prev => {\n      const newConfig = { ...prev }\n      const prop = inputType === 'keyboard' ? 'keys' : 'gamepad'\n      newConfig[group][command][prop] = undefined\n      return newConfig\n    })\n  }\n\n  useEffect(() => {\n    updateBinds(userConfig)\n    setCustomCommands({ ...userConfig.custom as CustomCommandsMap })\n\n    updateBindMap()\n  }, [userConfig])\n\n  const updateBinding = (data: any) => {\n    if ((!data.state && awaitingInputType) || !awaitingInputType) {\n      setAwaitingInputType(null)\n      return\n    }\n\n\n    if ('code' in data) {\n      if (data.state && [...contro.pressedKeys].includes(data.code)) return\n\n      if (data.code === 'Escape' || ['Mouse0', 'Mouse1', 'Mouse2'].includes(data.code)) {\n        setAwaitingInputType(null)\n        return\n      }\n      const pressedModifiers = [...contro.pressedKeys].filter(key => /^(Meta|Control|Alt|Shift)?$/.test(key))\n      setBinding(\n        { code: pressedModifiers.length ? `${pressedModifiers[0]}+${data.code}` : data.code, state: true },\n        groupName,\n        actionName,\n        buttonNum\n      )\n    }\n    if ('button' in data) {\n      contro.enabled = false\n      void Promise.resolve().then(() => { contro.enabled = true })\n      setBinding(data, groupName, actionName, buttonNum)\n    }\n  }\n\n  const updateBindMap = () => {\n    bindsMap.current = { keyboard: {} as any, gamepad: {} as any }\n    if (commands) {\n      for (const [group, actions] of Object.entries(commands)) {\n        for (const [action, { keys, gamepad }] of Object.entries(actions)) {\n          if (keys) {\n            let currKeys\n            if (userConfig?.[group]?.[action]?.keys) {\n              currKeys = userConfig[group][action].keys\n            } else {\n              currKeys = keys\n            }\n            for (const [index, key] of currKeys.entries()) {\n              bindsMap.current.keyboard[key] ??= []\n              if (!bindsMap.current.keyboard[key].some(obj => obj.group === group && obj.action === action && obj.index === index)) {\n                bindsMap.current.keyboard[key].push({ group, action, index })\n              }\n            }\n          }\n          if (gamepad) {\n            let currButtons\n            if (userConfig?.[group]?.[action]?.gamepad) {\n              currButtons = userConfig[group][action].gamepad\n            } else {\n              currButtons = gamepad\n            }\n            if (currButtons.length > 0) {\n              bindsMap.current.gamepad[currButtons[0]] ??= []\n              bindsMap.current.gamepad[currButtons[0]].push({ group, action, index: 0 })\n            }\n          }\n        }\n      }\n    }\n  }\n\n  // fill binds map\n  useEffect(() => {\n    updateBindMap()\n  }, [])\n\n  useEffect(() => {\n    if (!awaitingInputType) return\n    contro.on('pressedKeyOrButtonChanged', updateBinding)\n    const preventDefault = (e) => e.preventDefault()\n    document.addEventListener('keydown', preventDefault, { passive: false })\n\n    return () => {\n      contro.off('pressedKeyOrButtonChanged', updateBinding)\n      document.removeEventListener('keydown', preventDefault)\n    }\n  }, [groupName, actionName, awaitingInputType])\n\n\n  return <Context.Provider value={{\n    isPS,\n    userConfig,\n    setUserConfig,\n    handleClick,\n    bindsMap: bindsMap.current\n  }}\n  >\n    <Screen title=\"Keybindings\" backdrop>\n      {awaitingInputType && <AwaitingInputOverlay isGamepad={awaitingInputType === 'gamepad'} />}\n      <div\n        className={styles.container}\n        ref={containerRef}\n      >\n        <Button\n          onClick={() => { hideModal() }}\n          style={{ alignSelf: 'center' }}\n        >Back\n        </Button>\n\n        {Object.entries(commands).map(([group, actions], index) => {\n          if (group === 'custom') return null\n          return <div key={`group-container-${group}-${index}`} className={styles.group}>\n            <div className={styles['group-category']}>{group}</div>\n            {group === 'general' ? (\n              <div style={{\n                color: 'rgba(255, 255, 255, 0.7)',\n                fontSize: '6px',\n                textAlign: 'center'\n              }}\n              >\n                Note: Left, right and middle click keybindings are hardcoded and cannot be changed currently.\n              </div>\n            ) : null}\n            {Object.entries(actions).map(([action, { keys, gamepad }]) => {\n              return <div key={`action-container-${action}`} className={styles.actionBinds}>\n                <div className={styles.actionName}>{parseActionName(action)}</div>\n\n                <Button\n                  onClick={() => {\n                    updateCurrBind(group, action)\n                    resetBinding(group, action, 'keyboard')\n                  }}\n                  style={{ opacity: userConfig?.[group]?.[action]?.keys?.length ? 1 : 0 }}\n                  className={styles['undo-keyboard']}\n                  icon={pixelartIcons.undo}\n                />\n\n                {[0, 1].map((key, index) => <ButtonWithMatchesAlert\n                  key={`keyboard-${group}-${action}-${index}`}\n                  group={group}\n                  action={action}\n                  index={index}\n                  inputType=\"keyboard\"\n                  keys={keys}\n                  gamepad={gamepad}\n                />)}\n\n                <Button\n                  key={`keyboard-${group}-${action}`}\n                  onClick={() => {\n                    updateCurrBind(group, action)\n                    resetBinding(group, action, 'gamepad')\n                  }}\n                  style={{\n                    opacity: userConfig?.[group]?.[action]?.gamepad?.length ? 1 : 0,\n                    width: '0px'\n                  }}\n                  className={`${styles['undo-gamepad']} ${styles['margin-left']}`}\n                  icon={pixelartIcons.undo}\n                />\n                <ButtonWithMatchesAlert\n                  key={`gamepad-${group}-${action}`}\n                  group={group}\n                  action={action}\n                  index={0}\n                  inputType=\"gamepad\"\n                  keys={keys}\n                  gamepad={gamepad}\n                />\n              </div>\n            })}\n          </div>\n        })}\n\n        <KeybindingsCustom\n          customCommands={customCommands}\n          updateCurrBind={updateCurrBind}\n          resetBinding={resetBinding}\n        />\n      </div>\n    </Screen>\n  </Context.Provider>\n}\n\nexport const ButtonWithMatchesAlert = ({\n  group,\n  action,\n  index,\n  inputType,\n  keys,\n  gamepad,\n}) => {\n  const { isPS, userConfig, handleClick, bindsMap } = useContext(Context)\n  const [buttonSign, setButtonSign] = useState('')\n\n  useEffect(() => {\n    const type = inputType === 'keyboard' ? 'keys' : 'gamepad'\n\n    const customValue = userConfig?.[group]?.[action]?.[type]?.[index]\n    if (customValue) {\n      setButtonSign(customValue)\n    } else if (type === 'keys') {\n      setButtonSign(keys?.length ? keys[index] : '')\n    } else {\n      setButtonSign(gamepad?.[0] ?? '')\n    }\n  }, [userConfig, isPS])\n\n  return <div\n    key={`warning-container-${inputType}-${action}`}\n    className={`${styles['warning-container']}`}\n  >\n    <Button\n      key={`${inputType}-${group}-${action}-${index}`}\n      onClick={() => handleClick(group, action, index, inputType)}\n      className={`${styles.button}`}\n    >\n      <Keybinding type={inputType} val={buttonSign as AllKeyCodes} />\n    </Button>\n    {userConfig?.[group]?.[action]?.[inputType === 'keyboard' ? 'keys' : 'gamepad']?.some(key => Object.keys(bindsMap[inputType]).includes(key)\n    && bindsMap[inputType][key].length > 1\n    && bindsMap[inputType][key].some(prop => prop.index === index\n    && prop.group === group\n    && prop.action === action)) ? (\n      //@ts-format-ignore-region\n        <div id={`bind-warning-${group}-${action}-${inputType}-${index}`} className={styles['matched-bind-warning']}>\n          <PixelartIcon\n            iconName=\"alert\"\n            width={5}\n            styles={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              marginRight: '2px'\n            }}\n          />\n          <div>\n            This bind is already in use. <span />\n          </div>\n        </div>\n      )\n      //@ts-format-ignore-endregion\n      : null}\n  </div>\n}\n\nexport const AwaitingInputOverlay = ({ isGamepad }) => {\n  return <div\n    style={{\n      position: 'fixed',\n      inset: 0,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexDirection: 'column',\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      color: 'white',\n      fontSize: 20,\n      zIndex: 10,\n      textAlign: 'center',\n    }}\n    onContextMenu={e => e.preventDefault()}\n  >\n    <div>\n      {isGamepad ? 'Press the button on the gamepad ' : 'Press the key, side mouse button '}\n      or ESC to cancel.\n    </div>\n    <Button\n      onClick={() => {\n        document.dispatchEvent(new KeyboardEvent('keydown', { key: 'Escape' }))\n      }}\n    >\n      Cancel\n    </Button>\n  </div>\n}\n\nconst parseActionName = (action: string) => {\n  const parts = action.split(/(?=[A-Z])/)\n  parts[0] = parts[0].charAt(0).toUpperCase() + parts[0].slice(1)\n  return parts.join(' ')\n}\n","import { createContext, useState } from 'react'\nimport { contro, updateBinds } from '../controls'\nimport KeybindingsScreen from './KeybindingsScreen'\nimport { useIsModalActive } from './utilsApp'\n\nconst bindingActions = {\n  updateBinds\n}\n\nexport const BindingActionsContext = createContext(bindingActions)\n\nexport default () => {\n  const [bindActions, setBindActions] = useState(bindingActions)\n  const isModalActive = useIsModalActive('keybindings')\n\n  if (!isModalActive) return null\n\n  const hasPsGamepad = [...(navigator.getGamepads?.() ?? [])].some(gp => gp?.id.match(/playstation|dualsense|dualshock/i)) // todo: use last used gamepad detection\n  return <BindingActionsContext.Provider value={bindActions}>\n    <KeybindingsScreen isPS={hasPsGamepad} contro={contro} />\n  </BindingActionsContext.Provider>\n}\n","import { useEffect, useState } from 'react'\nimport { mapDownloader } from 'mineflayer-item-map-downloader/'\nimport { setImageConverter } from 'mineflayer-item-map-downloader/lib/util'\n\nexport default () => {\n  const [dataUrl, setDataUrl] = useState<string | null | true>(null) // true means loading\n\n  useEffect(() => {\n    bot.loadPlugin(mapDownloader)\n\n    setImageConverter((buf: Uint8Array) => {\n      const canvas = document.createElement('canvas')\n      const ctx = canvas.getContext('2d')!\n      canvas.width = 128\n      canvas.height = 128\n      const imageData = ctx.createImageData(canvas.width, canvas.height)\n      imageData.data.set(buf)\n      ctx.putImageData(imageData, 0, 0)\n      // data url\n      return canvas.toDataURL('image/png')\n    })\n\n    // TODO delete maps!\n    const updateHeldMap = () => {\n      setDataUrl(null)\n      if (!bot.heldItem || !['filled_map', 'map'].includes(bot.heldItem.name)) return\n      // setDataUrl(true)\n      const mapNumber = (bot.heldItem?.nbt?.value as any)?.map?.value\n      // if (!mapNumber) return\n      setDataUrl(bot.mapDownloader.maps?.[mapNumber] as unknown as string)\n    }\n\n    bot.on('heldItemChanged' as any, () => {\n      updateHeldMap()\n    })\n\n    bot.on('new_map', () => {\n      // total maps: Object.keys(bot.mapDownloader.maps).length\n      updateHeldMap()\n    })\n  }, [])\n\n  return dataUrl && dataUrl !== true ? <div style={{\n    position: 'fixed',\n    bottom: 20,\n    left: 8,\n    pointerEvents: 'none',\n  }}\n  >\n    <img\n      src={dataUrl} style={{\n        width: 92,\n        height: 92,\n        imageRendering: 'pixelated',\n      }}\n    />\n  </div> : null\n}\n","import { hideCurrentModal } from '../globalState'\nimport Button from './Button'\nimport { useIsModalActive } from './utilsApp'\n\nexport default () => {\n  const isModalActive = useIsModalActive('bed')\n\n  if (!isModalActive) return null\n\n  return <div style={{\n    position: 'fixed',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    display: 'flex',\n    justifyContent: 'center',\n  }}\n  >\n    <Button onClick={() => {\n      void bot.wake()\n      hideCurrentModal()\n    }}>Cancel</Button>\n  </div>\n}\n","import { proxy, subscribe, useSnapshot } from 'valtio'\nimport { activeModalStack, hideCurrentModal } from '../globalState'\nimport Screen from './Screen'\nimport Button from './Button'\nimport { hardcodedKnownModals, watchedModalsFromHooks } from './utilsApp'\n\nconst componentActive = proxy({\n  enabled: false\n})\n\nsubscribe(activeModalStack, () => {\n  const last = activeModalStack.at(-1)\n  let withWildCardModal = false\n  for (const modal of watchedModalsFromHooks) {\n    if (modal.endsWith('*') && last?.reactType.startsWith(modal.slice(0, -1))) {\n      withWildCardModal = true\n      break\n    }\n  }\n\n  componentActive.enabled = !!last && !hardcodedKnownModals.some(x => last.reactType.startsWith(x)) && !watchedModalsFromHooks.has(last.reactType) && !withWildCardModal\n})\n\nexport default () => {\n  const { enabled } = useSnapshot(componentActive)\n  const lastModal = useSnapshot(activeModalStack).at(-1)?.reactType\n\n  if (!enabled) return null\n  return <Screen\n    title={`Error: Modal (route) ${lastModal} is is unavailable or doesn't exist`}\n    style={{\n      zIndex: -1,\n    }}\n    backdrop={false}\n  >\n    <Button\n      style={{ marginTop: 30 }} onClick={() => {\n        hideCurrentModal()\n      }}\n    >Back\n    </Button>\n  </Screen>\n}\n","import { useState } from 'react'\nimport { useUtilsEffect } from '@zardoy/react-util'\nimport { QRCodeSVG } from 'qrcode.react'\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\nimport Screen from './Screen'\nimport Button from './Button'\n\nexport default ({\n  code = 'ABCD-EFGH-IJKL-MNOP',\n  loginLink = 'https://aka.ms/devicelogin',\n  connectingServer = 'mc.example.comsdlfjsklfjsfjdskfjsj',\n  expiresEnd = Date.now() + 1000 * 60 * 5,\n  setSaveToken = (() => { }) as ((state: boolean) => void) | undefined,\n  defaultSaveToken = true,\n  onCancel = () => { },\n  directLink = 'https://aka.ms/devicelogin'\n}) => {\n  if (connectingServer.length > 30) connectingServer = connectingServer.slice(0, 30) + '...'\n  const [timeLeft, setTimeLeft] = useState(``)\n\n  useUtilsEffect(({ interval }) => {\n    interval(1000, () => {\n      const timeLeft = Math.max(0, Math.ceil((expiresEnd - Date.now()) / 1000))\n      const minutes = Math.floor(timeLeft / 60)\n      const seconds = timeLeft % 60\n      setTimeLeft(`${minutes}:${seconds.toString().padStart(2, '0')}`)\n      if (timeLeft <= 0) setTimeLeft('Code expired!')\n    })\n  }, [])\n\n  return <Screen title='Microsoft Account Authentication' titleMarginTop={5}>\n    <div style={{\n      background: 'white',\n      padding: '20px 18px',\n      width: 300,\n      maxHeight: 240,\n      color: 'black',\n      // borderRadius: 8,\n    }}\n    >\n      <div style={{\n        // fontFamily: 'monospace',\n        fontSize: 18,\n        padding: '5px 10px',\n        paddingBottom: 1,\n        backgroundColor: 'lightgray',\n        textAlign: 'center',\n        marginTop: -5,\n        userSelect: 'all',\n      }}\n      >{code}\n      </div>\n      <div style={{\n        display: 'flex',\n        justifyContent: 'center',\n        fontSize: 12,\n      }}\n      >\n        Waiting... <PixelartIcon iconName='clock' /> {timeLeft}\n      </div>\n      <div style={{\n        fontSize: 12,\n        marginTop: 10,\n      }}\n      >\n        To join a Minecraft server {connectingServer} using your Microsoft account, you need to visit{' '}\n        <a\n          href={directLink}\n          style={{\n            color: 'black',\n            textDecoration: 'underline',\n            fontWeight: 600,\n          }}\n          target='_blank'\n        >Direct Link\n        </a>\n        {' '} or {' '}\n        <a\n          href={loginLink}\n          style={{\n            color: 'black',\n            textDecoration: 'underline',\n            fontWeight: 600,\n          }}\n          target='_blank'\n        >{loginLink.replace(/(https?:\\/\\/)?(www\\.)?/, '')}\n        </a>\n        {' '}\n        and enter the code above.\n      </div>\n      <div style={{\n        fontSize: 11,\n        marginTop: 5,\n        color: 'gray',\n        display: 'flex',\n        gap: 2\n      }}\n      >\n        <div>\n          <PixelartIcon iconName={pixelartIcons.alert} styles={{ display: 'inline-block', }} />\n          Join only <b>vanilla servers</b>! This client is detectable and may result in a ban by anti-cheat plugins.\n        </div>\n        <QRCodeSVG size={40} value={directLink} style={{ display: 'block', flexShrink: 0 }} color='gray' />\n      </div>\n      {setSaveToken && <label style={{\n        fontSize: 12,\n        display: 'flex',\n        alignItems: 'center',\n        gap: 5,\n        marginTop: 4,\n      }}\n      >\n        <input type='checkbox' defaultChecked={defaultSaveToken} onChange={e => setSaveToken(e.target.checked)} />{' '}\n        Save account token in this browser\n      </label>}\n    </div>\n    <Button\n      style={{\n        marginTop: -5,\n      }}\n      onClick={onCancel}\n    >Cancel\n    </Button>\n  </Screen>\n}\n","import { proxy, ref, useSnapshot } from 'valtio'\nimport SignInMessage from './SignInMessage'\nimport { lastConnectOptions } from './AppStatusProvider'\nimport { useIsModalActive } from './utilsApp'\n\nexport const signInMessageState = proxy({\n  code: '',\n  link: '',\n  expiresOn: 0,\n  shouldSaveToken: true,\n  abortController: ref(new AbortController()),\n})\n\nexport default () => {\n  const { code, expiresOn, link, shouldSaveToken } = useSnapshot(signInMessageState)\n  const signInTestModal = useIsModalActive('sign-in-test')\n\n  if (!code && !signInTestModal) return null\n\n  return <SignInMessage\n    code={code}\n    expiresEnd={expiresOn}\n    loginLink={link}\n    defaultSaveToken={shouldSaveToken}\n    setSaveToken={(state) => {\n      signInMessageState.shouldSaveToken = state\n    }}\n    connectingServer={lastConnectOptions.value?.server ?? ''}\n    onCancel={() => {\n      signInMessageState.abortController.abort()\n    }}\n    directLink={`http://microsoft.com/link?otc=${code}`}\n  />\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"bookWrapper\":\"bookWrapper-TEaT2a\",\"bookContainer\":\"bookContainer-ozXOuS\",\"bookImages\":\"bookImages-QIgUqp\",\"outSide\":\"outSide-tdPk6N\",\"titleIcon\":\"titleIcon-FuigMg\",\"titleContent\":\"titleContent-HOFf9S\",\"insideIcon\":\"insideIcon-mvWhHG\",\"insideHalfIcon\":\"insideHalfIcon-oGVWWK\",\"inside\":\"inside-PZ2fCX\",\"uneditable\":\"uneditable-IHhvqQ\",\"page\":\"page-1nUQUw\",\"messageFormattedString\":\"messageFormattedString-MAym7w\",\"textArea\":\"textArea-CTZEzD\",\"blink\":\"blink-k8j9re\",\"controlPrev\":\"controlPrev-lG4k_N\",\"controlNext\":\"controlNext-KXyao4\",\"actions\":\"actions-Puvqtl\",\"pageAnimation\":\"pageAnimation-A9GdFI\",\"titleAnimation\":\"titleAnimation-DE4b6h\",\"titleContentAnimation\":\"titleContentAnimation-VkNFpG\",\"insideAnimation\":\"insideAnimation-ztZegY\",\"pageTextAnimation\":\"pageTextAnimation-FFgFRV\",\"pageSecondTextAnimation\":\"pageSecondTextAnimation-II5__1\",\"hidden\":\"hidden-W0KfLq\",\"titleAnimationReverse\":\"titleAnimationReverse-FRokqy\",\"titleContentAnimationReverse\":\"titleContentAnimationReverse-UxVYyT\",\"insideAnimationReverse\":\"insideAnimationReverse-wRiH6k\",\"pageAnimationReverse\":\"pageAnimationReverse-I_oYqS\",\"pageTextAnimationReverse\":\"pageTextAnimationReverse-OqcZ1i\",\"pageSecondTextAnimationReverse\":\"pageSecondTextAnimationReverse-iU27Jz\",\"pageButtonAnimationReverse\":\"pageButtonAnimationReverse-lx7O3V\",\"text\":\"text-PsAhko\"};","import React, { useState, useRef, useEffect, useCallback } from 'react'\nimport insideIcon from './book_icons/book.webp'\nimport insideHalfIcon from './book_icons/book-half.webp'\nimport singlePageInsideIcon from './book_icons/notebook.webp'\nimport titleIcon from './book_icons/title.webp'\nimport styles from './Book.module.css'\nimport Button from './Button'\nimport MessageFormattedString from './MessageFormattedString'\n\nexport interface BookProps {\n  textPages: string[]\n  editable: boolean\n  onSign: (textPages: string[], title: string) => void\n  onEdit: (textPages: string[]) => void\n  onClose: () => void\n  author: string\n}\n\nconst Book: React.FC<BookProps> = ({ textPages, editable, onSign, onEdit, onClose, author }) => {\n  const [pages, setPages] = useState<string[]>(textPages)\n  const [currentPage, setCurrentPage] = useState(0)\n  const [isSinglePage, setIsSinglePage] = useState(window.innerWidth < 972)\n  const [insideImage, setInsideImage] = useState(window.innerWidth < 972 ? singlePageInsideIcon : insideIcon)\n  const [animateInsideIcon, setAnimateInsideIcon] = useState(0)\n  const [animatePageIcon, setAnimatePageIcon] = useState(0)\n  const [animateTitleIcon, setAnimateTitleIcon] = useState(0)\n  const [signClickedOnce, setSignClickedOnce] = useState(false)\n  const textAreaRefs = useRef<HTMLTextAreaElement[]>([])\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  const handleResize = useCallback(() => {\n    const isSingle = window.innerWidth < 972\n    setIsSinglePage(isSingle)\n    setInsideImage(isSingle ? singlePageInsideIcon : insideIcon)\n  }, [])\n\n  useEffect(() => {\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [handleResize])\n\n  useEffect(() => {\n    const index = currentPage * (isSinglePage ? 1 : 2)\n    if (textAreaRefs.current[index]) textAreaRefs.current[index].focus()\n  }, [currentPage, isSinglePage])\n\n  useEffect(() => {\n    if (signClickedOnce) {\n      setTimeout(() => {\n        inputRef.current!.focus()\n      }, 300) // wait for animation\n    }\n  }, [signClickedOnce])\n\n  const handlePageChange = (direction: number) => {\n    setCurrentPage((prevPage) => Math.min(Math.max(prevPage + direction, 0), Math.ceil(pages.length / (isSinglePage ? 1 : 2)) - 1))\n  }\n\n  const updatePage = (index, text) => {\n    setPages((prevPages) => {\n      const updatedPages = [...prevPages]\n      updatedPages[index] = text\n      return updatedPages\n    })\n  }\n\n  const handleTextChange = (e, pageIndex) => {\n    const text = e.target.value\n    updatePage(pageIndex, text)\n\n    const nextPageIndex = pageIndex + 1\n    const isMaxLengthReached = text.length >= e.target.maxLength\n\n    if (isMaxLengthReached) {\n      if (nextPageIndex < pages.length) {\n        setCurrentPage(Math.floor(nextPageIndex / (isSinglePage ? 1 : 2)))\n      } else {\n        setPages((prevPages) => [...prevPages, ''])\n        setCurrentPage(Math.floor(nextPageIndex / (isSinglePage ? 1 : 2)))\n      }\n      textAreaRefs.current[nextPageIndex]?.focus()\n    } else if (text === '' && pageIndex > 0 && e.nativeEvent.inputType === 'deleteContentBackward') {\n      setCurrentPage(Math.floor((pageIndex - 1) / (isSinglePage ? 1 : 2)))\n      textAreaRefs.current[pageIndex - 1]?.focus()\n    }\n  }\n\n  useEffect(() => {\n    const index = currentPage * (isSinglePage ? 1 : 2)\n    textAreaRefs.current[index]?.focus()\n  }, [currentPage, isSinglePage])\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLTextAreaElement>, pageIndex: number) => {\n    const pasteText = e.clipboardData.getData('text')\n    const updatedPages = [...pages]\n    const currentText = updatedPages[pageIndex]\n    const selectionStart = e.currentTarget.selectionStart || 0\n    const selectionEnd = e.currentTarget.selectionEnd || 0\n\n    const newText = currentText.slice(0, selectionStart) + pasteText + currentText.slice(selectionEnd)\n    updatedPages[pageIndex] = newText\n    setPages(updatedPages)\n\n    if (newText.length > e.currentTarget.maxLength) {\n      const remainingText = newText.slice(e.currentTarget.maxLength)\n      updatedPages[pageIndex] = newText.slice(0, e.currentTarget.maxLength)\n      setPages(updatedPages)\n\n      const nextPageIndex = pageIndex + 1\n\n      if (nextPageIndex < pages.length) {\n        handlePasteRemainingText(remainingText, nextPageIndex)\n      } else {\n        setPages((prevPages) => [...prevPages, remainingText])\n        setCurrentPage(Math.floor(nextPageIndex / (isSinglePage ? 1 : 2)))\n        focusOnTextArea(nextPageIndex)\n      }\n    }\n  }\n\n  const handlePasteRemainingText = (remainingText: string, nextPageIndex: number) => {\n    const updatedPages = [...pages]\n    updatedPages[nextPageIndex] = remainingText\n    setPages(updatedPages)\n    focusOnTextArea(nextPageIndex)\n  }\n\n  const focusOnTextArea = (index: number) => {\n    setTimeout(() => {\n      textAreaRefs.current[index]?.focus()\n    }, 0)\n  }\n\n  const handleSign = useCallback(() => {\n    if (editable && signClickedOnce) {\n      const title = inputRef.current?.value || ''\n      onSign(pages, title)\n    }\n    setSignClickedOnce(true)\n    setAnimatePageIcon(1)\n    setAnimateInsideIcon(1)\n    setTimeout(() => {\n      setAnimateTitleIcon(1)\n    }, 150)\n  }, [pages, onSign, editable, signClickedOnce])\n\n  const handleEdit = useCallback(() => {\n    setSignClickedOnce(false)\n    onEdit(pages)\n  }, [pages, onEdit])\n\n  const handleCancel = useCallback(() => {\n    if (signClickedOnce) {\n      setSignClickedOnce(false)\n      setAnimateTitleIcon(2)\n      setTimeout(() => {\n        setAnimateInsideIcon(2)\n        setTimeout(() => {\n          setAnimatePageIcon(2)\n        }, 150)\n      }, 150)\n    } else {\n      onClose()\n    }\n  }, [signClickedOnce, onClose])\n\n  const setRef = (index: number) => (el: HTMLTextAreaElement | null) => {\n    textAreaRefs.current[index] = el!\n  }\n\n  const getAnimationClass = (animationState, baseClass) => {\n    switch (animationState) {\n      case 1:\n        return `${baseClass} ${styles.pageAnimation}`\n      case 2:\n        return `${baseClass} ${styles.pageAnimationReverse}`\n      default:\n        return baseClass\n    }\n  }\n\n  const renderPage = (index) => (\n    <div className={styles.page} key={index}>\n      {editable ? (\n        <textarea\n          onContextMenu={(e) => {\n            e.stopPropagation() // allow to open system context menu on text area for better UX\n          }}\n          ref={setRef(index)}\n          value={pages[index]}\n          onChange={(e) => handleTextChange(e, index)}\n          onPaste={(e) => handlePaste(e, index)}\n          className={getAnimationClass(animatePageIcon, styles.textArea)}\n          maxLength={500}\n        />\n      ) : (\n        <div className={getAnimationClass(animatePageIcon, '')}>\n          <MessageFormattedString message={pages[index]} fallbackColor='black' className={styles.messageFormattedString} />\n        </div>\n      )}\n    </div>\n  )\n\n  return (\n    <div className={styles.bookWrapper}>\n      <div className={styles.bookContainer}>\n        <img\n          src={insideImage}\n          className={`${styles.insideIcon} ${\n            animateInsideIcon === 1\n              ? styles.insideAnimation\n              : animateTitleIcon === 2\n                ? styles.insideAnimationReverse\n                : ''\n          }`}\n          alt=\"inside Icon\"\n        />\n        <img\n          src={insideHalfIcon}\n          className={`${styles.insideHalfIcon} ${\n            animatePageIcon === 1\n              ? styles.pageAnimation\n              : animatePageIcon === 2\n                ? styles.pageAnimationReverse\n                : ''\n          }`}\n          alt=\"inside Page Icon\"\n        />\n        <img\n          src={titleIcon}\n          className={`${styles.titleIcon} ${\n            animateTitleIcon === 1\n              ? styles.titleAnimation\n              : animateTitleIcon === 2\n                ? styles.titleAnimationReverse\n                : ''\n          }`}\n          alt=\"Title Icon\"\n        />\n        <div className={`${styles.inside}`}>\n          {renderPage(currentPage * (isSinglePage ? 1 : 2))}\n          {!isSinglePage && (currentPage * 2 + 1) < pages.length && renderPage(currentPage * 2 + 1)}\n          <Button\n            className={`${styles.controlPrev} ${\n              animateInsideIcon === 1\n                ? styles.hidden\n                : animateInsideIcon === 2\n                  ? styles.pageButtonAnimationReverse\n                  : ''\n            }`}\n            onClick={() => handlePageChange(-1)}\n            disabled={currentPage === 0}\n          >\n            {' '}\n          </Button>\n          <Button\n            className={`${styles.controlNext} ${\n              animateInsideIcon === 1\n                ? styles.hidden\n                : animateInsideIcon === 2\n                  ? styles.pageButtonAnimationReverse\n                  : ''\n            }`}\n            onClick={() => handlePageChange(1)}\n            disabled={(currentPage + 1) * (isSinglePage ? 1 : 2) >= pages.length}\n          >\n            {' '}\n          </Button>\n        </div>\n        <div\n          className={`${styles.outSide} ${\n            animateTitleIcon === 1\n              ? styles.titleContentAnimation\n              : animateTitleIcon === 2\n                ? styles.titleContentAnimationReverse\n                : ''\n          }`}\n        >\n          {editable ? (\n            <div className={`${styles.titleContent}`} >\n              <MessageFormattedString message=\"Enter Book Title: \" />\n              <form onSubmit={(e) => {\n                e.preventDefault()\n                handleSign()\n              }}\n              >\n                <input\n                  ref={inputRef}\n                  className=\"\"\n                />\n                {/* for some reason this is needed to make Enter work on android chrome */}\n                <button type='submit' style={{ visibility: 'hidden', height: 0, width: 0 }} />\n              </form>\n              <MessageFormattedString message={`by ${author}`} />\n              <br />\n              <MessageFormattedString message=\"Note! When you sign the book, it will no longer be editable.\" />\n            </div>\n          ) : (\n            <div className={`${styles.titleContent}`} >\n              <MessageFormattedString message=\"Book Name Here\" />\n              <br />\n              <MessageFormattedString message=\"by: Author\" />\n            </div>\n          )}\n        </div>\n      </div>\n      <div className={styles.actions}>\n        {editable && (\n          <Button onClick={handleSign}>\n            {signClickedOnce ? 'Sign and Save' : 'Sign'}\n          </Button>\n        )}\n\n        {editable && !signClickedOnce && <Button onClick={handleSign}>Sign</Button>}\n        {editable && !signClickedOnce && <Button onClick={handleEdit}>Edit</Button>}\n        <Button onClick={handleCancel}>{signClickedOnce ? 'Cancel' : 'Close'}</Button>\n      </div>\n    </div>\n  )\n}\n\nexport default Book\n","import { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\nimport nbt from 'prismarine-nbt'\nimport { useEffect, useState } from 'react'\nimport { useSnapshot } from 'valtio'\nimport mojangson from 'mojangson'\nimport { activeModalStack, hideCurrentModal, showModal } from '../globalState'\nimport Book from './Book'\nimport { useIsModalActive } from './utilsApp'\n\ninterface OpenedBook {\n  pages: string[]\n  title: string\n  author: string\n  isEditable: boolean\n}\n\nexport default () => {\n  const modalActive = useIsModalActive('book')\n  // const modalStack = useSnapshot(activeModalStack)\n  const [openedBook, setOpenedBook] = useState<OpenedBook | null>(null)\n\n  const signEditBook = (pages: string[], title: string | undefined) => {\n    if (versionToNumber(bot.version) < versionToNumber('1.17.2')) {\n      if (title === undefined) {\n        void bot.writeBook(bot.inventory.hotbarStart + bot.quickBarSlot, pages)\n      } else {\n        //@ts-expect-error\n        // slot, pages, author, title\n        bot.signBook(bot.inventory.hotbarStart + bot.quickBarSlot, pages, title, bot.username)\n      }\n      hideCurrentModal()\n      return\n    }\n    const currentSlot = bot.quickBarSlot\n    // mineflayer has wrong implementation of this action after 1.17.2\n    if (title === undefined) {\n      bot._client.write('edit_book', {\n        hand: currentSlot,\n        pages\n      })\n    } else {\n      bot._client.write('edit_book', {\n        hand: currentSlot,\n        pages,\n        title\n      })\n    }\n    hideCurrentModal()\n  }\n\n  // test: /give @p minecraft:written_book{pages:['{\"text\":\"4This is red text. lThis is bold text.\"}'],title:\"Book\",author:\"Author\"}\n  useEffect(() => {\n    const openBookWithNbt = () => {\n      if (activeModalStack.at(-1)?.reactType === 'book') {\n        hideCurrentModal()\n      }\n      const book = bot.inventory.slots[bot.inventory.hotbarStart + bot.quickBarSlot]\n      if (!book?.nbt) return\n      // {\"type\":\"compound\",\"name\":\"\",\"value\":{\"title\":{\"type\":\"string\",\"value\":\"yes\"},\"author\":{\"type\":\"string\",\"value\":\"bot\"},\"pages\":{\"type\":\"list\",\"value\":{\"type\":\"string\",\"value\":[\"{\\\"text\\\":\\\"1\\\"}\",\"{\\\"text\\\":\\\"4\\\"}\",\"{\\\"text\\\":\\\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\\\"}\"]}\n      const parsedData = nbt.simplify(book.nbt as any)\n      if (!parsedData.pages) return\n      const pages = parsedData.pages.map((page) => {\n        if (book.name !== 'written_book') return page\n        const parsedPage = mojangson.simplify(mojangson.parse(page))\n        return parsedPage.text ?? page\n      })\n      // const {title, author} = parsedData\n      setOpenedBook({\n        pages,\n        title: parsedData.title ?? '',\n        author: parsedData.author ?? '',\n        isEditable: book.name === 'writable_book',\n      })\n      showModal({ reactType: 'book' })\n    }\n    customEvents.on('activateItem', (item) => {\n      if (item.name === 'writable_book') {\n        if (item.nbt?.value.pages) {\n          openBookWithNbt()\n        } else {\n          setOpenedBook({\n            pages: [],\n            title: '',\n            author: '',\n            isEditable: true,\n          })\n          showModal({ reactType: 'book' })\n        }\n      }\n    })\n    bot._client.on('open_book', openBookWithNbt)\n  }, [])\n\n  useEffect(() => {\n    if (modalActive) return\n    setOpenedBook(null)\n  }, [modalActive])\n\n  if (!openedBook) return null\n  return <Book\n    textPages={openedBook.pages}\n    editable={openedBook.isEditable}\n    onSign={(pages, title) => signEditBook(pages, title)}\n    onEdit={(pages) => signEditBook(pages, undefined)}\n    onClose={() => {\n      hideCurrentModal()\n    }}\n    author={bot.username}\n  />\n}\n","import type { BossBar as BossBarTypeRaw } from 'mineflayer'\nimport { useState, useEffect } from 'react'\nimport MessageFormattedString from './MessageFormattedString'\nimport './BossBarOverlay.css'\n\nconst colors = ['pink', 'blue', 'red', 'green', 'yellow', 'purple', 'white']\nconst divs = [0, 6, 10, 12, 20]\nconst translations = {\n  'entity.minecraft.ender_dragon': 'Ender Dragon',\n  'entity.minecraft.wither': 'Wither'\n}\n\nexport type BossBarType = BossBarTypeRaw & {\n  // todo why not use public properties?\n  title: { text: string, translate: string },\n  _title: { text: string, translate: string },\n  _color: string,\n  _dividers: number,\n  _health: number\n}\n\nexport default ({ bar }: { bar: BossBarType }) => {\n  const [title, setTitle] = useState('')\n  const [bossBarStyles, setBossBarStyles] = useState<{ [key: string]: string | number }>({})\n  const [fillStyles, setFillStyles] = useState<{ [key: string]: string | number }>({})\n  const [div1Styles, setDiv1Styles] = useState<{ [key: string]: string | number }>({})\n  const [div2Styles, setDiv2Styles] = useState<{ [key: string]: string | number }>({})\n\n  useEffect(() => {\n    setTitle(bar._title.text ? bar.title.text : translations[bar.title.translate] || 'Unknown Entity')\n    setBossBarStyles(prevStyles => ({\n      ...prevStyles,\n      backgroundPositionY: `-${colors.indexOf(bar._color) * 10}px`\n    }))\n    setFillStyles(prevStyles => ({\n      ...prevStyles,\n      width: `${bar._health * 100}%`,\n      backgroundPositionY: `-${colors.indexOf(bar._color) * 10 + 5}px`\n    }))\n    setDiv1Styles(prevStyles => ({\n      ...prevStyles,\n      backgroundPositionY: `-${divs.indexOf(bar._dividers) * 10 + 70}px`\n    }))\n    setDiv2Styles(prevStyles => ({\n      ...prevStyles,\n      width: `${bar._health * 100}%`,\n      backgroundPositionY: `-${divs.indexOf(bar._dividers) * 10 + 75}px`\n    }))\n  }, [bar])\n\n  return (\n    <div className=\"bossbar-container\">\n      <div className=\"bossbar-title\"><MessageFormattedString message={title} /></div>\n      <div className=\"bossbar\" style={bossBarStyles}>\n        <div className=\"fill\" style={fillStyles} />\n        <div className=\"fill\" style={div1Styles} />\n        <div className=\"fill\" style={div2Styles} />\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport BossBar, { BossBarType } from './BossBarOverlay'\nimport './BossBarOverlay.css'\n\n\nexport default () => {\n  const [bossBars, setBossBars] = useState(new Map<string, BossBarType>())\n\n  useEffect(() => {\n    bot.on('bossBarCreated', (bossBar) => {\n      setBossBars(prevBossBars => new Map(prevBossBars.set(bossBar.entityUUID, bossBar as any)))\n    })\n    bot.on('bossBarUpdated', (bossBar) => {\n      setBossBars(prevBossBars => new Map(prevBossBars.set(bossBar.entityUUID, bossBar as BossBarType)))\n    })\n    bot.on('bossBarDeleted', (bossBar) => {\n      const newBossBars = new Map(bossBars)\n      newBossBars.delete(bossBar.entityUUID)\n      setBossBars(newBossBars)\n    })\n  }, [])\n\n  return (\n    <div className=\"bossBars\" id=\"bossBars\">\n      {[...bossBars.values()].map(bar => (\n        <BossBar key={bar.entityUUID} bar={bar} />\n      ))}\n    </div>\n  )\n}\n","import { useState } from 'react'\nimport { useIsHashActive } from './simpleHooks'\n\nexport default () => {\n  const MODES_COUNT = 4\n  const [mode, setMode] = useState(0)\n  const isHashActive = useIsHashActive('#edges')\n\n  if (!isHashActive) return null\n\n  const styles: React.CSSProperties = {\n    display: 'flex',\n    fontSize: 18,\n    zIndex: 10_000,\n    background: 'rgba(0, 0, 255, 0.5)',\n    border: '2px solid red',\n    whiteSpace: 'pre',\n  }\n  let text = ''\n  if (mode === 0) {\n    styles.position = 'fixed'\n    styles.inset = 0\n    styles.height = '100%'\n    text = 'inset 0 fixed 100% height'\n  }\n  if (mode === 1) {\n    styles.position = 'fixed'\n    styles.inset = 0\n    text = 'inset 0 fixed'\n  }\n  if (mode === 2) {\n    styles.position = 'absolute'\n    styles.inset = 0\n    text = 'inset 0 absolute'\n  }\n  if (mode === 3) {\n    styles.position = 'fixed'\n    styles.top = 0\n    styles.left = 0\n    styles.right = 0\n    styles.height = '100dvh'\n    text = 'top 0 fixed 100dvh'\n  }\n\n  return <div\n    style={styles}\n    onClick={() => {\n      setMode((mode + 1) % MODES_COUNT)\n    }}\n  >\n    {mode}: {text}{'\\n'}\n    inner: {window.innerWidth}x{window.innerHeight}{'\\n'}\n    outer: {window.outerWidth}x{window.outerHeight}{'\\n'}\n  </div>\n}\n","//@ts-check\nimport { renderToDom, ErrorBoundary } from '@zardoy/react-util'\nimport { useSnapshot } from 'valtio'\nimport { QRCodeSVG } from 'qrcode.react'\nimport { createPortal } from 'react-dom'\nimport { useEffect, useMemo, useState } from 'react'\nimport { activeModalStack, miscUiState } from './globalState'\nimport DeathScreenProvider from './react/DeathScreenProvider'\nimport OptionsRenderApp from './react/OptionsRenderApp'\nimport MainMenuRenderApp from './react/MainMenuRenderApp'\nimport SingleplayerProvider from './react/SingleplayerProvider'\nimport CreateWorldProvider from './react/CreateWorldProvider'\nimport AppStatusProvider from './react/AppStatusProvider'\nimport SelectOption from './react/SelectOption'\nimport EnterFullscreenButton from './react/EnterFullscreenButton'\nimport ChatProvider from './react/ChatProvider'\nimport TitleProvider from './react/TitleProvider'\nimport ScoreboardProvider from './react/ScoreboardProvider'\nimport SignEditorProvider from './react/SignEditorProvider'\nimport IndicatorEffectsProvider from './react/IndicatorEffectsProvider'\nimport PlayerListOverlayProvider from './react/PlayerListOverlayProvider'\nimport MinimapProvider from './react/MinimapProvider'\nimport HudBarsProvider from './react/HudBarsProvider'\nimport XPBarProvider from './react/XPBarProvider'\nimport DebugOverlay from './react/DebugOverlay'\nimport MobileTopButtons from './react/MobileTopButtons'\nimport PauseScreen from './react/PauseScreen'\nimport SoundMuffler from './react/SoundMuffler'\nimport TouchControls from './react/TouchControls'\nimport widgets from './react/widgets'\nimport { useIsModalActive, useIsWidgetActive } from './react/utilsApp'\nimport GlobalSearchInput from './react/GlobalSearchInput'\nimport TouchAreasControlsProvider from './react/TouchAreasControlsProvider'\nimport NotificationProvider, { showNotification } from './react/NotificationProvider'\nimport HotbarRenderApp from './react/HotbarRenderApp'\nimport Crosshair from './react/Crosshair'\nimport ButtonAppProvider from './react/ButtonAppProvider'\nimport ServersListProvider from './react/ServersListProvider'\nimport GamepadUiCursor from './react/GamepadUiCursor'\nimport KeybindingsScreenProvider from './react/KeybindingsScreenProvider'\nimport HeldMapUi from './react/HeldMapUi'\nimport BedTime from './react/BedTime'\nimport NoModalFoundProvider from './react/NoModalFoundProvider'\nimport SignInMessageProvider from './react/SignInMessageProvider'\nimport BookProvider from './react/BookProvider'\nimport { options } from './optionsStorage'\nimport BossBarOverlayProvider from './react/BossBarOverlayProvider'\nimport DebugEdges from './react/DebugEdges'\n\nconst RobustPortal = ({ children, to }) => {\n  return createPortal(<PerComponentErrorBoundary>{children}</PerComponentErrorBoundary>, to)\n}\n\nconst DisplayQr = () => {\n  const { currentDisplayQr } = useSnapshot(miscUiState)\n\n  if (!currentDisplayQr) return null\n\n  return <div\n    style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      zIndex: 15\n    }}\n    onClick={() => {\n      miscUiState.currentDisplayQr = null\n    }}\n  >\n    <QRCodeSVG size={384} value={currentDisplayQr} style={{ display: 'block', border: '2px solid black' }} />\n  </div>\n}\n\n// mounted earlier than ingame ui TODO\nconst GameHud = ({ children }) => {\n  const { loadedDataVersion } = useSnapshot(miscUiState)\n  const [gameLoaded, setGameLoaded] = useState(false)\n\n  useEffect(() => {\n    customEvents.on('mineflayerBotCreated', () => {\n      bot.once('inject_allowed', () => {\n        setGameLoaded(true)\n      })\n    })\n  }, [])\n  useEffect(() => {\n    if (!loadedDataVersion) setGameLoaded(false)\n  }, [loadedDataVersion])\n\n  return gameLoaded ? children : null\n}\n\nconst InGameComponent = ({ children }) => {\n  const { gameLoaded } = useSnapshot(miscUiState)\n  if (!gameLoaded) return null\n  return children\n}\n\nconst InGameUi = () => {\n  const { gameLoaded, showUI: showUIRaw } = useSnapshot(miscUiState)\n  const { disabledUiParts, displayBossBars, showMinimap } = useSnapshot(options)\n  const modalsSnapshot = useSnapshot(activeModalStack)\n  const hasModals = modalsSnapshot.length > 0\n  const showUI = showUIRaw || hasModals\n  const displayFullmap = modalsSnapshot.some(modal => modal.reactType === 'full-map')\n  // bot can't be used here\n\n  if (!gameLoaded || !bot || disabledUiParts.includes('*')) return\n\n  return <>\n    <RobustPortal to={document.querySelector('#ui-root')}>\n      {/* apply scaling */}\n      <div style={{ display: showUI ? 'block' : 'none' }}>\n        {!disabledUiParts.includes('death-screen') && <DeathScreenProvider />}\n        {!disabledUiParts.includes('debug-overlay') && <DebugOverlay />}\n        {!disabledUiParts.includes('mobile-top-buttons') && <MobileTopButtons />}\n        {!disabledUiParts.includes('players-list') && <PlayerListOverlayProvider />}\n        {!disabledUiParts.includes('chat') && <ChatProvider />}\n        <SoundMuffler />\n        {showMinimap !== 'never' && <MinimapProvider displayMode='minimapOnly' />}\n        {!disabledUiParts.includes('title') && <TitleProvider />}\n        {!disabledUiParts.includes('scoreboard') && <ScoreboardProvider />}\n        {!disabledUiParts.includes('effects-indicators') && <IndicatorEffectsProvider />}\n        {!disabledUiParts.includes('crosshair') && <Crosshair />}\n        {!disabledUiParts.includes('books') && <BookProvider />}\n        {!disabledUiParts.includes('bossbars') && displayBossBars && <BossBarOverlayProvider />}\n      </div>\n\n      <PauseScreen />\n      <div style={{ display: showUI ? 'block' : 'none' }}>\n        {!disabledUiParts.includes('xp-bar') && <XPBarProvider />}\n        {!disabledUiParts.includes('hud-bars') && <HudBarsProvider />}\n        <BedTime />\n      </div>\n      {showUI && !disabledUiParts.includes('hotbar') && <HotbarRenderApp />}\n    </RobustPortal>\n    <PerComponentErrorBoundary>\n      <SignEditorProvider />\n      <DisplayQr />\n    </PerComponentErrorBoundary>\n    <RobustPortal to={document.body}>\n      {displayFullmap && <MinimapProvider displayMode='fullmapOnly' />}\n      {/* because of z-index */}\n      {showUI && <TouchControls />}\n      <GlobalSearchInput />\n    </RobustPortal>\n  </>\n}\n\nconst AllWidgets = () => {\n  return widgets.map(widget => <WidgetDisplay key={widget.name} name={widget.name} Component={widget.default} />)\n}\n\nconst WidgetDisplay = ({ name, Component }) => {\n  const isWidgetActive = useIsWidgetActive(name)\n  if (!isWidgetActive) return null\n\n  return <Component />\n}\n\nconst App = () => {\n  return <div>\n    <ButtonAppProvider>\n      <RobustPortal to={document.body}>\n        <div className='overlay-bottom-scaled'>\n          <InGameComponent>\n            <HeldMapUi />\n          </InGameComponent>\n        </div>\n        <div />\n      </RobustPortal>\n      <EnterFullscreenButton />\n      <InGameUi />\n      <RobustPortal to={document.querySelector('#ui-root')}>\n        <AllWidgets />\n        <SingleplayerProvider />\n        <CreateWorldProvider />\n        <AppStatusProvider />\n        <KeybindingsScreenProvider />\n        <SelectOption />\n        <ServersListProvider />\n        <OptionsRenderApp />\n        <MainMenuRenderApp />\n        <NotificationProvider />\n        <TouchAreasControlsProvider />\n        <SignInMessageProvider />\n        <NoModalFoundProvider />\n        {/* <GameHud>\n        </GameHud> */}\n      </RobustPortal>\n      <RobustPortal to={document.body}>\n        {/* todo correct mounting! */}\n        <div className='overlay-top-scaled'>\n          <GamepadUiCursor />\n        </div>\n        <div />\n        <DebugEdges />\n      </RobustPortal>\n    </ButtonAppProvider>\n  </div>\n}\n\nconst PerComponentErrorBoundary = ({ children }) => {\n  return children.map((child, i) => <ErrorBoundary\n    key={i}\n    renderError={(error) => {\n      const componentNameClean = (child.type.name || child.type.displayName || 'Unknown').replaceAll(/__|_COMPONENT/g, '')\n      showNotification(`UI component ${componentNameClean} crashed!`, 'Please report this. Use console for more.', true, undefined)\n      return null\n    }}\n  >\n    {child}\n  </ErrorBoundary>)\n}\n\nrenderToDom(<App />, {\n  strictMode: false,\n  selector: '#react-root',\n})\n\ndisableReactProfiling()\nfunction disableReactProfiling () {\n  //@ts-expect-error\n  window.performance.markOrig = window.performance.mark\n  //@ts-expect-error\n  window.performance.mark = (name, options) => {\n    // ignore react internal marks\n    if (!name.startsWith('') && !localStorage.enableReactProfiling) {\n      //@ts-expect-error\n      window.performance.markOrig(name, options)\n    }\n  }\n}\n","import { promisify } from 'util'\nimport fs from 'fs'\nimport * as nbt from 'prismarine-nbt'\nimport RegionFile from 'prismarine-provider-anvil/src/region'\nimport { versions } from 'minecraft-data'\nimport { openWorldDirectory, openWorldZip } from './browserfs'\nimport { isGameActive } from './globalState'\nimport { showNotification } from './react/NotificationProvider'\n\nconst parseNbt = promisify(nbt.parse)\nconst simplifyNbt = nbt.simplify\nwindow.nbt = nbt\n\n// todo display drop zone\nfor (const event of ['drag', 'dragstart', 'dragend', 'dragover', 'dragenter', 'dragleave', 'drop']) {\n  window.addEventListener(event, (e: any) => {\n    if (e.dataTransfer && !e.dataTransfer.types.includes('Files')) {\n      // e.dataTransfer.effectAllowed = \"none\"\n      return\n    }\n    e.preventDefault()\n  })\n}\nwindow.addEventListener('drop', async e => {\n  if (!e.dataTransfer?.files.length) return\n  const { items } = e.dataTransfer\n  const item = items[0]\n  if (item.getAsFileSystemHandle) {\n    const filehandle = await item.getAsFileSystemHandle() as FileSystemFileHandle | FileSystemDirectoryHandle\n    if (filehandle.kind === 'file') {\n      const file = await filehandle.getFile()\n\n      await handleDroppedFile(file)\n    } else {\n      if (isGameActive(false)) {\n        alert('Exit current world first, before loading a new one.')\n        return\n      }\n      await openWorldDirectory(filehandle)\n    }\n  } else {\n    await handleDroppedFile(item.getAsFile()!)\n  }\n})\n\nasync function handleDroppedFile (file: File) {\n  if (file.name.endsWith('.zip')) {\n    void openWorldZip(file)\n    return\n  }\n  // if (file.name.endsWith('.mca')) // TODO let's do something interesting with it: viewer?\n  if (file.name.endsWith('.rar')) {\n    alert('Rar files are not supported yet!')\n    return\n  }\n  if (file.name.endsWith('.mca')) {\n    const tempPath = '/data/temp.mca'\n    try {\n      await fs.promises.writeFile(tempPath, Buffer.from(await file.arrayBuffer()))\n      const region = new RegionFile(tempPath)\n      await region.initialize()\n      const chunks: Record<string, any> = {}\n      console.log('Reading chunks...')\n      console.log(chunks)\n      let versionDetected = false\n      for (const [i, _] of Array.from({ length: 32 }).entries()) {\n        for (const [k, _] of Array.from({ length: 32 }).entries()) {\n          // todo, may use faster reading, but features is not commonly used\n          // eslint-disable-next-line no-await-in-loop\n          const nbt = await region.read(i, k)\n          chunks[`${i},${k}`] = nbt\n          if (nbt && !versionDetected) {\n            const simplified = simplifyNbt(nbt)\n            const version = versions.pc.find(x => x['dataVersion'] === simplified.DataVersion)?.minecraftVersion\n            console.log('Detected version', version ?? 'unknown')\n            versionDetected = true\n          }\n        }\n      }\n      Object.defineProperty(chunks, 'simplified', {\n        get () {\n          const mapped = {}\n          for (const [i, _] of Array.from({ length: 32 }).entries()) {\n            for (const [k, _] of Array.from({ length: 32 }).entries()) {\n              const key = `${i},${k}`\n              const chunk = chunks[key]\n              if (!chunk) continue\n              mapped[key] = simplifyNbt(chunk)\n            }\n          }\n          return mapped\n        },\n      })\n      console.log('Done!', chunks)\n    } finally {\n      await fs.promises.unlink(tempPath)\n    }\n    return\n  }\n\n  const buffer = await file.arrayBuffer()\n  const parsed = await parseNbt(Buffer.from(buffer)).catch((err) => {\n    alert('Couldn\\'t parse nbt, ensure you are opening .dat or file (or .zip/folder with a world)')\n    throw err\n  })\n  showNotification(`${file.name} data available in browser console`)\n  console.log('raw', parsed)\n  console.log('simplified', nbt.simplify(parsed))\n}\n","// not all options are watched here\n\nimport { subscribeKey } from 'valtio/utils'\nimport { WorldRendererThree } from 'prismarine-viewer/viewer/lib/worldrendererThree'\nimport { isMobile } from 'prismarine-viewer/viewer/lib/simpleUtils'\nimport { options, watchValue } from './optionsStorage'\nimport { reloadChunks } from './utils'\nimport { miscUiState } from './globalState'\nimport { toggleStatsVisibility } from './topRightStats'\n\nsubscribeKey(options, 'renderDistance', reloadChunks)\nsubscribeKey(options, 'multiplayerRenderDistance', reloadChunks)\n\nwatchValue(options, o => {\n  document.documentElement.style.setProperty('--chatScale', `${o.chatScale / 100}`)\n  document.documentElement.style.setProperty('--chatWidth', `${o.chatWidth}px`)\n  document.documentElement.style.setProperty('--chatHeight', `${o.chatHeight}px`)\n  // gui scale is set in scaleInterface.ts\n})\n\n/** happens once */\nexport const watchOptionsAfterViewerInit = () => {\n  const updateTouch = (o) => {\n    miscUiState.currentTouch = o.alwaysShowMobileControls || isMobile()\n  }\n\n  watchValue(options, updateTouch)\n  window.matchMedia('(pointer: coarse)').addEventListener('change', (e) => {\n    updateTouch(options)\n  })\n\n  watchValue(options, o => {\n    if (!viewer) return\n    viewer.world.config.showChunkBorders = o.showChunkBorders\n    viewer.entities.setDebugMode(o.showChunkBorders ? 'basic' : 'none')\n  })\n\n  watchValue(options, o => {\n    if (!viewer) return\n    // todo ideally there shouldnt be this setting and we don't need to send all same chunks to all workers\n    viewer.world.config.numWorkers = o.lowMemoryMode ? 1 : o.numWorkers\n  })\n\n  watchValue(options, o => {\n    viewer.entities.setRendering(o.renderEntities)\n  })\n\n  if (options.renderDebug === 'none') {\n    toggleStatsVisibility(false)\n  }\n  subscribeKey(options, 'renderDebug', () => {\n    if (options.renderDebug === 'none') {\n      toggleStatsVisibility(false)\n    } else {\n      toggleStatsVisibility(true)\n    }\n  })\n  watchValue(options, o => {\n    viewer.world.displayStats = o.renderDebug === 'advanced'\n  })\n  watchValue(options, (o, isChanged) => {\n    viewer.world.mesherConfig.clipWorldBelowY = o.clipWorldBelowY\n    viewer.world.mesherConfig.disableSignsMapsSupport = o.disableSignsMapsSupport\n    if (isChanged) {\n      (viewer.world as WorldRendererThree).rerenderAllChunks()\n    }\n  })\n\n  viewer.world.mesherConfig.smoothLighting = options.smoothLighting\n  subscribeKey(options, 'smoothLighting', () => {\n    viewer.world.mesherConfig.smoothLighting = options.smoothLighting;\n    (viewer.world as WorldRendererThree).rerenderAllChunks()\n  })\n  subscribeKey(options, 'newVersionsLighting', () => {\n    viewer.world.mesherConfig.enableLighting = !bot.supportFeature('blockStateId') || options.newVersionsLighting;\n    (viewer.world as WorldRendererThree).rerenderAllChunks()\n  })\n  customEvents.on('gameLoaded', () => {\n    viewer.world.mesherConfig.enableLighting = !bot.supportFeature('blockStateId') || options.newVersionsLighting\n  })\n\n  watchValue(options, o => {\n    if (!(viewer.world instanceof WorldRendererThree)) return\n    viewer.world.starField.enabled = o.starfieldRendering\n  })\n\n  watchValue(options, o => {\n    viewer.world.neighborChunkUpdates = o.neighborChunkUpdates\n  })\n}\n\nlet viewWatched = false\nexport const watchOptionsAfterWorldViewInit = () => {\n  if (viewWatched) return\n  viewWatched = true\n  watchValue(options, o => {\n    if (!worldView) return\n    worldView.keepChunksDistance = o.keepChunksDistance\n    viewer.world.config.displayHand = o.handDisplay\n  })\n}\n","import { VRButton } from 'three/examples/jsm/webxr/VRButton.js'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\nimport { XRControllerModelFactory } from 'three/examples/jsm/webxr/XRControllerModelFactory.js'\nimport { buttonMap as standardButtonsMap } from 'contro-max/build/gamepad'\nimport * as THREE from 'three'\nimport { subscribeKey } from 'valtio/utils'\nimport { subscribe } from 'valtio'\nimport { activeModalStack, hideModal } from './globalState'\nimport { watchUnloadForCleanup } from './gameUnload'\nimport { options } from './optionsStorage'\n\nexport async function initVR () {\n  options.vrSupport = true\n  const { renderer } = viewer\n  if (!('xr' in navigator)) return\n\n  const isSupported = await checkVRSupport()\n  if (!isSupported) return\n\n  enableVr(renderer)\n\n  const vrButtonContainer = createVrButtonContainer(renderer)\n  const updateVrButtons = () => {\n    vrButtonContainer.hidden = !options.vrSupport || activeModalStack.length !== 0\n  }\n\n  const unsubWatchSetting = subscribeKey(options, 'vrSupport', updateVrButtons)\n  const unsubWatchModals = subscribe(activeModalStack, updateVrButtons)\n\n  function enableVr (renderer) {\n    renderer.xr.enabled = true\n  }\n\n  function disableVr () {\n    renderer.xr.enabled = false\n    viewer.cameraObjectOverride = undefined\n    viewer.scene.remove(user)\n    vrButtonContainer.hidden = true\n    unsubWatchSetting()\n    unsubWatchModals()\n  }\n\n  function createVrButtonContainer (renderer) {\n    const container = document.createElement('div')\n    const vrButton = VRButton.createButton(renderer)\n    styleContainer(container)\n\n    const closeButton = createCloseButton(container)\n\n    container.appendChild(vrButton)\n    container.appendChild(closeButton)\n    document.body.appendChild(container)\n\n    return container\n  }\n\n  function styleContainer (container: HTMLElement) {\n    typedAssign(container.style, {\n      position: 'absolute',\n      bottom: '80px',\n      left: '0',\n      right: '0',\n      display: 'flex',\n      justifyContent: 'center',\n      zIndex: '8',\n      gap: '8px',\n    })\n  }\n\n  function createCloseButton (container: HTMLElement) {\n    const closeButton = document.createElement('button')\n    closeButton.textContent = 'X'\n    typedAssign(closeButton.style, {\n      padding: '0 12px',\n      color: 'white',\n      fontSize: '14px',\n      lineHeight: '20px',\n      cursor: 'pointer',\n      background: 'transparent',\n      border: '1px solid rgb(255, 255, 255)',\n      borderRadius: '4px',\n      opacity: '0.7',\n    })\n\n    closeButton.addEventListener('click', () => {\n      container.hidden = true\n      options.vrSupport = false\n    })\n\n    return closeButton\n  }\n\n\n  async function checkVRSupport () {\n    try {\n      const supported = await navigator.xr?.isSessionSupported('immersive-vr')\n      return supported && !!XRSession.prototype.updateRenderState\n    } catch (err) {\n      console.error('Error checking if VR is supported', err)\n      return false\n    }\n  }\n\n  // hack for vr camera\n  const user = new THREE.Group()\n  user.add(viewer.camera)\n  viewer.scene.add(user)\n  const controllerModelFactory = new XRControllerModelFactory(new GLTFLoader())\n  const controller1 = renderer.xr.getControllerGrip(0)\n  const controller2 = renderer.xr.getControllerGrip(1)\n\n  // todo the logic written here can be hard to understand as it was designed to work in gamepad api emulation mode, will be refactored once there is a contro-max rewrite is done\n  const virtualGamepadIndex = 4\n  let connectedVirtualGamepad\n  //@ts-expect-error\n  const manageXrInputSource = ({ gamepad, handedness = defaultHandedness }, defaultHandedness, removeAction = false) => {\n    if (handedness === 'right') {\n      const event: any = new Event(removeAction ? 'gamepaddisconnected' : 'gamepadconnected') // todo need to expose and use external gamepads api in contro-max instead\n      event.gamepad = removeAction ? connectedVirtualGamepad : { ...gamepad, mapping: 'standard', index: virtualGamepadIndex }\n      connectedVirtualGamepad = event.gamepad\n      window.dispatchEvent(event)\n    }\n  }\n  let hand1: any = controllerModelFactory.createControllerModel(controller1)\n  controller1.addEventListener('connected', (event) => {\n    hand1.xrInputSource = event.data\n    manageXrInputSource(event.data, 'left')\n    user.add(controller1)\n  })\n  controller1.add(hand1)\n  let hand2: any = controllerModelFactory.createControllerModel(controller2)\n  controller2.addEventListener('connected', (event) => {\n    hand2.xrInputSource = event.data\n    manageXrInputSource(event.data, 'right')\n    user.add(controller2)\n  })\n  controller2.add(hand2)\n\n  controller1.addEventListener('disconnected', () => {\n    // don't handle removal of gamepads for now as is don't affect contro-max\n    manageXrInputSource(hand1.xrInputSource, 'left', true)\n    hand1.xrInputSource = undefined\n  })\n  controller2.addEventListener('disconnected', () => {\n    manageXrInputSource(hand1.xrInputSource, 'right', true)\n    hand2.xrInputSource = undefined\n  })\n\n  const originalGetGamepads = navigator.getGamepads.bind(navigator)\n  // is it okay to patch this?\n  //@ts-expect-error\n  navigator.getGamepads = () => {\n    const originalGamepads = originalGetGamepads()\n    if (!hand1.xrInputSource || !hand2.xrInputSource) return originalGamepads\n    return [\n      ...originalGamepads,\n      {\n        axes: remapAxes(hand2.xrInputSource.gamepad.axes, hand1.xrInputSource.gamepad.axes),\n        buttons: remapButtons(hand2.xrInputSource.gamepad.buttons, hand1.xrInputSource.gamepad.buttons),\n        connected: true,\n        mapping: 'standard',\n        id: '',\n        index: virtualGamepadIndex\n      }\n    ]\n  }\n\n  let rotSnapReset = true\n  let yawOffset = 0\n  renderer.setAnimationLoop(() => {\n    if (!renderer.xr.isPresenting) return\n    if (hand1.xrInputSource && hand2.xrInputSource) {\n      hand1.xAxis = hand1.xrInputSource.gamepad.axes[2]\n      hand1.yAxis = hand1.xrInputSource.gamepad.axes[3]\n      hand2.xAxis = hand2.xrInputSource.gamepad.axes[2]\n      hand2.yAxis = hand2.xrInputSource.gamepad.axes[3]\n      // hand2 should be right\n      if (hand1.xrInputSource.handedness === 'right') {\n        const tmp = hand2\n        hand2 = hand1\n        hand1 = tmp\n      }\n    }\n\n    if (rotSnapReset) {\n      if (Math.abs(hand1.xAxis) > 0.8) {\n        yawOffset -= Math.PI / 4 * Math.sign(hand1.xAxis)\n        rotSnapReset = false\n      }\n    } else if (Math.abs(hand1.xAxis) < 0.1) {\n      rotSnapReset = true\n    }\n\n    // viewer.setFirstPersonCamera(null, yawOffset, 0)\n    viewer.setFirstPersonCamera(null, bot.entity.yaw, bot.entity.pitch)\n\n    // todo restore this logic (need to preserve ability to move camera)\n    // const xrCamera = renderer.xr.getCamera()\n    // const d = xrCamera.getWorldDirection(new THREE.Vector3())\n    // bot.entity.yaw = Math.atan2(-d.x, -d.z)\n    // bot.entity.pitch = Math.asin(d.y)\n\n    // todo ?\n    // bot.physics.stepHeight = 1\n\n    viewer.render()\n  })\n  renderer.xr.addEventListener('sessionstart', () => {\n    viewer.cameraObjectOverride = user\n    // close all modals to be in game\n    for (const _modal of activeModalStack) {\n      hideModal(undefined, {}, { force: true })\n    }\n  })\n  renderer.xr.addEventListener('sessionend', () => {\n    viewer.cameraObjectOverride = undefined\n  })\n\n  watchUnloadForCleanup(disableVr)\n}\n\nconst xrStandardRightButtonsMap = [\n  [0 /* trigger */, 'Right Trigger'],\n  [1 /* squeeze */, 'Right Bumper'],\n  // need to think of a way to support touchpad input\n  [3 /* Thumbstick Press */, 'Right Stick'],\n  [4 /* A */, 'A'],\n  [5 /* B */, 'B'],\n]\nconst xrStandardLeftButtonsMap = [\n  [0 /* trigger */, 'Left Trigger'],\n  [1 /* squeeze */, 'Left Bumper'],\n  // need to think of a way to support touchpad input\n  [3 /* Thumbstick Press */, 'Left Stick'],\n  [4 /* A */, 'X'],\n  [5 /* B */, 'Y'],\n]\nconst remapButtons = (rightButtons: any[], leftButtons: any[]) => {\n  // return remapped buttons\n  const remapped = [] as string[]\n  const remapWithMap = (buttons, map) => {\n    for (const [index, standardName] of map) {\n      const standardMappingIndex = standardButtonsMap.findIndex((aliases) => aliases.find(alias => standardName === alias))\n      remapped[standardMappingIndex] = buttons[index]\n    }\n  }\n  remapWithMap(rightButtons, xrStandardRightButtonsMap)\n  remapWithMap(leftButtons, xrStandardLeftButtonsMap)\n  return remapped\n}\nconst remapAxes = (axesRight, axesLeft) => {\n  // 0, 1 are reserved for touch\n  return [\n    axesLeft[2],\n    axesLeft[3],\n    axesRight[2],\n    axesRight[3]\n  ]\n}\n\nfunction typedAssign<T extends Record<string, any>> (target: T, source: Partial<T>) {\n  Object.assign(target, source)\n}\n","import EventEmitter from 'events'\n\nimport CustomChannelClient from './customClient'\n\nexport class LocalServer extends EventEmitter.EventEmitter {\n  socketServer = null\n  cipher = null\n  decipher = null\n  clients = {}\n\n  constructor (public version, public customPackets, public hideErrors = false) {\n    super()\n  }\n\n  listen () {\n    this.emit('connection', new CustomChannelClient(true, this.version))\n  }\n\n  close () { }\n}\n","import { LocalServer } from './customServer'\n\nconst { createMCServer } = require('flying-squid/dist')\n\nexport const startLocalServer = (serverOptions) => {\n  const passOptions = { ...serverOptions, Server: LocalServer }\n  const server: NonNullable<typeof localServer> = createMCServer(passOptions)\n  server.formatMessage = (message) => `[server] ${message}`\n  server.options = passOptions\n  //@ts-expect-error todo remove\n  server.looseProtocolMode = true\n  return server\n}\n\n// features that flying-squid doesn't support at all\n// todo move & generate in flying-squid\nexport const unsupportedLocalServerFeatures = ['transactionPacketExists', 'teleportUsesOwnPacket']\n","import * as THREE from 'three'\nimport { watchUnloadForCleanup } from './gameUnload'\n\nlet inWater = false\n\ncustomEvents.on('gameLoaded', () => {\n  const cleanup = () => {\n    viewer.scene.fog = null\n  }\n  watchUnloadForCleanup(cleanup)\n\n  const updateInWater = () => {\n    const waterBr = Object.keys(bot.entity.effects).find((effect: any) => loadedData.effects[effect.id].name === 'water_breathing')\n    if (inWater) {\n      viewer.scene.fog = new THREE.Fog(0x00_00_ff, 0.1, waterBr ? 100 : 20) // Set the fog color to blue if the bot is in water.\n    } else {\n      cleanup()\n    }\n    updateBackground()\n  }\n  bot.on('physicsTick', () => {\n    // todo\n    const _inWater = bot.world.getBlock(bot.entity.position.offset(0, 1, 0))?.name === 'water'\n    if (_inWater !== inWater) {\n      inWater = _inWater\n      updateInWater()\n    }\n  })\n})\n\nlet sceneBg = { r: 0, g: 0, b: 0 }\nexport const updateBackground = (newSceneBg = sceneBg) => {\n  sceneBg = newSceneBg\n  const color: [number, number, number] = inWater ? [0, 0, 1] : [sceneBg.r, sceneBg.g, sceneBg.b]\n  viewer.world.changeBackgroundColor(color)\n}\n","import { options } from './optionsStorage'\nimport { assertDefined } from './utils'\nimport { updateBackground } from './water'\n\nexport default () => {\n  const timeUpdated = () => {\n    assertDefined(viewer)\n    // 0 morning\n    const dayTotal = 24_000\n    const evening = 11_500\n    const night = 13_500\n    const morningStart = 23_000\n    const morningEnd = 23_961\n    const timeProgress = options.dayCycleAndLighting ? bot.time.timeOfDay : 0\n\n    // todo check actual colors\n    const dayColorRainy = { r: 111 / 255, g: 156 / 255, b: 236 / 255 }\n    // todo yes, we should make animations (and rain)\n    // eslint-disable-next-line unicorn/numeric-separators-style\n    const dayColor = bot.isRaining ? dayColorRainy : { r: 0.6784313725490196, g: 0.8470588235294118, b: 0.9019607843137255 } // lightblue\n    // let newColor = dayColor\n    let int = 1\n    if (timeProgress < evening) {\n      // stay dayily\n    } else if (timeProgress < night) {\n      const progressNorm = timeProgress - evening\n      const progressMax = night - evening\n      int = 1 - progressNorm / progressMax\n    } else if (timeProgress < morningStart) {\n      int = 0\n    } else if (timeProgress < morningEnd) {\n      const progressNorm = timeProgress - morningStart\n      const progressMax = night - morningEnd\n      int = progressNorm / progressMax\n    }\n    // todo need to think wisely how to set these values & also move directional light around!\n    const colorInt = Math.max(int, 0.1)\n    updateBackground({ r: dayColor.r * colorInt, g: dayColor.g * colorInt, b: dayColor.b * colorInt })\n    if (!options.newVersionsLighting && bot.supportFeature('blockStateId')) {\n      viewer.ambientLight.intensity = Math.max(int, 0.25)\n      viewer.directionalLight.intensity = Math.min(int, 0.5)\n    }\n  }\n\n  bot.on('time', timeUpdated)\n  timeUpdated()\n}\n","import { isCypress } from './standaloneUtils'\n\n// might not resolve at all\nexport const registerServiceWorker = async () => {\n  if (!('serviceWorker' in navigator)) return\n  if (!isCypress() && process.env.NODE_ENV !== 'development') {\n    return new Promise<void>(resolve => {\n      window.addEventListener('load', async () => {\n        await navigator.serviceWorker.register('./service-worker.js').then(registration => {\n          console.log('SW registered:', registration)\n          resolve()\n        }).catch(registrationError => {\n          console.log('SW registration failed:', registrationError)\n        })\n      })\n    })\n  } else {\n    // force unregister service worker in development mode\n    const registrations = await navigator.serviceWorker.getRegistrations()\n    for (const registration of registrations) {\n      await registration.unregister() // eslint-disable-line no-await-in-loop\n    }\n    if (registrations.length) {\n      location.reload()\n    }\n  }\n}\n","import { saveServer } from './flyingSquidUtils'\nimport { watchUnloadForCleanup } from './gameUnload'\nimport { showModal } from './globalState'\nimport { options } from './optionsStorage'\nimport { chatInputValueGlobal } from './react/Chat'\nimport { showNotification } from './react/NotificationProvider'\n\nexport default () => {\n  localServer!.on('warpsLoaded', () => {\n    if (!localServer) return\n    showNotification(`${localServer.warps.length} Warps loaded`, 'Use /warp <name> to teleport to a warp point.', false, 'label-alt', () => {\n      chatInputValueGlobal.value = '/warp '\n      showModal({ reactType: 'chat' })\n    })\n  })\n\n  if (options.singleplayerAutoSave) {\n    const autoSaveInterval = setInterval(() => {\n      if (options.singleplayerAutoSave) {\n        void saveServer(true)\n      }\n    }, 2000)\n    watchUnloadForCleanup(() => {\n      clearInterval(autoSaveInterval)\n    })\n  }\n}\n","import { isMobile } from 'prismarine-viewer/viewer/lib/simpleUtils'\nimport { WorldRendererThree } from 'prismarine-viewer/viewer/lib/worldrendererThree'\n\nif (process.env.NODE_ENV === 'development') {\n  // mobile devtools\n  if (isMobile()) {\n    // can be changed to require('eruda')\n    //@ts-expect-error\n    void import('https://cdn.skypack.dev/eruda').then(({ default: eruda }) => eruda.init())\n  }\n}\nconsole.log('JS Loaded in', Date.now() - window.startLoad)\n","import { versionsByMinecraftVersion } from 'minecraft-data'\nimport minecraftInitialDataJson from '../generated/minecraft-initial-data.json'\nimport { AuthenticatedAccount } from './react/ServersListProvider'\nimport { setLoadingScreenStatus } from './utils'\nimport { downloadSoundsIfNeeded } from './soundSystem'\nimport { miscUiState } from './globalState'\n\nexport type ConnectOptions = {\n  server?: string\n  singleplayer?: any\n  username: string\n  proxy?: string\n  botVersion?: any\n  serverOverrides?\n  serverOverridesFlat?\n  peerId?: string\n  ignoreQs?: boolean\n  onSuccessfulPlay?: () => void\n  autoLoginPassword?: string\n  serverIndex?: string\n  /** If true, will show a UI to authenticate with a new account */\n  authenticatedAccount?: AuthenticatedAccount | true\n  peerOptions?: any\n  viewerWsConnect?: string\n}\n\nexport const downloadNeededDataOnConnect = async (version: string) => {\n  // todo expose cache\n  const initialDataVersion = Object.keys(minecraftInitialDataJson)[0]!\n  if (version === initialDataVersion) {\n    // ignore cache hit\n    versionsByMinecraftVersion.pc[initialDataVersion]!.dataVersion!++\n  }\n  setLoadingScreenStatus(`Loading data for ${version}`)\n  if (!document.fonts.check('1em mojangles')) {\n    // todo instead re-render signs on load\n    await document.fonts.load('1em mojangles').catch(() => {\n      console.error('Failed to load font, signs wont be rendered correctly')\n    })\n  }\n  await window._MC_DATA_RESOLVER.promise // ensure data is loaded\n  await downloadSoundsIfNeeded()\n  miscUiState.loadedDataVersion = version\n}\n","import { EventEmitter } from 'events'\nimport { Duplex } from 'stream'\nimport states from 'minecraft-protocol/src/states'\nimport { createClient } from 'minecraft-protocol'\n\nclass CustomDuplex extends Duplex {\n  constructor (options, public writeAction) {\n    super(options)\n  }\n\n  override _read () {}\n\n  override _write (chunk, encoding, callback) {\n    this.writeAction(chunk)\n    callback()\n  }\n}\n\nexport const getViewerVersionData = async (url: string) => {\n  const ws = await openWebsocket(url)\n  ws.send('version')\n  return new Promise<{\n    version: string\n    time: number,\n    clientIgnoredPackets?: string[]\n  }>((resolve, reject) => {\n    ws.addEventListener('message', async (message) => {\n      const { data } = message\n      const parsed = JSON.parse(data.toString())\n      resolve(parsed)\n      ws.close()\n      // todo\n      customEvents.on('mineflayerBotCreated', () => {\n        const client = bot._client as any\n        const oldWrite = client.write.bind(client)\n        client.write = (...args) => {\n          const [name] = args\n          if (parsed?.clientIgnoredPackets?.includes(name)) {\n            return\n          }\n          oldWrite(...args)\n        }\n      })\n    })\n  })\n}\n\nconst openWebsocket = async (url: string) => {\n  if (url.startsWith(':')) url = `ws://localhost${url}`\n  if (!url.startsWith('ws')) url = `ws://${url}`\n  const ws = new WebSocket(url)\n  await new Promise<void>((resolve, reject) => {\n    ws.onopen = () => resolve()\n    ws.onerror = (err) => reject(new Error(`[websocket] Failed to connect to ${url}`))\n    ws.onclose = (ev) => reject(ev.reason)\n  })\n  return ws\n}\n\nexport const getWsProtocolStream = async (url: string) => {\n  const ws = await openWebsocket(url)\n  const clientDuplex = new CustomDuplex(undefined, data => {\n    // console.log('send', Buffer.from(data).toString('hex'))\n    ws.send(data)\n  })\n  // todo use keep alive instead?\n  let lastMessageTime = performance.now()\n  ws.addEventListener('message', async (message) => {\n    let { data } = message\n    if (data instanceof Blob) {\n      data = await data.arrayBuffer()\n    }\n    clientDuplex.push(Buffer.from(data))\n    lastMessageTime = performance.now()\n  })\n  setInterval(() => {\n    // if (clientDuplex.destroyed) return\n    // if (performance.now() - lastMessageTime > 10_000) {\n    //   console.log('no packats received in 10s!')\n    //   clientDuplex.end()\n    // }\n  }, 5000)\n\n  ws.addEventListener('close', () => {\n    console.log('ws closed')\n    clientDuplex.end()\n    // bot.emit('end', 'Disconnected.')\n  })\n\n  ws.addEventListener('error', err => {\n    console.log('ws error', err)\n  })\n\n  return clientDuplex\n}\n","import { subscribeKey } from 'valtio/utils'\nimport { gameAdditionalState } from './globalState'\nimport { options } from './optionsStorage'\n\nexport const watchFov = () => {\n  const updateFov = () => {\n    if (!bot) return\n    let fovSetting = gameAdditionalState.isZooming ? 30 : options.fov\n    // todo check values and add transition\n    if (bot.controlState.sprint && !bot.controlState.sneak) {\n      fovSetting += 5\n    }\n    if (gameAdditionalState.isFlying) {\n      fovSetting += 5\n    }\n    viewer.camera.fov = fovSetting\n    viewer.camera.updateProjectionMatrix()\n  }\n  updateFov()\n  subscribeKey(options, 'fov', updateFov)\n  subscribeKey(gameAdditionalState, 'isFlying', updateFov)\n  subscribeKey(gameAdditionalState, 'isSprinting', updateFov)\n  subscribeKey(gameAdditionalState, 'isZooming', updateFov)\n  subscribeKey(gameAdditionalState, 'isSneaking', () => {\n    viewer.isSneaking = gameAdditionalState.isSneaking\n    viewer.setFirstPersonCamera(bot.entity.position, bot.entity.yaw, bot.entity.pitch)\n  })\n}\n","import { getRenamedData } from 'flying-squid/dist/blockRenames'\nimport outputInteractionShapesJson from './interactionShapesGenerated.json'\nimport './getCollisionShapes'\n\nexport default () => {\n  customEvents.on('gameLoaded', () => {\n    // todo also remap block states (e.g. redstone)!\n    const renamedBlocksInteraction = getRenamedData('blocks', Object.keys(outputInteractionShapesJson), '1.20.2', bot.version)\n    const interactionShapes = {\n      ...outputInteractionShapesJson,\n      ...Object.fromEntries(Object.entries(outputInteractionShapesJson).map(([block, shape], i) => [renamedBlocksInteraction[i], shape]))\n    }\n    interactionShapes[''] = interactionShapes['air']\n    // todo make earlier\n    window.interactionShapes = interactionShapes\n  })\n}\n","// todo it should not be there, most likely it will be more automatically updated in the future\n// todo these fixes should be ported to mineflayer\n\nexport default () => {\n  customEvents.on('mineflayerBotCreated', () => {\n    bot._client.on('packet', (data, meta) => {\n      if (meta.name === 'map_chunk') {\n        if (data.groundUp && data.bitMap === 1 && data.chunkData.every(x => x === 0)) {\n          data.chunkData = Buffer.from(Array.from({ length: 12_544 }).fill(0) as any)\n        }\n      }\n    })\n  })\n}\n","import * as THREE from 'three'\nimport { statsEnd, statsStart } from '../../../src/topRightStats'\n\n// wrapper for now\nexport class ViewerWrapper {\n  previousWindowWidth: number\n  previousWindowHeight: number\n  globalObject = globalThis as any\n  stopRenderOnBlur = false\n  addedToPage = false\n  renderInterval = 0\n  renderIntervalUnfocused: number | undefined\n  fpsInterval\n\n  constructor (public canvas: HTMLCanvasElement, public renderer?: THREE.WebGLRenderer) {\n    if (this.renderer) this.globalObject.renderer = this.renderer\n  }\n\n  addToPage (startRendering = true) {\n    if (this.addedToPage) throw new Error('Already added to page')\n    let pixelRatio = window.devicePixelRatio || 1 // todo this value is too high on ios, need to check, probably we should use avg, also need to make it configurable\n    if (this.renderer) {\n      if (!this.renderer.capabilities.isWebGL2) pixelRatio = 1 // webgl1 has issues with high pixel ratio (sometimes screen is clipped)\n      this.renderer.setPixelRatio(pixelRatio)\n      this.renderer.setSize(window.innerWidth, window.innerHeight)\n    } else {\n      this.canvas.width = window.innerWidth * pixelRatio\n      this.canvas.height = window.innerHeight * pixelRatio\n    }\n    this.previousWindowWidth = window.innerWidth\n    this.previousWindowHeight = window.innerHeight\n\n    this.canvas.id = 'viewer-canvas'\n    document.body.appendChild(this.canvas)\n\n    this.addedToPage = true\n\n    let max = 0\n    this.fpsInterval = setInterval(() => {\n      if (max > 0) {\n        viewer.world.droppedFpsPercentage = this.renderedFps / max\n      }\n      max = Math.max(this.renderedFps, max)\n      this.renderedFps = 0\n    }, 1000)\n    if (startRendering) {\n      this.globalObject.requestAnimationFrame(this.render.bind(this))\n    }\n    if (typeof window !== 'undefined') {\n      this.trackWindowFocus()\n    }\n  }\n\n  windowFocused = true\n  trackWindowFocus () {\n    window.addEventListener('focus', () => {\n      this.windowFocused = true\n    })\n    window.addEventListener('blur', () => {\n      this.windowFocused = false\n    })\n  }\n\n  dispose () {\n    if (!this.addedToPage) throw new Error('Not added to page')\n    this.canvas.remove()\n    this.renderer?.dispose()\n    // this.addedToPage = false\n    clearInterval(this.fpsInterval)\n  }\n\n\n  renderedFps = 0\n  lastTime = performance.now()\n  delta = 0\n  preRender = () => { }\n  postRender = () => { }\n  render (time: DOMHighResTimeStamp) {\n    if (this.globalObject.stopLoop) return\n    for (const fn of beforeRenderFrame) fn()\n    this.globalObject.requestAnimationFrame(this.render.bind(this))\n    if (this.globalObject.stopRender || this.renderer?.xr.isPresenting || (this.stopRenderOnBlur && !this.windowFocused)) return\n    const renderInterval = (this.windowFocused ? this.renderInterval : this.renderIntervalUnfocused) ?? this.renderInterval\n    if (renderInterval) {\n      this.delta += time - this.lastTime\n      this.lastTime = time\n      if (this.delta > renderInterval) {\n        this.delta %= renderInterval\n        // continue rendering\n      } else {\n        return\n      }\n    }\n    this.preRender()\n    statsStart()\n    // ios bug: viewport dimensions are updated after the resize event\n    if (this.previousWindowWidth !== window.innerWidth || this.previousWindowHeight !== window.innerHeight) {\n      this.resizeHandler()\n      this.previousWindowWidth = window.innerWidth\n      this.previousWindowHeight = window.innerHeight\n    }\n    viewer.render()\n    this.renderedFps++\n    statsEnd()\n    this.postRender()\n  }\n\n  resizeHandler () {\n    const width = window.innerWidth\n    const height = window.innerHeight\n\n    viewer.camera.aspect = width / height\n    viewer.camera.updateProjectionMatrix()\n\n    if (this.renderer) {\n      this.renderer.setSize(width, height)\n    }\n    viewer.world.handleResize()\n  }\n}\n","export const getProxyDetails = async (proxyBaseUrl: string) => {\n  if (!proxyBaseUrl.startsWith('http')) proxyBaseUrl = `${isPageSecure() ? 'https' : 'http'}://${proxyBaseUrl}`\n  const url = `${proxyBaseUrl}/api/vm/net/connect`\n  let result: Response\n  try {\n    result = await fetch(url)\n  } catch (err) {\n    throw new Error(`Selected proxy server ${proxyBaseUrl} most likely is down`)\n  }\n  return result\n}\n\nexport default async ({ tokenCaches, proxyBaseUrl, setProgressText = (text) => { }, setCacheResult, connectingServer }) => {\n  let onMsaCodeCallback\n  let connectingVersion = ''\n  // const authEndpoint = 'http://localhost:3000/'\n  // const sessionEndpoint = 'http://localhost:3000/session'\n  let authEndpoint: URL | undefined\n  let sessionEndpoint: URL | undefined\n  const result = await getProxyDetails(proxyBaseUrl)\n\n  try {\n    const json = await result.json()\n    authEndpoint = urlWithBase(json.capabilities.authEndpoint, proxyBaseUrl)\n    sessionEndpoint = urlWithBase(json.capabilities.sessionEndpoint, proxyBaseUrl)\n    if (!authEndpoint) throw new Error('No auth endpoint')\n  } catch (err) {\n    console.error(err)\n    throw new Error(`Selected proxy server ${proxyBaseUrl} does not support Microsoft authentication`)\n  }\n  const authFlow = {\n    async getMinecraftJavaToken () {\n      setProgressText('Authenticating with Microsoft account')\n      if (!window.crypto && !isPageSecure()) throw new Error('Crypto API is available only in secure contexts. Be sure to use https!')\n      let result = null\n      await fetch(authEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ...tokenCaches,\n          // important to set this param and not fake it as auth server might reject the request otherwise\n          connectingServer,\n          connectingServerVersion: connectingVersion\n        }),\n      })\n        .catch(e => {\n          throw new Error(`Failed to connect to auth server (network error): ${e.message}`)\n        })\n        .then(async response => {\n          if (!response.ok) {\n            throw new Error(`Auth server error (${response.status}): ${await response.text()}`)\n          }\n\n          const reader = response.body!.getReader()\n          const decoder = new TextDecoder('utf8')\n\n          const processText = ({ done, value = undefined as Uint8Array | undefined }) => {\n            if (done) {\n              return\n            }\n\n            const processChunk = (chunkStr) => {\n              let json: any\n              try {\n                json = JSON.parse(chunkStr)\n              } catch (err) {}\n              if (!json) return\n              if (json.user_code) {\n                onMsaCodeCallback(json)\n                // this.codeCallback(json)\n              }\n              if (json.error) throw new Error(json.error)\n              if (json.token) result = json\n              if (json.newCache) setCacheResult(json.newCache)\n            }\n\n            const strings = decoder.decode(value)\n\n            for (const chunk of strings.split('\\n\\n')) {\n              processChunk(chunk)\n            }\n\n            return reader.read().then(processText)\n          }\n          return reader.read().then(processText)\n        })\n      const restoredData = await restoreData(result)\n      if (restoredData?.certificates?.profileKeys?.privatePEM) {\n        restoredData.certificates.profileKeys.private = restoredData.certificates.profileKeys.privatePEM\n      }\n      return restoredData\n    }\n  }\n  return {\n    authFlow,\n    sessionEndpoint,\n    setOnMsaCodeCallback (callback) {\n      onMsaCodeCallback = callback\n    },\n    setConnectingVersion (version) {\n      connectingVersion = version\n    }\n  }\n}\n\nfunction isPageSecure (url = window.location.href) {\n  return !url.startsWith('http:')\n}\n\n// restore dates from strings\nconst restoreData = async (json) => {\n  const promises = [] as Array<Promise<void>>\n  if (typeof json === 'object' && json) {\n    for (const [key, value] of Object.entries(json)) {\n      if (typeof value === 'string') {\n        promises.push(tryRestorePublicKey(value, key, json))\n        if (value.endsWith('Z')) {\n          const date = new Date(value)\n          if (!isNaN(date.getTime())) {\n            json[key] = date\n          }\n        }\n      }\n      if (typeof value === 'object') {\n        // eslint-disable-next-line no-await-in-loop\n        await restoreData(value)\n      }\n    }\n  }\n\n  await Promise.all(promises)\n\n  return json\n}\n\nconst tryRestorePublicKey = async (value: string, name: string, parent: { [x: string]: any }) => {\n  value = value.trim()\n  if (!name.endsWith('PEM') || !value.startsWith('-----BEGIN RSA PUBLIC KEY-----') || !value.endsWith('-----END RSA PUBLIC KEY-----')) return\n  const der = pemToArrayBuffer(value)\n  const key = await window.crypto.subtle.importKey(\n    'spki', // Specify that the data is in SPKI format\n    der,\n    {\n      name: 'RSA-OAEP',\n      hash: { name: 'SHA-256' }\n    },\n    true,\n    ['encrypt'] // Specify key usages\n  )\n  const originalName = name.replace('PEM', '')\n  const exported = await window.crypto.subtle.exportKey('spki', key)\n  const exportedBuffer = new Uint8Array(exported)\n  parent[originalName] = {\n    export () {\n      return exportedBuffer\n    }\n  }\n}\n\nfunction pemToArrayBuffer (pem) {\n  // Fetch the part of the PEM string between header and footer\n  const pemHeader = '-----BEGIN RSA PUBLIC KEY-----'\n  const pemFooter = '-----END RSA PUBLIC KEY-----'\n  const pemContents = pem.slice(pemHeader.length, pem.length - pemFooter.length).trim()\n  const binaryDerString = atob(pemContents.replaceAll(/\\s/g, ''))\n  const binaryDer = new Uint8Array(binaryDerString.length)\n  for (let i = 0; i < binaryDerString.length; i++) {\n    binaryDer[i] = binaryDerString.codePointAt(i)!\n  }\n  return binaryDer.buffer\n}\n\nconst urlWithBase = (url: string, base: string) => {\n  const defaultBase = isPageSecure() ? 'https' : 'http'\n  if (!base.startsWith('http')) base = `${defaultBase}://${base}`\n  const urlObj = new URL(url, base)\n  base = base.replace(/^https?:\\/\\//, '')\n  urlObj.host = base.includes(':') ? base : `${base}:${isPageSecure(base) ? '443' : '80'}`\n  return urlObj\n}\n","// fix double tap on mobile\n\nlet lastElement = null as {\n  clickTime: number\n  element: HTMLElement\n} | null\ndocument.addEventListener('touchstart', (e) => {\n  if (e.touches.length > 1) {\n    lastElement = null\n    return\n  }\n  if (lastElement && Date.now() - lastElement.clickTime < 500 && lastElement.element === e.target) {\n    lastElement.element.dispatchEvent(new MouseEvent('dblclick', { bubbles: true }))\n    lastElement = null\n  }\n  lastElement = {\n    clickTime: Date.now(),\n    element: e.target as HTMLElement\n  }\n}, { passive: false })\n","// todo implement async options storage\n\nimport { proxy, subscribe } from 'valtio/vanilla'\n// weird webpack configuration bug: it cant import valtio/utils in this file\nimport { subscribeKey } from 'valtio/utils'\nimport { omitObj } from '@zardoy/utils'\n\nconst isDev = process.env.NODE_ENV === 'development'\nconst defaultOptions = {\n  renderDistance: 3,\n  keepChunksDistance: 1,\n  multiplayerRenderDistance: 3,\n  closeConfirmation: true,\n  autoFullScreen: false,\n  mouseRawInput: true,\n  autoExitFullscreen: false,\n  localUsername: 'wanderer',\n  mouseSensX: 50,\n  mouseSensY: -1,\n  // mouseInvertX: false,\n  chatWidth: 320,\n  chatHeight: 180,\n  chatScale: 100,\n  chatOpacity: 100,\n  chatOpacityOpened: 100,\n  messagesLimit: 200,\n  volume: 50,\n  // fov: 70,\n  fov: 75,\n  guiScale: 3,\n  autoRequestCompletions: true,\n  touchButtonsSize: 40,\n  touchButtonsOpacity: 80,\n  touchButtonsPosition: 12,\n  touchControlsPositions: getDefaultTouchControlsPositions(),\n  touchControlsType: 'classic' as 'classic' | 'joystick-buttons',\n  gpuPreference: 'default' as 'default' | 'high-performance' | 'low-power',\n  backgroundRendering: '20fps' as 'full' | '20fps' | '5fps',\n  /** @unstable */\n  disableAssets: false,\n  /** @unstable */\n  debugLogNotFrequentPackets: false,\n  unimplementedContainers: false,\n  dayCycleAndLighting: true,\n  loadPlayerSkins: true,\n  lowMemoryMode: false,\n  starfieldRendering: true,\n  enabledResourcepack: null as string | null,\n  useVersionsTextures: 'latest',\n  serverResourcePacks: 'prompt' as 'prompt' | 'always' | 'never',\n  handDisplay: false,\n\n  // antiAliasing: false,\n\n  clipWorldBelowY: undefined as undefined | number, // will be removed\n  disableSignsMapsSupport: false,\n  singleplayerAutoSave: false,\n  showChunkBorders: false, // todo rename option\n  frameLimit: false as number | false,\n  alwaysBackupWorldBeforeLoading: undefined as boolean | undefined | null,\n  alwaysShowMobileControls: false,\n  excludeCommunicationDebugEvents: [],\n  preventDevReloadWhilePlaying: false,\n  numWorkers: 4,\n  localServerOptions: {\n    gameMode: 1\n  } as any,\n  preferLoadReadonly: false,\n  disableLoadPrompts: false,\n  guestUsername: 'guest',\n  askGuestName: true,\n  errorReporting: true,\n  /** Actually might be useful */\n  showCursorBlockInSpectator: false,\n  renderEntities: true,\n  smoothLighting: true,\n  newVersionsLighting: false,\n  chatSelect: true,\n  autoJump: 'auto' as 'auto' | 'always' | 'never',\n  autoParkour: false,\n  vrSupport: true, // doesn't directly affect the VR mode, should only disable the button which is annoying to android users\n  renderDebug: (isDev ? 'advanced' : 'basic') as 'none' | 'advanced' | 'basic',\n  autoVersionSelect: '1.20.4',\n\n  // advanced bot options\n  autoRespawn: false,\n  mutedSounds: [] as string[],\n  plugins: [] as Array<{ enabled: boolean, name: string, description: string, script: string }>,\n  /** Wether to popup sign editor on server action */\n  autoSignEditor: true,\n  wysiwygSignEditor: 'auto' as 'auto' | 'always' | 'never',\n  showMinimap: 'never' as 'always' | 'singleplayer' | 'never',\n  minimapOptimizations: true,\n  displayBossBars: false, // boss bar overlay was removed for some reason, enable safely\n  disabledUiParts: [] as string[],\n  neighborChunkUpdates: true\n}\n\nfunction getDefaultTouchControlsPositions () {\n  return {\n    action: [\n      70,\n      76\n    ],\n    sneak: [\n      84,\n      76\n    ],\n    break: [\n      70,\n      60\n    ],\n    jump: [\n      84,\n      60\n    ],\n  } as Record<string, [number, number]>\n}\n\nconst qsOptionsRaw = new URLSearchParams(location.search).getAll('setting')\nexport const qsOptions = Object.fromEntries(qsOptionsRaw.map(o => {\n  const [key, value] = o.split(':')\n  return [key, JSON.parse(value)]\n}))\n\nconst migrateOptions = (options: Partial<AppOptions & Record<string, any>>) => {\n  if (options.highPerformanceGpu) {\n    options.gpuPreference = 'high-performance'\n    delete options.highPerformanceGpu\n  }\n  if (Object.keys(options.touchControlsPositions ?? {}).length === 0) {\n    options.touchControlsPositions = defaultOptions.touchControlsPositions\n  }\n  if (options.touchControlsPositions?.jump === undefined) {\n    options.touchControlsPositions!.jump = defaultOptions.touchControlsPositions.jump\n  }\n\n  return options\n}\n\nexport type AppOptions = typeof defaultOptions\n\nexport const options: AppOptions = proxy({\n  ...defaultOptions,\n  ...migrateOptions(JSON.parse(localStorage.options || '{}')),\n  ...qsOptions\n})\n\nwindow.options = window.settings = options\n\nexport const resetOptions = () => {\n  Object.assign(options, defaultOptions)\n}\n\nObject.defineProperty(window, 'debugChangedOptions', {\n  get () {\n    return Object.fromEntries(Object.entries(options).filter(([key, v]) => defaultOptions[key] !== v))\n  },\n})\n\nsubscribe(options, () => {\n  const saveOptions = omitObj(options, ...Object.keys(qsOptions) as [any])\n  localStorage.options = JSON.stringify(saveOptions)\n})\n\ntype WatchValue = <T extends Record<string, any>>(proxy: T, callback: (p: T, isChanged: boolean) => void) => void\n\nexport const watchValue: WatchValue = (proxy, callback) => {\n  const watchedProps = new Set<string>()\n  callback(new Proxy(proxy, {\n    get (target, p, receiver) {\n      watchedProps.add(p.toString())\n      return Reflect.get(target, p, receiver)\n    },\n  }), false)\n  for (const prop of watchedProps) {\n    subscribeKey(proxy, prop, () => {\n      callback(proxy, true)\n    })\n  }\n}\n\nwatchValue(options, o => {\n  globalThis.excludeCommunicationDebugEvents = o.excludeCommunicationDebugEvents\n})\n\nwatchValue(options, o => {\n  document.body.classList.toggle('disable-assets', o.disableAssets)\n})\nwatchValue(options, o => {\n  document.body.style.setProperty('--touch-movement-buttons-opacity', (o.touchButtonsOpacity / 100).toString())\n})\nwatchValue(options, o => {\n  document.body.style.setProperty('--touch-movement-buttons-position', (o.touchButtonsPosition * 2) + 'px')\n})\n\nexport const useOptionValue = (setting, valueCallback) => {\n  valueCallback(setting)\n  subscribe(setting, valueCallback)\n}\n","import { proxy } from 'valtio'\nimport { PacketsLogger } from './packetsReplayBase'\n\nexport const packetsReplaceSessionState = proxy({\n  active: false,\n})\n\nconst replayLogger = new PacketsLogger()\nexport default () => {\n  customEvents.on('mineflayerBotCreated', () => {\n    replayLogger.contents = ''\n    bot._client.on('packet', (data, { name, state }) => {\n      if (!packetsReplaceSessionState.active) {\n        return\n      }\n      replayLogger.log(true, { name, state }, data)\n    })\n    bot._client.on('writePacket' as any, (name, data) => {\n      if (!packetsReplaceSessionState.active) {\n        return\n      }\n      replayLogger.log(false, { name, state: bot._client.state }, data)\n    })\n  })\n}\n\nexport const downloadPacketsReplay = async () => {\n  const a = document.createElement('a')\n  a.href = `data:text/plain;charset=utf-8,${encodeURIComponent(replayLogger.contents)}`\n  a.download = `packets-replay-${new Date().toISOString()}.txt`\n  a.click()\n}\n","export class PacketsLogger {\n  lastPacketTime = -1\n  contents = ''\n  logOnly = [] as string[]\n  skip = [] as string[]\n\n  logStr (str: string) {\n    this.contents += `${str}\\n`\n  }\n\n  log (isFromServer: boolean, packet: { name; state }, data: any) {\n    if (this.logOnly.length > 0 && !this.logOnly.includes(packet.name)) {\n      return\n    }\n    if (this.skip.length > 0 && this.skip.includes(packet.name)) {\n      return\n    }\n    if (this.lastPacketTime === -1) {\n      this.lastPacketTime = Date.now()\n    }\n\n    const diff = `+${Date.now() - this.lastPacketTime}`\n    // serialize bigint\n    const str = `${isFromServer ? 'S' : 'C'} ${packet.state}:${packet.name} ${diff} ${JSON.stringify(data, (key, value) => {\n      if (typeof value === 'bigint') return value.toString()\n      return value\n    })}`\n    this.logStr(str)\n    this.lastPacketTime = Date.now()\n  }\n}\n\nexport type ParsedReplayPacket = {\n  name: string\n  params: any\n  state: string\n  diff: number\n  isFromServer: boolean\n}\nexport function parseReplayContents (contents: string) {\n  const lines = contents.split('\\n')\n\n  const packets = [] as ParsedReplayPacket[]\n  for (let line of lines) {\n    line = line.trim()\n    if (!line || line.startsWith('#')) continue\n    const [side, nameState, diff, ...data] = line.split(' ')\n    const parsed = JSON.parse(data.join(' '))\n    const [state, name] = nameState.split(':')\n    packets.push({\n      name,\n      state,\n      params: parsed,\n      isFromServer: side.toUpperCase() === 'S',\n      diff: Number.parseInt(diff.slice(1), 10),\n    })\n  }\n\n  return packets\n}\n","export const guessProblem = (errorMessage: string) => {\n  if (errorMessage.endsWith('Socket error: ECONNREFUSED')) {\n    return 'Most probably the server is not running.'\n  }\n}\n\nexport const loadingTexts = [\n  'Like the project? Give us a star on GitHub or rate us on AlternativeTo!',\n  'To stay updated with the latest changes, go to the GitHub page, click on \"Watch\", choose \"Custom\", and then opt for \"Releases\"!',\n  'Upvote features on GitHub issues to help us prioritize them!',\n  'Want to contribute to the project? Check out Contributing.md on GitHub!',\n]\n","// extracted by css-extract-rspack-plugin\nexport default {\"description\":\"description-CKQUPy\",\"last-status\":\"last-status-js4NpE\",\"lastStatus\":\"last-status-js4NpE\"};","import { useEffect, useState } from 'react'\nimport styles from './appStatus.module.css'\nimport Button from './Button'\nimport Screen from './Screen'\nimport LoadingChunks from './LoadingChunks'\n\nexport default ({\n  status,\n  isError,\n  hideDots = false,\n  lastStatus = '',\n  backAction = undefined as undefined | (() => void),\n  description = '' as string | JSX.Element,\n  actionsSlot = null as React.ReactNode | null,\n  children\n}) => {\n  const [loadingDotIndex, setLoadingDotIndex] = useState(0)\n\n  useEffect(() => {\n    const statusRunner = async () => {\n      const timer = async (ms) => new Promise((resolve) => { setTimeout(resolve, ms) })\n\n      const load = async () => {\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n          setLoadingDotIndex(i => (i + 1) % 4)\n          await timer(500) // eslint-disable-line no-await-in-loop\n        }\n      }\n\n      void load()\n    }\n\n    void statusRunner()\n  }, [])\n\n\n  return (\n    <Screen\n      className='small-content'\n      titleSelectable={isError}\n      title={\n        <>\n          <span style={{\n            wordBreak: 'break-word',\n          }}\n          >\n            {status}\n          </span>\n          <div style={{ display: 'inline-flex', gap: '1px', }} hidden={hideDots || isError}>\n            {\n              [...'...'].map((dot, i) => {\n                return <span\n                  key={i} style={{\n                    visibility: loadingDotIndex <= i ? 'hidden' : 'visible',\n                  }}>{dot}</span>\n              })\n            }\n          </div>\n          <p className={styles.description}>{description}</p>\n          <p className={styles['last-status']}>{lastStatus ? `Last status: ${lastStatus}` : lastStatus}</p>\n        </>\n      }\n      backdrop='dirt'\n    >\n      {isError && (\n        <>\n          {backAction && <Button label=\"Back\" onClick={backAction} />}\n          {actionsSlot}\n          <Button onClick={() => window.location.reload()} label=\"Reset App (recommended)\" />\n        </>\n      )}\n      {children}\n    </Screen>\n  )\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-HLYI5E\",\"main\":\"main-i6FZfW\"};","import { useEffect, useState } from 'react'\nimport { Transition } from 'react-transition-group'\nimport styles from './DiveTransition.module.css'\n\n// dive animation from framework7\n\nconst startStyle = { opacity: 0, transform: 'translateZ(-150px)' }\nconst endExitStyle = { opacity: 0, transform: 'translateZ(150px)' }\nconst endStyle = { opacity: 1, transform: 'translateZ(0)' }\n\nconst stateStyles = {\n  entering: endStyle,\n  entered: endStyle,\n  exiting: endExitStyle,\n  exited: endExitStyle,\n}\nconst duration = 300\nconst basicStyle = {\n  transition: `${duration}ms ease-in-out all`,\n}\n\nexport default ({ children, open }) => {\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    if (!mounted && open) {\n      setMounted(true)\n    }\n    let timeout\n    if (mounted && !open) {\n      timeout = setTimeout(() => {\n        setMounted(false)\n      }, duration)\n    }\n    return () => {\n      if (timeout) clearTimeout(timeout)\n    }\n  }, [open])\n\n  if (!mounted) return null\n\n  return <Transition\n    in={open}\n    timeout={duration}\n    mountOnEnter\n    unmountOnExit\n  >\n    {(state) => {\n      return <div className={styles.container}>\n        {/* todo resolve compl */}\n        <div style={{ ...basicStyle, ...stateStyles[state] }} className={styles.main}>{children}</div>\n      </div>\n    }}\n  </Transition>\n}\n","import { useEffect, useRef } from 'react'\nimport './LoadingChunks.css'\n\nexport default ({ regionFiles = [] as string[], stateMap = {} as Record<string, string>, displayText = false, playerChunk = null as null | { x: number, z: number } }) => {\n  // visualize downloading chunks\n  const regionNumbers = regionFiles.map(x => x.split('.').slice(1, 3).map(Number))\n  const minX = Math.min(...regionNumbers.map(([x]) => x))\n  const maxX = Math.max(...regionNumbers.map(([x]) => x))\n  const minZ = Math.min(...regionNumbers.map(([, z]) => z))\n  const maxZ = Math.max(...regionNumbers.map(([, z]) => z))\n  const xChunks = maxX - minX + 1\n  const zChunks = maxZ - minZ + 1\n\n  return <div style={{\n    // maxWidth: '80%',\n    // maxHeight: '80%',\n    // aspectRatio: '1',\n    display: 'grid',\n    gridTemplateColumns: `repeat(${xChunks}, 1fr)`,\n    gridTemplateRows: `repeat(${zChunks}, 1fr)`,\n    gap: 1,\n    width: '110px',\n    height: '110px',\n  }}>\n    {Array.from({ length: xChunks * zChunks }).map((_, i) => {\n      const x = minX + i % xChunks\n      const z = minZ + Math.floor(i / xChunks)\n      const file = `r.${x}.${z}.mca`\n      const state = stateMap[file]\n      if (!regionFiles.includes(file)) return <div key={i} style={{ background: 'gray' }} />\n      return <Chunk key={i} x={x} z={z} state={state} displayText={displayText} currentPlayer={playerChunk?.x === x && playerChunk?.z === z} />\n    })}\n  </div>\n}\n\nconst Chunk = ({ x, z, state, displayText, currentPlayer }) => {\n  const text = displayText ? `${x},${z}` : undefined\n\n  return <div style={{\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    background: state === 'errored' ? 'red' : state === 'loading' ? 'white' : 'limegreen',\n    animation: state === 'loading' ? `loading-chunks-loading-animation 4s infinite cubic-bezier(0.4, 0, 0.2, 1)` : undefined,\n    transition: 'background 1s',\n    color: state === 'loading' ? 'black' : 'white',\n    position: 'relative',\n    zIndex: 1,\n  }}>\n    {/* green dot */}\n    {currentPlayer && <div style={{\n      position: 'absolute',\n      background: 'red',\n      borderRadius: '50%',\n      width: '5px',\n      height: '5px',\n      zIndex: -1,\n    }} />}\n    {text}</div>\n}\n","import { proxy, useSnapshot } from 'valtio'\nimport { useEffect, useRef, useState } from 'react'\nimport { activeModalStack, activeModalStacks, hideModal, insertActiveModalStack, miscUiState, showModal } from '../globalState'\nimport { resetLocalStorageWorld } from '../browserfs'\nimport { fsState } from '../loadSave'\nimport { guessProblem } from '../errorLoadingScreenHelpers'\nimport { ConnectOptions } from '../connect'\nimport { downloadPacketsReplay, packetsReplaceSessionState } from '../packetsReplay'\nimport { getProxyDetails } from '../microsoftAuthflow'\nimport AppStatus from './AppStatus'\nimport DiveTransition from './DiveTransition'\nimport { useDidUpdateEffect } from './utils'\nimport { useIsModalActive } from './utilsApp'\nimport Button from './Button'\nimport { AuthenticatedAccount, updateAuthenticatedAccountData, updateLoadedServerData } from './ServersListProvider'\nimport { showOptionsModal } from './SelectOption'\nimport LoadingChunks from './LoadingChunks'\nimport MessageFormatted from './MessageFormatted'\nimport MessageFormattedString from './MessageFormattedString'\n\nconst initialState = {\n  status: '',\n  lastStatus: '',\n  maybeRecoverable: true,\n  descriptionHint: '',\n  isError: false,\n  hideDots: false,\n  loadingChunksData: null as null | Record<string, string>,\n  loadingChunksDataPlayerChunk: null as null | { x: number, z: number },\n  isDisplaying: false,\n  minecraftJsonMessage: null as null | Record<string, any>\n}\nexport const appStatusState = proxy(initialState)\nexport const resetAppStatusState = () => {\n  Object.assign(appStatusState, initialState)\n}\n\nexport const lastConnectOptions = {\n  value: null as ConnectOptions | null\n}\n\nexport default () => {\n  const { isError, lastStatus, maybeRecoverable, status, hideDots, descriptionHint, loadingChunksData, loadingChunksDataPlayerChunk, minecraftJsonMessage } = useSnapshot(appStatusState)\n  const { active: replayActive } = useSnapshot(packetsReplaceSessionState)\n\n  const isOpen = useIsModalActive('app-status')\n\n  useDidUpdateEffect(() => {\n    // todo play effect only when world successfully loaded\n    if (!isOpen) {\n      const divingElem: HTMLElement = document.querySelector('#viewer-canvas')!\n      divingElem.style.animationName = 'dive-animation'\n      divingElem.parentElement!.style.perspective = '1200px'\n      divingElem.onanimationend = () => {\n        divingElem.parentElement!.style.perspective = ''\n        divingElem.onanimationend = null\n      }\n    }\n  }, [isOpen])\n\n  const reconnect = () => {\n    resetAppStatusState()\n    window.dispatchEvent(new window.CustomEvent('connect', {\n      detail: lastConnectOptions.value\n    }))\n  }\n\n  useEffect(() => {\n    const controller = new AbortController()\n    window.addEventListener('keyup', (e) => {\n      if (activeModalStack.at(-1)?.reactType !== 'app-status') return\n      if (e.code !== 'KeyR' || !lastConnectOptions.value) return\n      reconnect()\n    }, {\n      signal: controller.signal\n    })\n    return () => controller.abort()\n  }, [])\n\n  const displayAuthButton = status.includes('This server appears to be an online server and you are providing no authentication.')\n  const displayVpnButton = status.includes('VPN') || status.includes('Proxy')\n  const authReconnectAction = async () => {\n    let accounts = [] as AuthenticatedAccount[]\n    updateAuthenticatedAccountData(oldAccounts => {\n      accounts = oldAccounts\n      return oldAccounts\n    })\n\n    const account = await showOptionsModal('Choose account to connect with', [...accounts.map(account => account.username), 'Use other account'])\n    if (!account) return\n    lastConnectOptions.value!.authenticatedAccount = accounts.find(acc => acc.username === account) || true\n    reconnect()\n  }\n\n  return <DiveTransition open={isOpen}>\n    <AppStatus\n      status={status}\n      isError={isError || appStatusState.status === ''} // display back button if status is empty as probably our app is errored\n      hideDots={hideDots}\n      lastStatus={lastStatus}\n      description={<>{\n        displayAuthButton ? '' : (isError ? guessProblem(status) : '') || descriptionHint\n      }{\n        minecraftJsonMessage && <MessageFormattedString message={minecraftJsonMessage} />\n      }</>}\n      backAction={maybeRecoverable ? () => {\n        resetAppStatusState()\n        miscUiState.gameLoaded = false\n        miscUiState.loadedDataVersion = null\n        window.loadedData = undefined\n        if (activeModalStacks['main-menu']) {\n          insertActiveModalStack('main-menu')\n          if (activeModalStack.at(-1)?.reactType === 'app-status') {\n            hideModal(undefined, undefined, { force: true }) // workaround: hide loader that was shown on world loading\n          }\n        } else {\n          hideModal(undefined, undefined, { force: true })\n        }\n      } : undefined}\n      actionsSlot={\n        <>\n          {displayAuthButton && <Button label='Authenticate' onClick={authReconnectAction} />}\n          {displayVpnButton && <PossiblyVpnBypassProxyButton reconnect={reconnect} />}\n          {replayActive && <Button label='Download Packets Replay' onClick={downloadPacketsReplay} />}\n        </>\n      }\n    >\n      {loadingChunksData && <LoadingChunks regionFiles={Object.keys(loadingChunksData)} stateMap={loadingChunksData} playerChunk={loadingChunksDataPlayerChunk} />}\n      {isOpen && <DisplayingIndicator />}\n    </AppStatus>\n  </DiveTransition>\n}\n\nconst DisplayingIndicator = () => {\n  useEffect(() => {\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        appStatusState.isDisplaying = true\n      })\n    })\n  }, [])\n\n  return <div />\n}\n\nconst PossiblyVpnBypassProxyButton = ({ reconnect }: { reconnect: () => void }) => {\n  const [vpnBypassProxy, setVpnBypassProxy] = useState('')\n\n  const useVpnBypassProxyAction = () => {\n    updateLoadedServerData((data) => {\n      data.proxyOverride = vpnBypassProxy\n      return data\n    }, lastConnectOptions.value?.serverIndex)\n    lastConnectOptions.value!.proxy = vpnBypassProxy\n    reconnect()\n  }\n\n  useEffect(() => {\n    const proxy = lastConnectOptions.value?.proxy\n    if (!proxy) return\n    getProxyDetails(proxy)\n      .then(async (r) => r.json())\n      .then(({ capabilities }) => {\n        const { vpnBypassProxy } = capabilities\n        if (!vpnBypassProxy) return\n        setVpnBypassProxy(vpnBypassProxy)\n      })\n      .catch(() => { })\n  }, [])\n\n  if (!vpnBypassProxy) return\n  return <Button label='Use VPN bypass proxy' onClick={useVpnBypassProxyAction} />\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"button\":\"button-KqXTeV\",\"icon\":\"icon-rzxum4\"};","import classNames from 'classnames'\nimport { createContext, FC, Ref, useContext } from 'react'\nimport buttonCss from './button.module.css'\nimport SharedHudVars from './SharedHudVars'\nimport PixelartIcon from './PixelartIcon'\n\n// testing in storybook from deathscreen\n\ninterface Props extends React.ComponentProps<'button'> {\n  label?: string\n  icon?: string\n  children?: React.ReactNode\n  inScreen?: boolean\n  rootRef?: Ref<HTMLButtonElement>\n}\n\nconst ButtonContext = createContext({\n  onClick () { },\n})\n\nexport const ButtonProvider: FC<{ children, onClick }> = ({ children, onClick }) => {\n  return <ButtonContext.Provider value={{ onClick }}>{children}</ButtonContext.Provider>\n}\n\nexport default (({ label, icon, children, inScreen, rootRef, type = 'button', ...args }) => {\n  const ctx = useContext(ButtonContext)\n\n  const onClick = (e) => {\n    ctx.onClick()\n    args.onClick?.(e)\n  }\n  if (inScreen) {\n    args.style ??= {}\n    args.style.width = 150\n  }\n  if (icon) {\n    args.style ??= {}\n    args.style.width = 20\n  }\n\n  return <SharedHudVars>\n    <button ref={rootRef} {...args} className={classNames(buttonCss.button, args.className)} onClick={onClick} type={type}>\n      {icon && <PixelartIcon className={buttonCss.icon} iconName={icon} />}\n      {label}\n      {children}\n    </button>\n  </SharedHudVars>\n}) satisfies FC<Props>\n","import { proxy, subscribe } from 'valtio'\nimport { useEffect, useMemo, useRef, useState } from 'react'\nimport { MessageFormatPart } from '../chatUtils'\nimport { MessagePart } from './MessageFormatted'\nimport './Chat.css'\nimport { isIos, reactKeyForMessage } from './utils'\nimport Button from './Button'\nimport { pixelartIcons } from './PixelartIcon'\n\nexport type Message = {\n  parts: MessageFormatPart[],\n  id: number\n  fading?: boolean\n  faded?: boolean\n}\n\nconst MessageLine = ({ message }: { message: Message }) => {\n  const classes = {\n    'chat-message-fadeout': message.fading,\n    'chat-message-fade': message.fading,\n    'chat-message-faded': message.faded,\n    'chat-message': true\n  }\n\n  return <li className={Object.entries(classes).filter(([, val]) => val).map(([name]) => name).join(' ')}>\n    {message.parts.map((msg, i) => <MessagePart key={i} part={msg} />)}\n  </li>\n}\n\ntype Props = {\n  messages: Message[]\n  usingTouch: boolean\n  opacity?: number\n  opened?: boolean\n  onClose?: () => void\n  sendMessage?: (message: string) => boolean | void\n  fetchCompletionItems?: (triggerKind: 'implicit' | 'explicit', completeValue: string, fullValue: string, abortController?: AbortController) => Promise<string[] | void>\n  // width?: number\n  allowSelection?: boolean\n  inputDisabled?: string\n}\n\nexport const chatInputValueGlobal = proxy({\n  value: ''\n})\n\nexport const fadeMessage = (message: Message, initialTimeout: boolean, requestUpdate: () => void) => {\n  setTimeout(() => {\n    message.fading = true\n    requestUpdate()\n    setTimeout(() => {\n      message.faded = true\n      requestUpdate()\n    }, 3000)\n  }, initialTimeout ? 5000 : 0)\n}\n\nexport default ({\n  messages,\n  opacity = 1,\n  fetchCompletionItems,\n  opened,\n  sendMessage,\n  onClose,\n  usingTouch,\n  allowSelection,\n  inputDisabled\n}: Props) => {\n  const sendHistoryRef = useRef(JSON.parse(window.sessionStorage.chatHistory || '[]'))\n\n  const [completePadText, setCompletePadText] = useState('')\n  const completeRequestValue = useRef('')\n  const [completionItemsSource, setCompletionItemsSource] = useState([] as string[])\n  const [completionItems, setCompletionItems] = useState([] as string[])\n\n  const chatInput = useRef<HTMLInputElement>(null!)\n  const chatMessages = useRef<HTMLDivElement>(null)\n  const openedChatWasAtBottom = useRef(false)\n  const chatHistoryPos = useRef(sendHistoryRef.current.length)\n  const inputCurrentlyEnteredValue = useRef('')\n\n  const setSendHistory = (newHistory: string[]) => {\n    sendHistoryRef.current = newHistory\n    window.sessionStorage.chatHistory = JSON.stringify(newHistory)\n    chatHistoryPos.current = newHistory.length\n  }\n\n  const acceptComplete = (item: string) => {\n    const base = completeRequestValue.current === '/' ? '' : getCompleteValue()\n    updateInputValue(base + item)\n    // todo would be cool but disabled because some comands don't need args (like ping)\n    // // trigger next tab complete\n    // this.chatInput.dispatchEvent(new KeyboardEvent('keydown', { code: 'Space' }))\n    chatInput.current.focus()\n  }\n\n  const updateInputValue = (newValue: string) => {\n    chatInput.current.value = newValue\n    onMainInputChange()\n    setTimeout(() => {\n      chatInput.current.setSelectionRange(newValue.length, newValue.length)\n    }, 0)\n  }\n\n  useEffect(() => {\n    // todo focus input on any keypress except tab\n  }, [])\n\n  const resetCompletionItems = () => {\n    setCompletionItemsSource([])\n    setCompletionItems([])\n  }\n\n  useEffect(() => {\n    if (opened) {\n      updateInputValue(chatInputValueGlobal.value)\n      chatInputValueGlobal.value = ''\n      if (!usingTouch) {\n        chatInput.current.focus()\n      }\n      const unsubscribe = subscribe(chatInputValueGlobal, () => {\n        if (!chatInputValueGlobal.value) return\n        updateInputValue(chatInputValueGlobal.value)\n        chatInputValueGlobal.value = ''\n        chatInput.current.focus()\n      })\n      return unsubscribe\n    }\n    if (!opened && chatMessages.current) {\n      chatMessages.current.scrollTop = chatMessages.current.scrollHeight\n    }\n  }, [opened])\n\n  useMemo(() => {\n    if (opened) {\n      completeRequestValue.current = ''\n      resetCompletionItems()\n    }\n  }, [opened])\n\n  useEffect(() => {\n    if ((!opened || (opened && openedChatWasAtBottom.current)) && chatMessages.current) {\n      openedChatWasAtBottom.current = false\n      // stay at bottom on messages changes\n      chatMessages.current.scrollTop = chatMessages.current.scrollHeight\n    }\n  }, [messages])\n\n  useMemo(() => {\n    if ((opened && chatMessages.current)) {\n      const wasAtBottom = chatMessages.current.scrollTop === chatMessages.current.scrollHeight - chatMessages.current.clientHeight\n      openedChatWasAtBottom.current = wasAtBottom\n      // console.log(wasAtBottom, chatMessages.current.scrollTop, chatMessages.current.scrollHeight - chatMessages.current.clientHeight)\n    }\n  }, [messages])\n\n  const auxInputFocus = (fireKey: string) => {\n    chatInput.current.focus()\n    chatInput.current.dispatchEvent(new KeyboardEvent('keydown', { code: fireKey, bubbles: true }))\n  }\n\n  const getDefaultCompleteValue = () => {\n    const raw = chatInput.current.value\n    return raw.slice(0, chatInput.current.selectionEnd ?? raw.length)\n  }\n  const getCompleteValue = (value = getDefaultCompleteValue()) => {\n    const valueParts = value.split(' ')\n    const lastLength = valueParts.at(-1)!.length\n    const completeValue = lastLength ? value.slice(0, -lastLength) : value\n    if (valueParts.length === 1 && value.startsWith('/')) return '/'\n    return completeValue\n  }\n\n  const fetchCompletions = async (implicit: boolean, inputValue = chatInput.current.value) => {\n    const completeValue = getCompleteValue(inputValue)\n    completeRequestValue.current = completeValue\n    resetCompletionItems()\n    const newItems = await fetchCompletionItems?.(implicit ? 'implicit' : 'explicit', completeValue, inputValue) ?? []\n    if (completeValue !== completeRequestValue.current) return\n    setCompletionItemsSource(newItems)\n    updateFilteredCompleteItems(newItems)\n  }\n\n  const updateFilteredCompleteItems = (sourceItems: string[]) => {\n    const newCompleteItems = sourceItems.filter(item => {\n      // this regex is imporatnt is it controls the word matching\n      const compareableParts = item.split(/[_:]/)\n      const lastWord = chatInput.current.value.slice(0, chatInput.current.selectionEnd ?? chatInput.current.value.length).split(' ').at(-1)!\n      return [item, ...compareableParts].some(compareablePart => compareablePart.startsWith(lastWord))\n    })\n    setCompletionItems(newCompleteItems)\n  }\n\n  const onMainInputChange = () => {\n    const completeValue = getCompleteValue()\n    setCompletePadText(completeValue === '/' ? '' : completeValue)\n    if (completeRequestValue.current === completeValue) {\n      updateFilteredCompleteItems(completionItemsSource)\n      return\n    }\n\n    if (completeValue.startsWith('/')) {\n      void fetchCompletions(true)\n    } else {\n      resetCompletionItems()\n    }\n    completeRequestValue.current = completeValue\n    // if (completeValue === '/') {\n    //   void fetchCompletions(true)\n    // }\n  }\n\n  return (\n    <>\n      <div\n        className={`chat-wrapper chat-messages-wrapper ${usingTouch ? 'display-mobile' : ''}`} style={{\n          userSelect: opened && allowSelection ? 'text' : undefined,\n        }}\n      >\n        {opacity && <div ref={chatMessages} className={`chat ${opened ? 'opened' : ''}`} id=\"chat-messages\" style={{ opacity }}>\n          {messages.map((m) => (\n            <MessageLine key={reactKeyForMessage(m)} message={m} />\n          ))}\n        </div> || undefined}\n      </div>\n\n      <div className={`chat-wrapper chat-input-wrapper ${usingTouch ? 'input-mobile' : ''}`} hidden={!opened}>\n        {/* close button */}\n        {usingTouch && <Button icon={pixelartIcons.close} onClick={() => onClose?.()} />}\n        <div className=\"chat-input\">\n          {completionItems?.length ? (\n            <div className=\"chat-completions\">\n              <div className=\"chat-completions-pad-text\">{completePadText}</div>\n              <div className=\"chat-completions-items\">\n                {completionItems.map((item) => (\n                  <div key={item} onClick={() => acceptComplete(item)}>{item}</div>\n                ))}\n              </div>\n            </div>\n          ) : null}\n          <form onSubmit={(e) => {\n            e.preventDefault()\n            const message = chatInput.current.value\n            if (message) {\n              setSendHistory([...sendHistoryRef.current, message])\n              const result = sendMessage?.(message)\n              if (result !== false) {\n                onClose?.()\n              }\n            }\n          }}\n          >\n            {isIos && <input\n              value=''\n              type=\"text\"\n              className=\"chat-mobile-hidden\"\n              id=\"chatinput-next-command\"\n              spellCheck={false}\n              autoComplete=\"off\"\n              onFocus={() => auxInputFocus('ArrowUp')}\n              onChange={() => { }}\n            />}\n            <input\n              defaultValue=''\n              ref={chatInput}\n              type=\"text\"\n              className=\"chat-input\"\n              id=\"chatinput\"\n              spellCheck={false}\n              autoComplete=\"off\"\n              aria-autocomplete=\"both\"\n              onChange={onMainInputChange}\n              disabled={!!inputDisabled}\n              placeholder={inputDisabled}\n              onKeyDown={(e) => {\n                if (e.code === 'ArrowUp') {\n                  if (chatHistoryPos.current === 0) return\n                  if (chatHistoryPos.current === sendHistoryRef.current.length) { // started navigating history\n                    inputCurrentlyEnteredValue.current = e.currentTarget.value\n                  }\n                  chatHistoryPos.current--\n                  updateInputValue(sendHistoryRef.current[chatHistoryPos.current] || '')\n                } else if (e.code === 'ArrowDown') {\n                  if (chatHistoryPos.current === sendHistoryRef.current.length) return\n                  chatHistoryPos.current++\n                  updateInputValue(sendHistoryRef.current[chatHistoryPos.current] || inputCurrentlyEnteredValue.current || '')\n                }\n                if (e.code === 'Tab') {\n                  if (completionItemsSource.length) {\n                    if (completionItems.length) {\n                      acceptComplete(completionItems[0])\n                    }\n                  } else {\n                    void fetchCompletions(false)\n                  }\n                  e.preventDefault()\n                }\n                if (e.code === 'Space') {\n                  resetCompletionItems()\n                  if (chatInput.current.value.startsWith('/')) {\n                    // alternative we could just simply use keyup, but only with keydown we can display suggestions popup as soon as possible\n                    void fetchCompletions(true, getCompleteValue(getDefaultCompleteValue() + ' '))\n                  }\n                }\n              }}\n            />\n            {isIos && <input\n              value=''\n              type=\"text\"\n              className=\"chat-mobile-hidden\"\n              id=\"chatinput-prev-command\"\n              spellCheck={false}\n              autoComplete=\"off\"\n              onFocus={() => auxInputFocus('ArrowDown')}\n              onChange={() => { }}\n            />}\n            {/* for some reason this is needed to make Enter work on android chrome */}\n            <button type='submit' style={{ visibility: 'hidden' }} />\n          </form>\n        </div>\n      </div>\n    </>\n  )\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-GXglqr\",\"input\":\"input-Mraw77\"};","import React, { CSSProperties, useEffect, useRef, useState } from 'react'\nimport { isMobile } from 'prismarine-viewer/viewer/lib/simpleUtils'\nimport styles from './input.module.css'\n\ninterface Props extends Omit<React.ComponentProps<'input'>, 'width'> {\n  rootStyles?: React.CSSProperties\n  autoFocus?: boolean\n  inputRef?: React.RefObject<HTMLInputElement>\n  validateInput?: (value: string) => CSSProperties | undefined\n  width?: number\n}\n\nexport default ({ autoFocus, rootStyles, inputRef, validateInput, defaultValue, width, ...inputProps }: Props) => {\n  if (width) rootStyles = { ...rootStyles, width }\n\n  const ref = useRef<HTMLInputElement>(null!)\n  const [validationStyle, setValidationStyle] = useState<CSSProperties>({})\n  const [value, setValue] = useState(defaultValue ?? '')\n\n  useEffect(() => {\n    setValue(inputProps.value === '' || inputProps.value ? inputProps.value : value)\n  }, [inputProps.value])\n\n  useEffect(() => {\n    if (inputRef) (inputRef as any).current = ref.current\n    if (!autoFocus || isMobile()) return // Don't make screen keyboard popup on mobile\n    ref.current.focus()\n  }, [])\n\n\n  return <div id='input-container' className={styles.container} style={rootStyles}>\n    <input\n      ref={ref}\n      className={styles.input}\n      autoComplete='off'\n      autoCapitalize='off'\n      autoCorrect='off'\n      autoSave='off'\n      spellCheck='false'\n      style={{ ...validationStyle }}\n      {...inputProps}\n      value={value}\n      onChange={(e) => {\n        setValidationStyle(validateInput?.(e.target.value) ?? {})\n        setValue(e.target.value)\n        inputProps.onChange?.(e)\n      }}\n    />\n  </div>\n}\n","import { ComponentProps } from 'react'\nimport { render } from '@xmcl/text-component'\nimport { noCase } from 'change-case'\nimport mojangson from 'mojangson'\nimport { openURL } from 'prismarine-viewer/viewer/lib/simpleUtils'\nimport { MessageFormatPart } from '../chatUtils'\nimport { chatInputValueGlobal } from './Chat'\nimport './MessageFormatted.css'\n\nconst hoverItemToText = (hoverEvent: MessageFormatPart['hoverEvent']) => {\n  try {\n    if (!hoverEvent) return undefined\n    const contents = hoverEvent['contents'] ?? hoverEvent.value\n    if (typeof contents.text === 'string' && contents.text.startsWith('{')) {\n      Object.assign(contents, mojangson.simplify(mojangson.parse(contents.text)))\n    }\n    if (typeof contents === 'string') return contents\n    // if (hoverEvent.action === 'show_text') {\n    //   return contents\n    // }\n    if (hoverEvent.action === 'show_item') {\n      return contents.id\n    }\n    if (hoverEvent.action === 'show_entity') {\n      let str = noCase(contents.type.replace('minecraft:', ''))\n      if (contents.name) str += `: ${contents.name.text}`\n      return str\n    }\n  } catch (err) {\n    // todo report critical error\n    reportError?.('Failed to parse message hover' + err.message)\n    return undefined\n  }\n}\n\nconst clickEventToProps = (clickEvent: MessageFormatPart['clickEvent']) => {\n  if (!clickEvent) return\n  if (clickEvent.action === 'run_command' || clickEvent.action === 'suggest_command') {\n    return {\n      onClick () {\n        chatInputValueGlobal.value = clickEvent.value\n      }\n    }\n  }\n  if (clickEvent.action === 'open_url') {\n    return {\n      onClick () {\n        const confirm = window.confirm(`Open ${clickEvent.value}?`)\n        if (confirm) {\n          openURL(clickEvent.value)\n        }\n      }\n    }\n  }\n  //@ts-expect-error todo\n  if (clickEvent.action === 'copy_to_clipboard') {\n    return {\n      onClick () {\n        void navigator.clipboard.writeText(clickEvent.value)\n      }\n    }\n  }\n}\n\nexport const MessagePart = ({ part, ...props }: { part: MessageFormatPart } & ComponentProps<'span'>) => {\n\n  const { color, italic, bold, underlined, strikethrough, text, clickEvent, hoverEvent, obfuscated } = part\n\n  const clickProps = clickEventToProps(clickEvent)\n  const hoverMessageRaw = hoverItemToText(hoverEvent)\n  const hoverItemText = hoverMessageRaw && typeof hoverMessageRaw !== 'string' ? render(hoverMessageRaw).children.map(child => child.component.text).join('') : hoverMessageRaw\n\n  const applyStyles = [\n    color ? colorF(color.toLowerCase()) + `; text-shadow: 1px 1px 0px ${getColorShadow(colorF(color.toLowerCase()).replace('color:', ''))}` : messageFormatStylesMap.white,\n    italic && messageFormatStylesMap.italic,\n    bold && messageFormatStylesMap.bold,\n    italic && messageFormatStylesMap.italic,\n    underlined && messageFormatStylesMap.underlined,\n    strikethrough && messageFormatStylesMap.strikethrough,\n    obfuscated && messageFormatStylesMap.obfuscated\n  ].filter(a => a !== false && a !== undefined).filter(Boolean)\n\n  return <span title={hoverItemText} style={parseInlineStyle(applyStyles.join(' '))} {...clickProps} {...props}>{text}</span>\n}\n\nexport default ({ parts, className }: { parts: readonly MessageFormatPart[], className?: string }) => {\n  return (\n    <span className={`formatted-message ${className ?? ''}`}>\n      {parts.map((part, i) => <MessagePart key={i} part={part} />)}\n    </span>\n  )\n}\n\nconst colorF = (color) => {\n  return color.trim().startsWith('#') ? `color:${color}` : messageFormatStylesMap[color] ?? undefined\n}\n\nexport function getColorShadow (hex, dim = 0.25) {\n  const color = parseInt(hex.replace('#', ''), 16)\n\n  const r = Math.trunc((color >> 16 & 0xFF) * dim)\n  const g = Math.trunc((color >> 8 & 0xFF) * dim)\n  const b = Math.trunc((color & 0xFF) * dim)\n\n  const f = (c) => ('00' + c.toString(16)).slice(-2)\n  return `#${f(r)}${f(g)}${f(b)}`\n}\n\nexport function parseInlineStyle (style: string): Record<string, any> {\n  const obj: Record<string, any> = {}\n  for (const rule of style.split(';')) {\n    const [prop, value] = rule.split(':')\n    const cssInJsProp = prop.trim().replaceAll(/-./g, (x) => x.toUpperCase()[1])\n    obj[cssInJsProp] = value.trim()\n  }\n  return obj\n}\n\nexport const messageFormatStylesMap = {\n  black: 'color:#000000',\n  dark_blue: 'color:#0000AA',\n  dark_green: 'color:#00AA00',\n  dark_aqua: 'color:#00AAAA',\n  dark_red: 'color:#AA0000',\n  dark_purple: 'color:#AA00AA',\n  gold: 'color:#FFAA00',\n  gray: 'color:#AAAAAA',\n  dark_gray: 'color:#555555',\n  blue: 'color:#5555FF',\n  green: 'color:#55FF55',\n  aqua: 'color:#55FFFF',\n  red: 'color:#FF5555',\n  light_purple: 'color:#FF55FF',\n  yellow: 'color:#FFFF55',\n  white: 'color:#FFFFFF',\n  bold: 'font-weight:900',\n  strikethrough: 'text-decoration:line-through',\n  underlined: 'text-decoration:underline',\n  italic: 'font-style:italic',\n  obfuscated: 'filter:blur(2px)',\n}\n","import { useMemo } from 'react'\nimport { fromFormattedString } from '@xmcl/text-component'\nimport { formatMessage } from '../chatUtils'\nimport MessageFormatted from './MessageFormatted'\n\n/** like MessageFormatted, but receives raw string or json instead, uses window.loadedData */\nexport default ({ message, fallbackColor, className }: {\n  message: string | Record<string, any> | null,\n  fallbackColor?: string,\n  className?: string\n}) => {\n  const messageJson = useMemo(() => {\n    if (!message) return null\n    try {\n      const texts = formatMessage(typeof message === 'string' ? fromFormattedString(message) : message)\n      return texts.map(text => {\n        return {\n          ...text,\n          color: text.color ?? fallbackColor,\n        }\n      })\n    } catch (err) {\n      console.error(err) // todo ensure its being logged\n      return null\n    }\n  }, [message])\n\n  return messageJson ? <MessageFormatted parts={messageJson} className={className} /> : null\n}\n","import { Transition } from 'react-transition-group'\nimport PixelartIcon from './PixelartIcon'\n\n// slide up\nconst startStyle = { opacity: 0, transform: 'translateY(100%)' }\nconst endExitStyle = { opacity: 0, transform: 'translateY(-100%)' }\nconst endStyle = { opacity: 1, transform: 'translateY(0)' }\n\nconst stateStyles = {\n  entering: startStyle,\n  entered: endStyle,\n  exiting: endExitStyle,\n  exited: endExitStyle,\n}\nconst duration = 200\nconst basicStyle = {\n  transition: `${duration}ms ease-in-out all`,\n}\n\n// save pass: login\n\nexport default ({ type = 'message', message, subMessage = '', open, icon = '', action = undefined as (() => void) | undefined }) => {\n  const isError = type === 'error'\n  icon ||= isError ? 'alert' : 'message'\n\n  return <Transition\n    in={open}\n    timeout={duration}\n    mountOnEnter\n    unmountOnExit\n  >\n    {state => {\n      const addStyles = { ...basicStyle, ...stateStyles[state] }\n\n      return <div\n        className={`app-notification ${isError ? 'error-notification' : ''}`} onClick={action} style={{\n          position: 'fixed',\n          top: 0,\n          right: 0,\n          width: '180px',\n          whiteSpace: 'nowrap',\n          fontSize: '9px',\n          display: 'flex',\n          gap: 4,\n          alignItems: 'center',\n          padding: '3px 5px',\n          background: isError ? 'rgba(255, 0, 0, 0.7)' : 'rgba(0, 0, 0, 0.7)',\n          borderRadius: '0 0 0 5px',\n          pointerEvents: action ? '' : 'none',\n          zIndex: 1200, // even above stats\n          ...addStyles\n        }}\n      >\n        <PixelartIcon iconName={icon} styles={{ fontSize: 12 }} />\n        <div style={{\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2,\n        }}\n        >\n          <div>\n            {message}\n          </div>\n          <div style={{\n            fontSize: '7px',\n            whiteSpace: 'nowrap',\n            color: 'lightgray',\n          }}\n          >{subMessage}\n          </div>\n        </div>\n      </div>\n    }}\n  </Transition>\n\n}\n","import React, { useEffect } from 'react'\nimport { proxy, useSnapshot } from 'valtio'\nimport Notification from './Notification'\n\ntype NotificationType = React.ComponentProps<typeof Notification> & {\n  autoHide: boolean\n  id: string\n}\n\n// todo stacking\nexport const notificationProxy = proxy({\n  message: '',\n  open: false,\n  type: 'message',\n  subMessage: '',\n  icon: '',\n  autoHide: true,\n  id: '',\n} satisfies NotificationType as NotificationType)\n\nexport const showNotification = (\n  message: string,\n  subMessage = '',\n  isError = false,\n  icon = '',\n  action = undefined as (() => void) | undefined,\n  autoHide = true\n) => {\n  notificationProxy.message = message\n  notificationProxy.subMessage = subMessage\n  notificationProxy.type = isError ? 'error' : 'message'\n  notificationProxy.icon = icon\n  notificationProxy.open = true\n  notificationProxy.autoHide = autoHide\n  notificationProxy.action = action\n}\nexport const hideNotification = () => {\n  // openNotification('') // reset\n  notificationProxy.open = false\n}\n\nexport default () => {\n  const { autoHide, message, open, icon, type, subMessage, action } = useSnapshot(notificationProxy)\n\n  useEffect(() => {\n    if (autoHide && open) {\n      setTimeout(() => {\n        hideNotification()\n      }, 7000)\n    }\n  }, [autoHide, open])\n\n  // test\n  // useEffect(() => {\n  //   setTimeout(() => {\n  //     openNotification('test', 'test', false, 'message')\n  //   }, 1000)\n  // }, [])\n\n  return <Notification\n    action={action}\n    type={type}\n    message={message}\n    subMessage={subMessage}\n    open={open}\n    icon={icon}\n  />\n}\n","import { CSSProperties } from 'react'\nimport { PixelartIconsGenerated } from './pixelartIcons.generated'\n\nexport default ({\n  iconName,\n  width = undefined as undefined | number,\n  styles = {} as CSSProperties,\n  className = undefined as undefined | string,\n  onClick = () => { }\n}) => {\n  if (width !== undefined) styles = { width, height: width, ...styles }\n  iconName = iconName.replace('pixelarticons:', '')\n\n  return <div\n    style={{\n      ...styles\n    }} onClick={onClick} className={`${`pixelart-icons-font-${iconName}`} ${className ?? ''}`}\n  />\n}\n\nexport const pixelartIcons = new Proxy({} as PixelartIconsGenerated, {\n  get (target, prop) {\n    return prop as string\n  }\n})\n","interface Props {\n  title: JSX.Element | string\n  children: React.ReactNode\n  backdrop?: boolean | 'dirt'\n  style?: React.CSSProperties\n  className?: string\n  titleSelectable?: boolean\n  titleMarginTop?: number\n}\n\nexport default ({ title, children, backdrop = true, style, className = '', titleSelectable, titleMarginTop }: Props) => {\n  return (\n    <>\n      {backdrop === 'dirt' ? <div className='dirt-bg' /> : backdrop ? <div className=\"backdrop\" /> : null}\n      <div className={`fullscreen ${className}`} style={{ overflow: 'auto', ...style }}>\n        <div className=\"screen-content\" style={titleMarginTop === undefined ? {} : { marginTop: titleMarginTop }}>\n          <div className={`screen-title ${titleSelectable ? 'text-select' : ''}`}>{title}</div>\n          {children}\n        </div>\n      </div>\n    </>\n  )\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-Y5gFld\",\"input\":\"input-Vt4rMm\"};","import { useState, CSSProperties } from 'react'\nimport Creatable from 'react-select/creatable'\nimport Input from './Input'\nimport './Select.css'\nimport styles from './select.module.css'\n\n\nexport interface OptionStorage {\n  value: string,\n  label: string\n}\n\ninterface Props {\n  initialOptions: OptionStorage[]\n  updateOptions: (options: string) => void\n  getCssOnInput?: (input: string) => CSSProperties | undefined\n  onValueChange?: (newVal: string) => void\n  defaultValue?: { value: string, label: string }\n  placeholder?: string\n  containerStyle?: CSSProperties\n  disabled?: boolean\n}\n\nexport default ({\n  initialOptions,\n  updateOptions,\n  getCssOnInput,\n  onValueChange,\n  defaultValue,\n  containerStyle,\n  placeholder,\n  disabled\n}: Props) => {\n  const [inputValue, setInputValue] = useState<string | undefined>(defaultValue?.label ?? '')\n  const [currValue, setCurrValue] = useState<string | undefined>(defaultValue?.label ?? '')\n  const [inputStyle, setInputStyle] = useState<CSSProperties>({})\n  const [isFirstClick, setIsFirstClick] = useState(true)\n\n  return <Creatable\n    options={initialOptions}\n    defaultValue={defaultValue}\n    blurInputOnSelect={true}\n    hideSelectedOptions={false}\n    maxMenuHeight={100}\n    isClearable={true}\n    formatCreateLabel={(value) => {\n      return 'Use \"' + value + '\"'\n    }}\n    isDisabled={disabled}\n    placeholder={placeholder ?? ''}\n    onChange={(e, action) => {\n      console.log('value:', e?.value)\n      setCurrValue(e?.label)\n      setInputValue(e?.label)\n      onValueChange?.(e?.value ?? '')\n      updateOptions?.(e?.value ?? '')\n      setInputStyle(getCssOnInput?.(e?.value ?? '') ?? {})\n    }}\n    onInputChange={(e) => {\n      setIsFirstClick(false)\n      setInputValue(e)\n    }}\n    inputValue={inputValue}\n    onFocus={(state) => {\n      setInputValue(currValue)\n    }}\n    filterOption={(option, value) => {\n      return isFirstClick || option.label.includes(value)\n    }}\n    onMenuOpen={() => {\n      setIsFirstClick(true)\n    }}\n    menuPortalTarget={document.body}\n    classNames={{\n      control (state) {\n        return styles.container\n      },\n      input (state) {\n        return styles.input\n      },\n      option (state) {\n        return styles.container\n      }\n    }}\n    styles={{\n      menuPortal (base, state) { return { ...base, zIndex: 10, transform: 'scale(var(--guiScale))', transformOrigin: 'top left' } },\n      container (base, state) { return { ...base, position: 'relative', zIndex: 10 } },\n      control (base, state) { return { ...containerStyle, ...inputStyle } },\n      menu (base, state) { return { position: 'absolute', zIndex: 10 } },\n      option (base, state) {\n        return {\n          boxSizing: 'border-box',\n          padding: '3px',\n          backgroundColor: 'black',\n          border: state.isFocused ? '1px solid white' : '1px solid grey',\n          height: 'fit-content',\n          ...containerStyle\n        }\n      },\n      input (base, state) { return {} },\n      indicatorsContainer (base, state) { return { display: 'none' } },\n      placeholder (base, state) { return { ...base, padding: '3px', position: 'absolute' } },\n      singleValue (base, state) { return { ...base, margin: '0px', position: 'absolute', color: 'white' } },\n      valueContainer (base, state) { return { ...base, padding: '3px' } },\n      noOptionsMessage (base, state) { return { display: 'none' } }\n    }}\n  />\n}\n","import React, { CSSProperties } from 'react'\nimport Select from './Select'\n\ntype Version = { value: string, label: string }\n\nexport default (\n  { versions, selected, onChange, updateOptions, containerStyle }:\n    {\n      versions: Version[],\n      selected?: Version,\n      onChange?: (newValue: string) => void,\n      updateOptions?: (newSel: string) => void,\n    } & Pick<React.ComponentProps<typeof Select>, 'containerStyle' | 'placeholder' | 'disabled'>\n) => {\n  return <Select\n    initialOptions={versions}\n    defaultValue={selected}\n    updateOptions={(newSel) => {\n      updateOptions?.(newSel)\n    }}\n    onValueChange={onChange}\n    containerStyle={containerStyle ?? { width: '190px' }}\n    getCssOnInput={(value) => {\n      if (!versions || !value) return {}\n      const parsedsupportedVersions = versions.map(x => x.value.split('.').map(Number))\n      const parsedValue = value.split('.').map(Number)\n\n      const compareVersions = (v1, v2) => {\n        for (let i = 0; i < Math.max(v1.length, v2.length); i++) {\n          const num1 = v1[i] || 0\n          const num2 = v2[i] || 0\n          if (num1 > num2) return 1\n          if (num1 < num2) return -1\n        }\n        return 0\n      }\n\n      parsedsupportedVersions.sort(compareVersions)\n      const minVersion = parsedsupportedVersions[0]\n      const maxVersion = parsedsupportedVersions.at(-1)\n\n      const isWithinRange = compareVersions(parsedValue, minVersion) >= 0 && compareVersions(parsedValue, maxVersion) <= 0\n      if (!isWithinRange) return { border: '1px solid red' }\n      if (!versions.some(x => x.value === value)) return { border: '1px solid yellow' }\n    }}\n  />\n\n}\n","import { proxy, useSnapshot } from 'valtio'\nimport { hideCurrentModal, showModal } from '../globalState'\nimport { parseFormattedMessagePacket } from '../botUtils'\nimport Screen from './Screen'\nimport { useIsModalActive } from './utilsApp'\nimport Button from './Button'\nimport MessageFormattedString from './MessageFormattedString'\n\nconst state = proxy({\n  title: '',\n  options: [] as string[],\n  showCancel: true,\n  minecraftJsonMessage: null as null | Record<string, any>,\n  behavior: 'resolve-close' as 'resolve-close' | 'close-resolve',\n})\n\nlet resolve\nexport const showOptionsModal = async <T extends string> (\n  title: string,\n  options: T[],\n  { cancel = true, minecraftJsonMessage }: { cancel?: boolean, minecraftJsonMessage? } = {}\n): Promise<T | undefined> => {\n  showModal({ reactType: 'general-select' })\n  let minecraftJsonMessageParsed\n  if (minecraftJsonMessage) {\n    const parseResult = parseFormattedMessagePacket(minecraftJsonMessage)\n    minecraftJsonMessageParsed = parseResult.formatted\n    if (parseResult.plain) {\n      title += ` (${parseResult.plain})`\n    }\n  }\n  return new Promise((_resolve) => {\n    resolve = _resolve\n    Object.assign(state, {\n      title,\n      options,\n      showCancel: cancel,\n      minecraftJsonMessage: minecraftJsonMessageParsed\n    })\n  })\n}\n\nexport default () => {\n  const { title, options, showCancel, minecraftJsonMessage } = useSnapshot(state)\n  const isModalActive = useIsModalActive('general-select')\n  if (!isModalActive) return\n\n  const resolveClose = (value: string | undefined) => {\n    if (state.behavior === 'resolve-close') {\n      resolve(value)\n      hideCurrentModal()\n    } else {\n      hideCurrentModal()\n      resolve(value)\n    }\n  }\n\n  return <Screen title={title} backdrop>\n    {minecraftJsonMessage && <div style={{ textAlign: 'center', }}>\n      <MessageFormattedString message={minecraftJsonMessage} />\n    </div>}\n    {options.map(option => <Button\n      key={option} onClick={() => {\n        resolveClose(option)\n      }}\n    >{option}\n    </Button>)}\n    {showCancel && <Button\n      style={{ marginTop: 30 }} onClick={() => {\n        resolveClose(undefined)\n      }}\n    >Cancel\n    </Button>}\n  </Screen>\n}\n","import React from 'react'\nimport Singleplayer from './Singleplayer'\nimport Input from './Input'\nimport Button from './Button'\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\nimport Select from './Select'\nimport { BaseServerInfo } from './AddServerOrConnect'\nimport { useIsSmallWidth } from './simpleHooks'\n\ninterface Props extends React.ComponentProps<typeof Singleplayer> {\n  joinServer: (info: BaseServerInfo, additional: {\n    shouldSave?: boolean\n    index?: number\n  }) => void\n  initialProxies: SavedProxiesLocalStorage\n  updateProxies: (proxies: SavedProxiesLocalStorage) => void\n  username: string\n  setUsername: (username: string) => void\n  onProfileClick?: () => void\n  setQuickConnectIp?: (ip: string) => void\n}\n\nexport interface SavedProxiesLocalStorage {\n  proxies: readonly string[]\n  selected: string\n}\n\ntype ProxyStatusResult = {\n  time: number\n  ping: number\n  status: 'success' | 'error' | 'unknown'\n}\n\nexport default ({ initialProxies, updateProxies: updateProxiesProp, joinServer, username, setUsername, onProfileClick, setQuickConnectIp, ...props }: Props) => {\n  const [proxies, setProxies] = React.useState(initialProxies)\n\n  const updateProxies = (newData: SavedProxiesLocalStorage) => {\n    setProxies(newData)\n    updateProxiesProp(newData)\n  }\n\n  const [serverIp, setServerIp] = React.useState('')\n  const [save, setSave] = React.useState(true)\n  const [activeHighlight, setActiveHighlight] = React.useState(undefined as 'quick-connect' | 'server-list' | undefined)\n\n  const getActiveHighlightStyles = (type: typeof activeHighlight) => {\n    const styles: React.CSSProperties = {\n      transition: 'filter 0.2s',\n    }\n    if (activeHighlight && activeHighlight !== type) {\n      styles.filter = 'brightness(0.7)'\n    }\n    return styles\n  }\n\n  const isSmallWidth = useIsSmallWidth()\n\n  return <Singleplayer\n    {...props}\n    firstRowChildrenOverride={<form\n      style={{ width: '100%', display: 'flex', justifyContent: 'center' }} onSubmit={(e) => {\n        e.preventDefault()\n        let ip = serverIp\n        let version\n        let msAuth = false\n        const parts = ip.split(':')\n        if (parts.at(-1) === 'ms') {\n          msAuth = true\n          parts.pop()\n        }\n        if (parts.length > 1 && parts.at(-1)!.includes('.')) {\n          version = parts.at(-1)!\n          ip = parts.slice(0, -1).join(':')\n        }\n        joinServer({\n          ip,\n          versionOverride: version,\n          authenticatedAccountOverride: msAuth ? true : undefined, // todo popup selector\n        }, {\n          shouldSave: save,\n        })\n      }}\n    >\n      <div\n        style={{ display: 'flex', gap: 5, alignItems: 'center', ...getActiveHighlightStyles('quick-connect') }}\n        className='quick-connect-row'\n        onMouseEnter={() => setActiveHighlight('quick-connect')}\n        onMouseLeave={() => setActiveHighlight(undefined)}\n      >\n        {/* todo history */}\n        <Input\n          required\n          placeholder='Quick Connect IP (:version)'\n          value={serverIp}\n          onChange={({ target: { value } }) => {\n            setQuickConnectIp?.(value)\n            setServerIp(value)\n          }}\n          width={isSmallWidth ? 120 : 180}\n        />\n        <label style={{ fontSize: 10, display: 'flex', alignItems: 'center', gap: 5, height: '100%', marginTop: '-1px' }}>\n          <input\n            type='checkbox' checked={save}\n            style={{ borderRadius: 0 }}\n            onChange={({ target: { checked } }) => setSave(checked)}\n          /> Save\n        </label>\n        <Button style={{ width: 90 }} type='submit'>Connect</Button>\n      </div>\n    </form>}\n    searchRowChildrenOverride={\n      <div style={{\n        // marginTop: 12,\n      }}\n      >\n        <div style={{ display: 'flex', gap: 3, alignItems: 'center' }}>\n          {isSmallWidth\n            ? <PixelartIcon iconName={pixelartIcons.server} styles={{ fontSize: 14, color: 'lightgray', marginLeft: 2 }} onClick={onProfileClick} />\n            : <span style={{ color: 'lightgray', fontSize: 14 }}>Proxy:</span>}\n          <Select\n            initialOptions={proxies.proxies.map(p => { return { value: p, label: p } })}\n            defaultValue={{ value: proxies.selected, label: proxies.selected }}\n            updateOptions={(newSel) => {\n              updateProxies({ proxies: [...proxies.proxies], selected: newSel })\n            }}\n            containerStyle={{\n              width: isSmallWidth ? 140 : 180,\n            }}\n          />\n          <PixelartIcon iconName='user' styles={{ fontSize: 14, color: 'lightgray', marginLeft: 2 }} onClick={onProfileClick} />\n          <Input rootStyles={{ width: 80 }} value={username} onChange={({ target: { value } }) => setUsername(value)} />\n        </div>\n      </div>\n    }\n    serversLayout\n    onWorldAction={(action, serverName) => {\n      if (action === 'load') {\n        joinServer({\n          ip: serverName,\n        }, {})\n      }\n      props.onWorldAction?.(action, serverName)\n    }}\n    setListHovered={(hovered) => {\n      setActiveHighlight(hovered ? 'server-list' : undefined)\n    }}\n    listStyle={getActiveHighlightStyles('server-list')}\n    secondRowStyles={getActiveHighlightStyles('server-list')}\n  />\n}\n","import React from 'react'\nimport Screen from './Screen'\nimport Input from './Input'\nimport Button from './Button'\nimport SelectGameVersion from './SelectGameVersion'\nimport { useIsSmallWidth } from './simpleHooks'\n\nexport interface BaseServerInfo {\n  ip: string\n  name?: string\n  versionOverride?: string\n  proxyOverride?: string\n  usernameOverride?: string\n  /** Username or always use new if true */\n  authenticatedAccountOverride?: string | true\n}\n\ninterface Props {\n  onBack: () => void\n  onConfirm: (info: BaseServerInfo) => void\n  title?: string\n  initialData?: BaseServerInfo\n  parseQs?: boolean\n  onQsConnect?: (server: BaseServerInfo) => void\n  placeholders?: Pick<BaseServerInfo, 'proxyOverride' | 'usernameOverride'>\n  accounts?: string[]\n  authenticatedAccounts?: number\n  versions?: string[]\n}\n\nconst ELEMENTS_WIDTH = 190\n\nexport default ({ onBack, onConfirm, title = 'Add a Server', initialData, parseQs, onQsConnect, placeholders, accounts, versions, authenticatedAccounts }: Props) => {\n  const qsParams = parseQs ? new URLSearchParams(window.location.search) : undefined\n  const qsParamName = qsParams?.get('name')\n  const qsParamIp = qsParams?.get('ip')\n  const qsParamVersion = qsParams?.get('version')\n  const qsParamProxy = qsParams?.get('proxy')\n  const qsParamUsername = qsParams?.get('username')\n  const qsParamLockConnect = qsParams?.get('lockConnect')\n\n  const qsIpParts = qsParamIp?.split(':')\n  const ipParts = initialData?.ip.split(':')\n\n  const [serverName, setServerName] = React.useState(initialData?.name ?? qsParamName ?? '')\n  const [serverIp, setServerIp] = React.useState(ipParts?.[0] ?? qsIpParts?.[0] ?? '')\n  const [serverPort, setServerPort] = React.useState(ipParts?.[1] ?? qsIpParts?.[1] ?? '')\n  const [versionOverride, setVersionOverride] = React.useState(initialData?.versionOverride ?? /* legacy */ initialData?.['version'] ?? qsParamVersion ?? '')\n  const [proxyOverride, setProxyOverride] = React.useState(initialData?.proxyOverride ?? qsParamProxy ?? '')\n  const [usernameOverride, setUsernameOverride] = React.useState(initialData?.usernameOverride ?? qsParamUsername ?? '')\n  const lockConnect = qsParamLockConnect === 'true'\n\n  const smallWidth = useIsSmallWidth()\n  const initialAccount = initialData?.authenticatedAccountOverride\n  const [accountIndex, setAccountIndex] = React.useState(initialAccount === true ? -2 : initialAccount ? (accounts?.includes(initialAccount) ? accounts.indexOf(initialAccount) : -2) : -1)\n\n  const freshAccount = accountIndex === -2\n  const noAccountSelected = accountIndex === -1\n  const authenticatedAccountOverride = noAccountSelected ? undefined : freshAccount ? true : accounts?.[accountIndex]\n\n  let ipFinal = serverIp.includes(':') ? serverIp : `${serverIp}:${serverPort}`\n  ipFinal = ipFinal.replace(/:$/, '')\n  const commonUseOptions: BaseServerInfo = {\n    name: serverName,\n    ip: ipFinal,\n    versionOverride: versionOverride || undefined,\n    proxyOverride: proxyOverride || undefined,\n    usernameOverride: usernameOverride || undefined,\n    authenticatedAccountOverride,\n  }\n\n  return <Screen title={qsParamIp ? 'Connect to Server' : title} backdrop>\n    <form\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        height: '100%'\n      }}\n      onSubmit={(e) => {\n        e.preventDefault()\n        onConfirm(commonUseOptions)\n      }}\n    >\n      <div style={{\n        display: 'grid',\n        gap: 3,\n        gridTemplateColumns: smallWidth ? '1fr' : '1fr 1fr'\n      }}\n      >\n        {!lockConnect && <>\n          <div style={{ gridColumn: smallWidth ? '' : 'span 2', display: 'flex', justifyContent: 'center' }}>\n            <InputWithLabel label=\"Server Name\" value={serverName} onChange={({ target: { value } }) => setServerName(value)} placeholder='Defaults to IP' />\n          </div>\n        </>}\n        <InputWithLabel required label=\"Server IP\" value={serverIp} disabled={lockConnect && qsIpParts?.[0] !== null} onChange={({ target: { value } }) => setServerIp(value)} />\n        <InputWithLabel label=\"Server Port\" value={serverPort} disabled={lockConnect && qsIpParts?.[1] !== null} onChange={({ target: { value } }) => setServerPort(value)} placeholder='25565' />\n        <div style={{ gridColumn: smallWidth ? '' : 'span 2' }}>Overrides:</div>\n        <div style={{\n          display: 'flex',\n          flexDirection: 'column',\n        }}>\n          <label style={{ fontSize: 12, marginBottom: 1, color: 'lightgray' }}>Version Override</label>\n          <SelectGameVersion\n            selected={{ value: versionOverride, label: versionOverride }}\n            versions={versions?.map(v => { return { value: v, label: v } }) ?? []}\n            onChange={(value) => {\n              setVersionOverride(value)\n            }}\n            placeholder=\"Optional, but recommended to specify\"\n            disabled={lockConnect && qsParamVersion !== null}\n          />\n        </div>\n\n        <InputWithLabel label=\"Proxy Override\" value={proxyOverride} disabled={lockConnect && qsParamProxy !== null} onChange={({ target: { value } }) => setProxyOverride(value)} placeholder={placeholders?.proxyOverride} />\n        <InputWithLabel label=\"Username Override\" value={usernameOverride} disabled={!noAccountSelected || lockConnect && qsParamUsername !== null} onChange={({ target: { value } }) => setUsernameOverride(value)} placeholder={placeholders?.usernameOverride} />\n        <label style={{\n          display: 'flex',\n          flexDirection: 'column',\n        }}\n        >\n          <span style={{ fontSize: 12, marginBottom: 1, color: 'lightgray' }}>Account Override</span>\n          <select\n            onChange={({ target: { value } }) => setAccountIndex(Number(value))}\n            style={{\n              background: 'gray',\n              color: 'white',\n              height: 20,\n              fontSize: 13,\n            }}\n            defaultValue={initialAccount === true ? -2 : initialAccount === undefined ? -1 : (fallbackIfNotFound((accounts ?? []).indexOf(initialAccount)) ?? -2)}\n          >\n            <option value={-1}>Offline Account (Username)</option>\n            {accounts?.map((account, i) => <option key={i} value={i}>{account} (Logged In)</option>)}\n            <option value={-2}>Any other MS account</option>\n          </select>\n        </label>\n\n        {!lockConnect && <>\n          <ButtonWrapper onClick={() => {\n            onBack()\n          }}>Cancel</ButtonWrapper>\n          <ButtonWrapper type='submit'>Save</ButtonWrapper>\n        </>}\n        {qsParamIp && <div style={{ gridColumn: smallWidth ? '' : 'span 2', display: 'flex', justifyContent: 'center' }}>\n          <ButtonWrapper\n            data-test-id='connect-qs'\n            onClick={() => {\n              onQsConnect?.(commonUseOptions)\n            }}\n          >Connect</ButtonWrapper>\n        </div>}\n      </div>\n    </form>\n  </Screen>\n}\n\nconst ButtonWrapper = ({ ...props }: React.ComponentProps<typeof Button>) => {\n  props.style ??= {}\n  props.style.width = ELEMENTS_WIDTH\n  return <Button {...props} />\n}\n\nconst InputWithLabel = ({ label, span, ...props }: React.ComponentProps<typeof Input> & { label, span? }) => {\n  return <div style={{\n    display: 'flex',\n    flexDirection: 'column',\n    gridRow: span ? 'span 2 / span 2' : undefined,\n  }}\n  >\n    <label style={{ fontSize: 12, marginBottom: 1, color: 'lightgray' }}>{label}</label>\n    <Input rootStyles={{ width: ELEMENTS_WIDTH }} {...props} />\n  </div>\n}\n\nconst fallbackIfNotFound = (index: number) => (index === -1 ? undefined : index)\n","import { useEffect, useMemo, useState } from 'react'\nimport { useUtilsEffect } from '@zardoy/react-util'\nimport { useSnapshot } from 'valtio'\nimport { ConnectOptions } from '../connect'\nimport { activeModalStack, hideCurrentModal, miscUiState, showModal } from '../globalState'\nimport supportedVersions from '../supportedVersions.mjs'\nimport ServersList from './ServersList'\nimport AddServerOrConnect, { BaseServerInfo } from './AddServerOrConnect'\nimport { useDidUpdateEffect } from './utils'\nimport { useIsModalActive } from './utilsApp'\nimport { showOptionsModal } from './SelectOption'\nimport { useCopyKeybinding } from './simpleHooks'\n\ninterface StoreServerItem extends BaseServerInfo {\n  lastJoined?: number\n  description?: string\n  optionsOverride?: Record<string, any>\n  autoLogin?: Record<string, string>\n}\n\ntype ServerResponse = {\n  online: boolean\n  version?: {\n    name_raw: string\n  }\n  // display tooltip\n  players?: {\n    online: number\n    max: number\n    list: Array<{\n      name_raw: string\n      name_clean: string\n    }>\n  }\n  icon?: string\n  motd?: {\n    raw: string\n  }\n  // todo circle error icon\n  mods?: Array<{ name, version }>\n  // todo display via hammer icon\n  software?: string\n  plugins?: Array<{ name, version }>\n}\n\ntype AdditionalDisplayData = {\n  formattedText: string\n  textNameRight: string\n  icon?: string\n}\n\nexport interface AuthenticatedAccount {\n  // type: 'microsoft'\n  username: string\n  cachedTokens?: {\n    data: any\n    expiresOn: number\n  }\n}\n\nconst getInitialServersList = () => {\n  if (localStorage['serversList']) return JSON.parse(localStorage['serversList']) as StoreServerItem[]\n\n  const servers = [] as StoreServerItem[]\n\n  const legacyServersList = localStorage['serverHistory'] ? JSON.parse(localStorage['serverHistory']) as string[] : null\n  if (legacyServersList) {\n    for (const server of legacyServersList) {\n      if (!server || localStorage['server'] === server) continue\n      servers.push({ ip: server, lastJoined: Date.now() })\n    }\n  }\n\n  if (localStorage['server']) {\n    const legacyLastJoinedServer: StoreServerItem = {\n      ip: localStorage['server'],\n      versionOverride: localStorage['version'],\n      lastJoined: Date.now()\n    }\n    servers.push(legacyLastJoinedServer)\n  }\n\n  if (servers.length === 0) { // server list is empty, let's suggest some\n    for (const server of miscUiState.appConfig?.promoteServers ?? []) {\n      servers.push({\n        ip: server.ip,\n        description: server.description,\n        versionOverride: server.version,\n      })\n    }\n  }\n\n  return servers\n}\n\nconst serversListQs = new URLSearchParams(window.location.search).get('serversList')\nconst proxyQs = new URLSearchParams(window.location.search).get('proxy')\n\nconst setNewServersList = (serversList: StoreServerItem[], force = false) => {\n  if (serversListQs && !force) return\n  localStorage['serversList'] = JSON.stringify(serversList)\n\n  // cleanup legacy\n  localStorage.removeItem('serverHistory')\n  localStorage.removeItem('server')\n  localStorage.removeItem('password')\n  localStorage.removeItem('version')\n}\n\nconst getInitialProxies = () => {\n  const proxies = [] as string[]\n  if (miscUiState.appConfig?.defaultProxy) {\n    proxies.push(miscUiState.appConfig.defaultProxy)\n  }\n  if (localStorage['proxy']) {\n    proxies.push(localStorage['proxy'])\n    localStorage.removeItem('proxy')\n  }\n  return proxies\n}\n\nexport const updateLoadedServerData = (callback: (data: StoreServerItem) => StoreServerItem, index = miscUiState.loadedServerIndex) => {\n  if (!index) index = miscUiState.loadedServerIndex\n  if (!index) return\n  // function assumes component is not mounted to avoid sync issues after save\n  const servers = getInitialServersList()\n  const server = servers[index]\n  servers[index] = callback(server)\n  setNewServersList(servers)\n}\n\nexport const updateAuthenticatedAccountData = (callback: (data: AuthenticatedAccount[]) => AuthenticatedAccount[]) => {\n  const accounts = JSON.parse(localStorage['authenticatedAccounts'] || '[]') as AuthenticatedAccount[]\n  const newAccounts = callback(accounts)\n  localStorage['authenticatedAccounts'] = JSON.stringify(newAccounts)\n}\n\n// todo move to base\nconst normalizeIp = (ip: string) => ip.replace(/https?:\\/\\//, '').replace(/\\/(:|$)/, '')\n\nconst Inner = ({ hidden, customServersList }: { hidden?: boolean, customServersList?: string[] }) => {\n  const [proxies, setProxies] = useState<readonly string[]>(localStorage['proxies'] ? JSON.parse(localStorage['proxies']) : getInitialProxies())\n  const [selectedProxy, setSelectedProxy] = useState(proxyQs ?? localStorage.getItem('selectedProxy') ?? proxies?.[0] ?? '')\n  const [serverEditScreen, setServerEditScreen] = useState<StoreServerItem | true | null>(null) // true for add\n  const [defaultUsername, _setDefaultUsername] = useState(localStorage['username'] ?? (`mcrafter${Math.floor(Math.random() * 1000)}`))\n  const [authenticatedAccounts, _setAuthenticatedAccounts] = useState<AuthenticatedAccount[]>(JSON.parse(localStorage['authenticatedAccounts'] || '[]'))\n  const [quickConnectIp, setQuickConnectIp] = useState('')\n  const [selectedIndex, setSelectedIndex] = useState(-1)\n\n  const setAuthenticatedAccounts = (newState: typeof authenticatedAccounts) => {\n    _setAuthenticatedAccounts(newState)\n    localStorage.setItem('authenticatedAccounts', JSON.stringify(newState))\n  }\n\n  const setDefaultUsername = (newState: typeof defaultUsername) => {\n    _setDefaultUsername(newState)\n    localStorage.setItem('username', newState)\n  }\n\n  const saveNewProxy = () => {\n    if (!selectedProxy || proxyQs) return\n    localStorage.setItem('selectedProxy', selectedProxy)\n  }\n\n  useEffect(() => {\n    if (proxies.length) {\n      localStorage.setItem('proxies', JSON.stringify(proxies))\n    }\n    saveNewProxy()\n  }, [proxies])\n\n  const [serversList, setServersList] = useState<StoreServerItem[]>(() => (customServersList ? [] : getInitialServersList()))\n  const [additionalData, setAdditionalData] = useState<Record<string, AdditionalDisplayData>>({})\n\n  useEffect(() => {\n    if (customServersList) {\n      setServersList(customServersList.map(row => {\n        const [ip, name] = row.split(' ')\n        const [_ip, _port, version] = ip.split(':')\n        return {\n          ip,\n          versionOverride: version,\n          name,\n        }\n      }))\n    }\n  }, [customServersList])\n\n  useDidUpdateEffect(() => {\n    // save data only on user changes\n    setNewServersList(serversList)\n  }, [serversList])\n\n  // by lastJoined\n  const serversListSorted = useMemo(() => {\n    return serversList.map((server, index) => ({ ...server, index })).sort((a, b) => (b.lastJoined ?? 0) - (a.lastJoined ?? 0))\n  }, [serversList])\n\n  useUtilsEffect(({ signal }) => {\n    const update = async () => {\n      for (const server of serversListSorted) {\n        const isInLocalNetwork = server.ip.startsWith('192.168.') || server.ip.startsWith('10.') || server.ip.startsWith('172.') || server.ip.startsWith('127.') || server.ip.startsWith('localhost')\n        if (isInLocalNetwork || signal.aborted) continue\n        // eslint-disable-next-line no-await-in-loop\n        await fetch(`https://api.mcstatus.io/v2/status/java/${server.ip}`, {\n          // TODO: bounty for this who fix it\n          // signal\n        }).then(async r => r.json()).then((data: ServerResponse) => {\n          const versionClean = data.version?.name_raw.replace(/^[^\\d.]+/, '')\n          if (!versionClean) return\n          setAdditionalData(old => {\n            return ({\n              ...old,\n              [server.ip]: {\n                formattedText: data.motd?.raw ?? '',\n                textNameRight: `${versionClean} ${data.players?.online ?? '??'}/${data.players?.max ?? '??'}`,\n                icon: data.icon,\n              }\n            })\n          })\n        })\n      }\n    }\n    void update().catch((err) => {})\n  }, [serversListSorted])\n\n  const isEditScreenModal = useIsModalActive('editServer')\n\n  useDidUpdateEffect(() => {\n    if (serverEditScreen && !isEditScreenModal) {\n      showModal({ reactType: 'editServer' })\n    }\n    if (!serverEditScreen && isEditScreenModal) {\n      hideCurrentModal()\n    }\n  }, [serverEditScreen])\n\n  useDidUpdateEffect(() => {\n    if (!isEditScreenModal) {\n      setServerEditScreen(null)\n    }\n  }, [isEditScreenModal])\n\n  useCopyKeybinding(() => {\n    const item = serversList[selectedIndex]\n    if (!item) return\n    let str = `${item.ip}`\n    if (item.versionOverride) {\n      str += `:${item.versionOverride}`\n    }\n    return str\n  })\n\n  const editModalJsx = isEditScreenModal ? <AddServerOrConnect\n    placeholders={{\n      proxyOverride: selectedProxy,\n      usernameOverride: defaultUsername,\n    }}\n    parseQs={!serverEditScreen}\n    onBack={() => {\n      hideCurrentModal()\n    }}\n    onConfirm={(info) => {\n      if (!serverEditScreen) return\n      if (serverEditScreen === true) {\n        const server: StoreServerItem = { ...info, lastJoined: Date.now() } // so it appears first\n        setServersList(old => [...old, server])\n      } else {\n        const index = serversList.indexOf(serverEditScreen)\n        const { lastJoined } = serversList[index]\n        serversList[index] = { ...info, lastJoined }\n        setServersList([...serversList])\n      }\n      setServerEditScreen(null)\n    }}\n    accounts={authenticatedAccounts.map(a => a.username)}\n    initialData={!serverEditScreen || serverEditScreen === true ? {\n      ip: quickConnectIp\n    } : serverEditScreen}\n    onQsConnect={(info) => {\n      const connectOptions: ConnectOptions = {\n        username: info.usernameOverride || defaultUsername,\n        server: normalizeIp(info.ip),\n        proxy: info.proxyOverride || selectedProxy,\n        botVersion: info.versionOverride,\n        ignoreQs: true,\n      }\n      dispatchEvent(new CustomEvent('connect', { detail: connectOptions }))\n    }}\n    versions={supportedVersions}\n  /> : null\n\n  const serversListJsx = <ServersList\n    joinServer={(overrides, { shouldSave }) => {\n      const indexOrIp = overrides.ip\n      let ip = indexOrIp\n      let server: StoreServerItem | undefined\n      if (shouldSave === undefined) {\n        // hack: inner component doesn't know of overrides for existing servers\n        server = serversListSorted.find(s => s.index.toString() === indexOrIp)!\n        ip = server.ip\n        overrides = server\n      }\n\n      const lastJoinedUsername = serversListSorted.find(s => s.usernameOverride)?.usernameOverride\n      let username = overrides.usernameOverride || defaultUsername\n      if (!username) {\n        username = prompt('Username', lastJoinedUsername || '')\n        if (!username) return\n        setDefaultUsername(username)\n      }\n      let authenticatedAccount: AuthenticatedAccount | true | undefined\n      if (overrides.authenticatedAccountOverride) {\n        if (overrides.authenticatedAccountOverride === true) {\n          authenticatedAccount = true\n        } else {\n          authenticatedAccount = authenticatedAccounts.find(a => a.username === overrides.authenticatedAccountOverride) ?? true\n        }\n      }\n      const options = {\n        username,\n        server: normalizeIp(ip),\n        proxy: overrides.proxyOverride || selectedProxy,\n        botVersion: overrides.versionOverride ?? /* legacy */ overrides['version'],\n        ignoreQs: true,\n        autoLoginPassword: server?.autoLogin?.[username],\n        authenticatedAccount,\n        onSuccessfulPlay () {\n          if (shouldSave && !serversList.some(s => s.ip === ip)) {\n            const newServersList: StoreServerItem[] = [...serversList, {\n              ip,\n              lastJoined: Date.now(),\n              versionOverride: overrides.versionOverride,\n            }]\n            // setServersList(newServersList)\n            setNewServersList(newServersList) // component is not mounted\n            miscUiState.loadedServerIndex = (newServersList.length - 1).toString()\n          }\n\n          if (shouldSave === undefined) { // loading saved\n            // find and update\n            const server = serversList.find(s => s.ip === ip)\n            if (server) {\n              server.lastJoined = Date.now()\n              // setServersList([...serversList])\n              setNewServersList(serversList) // component is not mounted\n            }\n          }\n\n          // save new selected proxy (if new)\n          if (!proxies.includes(selectedProxy)) {\n            // setProxies([...proxies, selectedProxy])\n            localStorage.setItem('proxies', JSON.stringify([...proxies, selectedProxy]))\n          }\n          saveNewProxy()\n        },\n        serverIndex: shouldSave ? serversList.length.toString() : indexOrIp // assume last\n      } satisfies ConnectOptions\n      dispatchEvent(new CustomEvent('connect', { detail: options }))\n      // qsOptions\n    }}\n    lockedEditing={!!customServersList}\n    username={defaultUsername}\n    setUsername={setDefaultUsername}\n    setQuickConnectIp={setQuickConnectIp}\n    onProfileClick={async () => {\n      const username = await showOptionsModal('Select authenticated account to remove', authenticatedAccounts.map(a => a.username))\n      if (!username) return\n      setAuthenticatedAccounts(authenticatedAccounts.filter(a => a.username !== username))\n    }}\n    onWorldAction={(action, index) => {\n      const server = serversList[index]\n      if (!server) return\n\n      if (action === 'edit') {\n        setServerEditScreen(server)\n      }\n      if (action === 'delete') {\n        setServersList(old => old.filter(s => s !== server))\n      }\n    }}\n    onGeneralAction={(action) => {\n      if (action === 'create') {\n        setServerEditScreen(true)\n      }\n      if (action === 'cancel') {\n        hideCurrentModal()\n      }\n    }}\n    worldData={serversListSorted.map(server => {\n      const additional = additionalData[server.ip]\n      return {\n        name: server.index.toString(),\n        title: server.name || server.ip,\n        detail: (server.versionOverride ?? '') + ' ' + (server.usernameOverride ?? ''),\n        // lastPlayed: server.lastJoined,\n        formattedTextOverride: additional?.formattedText,\n        worldNameRight: additional?.textNameRight ?? '',\n        iconSrc: additional?.icon,\n      }\n    })}\n    initialProxies={{\n      proxies,\n      selected: selectedProxy,\n    }}\n    updateProxies={({ proxies, selected }) => {\n      // new proxy is saved in joinServer\n      setProxies(proxies)\n      setSelectedProxy(selected)\n    }}\n    hidden={hidden}\n    onRowSelect={(_, i) => {\n      setSelectedIndex(i)\n    }}\n  />\n  return <>\n    {serversListJsx}\n    {editModalJsx}\n  </>\n}\n\nexport default () => {\n  const [customServersList, setCustomServersList] = useState<string[] | undefined>(serversListQs ? [] : undefined)\n\n  useEffect(() => {\n    if (serversListQs) {\n      if (serversListQs.startsWith('http')) {\n        void fetch(serversListQs).then(async r => r.text()).then((text) => {\n          const isJson = serversListQs.endsWith('.json') ? true : serversListQs.endsWith('.txt') ? false : text.startsWith('[')\n          setCustomServersList(isJson ? JSON.parse(text) : text.split('\\n').map(x => x.trim()).filter(x => x.trim().length > 0))\n        }).catch((err) => {\n          console.error(err)\n          alert(`Failed to get servers list file: ${err}`)\n        })\n      } else {\n        setCustomServersList(serversListQs.split(','))\n      }\n    }\n  }, [])\n\n  const modalStack = useSnapshot(activeModalStack)\n  const hasServersListModal = modalStack.some(x => x.reactType === 'serversList')\n  const editServerModalActive = useIsModalActive('editServer')\n  const isServersListModalActive = useIsModalActive('serversList')\n\n  const eitherModal = isServersListModalActive || editServerModalActive\n  const render = eitherModal || hasServersListModal\n  return render ? <Inner hidden={!isServersListModalActive} customServersList={customServersList} /> : null\n}\n","import { useEffect } from 'react'\n\n// appReplacableResources\nimport { appReplacableResources } from '../generated/resources'\n\nexport default ({ children }): React.ReactElement => {\n  useEffect(() => {\n    if (document.getElementById('hud-vars-style')) return\n    // 1. Don't inline long data URLs for better DX in elements tab\n    // 2. Easier application to globally override icons with custom image (eg from resourcepacks)\n    const css = /* css */`\n      html {\n        ${Object.values(appReplacableResources).filter(r => r.cssVar).map(r => {\n      const repeat = r.cssVarRepeat ?? 1\n      return `${r.cssVar}: ${repeatArr(`url('${r.content}')`, repeat).join(', ')};`\n    }).join('\\n')}\n\n        --hud-bottom-max: 0px;\n        --hud-bottom-raw: max(env(safe-area-inset-bottom), var(--hud-bottom-max));\n        --safe-area-inset-bottom: calc(var(--hud-bottom-raw) / 2);\n      }\n    `\n    const style = document.createElement('style')\n    style.id = 'hud-vars-style'\n    style.textContent = css\n    document.head.appendChild(style)\n  }, [])\n\n  return children\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-constraint\nconst repeatArr = <T extends any> (item: T, times: number): T[] => {\n  return Array.from({ length: times }, () => item)\n}\n","// extracted by css-extract-rspack-plugin\nexport default {\"root\":\"root-HBZyzP\",\"content\":\"content-C05XsQ\",\"content_loading\":\"content_loading-whQTDO\",\"contentLoading\":\"content_loading-whQTDO\",\"world_root\":\"world_root-HUO6kD\",\"worldRoot\":\"world_root-HUO6kD\",\"world_title\":\"world_title-ZeGEbR\",\"worldTitle\":\"world_title-ZeGEbR\",\"world_title_right\":\"world_title_right-_QaLaq\",\"worldTitleRight\":\"world_title_right-_QaLaq\",\"world_info\":\"world_info-aesWwe\",\"worldInfo\":\"world_info-aesWwe\",\"world_info_formatted\":\"world_info_formatted-T9yz4t\",\"worldInfoFormatted\":\"world_info_formatted-T9yz4t\",\"world_info_description_line\":\"world_info_description_line-m_UAFX\",\"worldInfoDescriptionLine\":\"world_info_description_line-m_UAFX\",\"world_image\":\"world_image-RCHVi3\",\"worldImage\":\"world_image-RCHVi3\",\"image_missing\":\"image_missing-kzcgld\",\"imageMissing\":\"image_missing-kzcgld\",\"world_focused\":\"world_focused-KhkWMT\",\"worldFocused\":\"world_focused-KhkWMT\",\"title\":\"title-zNQMwq\"};","import Button from './Button'\n\ninterface Props {\n  tabs: string[]\n  activeTab: string\n  onTabChange: (tab: string) => void\n\n  disabledTabs?: string[]\n  labels?: Record<string, string>\n  fullSize?: boolean\n  style?: React.CSSProperties\n}\n\nexport default ({ tabs, activeTab, labels, onTabChange, fullSize, style, disabledTabs }: Props) => {\n  return <div style={{\n    width: fullSize ? '100%' : undefined,\n    display: fullSize ? 'flex' : undefined,\n    ...style,\n  }}\n  >\n    {tabs.map(tab => {\n      const active = tab === activeTab\n      return <div\n        key={tab} style={{\n          position: 'relative',\n          width: fullSize ? '100%' : 150,\n        }}\n      >\n        <Button\n          disabled={active || disabledTabs?.includes(tab)} style={{\n            width: '100%',\n            height: '100%',\n            // background: active ? 'rgb(77, 77, 77)' : 'rgb(114, 114, 114)',\n            color: 'white',\n            cursor: 'pointer',\n            fontSize: 9,\n            padding: '2px 0px',\n          }} onClick={() => {\n            onTabChange(tab)\n          }}\n        >{labels?.[tab] ?? tab}\n        </Button>\n        {active && <div style={{\n          position: 'absolute',\n          bottom: 0,\n          left: 0,\n          right: 0,\n          height: 1,\n          background: 'white',\n          width: '50%',\n          margin: 'auto',\n        }}\n        />}\n      </div>\n    })}\n  </div>\n}\n","import classNames from 'classnames'\nimport { Fragment, useEffect, useMemo, useRef, useState } from 'react'\n\n// todo optimize size\nimport missingWorldPreview from 'mc-assets/dist/other-textures/latest/gui/presets/isles.png'\nimport { filesize } from 'filesize'\nimport useTypedEventListener from 'use-typed-event-listener'\nimport { focusable } from 'tabbable'\nimport styles from './singleplayer.module.css'\nimport Input from './Input'\nimport Button from './Button'\nimport Tabs from './Tabs'\nimport MessageFormattedString from './MessageFormattedString'\nimport { useIsSmallWidth } from './simpleHooks'\n\nexport interface WorldProps {\n  name: string\n  title: string\n  size?: number\n  lastPlayed?: number\n  isFocused?: boolean\n  iconSrc?: string\n  detail?: string\n  formattedTextOverride?: string\n  worldNameRight?: string\n  onFocus?: (name: string) => void\n  onInteraction?(interaction: 'enter' | 'space')\n}\n\nconst World = ({ name, isFocused, title, lastPlayed, size, detail = '', onFocus, onInteraction, iconSrc, formattedTextOverride, worldNameRight }: WorldProps) => {\n  const timeRelativeFormatted = useMemo(() => {\n    if (!lastPlayed) return ''\n    const formatter = new Intl.RelativeTimeFormat('en', { numeric: 'auto' })\n    const diff = Date.now() - lastPlayed\n    const minutes = Math.floor(diff / 1000 / 60)\n    const hours = Math.floor(minutes / 60)\n    const days = Math.floor(hours / 24)\n    // const weeks = Math.floor(days / 7)\n    // const months = Math.floor(days / 30)\n    if (days > 0) return formatter.format(-days, 'day')\n    if (hours > 0) return formatter.format(-hours, 'hour')\n    return formatter.format(-minutes, 'minute')\n  }, [lastPlayed])\n  const sizeFormatted = useMemo(() => {\n    if (!size) return ''\n    return filesize(size)\n  }, [size])\n\n  return <div\n    className={classNames(styles.world_root, isFocused ? styles.world_focused : undefined)} tabIndex={0} onFocus={() => onFocus?.(name)} onKeyDown={(e) => {\n      if (e.code === 'Enter' || e.code === 'Space') {\n        e.preventDefault()\n        onInteraction?.(e.code === 'Enter' ? 'enter' : 'space')\n      }\n    }} onDoubleClick={() => onInteraction?.('enter')}\n  >\n    <img className={`${styles.world_image} ${iconSrc ? '' : styles.image_missing}`} src={iconSrc ?? missingWorldPreview} alt='world preview' />\n    <div className={styles.world_info}>\n      <div className={styles.world_title}>\n        <div>{title}</div>\n        <div className={styles.world_title_right}>{worldNameRight}</div>\n      </div>\n      {formattedTextOverride ? <div className={styles.world_info_formatted}>\n        <MessageFormattedString message={formattedTextOverride} />\n      </div> :\n        <>\n          <div className={styles.world_info_description_line}>{timeRelativeFormatted} {detail.slice(-30)}</div>\n          <div className={styles.world_info_description_line}>{sizeFormatted}</div>\n        </>}\n    </div>\n  </div>\n}\n\ninterface Props {\n  worldData: WorldProps[] | null // null means loading\n  serversLayout?: boolean\n  firstRowChildrenOverride?: React.ReactNode\n  searchRowChildrenOverride?: React.ReactNode\n  providers?: Record<string, string>\n  activeProvider?: string\n  setActiveProvider?: (provider: string) => void\n  providerActions?: Record<string, (() => void) | undefined | JSX.Element>\n  disabledProviders?: string[]\n  isReadonly?: boolean\n  error?: string\n  warning?: string\n  warningAction?: () => void\n  warningActionLabel?: string\n  hidden?: boolean\n\n  onWorldAction (action: 'load' | 'export' | 'delete' | 'edit', worldName: string): void\n  onGeneralAction (action: 'cancel' | 'create'): void\n  onRowSelect? (name: string, index: number): void\n  defaultSelectedRow?: number\n  listStyle?: React.CSSProperties\n  setListHovered?: (hovered: boolean) => void\n  secondRowStyles?: React.CSSProperties\n  lockedEditing?: boolean\n}\n\nexport default ({\n  worldData,\n  onGeneralAction,\n  onWorldAction,\n  firstRowChildrenOverride,\n  serversLayout,\n  searchRowChildrenOverride,\n  activeProvider,\n  setActiveProvider,\n  providerActions,\n  providers = {},\n  disabledProviders,\n  error,\n  isReadonly,\n  warning, warningAction, warningActionLabel,\n  hidden,\n  onRowSelect,\n  defaultSelectedRow,\n  listStyle,\n  setListHovered,\n  secondRowStyles,\n  lockedEditing\n}: Props) => {\n  const containerRef = useRef<any>()\n  const firstButton = useRef<HTMLButtonElement>(null)\n\n  useTypedEventListener(window, 'keydown', (e) => {\n    if ((e.code === 'ArrowDown' || e.code === 'ArrowUp') && e.ctrlKey) {\n      e.preventDefault()\n      const dir = e.code === 'ArrowDown' ? 1 : -1\n      const elements = focusable(containerRef.current)\n      const focusedElemIndex = elements.indexOf(document.activeElement as HTMLElement)\n      if (focusedElemIndex === -1) return\n      const nextElem = elements[focusedElemIndex + dir]\n      nextElem?.focus()\n    }\n  })\n\n  const [search, setSearch] = useState('')\n  const [focusedWorld, setFocusedWorld] = useState(defaultSelectedRow ? worldData?.[defaultSelectedRow]?.name ?? '' : '')\n\n  useEffect(() => {\n    setFocusedWorld('')\n  }, [activeProvider])\n\n  const onRowSelectHandler = (name: string, index: number) => {\n    onRowSelect?.(name, index)\n    setFocusedWorld(name)\n  }\n  const isSmallWidth = useIsSmallWidth()\n\n  return <div ref={containerRef} hidden={hidden}>\n    <div className=\"dirt-bg\" />\n    <div className={classNames('fullscreen', styles.root)}>\n      <span className={classNames('screen-title', styles.title)}>{serversLayout ? 'Join Java Servers' : 'Select Saved World'}</span>\n      {searchRowChildrenOverride || <div style={{ display: 'flex', flexDirection: 'column' }}>\n        <Input autoFocus value={search} onChange={({ target: { value } }) => setSearch(value)} />\n      </div>}\n      <div className={classNames(styles.content, !worldData && styles.content_loading)}>\n        <Tabs\n          tabs={Object.keys(providers)} disabledTabs={disabledProviders} activeTab={activeProvider ?? ''} labels={providers} onTabChange={(tab) => {\n            setActiveProvider?.(tab as any)\n          }} fullSize\n        />\n        <div\n          style={{\n            marginTop: 3,\n            ...listStyle\n          }}\n          onMouseEnter={() => setListHovered?.(true)}\n          onMouseLeave={() => setListHovered?.(false)}\n        >\n          {\n            providerActions && <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              // overflow: 'auto',\n            }}\n            >\n              <span style={{ fontSize: 9, marginRight: 3 }}>Actions: </span> {Object.entries(providerActions).map(([label, action]) => (\n                typeof action === 'function' ? <Button key={label} onClick={action} style={{ width: 100 }}>{label}</Button> : <Fragment key={label}>{action}</Fragment>\n              ))}\n            </div>\n          }\n          {\n            worldData\n              ? worldData.filter(data => data.title.toLowerCase().includes(search.toLowerCase())).map(({ name, size, detail, ...rest }, index) => (\n                <World\n                  {...rest} size={size} name={name} onFocus={row => onRowSelectHandler(row, index)} isFocused={focusedWorld === name} key={name} onInteraction={(interaction) => {\n                    if (interaction === 'enter') onWorldAction('load', name)\n                    else if (interaction === 'space') firstButton.current?.focus()\n                  }}\n                  detail={detail}\n                />\n              ))\n              : <div style={{\n                fontSize: 10,\n                color: error ? 'red' : 'lightgray',\n              }}>{error || 'Loading (check #dev console if loading too long)...'}\n              </div>\n          }\n          {\n            warning && <div style={{\n              fontSize: 8,\n              color: '#ffa500ba',\n              marginTop: 5,\n              textAlign: 'center',\n            }}\n            >\n              {warning} {warningAction && <a onClick={warningAction}>{warningActionLabel}</a>}\n            </div>\n          }\n        </div>\n      </div>\n      <div style={{ display: 'flex', flexDirection: 'column', minWidth: 400, paddingBottom: 3, alignItems: 'center', }}>\n        {firstRowChildrenOverride || <div>\n          <Button rootRef={firstButton} disabled={!focusedWorld} onClick={() => onWorldAction('load', focusedWorld)}>Load World</Button>\n          <Button onClick={() => onGeneralAction('create')} disabled={isReadonly}>Create New World</Button>\n        </div>}\n        <div style={{\n          ...secondRowStyles,\n          ...isSmallWidth ? { display: 'grid', gridTemplateColumns: '1fr 1fr' } : {}\n        }}>\n          {serversLayout ? <Button style={{ width: 100 }} disabled={!focusedWorld || lockedEditing} onClick={() => onWorldAction('edit', focusedWorld)}>Edit</Button> : <Button style={{ width: 100 }} disabled={!focusedWorld} onClick={() => onWorldAction('export', focusedWorld)}>Export</Button>}\n          <Button style={{ width: 100 }} disabled={!focusedWorld || lockedEditing} onClick={() => onWorldAction('delete', focusedWorld)}>Delete</Button>\n          {serversLayout ?\n            <Button style={{ width: 100 }} onClick={() => onGeneralAction('create')} disabled={lockedEditing}>Add</Button> :\n            <Button style={{ width: 100 }} onClick={() => onWorldAction('edit', focusedWorld)} disabled>Edit</Button>}\n          <Button style={{ width: 100 }} onClick={() => onGeneralAction('cancel')}>Cancel</Button>\n        </div>\n      </div>\n    </div>\n  </div>\n}\n","import { useUtilsEffect } from '@zardoy/react-util'\nimport { useEffect, useState } from 'react'\nimport { useMedia } from 'react-use'\n\nconst SMALL_SCREEN_MEDIA = '@media (max-width: 440px)'\nexport const useIsSmallWidth = () => {\n  return useMedia(SMALL_SCREEN_MEDIA.replace('@media ', ''))\n}\n\nexport const useCopyKeybinding = (getCopyText: () => string | undefined) => {\n  useUtilsEffect(({ signal }) => {\n    addEventListener('keydown', (e) => {\n      if (e.code === 'KeyC' && (e.ctrlKey || e.metaKey) && !e.shiftKey && !e.altKey) {\n        const { activeElement } = document\n        if (activeElement instanceof HTMLInputElement || activeElement instanceof HTMLTextAreaElement) {\n          return\n        }\n        if (window.getSelection()?.toString()) {\n          return\n        }\n        e.preventDefault()\n        const copyText = getCopyText()\n        if (!copyText) return\n        void navigator.clipboard.writeText(copyText)\n      }\n    }, { signal })\n  }, [getCopyText])\n}\n\nexport const useIsHashActive = (hash: `#${string}`) => {\n  const [isActive, setIsActive] = useState(false)\n\n  useEffect(() => {\n    const checkHash = () => {\n      setIsActive(location.hash === hash)\n    }\n    checkHash()\n    addEventListener('hashchange', checkHash)\n    return () => {\n      removeEventListener('hashchange', checkHash)\n    }\n  }, [])\n  return isActive\n}\n","import { useEffect, useRef } from 'react'\nimport { UAParser } from 'ua-parser-js'\n\nexport function useDidUpdateEffect (fn, inputs) {\n  const isMountingRef = useRef(false)\n\n  useEffect(() => {\n    isMountingRef.current = true\n  }, [])\n\n  useEffect(() => {\n    if (isMountingRef.current) {\n      isMountingRef.current = false\n    } else {\n      return fn()\n    }\n  }, inputs)\n}\n\nexport const ua = new UAParser(navigator.userAgent)\n\nexport const isIos = ua.getOS().name === 'iOS'\n\nexport const reactKeyForMessage = (message) => {\n  return typeof message === 'string' ? message : JSON.stringify(message)\n}\n","import { useSnapshot } from 'valtio'\nimport { useEffect, useMemo } from 'react'\nimport { useMedia } from 'react-use'\nimport { activeModalStack, miscUiState } from '../globalState'\n\nexport const watchedModalsFromHooks = new Set<string>()\n// todo should not be there\nexport const hardcodedKnownModals = [\n  'player_win:',\n  'full-map' // todo\n]\n\nexport const useUsingTouch = () => {\n  return useSnapshot(miscUiState).currentTouch\n}\nexport const useIsModalActive = (modal: string, useIncludes = false) => {\n  useMemo(() => {\n    watchedModalsFromHooks.add(modal)\n  }, [])\n  useEffect(() => {\n    // watchedModalsFromHooks.add(modal)\n    return () => {\n      watchedModalsFromHooks.delete(modal)\n    }\n  }, [])\n\n  const allStack = useSnapshot(activeModalStack)\n  return useIncludes ? allStack.some(x => x.reactType === modal) : allStack.at(-1)?.reactType === modal\n}\n\nexport const useIsWidgetActive = (name: string) => {\n  return useIsModalActive(`widget-${name}`)\n}\n\nexport const useIsSmallWidth = () => {\n  return useMedia('(max-width: 550px)')\n}\n","//@ts-check\nexport * from 'crypto-browserify'\nexport function createPublicKey() { }\n\n// CUSTOM SIGN ASYNC IMPLEMENTATION FOR BROWSERS\n\nexport async function sign(signatureAlgorithm, data, privateKeyPem) {\n  if (signatureAlgorithm !== 'RSA-SHA256') throw new Error(`Unsupported signature algorithm ${signatureAlgorithm}`)\n  if (typeof privateKeyPem !== 'string') throw new Error(`This implementation only supports strings as private keys`)\n  const privateKeyBuffer = pemToArrayBuffer(privateKeyPem)\n  const privateKey = await crypto.subtle.importKey(\n    'pkcs8', // Chrome has difficulties with pkcs1 and the recommended format is pkcs8\n    privateKeyBuffer,\n    {\n      name: 'RSASSA-PKCS1-v1_5',\n      hash: { name: 'SHA-256' },\n    },\n    true,\n    ['sign']\n  )\n  const signature = await crypto.subtle.sign(\n    {\n      name: 'RSASSA-PKCS1-v1_5',\n      hash: { name: 'SHA-256' }, // SHA-256 hash function\n    },\n    privateKey,\n    data\n  )\n  return signature\n}\n\nfunction pemToArrayBuffer(pem) {\n  pem = pem.trim()\n  const pemHeader = '-----BEGIN RSA PRIVATE KEY-----'\n  const pemFooter = '-----END RSA PRIVATE KEY-----'\n  const pemContents = pem.slice(pemHeader.length, pem.length - pemFooter.length).trim()\n  const binaryDerString = atob(pemContents.replaceAll(/\\s/g, ''))\n  const binaryDer = new Uint8Array(binaryDerString.length)\n  for (let i = 0; i < binaryDerString.length; i++) {\n    //@ts-expect-error\n    binaryDer[i] = binaryDerString.codePointAt(i)\n  }\n  return binaryDer.buffer\n}\n","/* global XMLHttpRequest */\n\n// Custom DNS resolver made by SiebeDW. Powered by google dns.\n// Supported: SRV (not all errors support)\nmodule.exports.resolveSrv = function (hostname, callback) {\n  const Http = new XMLHttpRequest()\n  const url = `https://dns.google.com/resolve?name=${hostname}&type=SRV`\n  Http.open('GET', url)\n  Http.responseType = 'json'\n  Http.send()\n\n  Http.onload = function () {\n    const { response } = Http\n    if (response.Status === 3) {\n      const err = new Error('querySrv ENOTFOUND')\n      err.code = 'ENOTFOUND'\n      callback(err)\n      return\n    }\n    if (!response.Answer || response.Answer.length < 1) {\n      const err = new Error('querySrv ENODATA')\n      err.code = 'ENODATA'\n      callback(err)\n      return\n    }\n    const willreturn = []\n    for (const object of response.Answer) {\n      const data = object.data.split(' ')\n      if (data[3] === undefined || data[2] === undefined) continue\n      willreturn.push({\n        priority: data[0],\n        weight: data[1],\n        port: data[2],\n        name: data[3]\n      })\n    }\n    console.log(willreturn)\n    callback(null, willreturn)\n  }\n}\n","const BrowserFS = require('browserfs')\n\nmodule.exports = BrowserFS.BFSRequire('fs')\n","import { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\n\ntype IdMap = Record<string, number>\n\ntype DiffData = {\n  removed: number[],\n  changed: any[],\n  removedProps: Array<[number, number[]]>,\n  added\n}\n\ntype SourceData = {\n  keys: IdMap,\n  properties: IdMap\n  source: Record<number, any>\n  diffs: Record<string, DiffData>\n  arrKey?\n  __IS_OPTIMIZED__: true\n}\n\nexport default class JsonOptimizer {\n  keys = {} as IdMap\n  idToKey = {} as Record<number, string>\n  properties = {} as IdMap\n  source = {}\n  previousKeys = [] as number[]\n  previousValues = {} as Record<number, any>\n  diffs = {} as Record<string, DiffData>\n\n  constructor (public arrKey?: string, public ignoreChanges = false, public ignoreRemoved = false) { }\n\n  export () {\n    const { keys, properties, source, arrKey, diffs } = this\n    return {\n      keys,\n      properties,\n      source,\n      arrKey,\n      diffs,\n      '__IS_OPTIMIZED__': true\n    } satisfies SourceData\n  }\n\n  diffObj (diffing): DiffData {\n    const removed = [] as number[]\n    const changed = [] as any[]\n    const removedProps = [] as any[]\n    const { arrKey, ignoreChanges, ignoreRemoved } = this\n    const added = [] as number[]\n\n    if (!diffing || typeof diffing !== 'object') throw new Error('diffing data is not object')\n    if (Array.isArray(diffing) && !arrKey) throw new Error('arrKey is required for arrays')\n    const diffingObj = Array.isArray(diffing) ? Object.fromEntries(diffing.map(x => {\n      const key = JsonOptimizer.getByArrKey(x, arrKey!)\n      return [key, x]\n    })) : diffing\n\n    const possiblyNewKeys = Object.keys(diffingObj)\n    this.keys ??= {}\n    this.properties ??= {}\n    let lastRootKeyId = Object.values(this.keys).length\n    let lastItemKeyId = Object.values(this.properties).length\n    for (const key of possiblyNewKeys) {\n      this.keys[key] ??= lastRootKeyId++\n      this.idToKey[this.keys[key]] = key\n    }\n    const DEBUG = false\n\n    const addDiff = (key, newVal, prevVal) => {\n      const valueMapped = [] as any[]\n      const isItemObj = typeof newVal === 'object' && newVal\n      const keyId = this.keys[key]\n      if (isItemObj) {\n        const removedPropsLocal = [] as any[]\n        for (const [prop, val] of Object.entries(newVal)) {\n          // mc-data: why push only changed props? eg for blocks only stateId are different between all versions so we skip a lot of duplicated data like block props\n          if (!isEqualStructured(newVal[prop], prevVal[prop])) {\n            let keyMapped = this.properties[prop]\n            if (keyMapped === undefined) {\n              this.properties[prop] = lastItemKeyId++\n              keyMapped = this.properties[prop]\n            }\n            valueMapped.push(DEBUG ? prop : keyMapped, newVal[prop])\n          }\n        }\n        // also add undefined for removed props\n        for (const prop of Object.keys(prevVal)) {\n          if (prop in newVal) continue\n          let keyMapped = this.properties[prop]\n          if (keyMapped === undefined) {\n            this.properties[prop] = lastItemKeyId++\n            keyMapped = this.properties[prop]\n          }\n          removedPropsLocal.push(DEBUG ? prop : keyMapped)\n        }\n        removedProps.push([keyId, removedPropsLocal])\n      }\n      changed.push(DEBUG ? key : keyId, isItemObj ? valueMapped : newVal)\n    }\n    for (const [id, sourceVal] of Object.entries(this.source)) {\n      const key = this.idToKey[id]\n      const diffVal = diffingObj[key]\n      if (!ignoreChanges && diffVal !== undefined) {\n        this.previousValues[id] ??= this.source[id]\n        const prevVal = this.previousValues[id]\n        if (!isEqualStructured(prevVal, diffVal)) {\n          addDiff(key, diffVal, prevVal)\n        }\n        this.previousValues[id] = diffVal\n      }\n    }\n    for (const [key, val] of Object.entries(diffingObj)) {\n      const id = this.keys[key]\n      if (!this.source[id]) {\n        this.source[id] = val\n      }\n      added.push(id)\n    }\n\n    for (const previousKey of this.previousKeys) {\n      const key = this.idToKey[previousKey]\n      if (diffingObj[key] === undefined && !ignoreRemoved) {\n        removed.push(previousKey)\n      }\n    }\n\n    for (const toRemove of removed) {\n      this.previousKeys.splice(this.previousKeys.indexOf(toRemove), 1)\n    }\n\n    for (const previousKey of this.previousKeys) {\n      const index = added.indexOf(previousKey)\n      if (index === -1) continue\n      added.splice(index, 1)\n    }\n\n    this.previousKeys = [...this.previousKeys, ...added]\n\n    return {\n      removed,\n      changed,\n      added,\n      removedProps\n    }\n  }\n\n  recordDiff (key: string, diffObj: string) {\n    const diff = this.diffObj(diffObj)\n    this.diffs[key] = diff\n  }\n\n  static isOptimizedChangeDiff (changePossiblyArrDiff) {\n    if (!Array.isArray(changePossiblyArrDiff)) return false\n    if (changePossiblyArrDiff.length % 2 !== 0) return false\n    for (let i = 0; i < changePossiblyArrDiff.length; i += 2) {\n      if (typeof changePossiblyArrDiff[i] !== 'number') return false\n    }\n    return true\n  }\n\n  static restoreData ({ keys, properties, source, arrKey, diffs }: SourceData, targetKey: string) {\n    // if (!diffs[targetKey]) throw new Error(`The requested data to restore with key ${targetKey} does not exist`)\n    source = structuredClone(source)\n    const keysById = Object.fromEntries(Object.entries(keys).map(x => [x[1], x[0]]))\n    const propertiesById = Object.fromEntries(Object.entries(properties).map(x => [x[1], x[0]]))\n    const dataByKeys = {} as Record<string, any>\n    for (const [versionKey, { added, changed, removed, removedProps }] of Object.entries(diffs)) {\n      for (const toAdd of added) {\n        dataByKeys[toAdd] = source[toAdd]\n      }\n      for (const toRemove of removed) {\n        delete dataByKeys[toRemove]\n      }\n      for (let i = 0; i < changed.length; i += 2) {\n        const key = changed[i]\n        const change = changed[i + 1]\n        const isOptimizedChange = JsonOptimizer.isOptimizedChangeDiff(change)\n        if (isOptimizedChange) {\n          // apply optimized diff\n          for (let k = 0; k < change.length; k += 2) {\n            const propId = change[k]\n            const newVal = change[k + 1]\n            const prop = propertiesById[propId]\n            // const prop = propId\n            if (prop === undefined) throw new Error(`Property id change is undefined: ${propId}`)\n            dataByKeys[key][prop] = newVal\n          }\n        } else {\n          dataByKeys[key] = change\n        }\n      }\n      for (const [key, removePropsId] of removedProps) {\n        for (const removePropId of removePropsId) {\n          const removeProp = propertiesById[removePropId]\n          // todo: this is not correct!\n          if (Array.isArray(dataByKeys[key])) {\n            dataByKeys[key].splice(removeProp as any, 1) // splice accepts strings as well\n          } else {\n            delete dataByKeys[key][removeProp]\n          }\n        }\n      }\n      if (versionToNumber(versionKey) <= versionToNumber(targetKey)) {\n        break\n      }\n    }\n    if (arrKey) {\n      return Object.values(dataByKeys)\n    } else {\n      return Object.fromEntries(Object.entries(dataByKeys).map(([key, val]) => [keysById[key], val]))\n    }\n  }\n\n  static getByArrKey (item: any, arrKey: string) {\n    return arrKey.split('+').map(x => item[x]).join('+')\n  }\n\n  static resolveDefaults (arr) {\n    if (!Array.isArray(arr)) throw new Error('not an array')\n    const propsValueCount = {} as {\n      [key: string]: {\n        [val: string]: number\n      }\n    }\n    for (const obj of arr) {\n      if (typeof obj !== 'object' || !obj) continue\n      for (const [key, val] of Object.entries(obj)) {\n        const valJson = JSON.stringify(val)\n        propsValueCount[key] ??= {}\n        propsValueCount[key][valJson] ??= 0\n        propsValueCount[key][valJson] += 1\n      }\n    }\n    const defaults = Object.fromEntries(Object.entries(propsValueCount).map(([prop, values]) => {\n      const defaultValue = Object.entries(values).sort(([, count1], [, count2]) => count2 - count1)[0][0]\n      return [prop, defaultValue]\n    }))\n\n    const newData = [] as any[]\n    const noData = {}\n    for (const [i, obj] of arr.entries()) {\n      if (typeof obj !== 'object' || !obj) {\n        newData.push(obj)\n        continue\n      }\n      for (const key of Object.keys(defaults)) {\n        const val = obj[key]\n        if (!val) {\n          noData[key] ??= []\n          noData[key].push(key)\n          continue\n        }\n        if (defaults[key] === JSON.stringify(val)) {\n          delete obj[key]\n        }\n      }\n      newData.push(obj)\n    }\n\n    return {\n      data: newData,\n      defaults\n    }\n  }\n}\n\nconst isEqualStructured = (val1, val2) => {\n  return JSON.stringify(val1) === JSON.stringify(val2)\n}\n","import { versionToNumber } from 'prismarine-viewer/viewer/prepare/utils'\nimport JsonOptimizer from '../optimizeJson'\nimport minecraftInitialDataJson from '../../generated/minecraft-initial-data.json'\nimport { toMajorVersion } from '../utils'\n\nconst customResolver = () => {\n  const resolver = Promise.withResolvers()\n  let resolvedData\n  return {\n    ...resolver,\n    get resolvedData () {\n      return resolvedData\n    },\n    resolve (data) {\n      resolver.resolve(data)\n      resolvedData = data\n    }\n  }\n}\n\nconst optimizedDataResolver = customResolver()\nwindow._MC_DATA_RESOLVER = optimizedDataResolver\nwindow._LOAD_MC_DATA = async () => {\n  if (optimizedDataResolver.resolvedData) return\n  optimizedDataResolver.resolve(await import('../../generated/minecraft-data-optimized.json'))\n}\n\n// 30 seconds\nconst cacheTtl = 30 * 1000\nconst cache = new Map<string, any>()\nconst cacheTime = new Map<string, number>()\nconst possiblyGetFromCache = (version: string) => {\n  if (minecraftInitialDataJson[version] && !optimizedDataResolver.resolvedData) {\n    return minecraftInitialDataJson[version]\n  }\n  if (cache.has(version)) {\n    return cache.get(version)\n  }\n  const inner = () => {\n    if (!optimizedDataResolver.resolvedData) {\n      throw new Error(`Data for ${version} is not ready yet`)\n    }\n    const dataTypes = Object.keys(optimizedDataResolver.resolvedData)\n    const allRestored = {}\n    for (const dataType of dataTypes) {\n      if (dataType === 'blockCollisionShapes' && versionToNumber(version) >= versionToNumber('1.13')) {\n        const shapes = window.globalGetCollisionShapes?.(version)\n        if (shapes) {\n          allRestored[dataType] = shapes\n          continue\n        }\n      }\n\n      const data = optimizedDataResolver.resolvedData[dataType]\n      if (data.__IS_OPTIMIZED__) {\n        allRestored[dataType] = JsonOptimizer.restoreData(data, version)\n      } else {\n        allRestored[dataType] = data[version] ?? data[toMajorVersion(version)]\n      }\n    }\n    return allRestored\n  }\n  const data = inner()\n  cache.set(version, data)\n  cacheTime.set(version, Date.now())\n  return data\n}\nwindow.allLoadedMcData = new Proxy({}, {\n  get (t, version: string) {\n    // special properties like $typeof\n    if (version.includes('$')) return\n    // todo enumerate all props\n    return new Proxy({}, {\n      get (target, prop) {\n        return possiblyGetFromCache(version)[prop]\n      },\n    })\n  }\n})\n\nsetInterval(() => {\n  const now = Date.now()\n  for (const [version, time] of cacheTime) {\n    if (now - time > cacheTtl) {\n      cache.delete(version)\n      cacheTime.delete(version)\n    }\n  }\n}, 1000)\n\nexport const pc = window.allLoadedMcData\nexport default { pc }\n","module.exports.performance = window.performance\n","// Auth is done in the connection option callback. In this app the auth implementation is server side.\n\nconst Titles = {}\n\nexport {\n  Titles\n}\n","export const server = ({ host: sessionServer }) => {\n  return {\n    async join (accessToken, sessionSelectedProfileId, serverId, sharedSecret, publicKey, cb) {\n      try {\n        const result = await fetch(`${sessionServer}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            accessToken,\n            selectedProfile: sessionSelectedProfileId,\n            serverId,\n            sharedSecret,\n            publicKey,\n          }),\n        })\n        if (!result.ok) {\n          throw new Error(`Request failed ${await result.text()}`)\n        }\n        cb(null)\n      } catch (err) {\n        cb(err)\n      }\n    }\n  }\n}\n","import { supportedVersions } from 'minecraft-data'\n\nconst ignoredVersionsRegex = /(^0\\.30c$)|w|-pre|-rc/\n\nexport default supportedVersions.pc.filter(x => x !== '1.7').filter(v => !ignoredVersionsRegex.test(v))\n","import { activeModalStack, hideModal, isGameActive, miscUiState, showModal } from './globalState'\nimport { options } from './optionsStorage'\nimport { appStatusState, resetAppStatusState } from './react/AppStatusProvider'\nimport { notificationProxy, showNotification } from './react/NotificationProvider'\n\nexport const goFullscreen = async (doToggle = false) => {\n  if (!document.fullscreenElement) {\n    // todo display a message or repeat?\n    await document.documentElement.requestFullscreen().catch(() => { })\n    // request full keyboard access\n    await navigator.keyboard?.lock?.(['Escape', 'KeyW'])\n  } else if (doToggle) {\n    await document.exitFullscreen().catch(() => { })\n  }\n}\n\nexport const toNumber = val => {\n  const num = Number(val)\n  return isNaN(num) ? undefined : num\n}\n\nexport const inGameError = err => {\n  console.error(err)\n  window.reportError?.(err)\n  // todo report\n  miscUiState.hasErrors = true\n}\n\nexport const pointerLock = {\n  get hasPointerLock () {\n    return document.pointerLockElement\n  },\n  justHitEscape: false,\n  async requestPointerLock () {\n    if (!isGameActive(true) || !document.documentElement.requestPointerLock || miscUiState.currentTouch) {\n      return\n    }\n    if (options.autoFullScreen) {\n      void goFullscreen()\n    }\n    const displayBrowserProblem = () => {\n      showNotification('Browser Delay Limitation', navigator['keyboard'] ? 'Click on screen, enable Auto Fullscreen or F11' : 'Click on screen or use fullscreen in Chrome')\n      notificationProxy.id = 'pointerlockchange'\n    }\n    if (!(document.fullscreenElement && navigator['keyboard']) && this.justHitEscape) {\n      displayBrowserProblem()\n    } else {\n      //@ts-expect-error\n      const promise: any = document.documentElement.requestPointerLock({\n        unadjustedMovement: options.mouseRawInput\n      })\n      promise?.catch(error => {\n        if (error.name === 'NotSupportedError') {\n          // Some platforms may not support unadjusted movement, request again a regular pointer lock.\n          document.documentElement.requestPointerLock()\n        } else if (error.name === 'SecurityError') {\n          // cause: https://discourse.threejs.org/t/how-to-avoid-pointerlockcontrols-error/33017/4\n          displayBrowserProblem()\n        } else {\n          console.error(error)\n        }\n      })\n    }\n    this.justHitEscape = false\n  }\n}\n\nwindow.getScreenRefreshRate = getScreenRefreshRate\n\n/**\n * Allows to obtain the estimated Hz of the primary monitor in the system.\n */\nexport async function getScreenRefreshRate (): Promise<number> {\n  let requestId = null as number | null\n  let callbackTriggered = false\n  let resolve\n\n  const DOMHighResTimeStampCollection = [] as number[]\n\n  const triggerAnimation = DOMHighResTimeStamp => {\n    DOMHighResTimeStampCollection.unshift(DOMHighResTimeStamp)\n\n    if (DOMHighResTimeStampCollection.length > 10) {\n      const t0 = DOMHighResTimeStampCollection.pop()!\n      const fps = Math.floor(1000 * 10 / (DOMHighResTimeStamp - t0))\n\n      if (!callbackTriggered || fps > 1000) {\n        resolve(Math.min(fps, 1000)/* , DOMHighResTimeStampCollection */)\n      }\n\n      callbackTriggered = true\n    }\n\n    requestId = window.requestAnimationFrame(triggerAnimation)\n  }\n\n  window.requestAnimationFrame(triggerAnimation)\n\n  window.setTimeout(() => {\n    window.cancelAnimationFrame(requestId!)\n    requestId = null\n  }, 500)\n\n  return new Promise(_resolve => {\n    resolve = _resolve\n  })\n}\n\nexport const getGamemodeNumber = bot => {\n  switch (bot.game.gameMode) {\n    case 'survival': return 0\n    case 'creative': return 1\n    case 'adventure': return 2\n    case 'spectator': return 3\n    default: return -1\n  }\n}\n\nexport const isMajorVersionGreater = (ver1: string, ver2: string) => {\n  const [a1, b1] = ver1.split('.')\n  const [a2, b2] = ver2.split('.')\n  return +a1 > +a2 || (+a1 === +a2 && +b1 > +b2)\n}\n\nlet ourLastStatus: string | undefined = ''\nexport const setLoadingScreenStatus = function (status: string | undefined | null, isError = false, hideDots = false, fromFlyingSquid = false, minecraftJsonMessage?: Record<string, any>) {\n  // null can come from flying squid, should restore our last status\n  if (status === null) {\n    status = ourLastStatus\n  } else if (!fromFlyingSquid) {\n    ourLastStatus = status\n  }\n  fromFlyingSquid = false\n\n  if (status === undefined) {\n    appStatusState.status = ''\n\n    hideModal({ reactType: 'app-status' }, {}, { force: true })\n    return\n  }\n\n  if (!activeModalStack.some(x => x.reactType === 'app-status')) {\n    // just showing app status\n    resetAppStatusState()\n  }\n  showModal({ reactType: 'app-status' })\n  if (appStatusState.isError) {\n    miscUiState.gameLoaded = false\n    return\n  }\n  appStatusState.hideDots = hideDots\n  appStatusState.isError = isError\n  appStatusState.lastStatus = isError ? appStatusState.status : ''\n  appStatusState.status = status\n  appStatusState.minecraftJsonMessage = minecraftJsonMessage ?? null\n}\n\n// doesn't support snapshots\nexport const toMajorVersion = version => {\n  const [a, b] = (String(version)).split('.')\n  return `${a}.${b}`\n}\n\nlet prevRenderDistance = options.renderDistance\nexport const setRenderDistance = () => {\n  assertDefined(worldView)\n  const { renderDistance: singleplayerRenderDistance, multiplayerRenderDistance } = options\n  let renderDistance = miscUiState.singleplayer ? singleplayerRenderDistance : multiplayerRenderDistance\n  const zeroRenderDistance = miscUiState.singleplayer && renderDistance === 0\n  if (zeroRenderDistance) {\n    renderDistance = 1 // mineflayer limitation workaround\n  }\n  bot.setSettings({\n    viewDistance: renderDistance\n  })\n  if (zeroRenderDistance) {\n    localServer!.players[0].view = 0\n    renderDistance = 0\n  }\n  worldView.updateViewDistance(renderDistance)\n  prevRenderDistance = renderDistance\n}\nexport const reloadChunks = async () => {\n  if (!worldView) return\n  setRenderDistance()\n  await worldView.updatePosition(bot.entity.position, true)\n}\n\nexport const openGithub = (addUrl = '') => {\n  window.open(`${process.env.GITHUB_URL}${addUrl}`, '_blank')\n}\n\nexport const resolveTimeout = async (promise, timeout = 10_000) => {\n  return new Promise((resolve, reject) => {\n    promise.then(resolve, reject)\n    setTimeout(() => {\n      reject(new Error('timeout'))\n    }, timeout)\n  })\n}\n\nexport function assertDefined<T> (x: T | undefined): asserts x is T {\n  if (!x) throw new Error('Assertion failed. Something is not available')\n}\n\nexport const haveDirectoryPicker = () => {\n  return !!window.showDirectoryPicker\n}\n\nconst reportedWarnings = new Set<string>()\n\nexport const reportWarningOnce = (id: string, message: string) => {\n  if (reportedWarnings.has(id)) return\n  reportedWarnings.add(id)\n  console.warn(message)\n}\n"],"names":["module","require","loadTexture","globalThis","elemFaces","dot","a","b","getMesh","texture","jsonModel","overrides","bones","geoData","i","jsonBone","_overrides_rotation","bone","THREE","Math","cube","addCube","attr","boneId","texWidth","texHeight","mirror","cubeRotation","dir","corners","u0","v0","u1","v1","Object","ndx","eastOrWest","faceUvs","pos","u","v","posX","posY","posZ","inflate","vecPos","faceIndex","tempFaceUvs","rootBones","skeleton","geometry","material","mesh","knownNotHandled","temporaryMap","getEntity","name","entities","scaleEntity","offsetEntity","Vec3","EntityMesh","externalModels","e","Error","x","version","type","scene","originalType","mappedValue","objLoader","OBJLoader","texturePath","externalTexturesJson","huskPng","obj","scale","offset","child","_overrides_textures","skeletonHelper","steveTexture","getMyHand","image","newMap","stevePng","skinCanvas","document","img","Image","Promise","resolve","loadSkinToCanvas","box","setSkinUVs","width","height","depth","setUVs","textureWidth","textureHeight","toFaceVertices","x1","y1","x2","y2","top","bottom","left","front","right","back","uvAttr","uvRight","uvLeft","uvTop","uvBottom","uvFront","uvBack","newUVData","uvArray","uv","Float32Array","group","buildRotationMatrix","axis","degree","radians","cos","sin","axis0","axis1","axis2","matrix","vecadd3","vecsub3","matmul3","vector","renderBlockThreeAttr","models","block","biome","mcData","variants","neighbors","sx","sy","sz","modelVars","model","globalMatrix","globalShift","matmulmat3","te","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","ao","element","renderElement","doAO","face","eFace","mask1","mask2","minx","miny","minz","maxx","maxy","maxz","su","sv","tint","undefined","r","uvcs","uvsn","localMatrix","localShift","aos","vertex","baseu","basev","light","cornerLightResult","baseLight","renderBlockThree","args","data","getThreeBlockModelGroup","setBlockPosition","object","position","getBufferFromStream","stream","reject","buffer","Buffer","buf","openURL","url","newTab","window","isMobile","navigator","chunkPos","sectionPos","y","disposeObject","_obj_geometry","_obj_material","stats","lastY","addNewStat","id","pane","text","visible","updateStatText","customEvents","path","textureCache","cb","__dirname","loadJSON","json","loadImage","safeRequire","loadScript","scriptSrc","scriptElement","error","onLoad","cached","callback","xhr","XMLHttpRequest","status","WalkingGeneralSwing","PlayerAnimation","player","t","updateT","reset","tHand","basicArmRotationZ","basicCapeRotationX","toQuaternion","quaternion","defaultValue","Array","poseToEuler","pose","degreesToRadians","addNametag","entity","options","nameTag","c","canvas","getUsernameTexture","param","param1","username","nameTagBackgroundColor","nameTagTextOpacity","fontFamily","ctx","lines","String","textWidth","line","padding","fontSize","tex","spriteMat","nametags","isFirstUpperCase","str","Entities","EventEmitter","mode","boxHelper","rendering","ent","dt","entityId","playerObject","_this_entities_entityId","skinUrl","capeUrl","_this","skinTexture","inferModelType","earsCanvas","loadEarsToCanvasFromSkin","isCanvasBlank","channel","earsTexture","capeImage","capeCanvas","loadCapeToCanvas","capeTexture","entityPlayerId","animation","jsonLike","parsed","mojangson","nbt","flat","err","component","item","textureUv","size","itemsTexture","sizeY","sizeX","itemsTextureFlipped","materialFlipped","_entity_metadata","_entity_metadata1","isPlayerModel","m","clock","delta","wrapper","PlayerObject","NameTagObject","fromFormattedString","getEntityMesh","entityName","snakeCase","Entity","_reportError","addArmorModel","meta","getGeneralEntitiesMetadata","isInvisible","textDisplayMeta","getSpecificEntityMetadata","displayTextRaw","displayText","nameTagFixed","toRgba","color","complement","parseInt","hex","rawOpacity","armorStandMeta","isSmall","hasArms","hasBasePlate","isMarker","_c_parent","_c_parent1","headRotationDiff","TWEEN","da","dy","damageAmount","entityMesh","clonedMaterial","originalColor","entityData","loadedData","Proxy","target","p","receiver","_entityData_metadataKeys","index","slotType","layer","overlay","removeArmorModel","armorMaterial","itemParts","armorModels","meshName","_item_nbt_value_display_value_color","_item_nbt_value","g","Viewer","camera","userVersion","texturesVersion","console","z","chunk","isLightUpdate","stateId","set","sectionX","sectionZ","cursorBlockRel","worldBlockProvider","helper","yaw","pitch","_this_getMineflayerBot_entity","roll","cam","yOffset","volume","sound","audioLoader","start","Date","worldEmitter","currentLoadChunkBatch","worldConfig","setTimeout","fn","blockEntities","WorldRendererThree","d","generateSpiralMatrix","timeOfDay","_this_world","_this_world_rerenderAllChunks","_this_world1","skyLight","renderer","defaultWorldRendererConfig","delayedIterator","arr","delay","exec","chunkSize","WorldDataEmitter","chunkX","chunkZ","viewDistance","bot","emitEntity","oldBlock","newBlock","handChanged","isLeftHand","newItem","viewer","blockProperties","evt","listener","_target","posKey","_bot_world_getBlock","Number","botX","botZ","positions","sliceSize","promises","clonedLoadedChunks","loadedChunk","dx","dz","column","coords","force","lastX","lastZ","newViewToUnload","ViewRect","chunksToUnload","world","click","ori","cleanupMethod","dynamicMcDataFiles","defaultMesherConfig","worldCleanup","propertyKey","key","_target1","originalMethod","Reflect","arguments","WorldRendererCommon","numWorkers","workerName","worker","Worker","handleMessage","_this_geometryReceiveCount","_data_workerIndex","highest","chunkCoords","loadingKeys","isAnimationPlaying","value","message","posAbsolute","allMcData","mcDataRaw","toMajorVersion","JSON","_this_customTextures_blocks","_this_customTextures_items","resourcePackUpdate","prioritizeBlockTextures","blocksAssetsParser","AtlasParser","blocksAtlasLatest","blocksAtlasLegacy","itemsAssetsParser","itemsAtlasLatest","itemsAtlasLegacy","blockTexturesChanges","date","christmasPack","customBlockTextures","blocksAtlas","blocksCanvas","textureName","itemsAtlas","itemsCanvas","blockstatesModels","Infinity","_this_allLoadedIn","loc","startX","startZ","endX","endZ","n","updateAction","hash","_this_messagesQueue","useChangeWorker","distance","_hash","workerIndex","updateHandler","config","Map","Set","blocksAtlases","itemsAtlases","loadedChunks","parseSafe","task","renderSign","blockEntity","PrismarineChat","ctxHook","signboardY","heightOffset","_ctx","getCtx","texts","defaultColor","lineNum","patchExtra","extra","rendered","render","toRenderCanvas","plainText","renderText","node","MAX_LENGTH","renderedWidth","fillStyle","fontStyle","strikeStyle","underlineStyle","HoldingBlock","tweenJs","DURATION","rotation","initialPos","initialRot","mainAnim","origPosition","_this_lastHeldItem","_this_lastHeldItem1","_this_lastHeldItem2","originalCamera","ambientLight","directionalLight","_this_swingAnimation","_this_blockSwapAnimation","viewerSize","minSize","tween","scaleData","side","handItem","_this_holdingBlock","_this_holdingBlock1","blockInner","animatingCurrent","blockProvider","itemMesh","blockOuterGroup","rotationDeg","setRotation","final","debug","rotations","acc","isLeft","holdingBlock","newTime","setInterval","chunkDistance","section","cameraPos","staticChunkMesh","isWall","isHanging","signBlockEntity","sign","backSide","textures","texturekey","PrismarineChatLoader","scaleFactor","lineHeight","thickness","oldSections","worldView","includeY","currentX","currentY","currentZ","o","xRaw","yRaw","zRaw","children","_key","blockPos","shapePositions","LineSegmentsGeometry","wireframe","Wireframe","gl","StarField","genStar","colors","sizes","radius","increment","StarfieldMaterial","_this_points_position","versionToNumber","ver","versionToMajor","versionsMapToMajor","versionsMap","majorVersions","displayClientChat","parseFormattedMessagePacket","arg","global","formatMessage","msglist","readMsg","msg","styles","tText","splitted","j","part","msgWith","ex","_msg_extra","_msg_text","blockToItemRemaps","getItemFromBlock","appReplacableResources","latest_gui_title_minecraft","other_textures_1_19_gui_icons","other_textures_latest_gui_widgets","other_textures_latest_gui_bars","latest_gui_container_inventory","latest_gui_container_shulker_box","latest_gui_container_generic_54","latest_gui_container_furnace","latest_gui_container_crafting_table","latest_gui_container_dispenser","latest_gui_container_hopper","latest_gui_container_horse","latest_gui_container_villager2","latest_gui_container_enchanting_table","latest_gui_container_anvil","latest_gui_container_beacon","resourcesContentOriginal","notHideableModalsWithoutForce","activeModalStack","proxy","insertActiveModalStack","newModalStack","activeModalStacks","hideModal","last","showModalInner","subscribe","isGameActive","pointerLock","_document","modal","_modal_elem","showModal","elem","curModal","restorePrevious","cancel","lastModal","newModal","hideCurrentModal","_data","onHide","openOptionsMenu","miscUiState","loadedGameState","foregroundCheck","gameAdditionalState","_navigator","process","googleDriveFileSystem","lastWindow","PrismarineItem","itemsRenderer","peerInstance","lastClickedElTimeout","endFlyLoop","originalSetControlState","audioContext","panoramaCubeMap","lastMouseMove","activeTouch","_window","itemBeingUsed","usingItem","hand","useSnapshot","displayIndicator","setDisplayIndicator","useState","indicatorProgress","setIndicatorProgress","alternativeIndicator","setAlternativeIndicator","useEffect","displayBar","itemName","food","startTime","maxTime","progress","clearInterval","SharedHudVars","indicatorSize","isCypress","localStorage","getDataFromShape","shape","centerX","centerY","centerZ","getEntityCursor","getViewDirection","csPitch","snPitch","csYaw","snYaw","eX","eY","eZ","bX","bY","bZ","int","worldInteraction","WorldInteraction","loader","destroyStagesImages","breakMaterial","beforeRenderFrame","performance","assertDefined","_viewer_world_cursorBlock","upLineMaterial","inCreative","pixelRatio","LineMaterial","inSpectator","cursorBlock","cursorBlockDiggable","cursorChanged","activatableItems","f","activate","stop","cancelSleep","_bot_inventory_slots_","_bot_inventory_slots_1","_bot_heldItem","offhand","vecArray","oldLookAt","onGround","allShapes","cur","elapsed","time","state","_bot_blockAtCursor","newPos","_viewer_world_getLoadedChunksRelative","_viewer_world","_sessionStorage_ignorePackets","oldEmit","packetName","fullOrListener","attach","_bot","returnobj","localServer","blob","Blob","fs","URL","updateAutoJump","autoJump","subscribeKey","tracker","autoJumpPlugin","playerPerAnimation","_viewer_entities_entities_e_id","lastCall","tracking","info","speed","isWalking","isSprinting","newAnimation","damage","entityStatus","loadedSkinEntityIds","playerRenderSkin","packet","watchValue","resourcePackState","getLoadedImage","texturePackBasePath","uninstallTexturePack","existsAsync","removeFileRecursiveAsync","basePath","updateTexturePackInstalledState","getResourcePackNames","join","installTexturePack","file","displayName","isServer","installPath","showLoader","setLoadingScreenStatus","zip","JSZip","zipFile","mkdirRecursive","allFilesArr","done","upStatus","createdDirs","copyTasks","writePath","dirname","promise","completeTexturePackInstall","updateTextures","showNotification","getSizeFromImage","filePath","probeImg","getActiveTexturepackBasePath","enabledResourcepack","getResourcepackTiles","existingTextures","firstTextureSize","texturesCommonBasePath","texturesBasePath","texturesBasePathAlt","allInterestedPaths","allInterestedPathsPerDir","basename","allInterestedImages","paths","dirImages","appStatusState","firstImageFile","imagePath","contents","prepareBlockstatesAndModels","readData","namespaceDir","blockstatesPath","modelsPath","getAllJson","files","jsons","assetsDir","downloadAndUseResourcePack","response","fetch","resourcePackData","updateAllReplacableTextures","setCustomCss","varName","repeat","dataUrl","repeatArr","setCustomPicture","cssVar","cssVarRepeat","resourcePackPath","resPath","blocksFiles","itemsFiles","blocksData","itemsData","resourcepackReload","GoogleDriveFileSystem","browserfs","defaultMountablePoints","forceCachedDataPaths","forceRedirectPaths","promisify","toRemap","from","fsState","oneOf","fd","bytesRead","removeFileRecursiveSync","curPath","parts","current","uniqueFileNameFromWorldName","title","savePath","resultPath","sanitizeFilename","free","mountExportFolder","handle","showDirectoryPicker","DOMException","googleDriveGetFileIdFromPath","mountGoogleDriveFolder","readonly","rootId","errors","openWorldDirectory","dragndropHandle","directoryHandle","_directoryHandle","writeAccess","requestResult","SUPPORT_WRITE","confirm","loadSave","tryToDetectResourcePack","askInstall","alert","possiblyCleanHandle","readdirSafe","collectFilesToCopy","safe","result","countFiles","relPath","resolvedPath","existsViaStats","fileExistsAsyncOptimized","copyFilesAsync","pathSrc","pathDest","fileCopied","curPathSrc","curPathDest","openWorldFromHttpDir","fileDescriptorUrls","baseUrlParam","baseUrl","controller","AbortController","openWorldZipInner","File","dirs","availableWorlds","openWorldZip","resetLocalStorageWithoutWorld","resetOptions","openFilePicker","specificCase","picker","_picker_files","resetStateAfterDisconnect","readLevelDat","levelDatContent","levelDat","root","disconnect","disablePrompts","warnings","dataRaw","isFlat","_levelDat_Version","qs","URLSearchParams","lastSupportedVersion","supportedVersions","firstSupportedVersion","lowerBound","isMajorVersionGreater","upperBound","prompt","playerUuid","nameToMcOfflineUUID","UUID","javaUUID","s","crypto","playerDatPath","playerDataOverride","playerDat","gzip","rootRemapFile","CustomEvent","savePlayers","autoSave","location","saveServer","worlds","sessionStorage","event","_activeModalStack_at_elem","versionFrom","collisionShapesInit","renamedBlocks","getRenamedData","currentScaling","setScale","innerWidth","innerHeight","maxWidth","maxHeight","minHeight","descriptionGenerators","lowerCaseFirstLetter","string","description","obtainedFrom","getItemDescription","names","RegExp","loadedImagesCache","cleanLoadedImagesCache","allImagesLoadedState","onGameLoad","checkIfLoaded","ItemsRenderer","PItem","mapWindowType","inventoryStart","win","implementedWindow","implementedContainersGuiMap","openWindow","_bot_currentWindow","getItemName","Boolean","skipUpdate","_oldSlot","oldItem","craftingResultSlot","currentSlot","_bot_inventory_slots_i","count","slot","craftingSlots","resultingItem","getResultingRecipe","q","upJei","getImageSrc","getImage","blockData","loadPath","imageSrc","renderSlot","itemTexture","skipBlock","isItem","inGameError","getItemNameRaw","_itemNbt_display","customName","mapSlots","slots","slotCustomProps","icon","rest","upInventoryItems","isInventory","invWindow","customSlots","onModalClose","unsubscribe","search","matchedSlots","openItemsCanvas","inv","showInventory","allRecipes","getAllItemRecipes","itemDescription","allItemUsages","getAllItemUsages","skipClosePacketSending","_bot_currentWindow1","destroyFn","_activeModalStack_at_reactType","upWindowItems","oldOnInventoryEvent","containing","windowIndex","inventoryIndex","isRightClick","isLeftClick","slotItem","_index","isRightclick","_loadedData_itemsByName_slotItem_name","itemId","freeSlot","openPlayerInventory","gridRows","_currentShape_otherY","_recipeVariant_ingredients","shapelessResult","shapeResult","inputSlotsItems","blockSlot","currentShape","splitEvery","slotX","otherY","slotsIngredients","outer","recipeVariants","recipeVariant","equals","metadata","ingredientToItem","recipeItem","recipes","results","recipe","resultId","resultCount","resultMetadata","resultItem","ingredients","ingredientsItems","items","foundRecipeIds","row","Stats","stats2","hasRamPanel","statsGl","StatsGl","total","addStat","dom","toggleStatsVisibility","hideStats","statsStart","statsEnd","currentStatsPerSec","waitingStatsPerSec","label","_waitingStatsPerSec","_label","_waitingStatsPerSec_label","_currentStatsPerSec","updateStatsPerSecAvg","statsPerSecCurrent","lastReset","_statsPerSecCurrent","_name","dieReasonMessage","respawnCallback","disconnectCallback","MessageFormatted","Button","dieReasonProxy","isModalActive","useIsModalActive","messageParsed","DeathScreen","Slider","unit","valueProp","valueDisplay","min","max","disabledReason","updateOnDragEnd","updateValue","divProps","setValue","getRatio","ratio","setRatio","fireValueUpdate","dragEnd","newValue","isLocked","qsOptions","useCommonComponentsProps","disabledBecauseOfSetting","disableIfSetting","OptionButton","optionValue","valuesTitlesMap","useMemo","titleCase","noCase","showOptionsModal","values","getOptionValue","arrItem","currentIndex","OptionSlider","OptionElement","RenderOption","gameLoaded","_item","baseElement","backButtonAction","Screen","guiOptionsScheme","frameLimitValue","frameLimitMax","setFrameLimitMax","newVal","getScreenRefreshRate","Category","sp","resourcePackInstalled","usingServerResourcePack","choices","choice","UiToggleButton","touchControlsType","active","packetsReplaceSessionState","downloadPacketsReplay","addUiText","disabledUiParts","currentlyDisabled","newDisabledUiParts","tryFindOptionConfig","option","optionConfig","optionValueToType","finalItemsScheme","groupName","optionsArr","optionsObj","optionKey","metaMerge","OptionsItems","reactType","settingsGroup","OptionsGroup","initialTooltip","localStorageKey","showTooltips","setShowTooltips","timeout","hide","clearTimeout","arrowRef","useRef","refs","floatingStyles","context","useFloating","arrow","offsetMiddleware","ARROW_HEIGHT","FloatingArrow","httpsRegex","connectToServerAction","mapsProvider","singleplayerAction","optionsAction","githubAction","linksButton","openFileAction","versionText","onVersionTextClick","versionStatus","versionTitle","onVersionStatusClick","bottomRightLinks","linksParsed","l","ButtonWithTooltip","pixelartIcons","haveDirectoryPicker","link","DiscordButton","links","DropdownButton","isOpen","setIsOpen","autoPlacement","PixelartIcon","el","refreshApp","failedUpdate","registration","mainMenuState","disableAnimation","haveModals","appLoaded","appConfig","noDisplay","setVersionStatus","setVersionTitle","isLatest","mapsProviderUrl","encodeURIComponent","Transition","MainMenu","openGithub","CustomDuplex","Duplex","encoding","writeAction","overridePeerJsServer","getJoinLink","_miscUiState_appConfig","host","copyJoinLink","joinLink","openToWanAndCopyJoinLink","writeText","_miscUiState_appConfig1","doCopy","params","parseUrl","peer","Peer","connection","serverDuplex","client","Client","endConnection","disconnected","fallbackServer","hasFallback","hadErrorReported","destroy","urlObj","closeWan","connectToPeer","peerId","resolveTimeout","clientDuplex","addFolderToZip","folderPath","relativePath","entry","entryPath","zipEntryPath","subZip","fileData","exportWorld","zipName","zipContent","downloadLink","dest","exportLoadedWorld","worldFolder","commands","_window_cursorBlockRel_position","getBuiltinCommandsList","command","tryHandleBuiltinCommand","userCommand","CLIENT_ID","SCOPES","APP_ID","GoogleDriveProvider","React","GoogleOAuthProvider","isGoogleDriveAvailable","useGoogleLogIn","login","useGoogleLogin","tokenResponse","googleProviderState","ref","possiblyHandleStateVariable","stateParam","loadGoogleDriveApi","tokenClient","loadInMemorySave","onClick","worldsProxy","getWorldsPath","providersEnableFeatures","readWorlds","abortController","brokenWorlds","loggedIn","worldsPath","provider","newMappedWorlds","folder","levelDatStat","region","stat","iconBase64","iconPath","levelName","longArrayToNumber","longArray","high","low","getScore","worldPath","Inner","gapi","selectedProvider","selectedGoogleId","readWorldsAbortController","googleDriveReadonly","exists","googleLogIn","googlePicker","_googlePicker_current","selectGoogleFolder","google","view","isGoogleProviderReady","providerActions","GoogleButton","Singleplayer","brokenWorld","action","worldName","openInGoogleDrive","fileId","selectedVariant","worldTypes","gameModes","creatingWorldState","cancelClick","createClick","customizeClick","versions","defaultVersion","quota","setQuota","gameMode","_navigator_storage","usage","filesize","Input","SelectGameVersion","WorldCustomize","backClick","activeCreate","activeCustomize","defaultLocalServerOptions","CreateWorld","generation","hideOnModals","fullScreen","setFullScreen","activeStack","inMainMenu","usingTouch","useUsingTouch","hideButton","messages","setMessages","isChatActive","messagesLimit","chatOpacity","chatOpacityOpened","lastMessageId","chatSelect","_lastConnectOptions_value","jsonMsg","newMessage","fadeMessage","Chat","builtinHandled","updateLoadedServerData","server","_server","password","hideNotification","triggerKind","completeValue","_items_","Title","subtitle","actionBar","transitionTimes","openTitle","openActionBar","mounted","setMounted","useEnterTransition","setUseEnterTransition","startStyle","stateStyles","prev","MessageFormattedString","defaultText","defaultTimings","ticksToMs","ticks","setTitle","setSubtitle","setActionBar","animTimes","setAnimTimes","setOpenTitle","setOpenActionBar","mes","Scoreboard","open","style","reactKeyForMessage","ScoreboardProvider","setItems","setOpen","updateSidebarScoreboard","addStatPerSec","markdown","ast","md","remark","transformToMinecraftJSON","transformedChildren","ProseMirrorView","content","defaultMarkdownSerializer","schema","mark","fullMenu","buildMenuItems","EditorView","EditorState","defaultMarkdownParser","exampleSetup","handleInput","isWysiwyg","handleClick","prosemirrorContainer","editorView","code","elements","focusable","focusedElemIndex","nextElem","markdownToFormattedText","input","setLocation","isFrontText","setIsFrontText","enableWysiwyg","setEnableWysiwyg","SignEditor","smallSymbols","largeSymbols","addLength","letter","EffectBox","level","formattedTime","formatTime","seconds","minutes","remainingSeconds","formattedMinutes","formattedSeconds","defaultIndicatorsState","indicatorIcons","indicators","effects","effectsRef","interval","effect","indicatorsMapped","indicator","images","absorption","glowing","instant_health","nausea","slow_falling","weakness","bad_omen","haste","invisibility","night_vision","slowness","wither","blindness","health_boost","jump_boost","poison","conduit_power","hero_of_the_village","levitation","regeneration","strength","dolphins_grace","hunger","luck","resistance","unluck","fire_resistance","instant_damage","mining_fatigue","saturation","water_breathing","darkness","addEffect","newEffect","effectIndex","getEffectIndex","reduceTime","removeEffect","stateIndicators","hasErrors","isReadonly","openReadOperations","openWriteOperations","allIndicators","alreadyWaiting","effectsImages","nameKebab","IndicatorEffects","playersLists","clientId","tablistHeader","tablistFooter","serverIP","list","serverIp","setClientId","players","setPlayers","handleKeyDown","handleKeyUp","requestUpdate","_bot_player","playersArray","lists","tempList","PlayerListOverlay","INVISIBLE_BLOCKS","toggleFullMap","adapter","grid","setGrid","zoomRef","redrawCell","lastWarpPos","setLastWarpPos","stateRef","cells","isWarpInfoOpened","setIsWarpInfoOpened","initWarp","setInitWarp","warpPreview","setWarpPreview","updateGrid","_zoomRef_current_instance_wrapperComponent","wrapperRect","columns","cellSize","rows","leftBorder","topBorder","newGrid","col","TransformWrapper","TransformComponent","cellCoords","playerChunkLeft","playerChunkTop","offsetX","offsetY","MapChunk","WarpInfo","worldX","worldZ","redraw","containerRef","drawerRef","touchTimer","canvasRef","isCanvas","setIsCanvas","longPress","clientX","clientY","getXZ","mapX","mapZ","warp","_drawerRef_current","rect","factor","handleMouseMove","w","_canvasRef_current","_canvasRef_current1","_canvasRef_current2","_canvasRef_current3","_canvasRef_current4","intersectionObserver","IntersectionObserver","entries","warpPos","afterWarpIsSet","setWarp","posInputStyle","fieldCont","updateChunk","tpNow","quickTp","thisWarp","showMinimap","showFullmap","singleplayer","fullMap","displayMode","full","canvasTick","warpsAndPartsCanvasRef","playerPosCanvasRef","warpsDrawerRef","setPosition","updateMap","rotateMap","requestIdleCallback","updateWarps","displayFullmap","Fullmap","displayMini","MinimapDrawer","mapSize","botPos","_this_loadingChunksQueue","viewX","viewZ","worldCenterX","worldCenterZ","leftViewBorder","rightViewBorder","topViewBorder","bottomViewBorder","chunkInfo","chunkCanvasX","chunkWorldX","chunkCanvasY","chunkWorldZ","pixelX","pixelY","mousePos","centerPos","circleDist","angle","circleZ","circleX","angleS","angleW","angleE","canvasWorldCenterX","canvasWorldCenterZ","disableTurn","center","findHeightMap","DrawerAdapterImpl","TypedEventEmitter","newWarps","remove","source","minY","heightmap","Uint8Array","blockX","blockZ","hBlock","_preflatMap_blocks_","BlockData","blockY","regionX","regionZ","regionKey","RegionFile","rawChunk","simplify","linkedIndex","h","isLighterOrDarker","ur","dl","linkedColor","_color_match","rgbArray","newColor","blockKey","renamedKey","_localServer","Minimap","fullMapOpened","_activeModalStack_at","armor","getEffectClass","barEffectAdded","htmlElement","effectClass","barEffectEnded","isHardcore","damaged","healthValue","effectToAdd","effectToRemove","resetEffects","healthRef","hearts","healthElement","heart","num","foodRef","foodbar","foods","armorValue","armorRef","armors","armorElement","oxygen","breathRef","breathbar","breaths","breath","setDamaged","setHealthValue","setFood","setOxygen","setArmorValue","setGameMode","setIsHardcore","setEffectToAdd","setEffectToRemove","hurtTimeout","onDamage","updateHealth","hValue","upArmour","armorSlots","points","slotIndex","_armor_armorName_","armorName","HealthBar","ArmorBar","FoodBar","BreathBar","gamemode","setProgress","setLevel","setGamemode","onXpUpdate","XPBar","getFixedFilesize","bytes","prettyBytes","inner","_response_headers","mapUrlDir","mapUrlDirGuess","mapUrlDirBaseUrl","mapUrl","texturepack","downloadThing","contentType","contentLengthStr","contentLength","downloadedBytes","Response","ReadableStream","reader","_loadedData_biomesArray_biomeId","received","defaultPacketsCount","sent","customEntries","receivedTotal","packetsCountByNamePerSec","packetsCountByNamePer10Sec","packetsCountByName","ignoredPackets","packetsString","setPacketsString","showDebug","setShowDebug","setPos","skyL","setSkyL","blockL","setBlockL","biomeId","setBiomeId","day","setDay","entitiesCount","setEntitiesCount","dimension","setDimension","setCursorBlock","minecraftYaw","minecraftQuad","rendererDevice","viewDegToMinecraft","handleF3","readPacket","_buf","fullBuffer","managePackets","_packetsCountByName_current_type","_packetsCountByNamePerSec_current_type","_packetsCountByNamePer10Sec_current_type","_name1","_name2","hardcodedListOfDebugPacketsToIgnore","update","packetsUpdateInterval","freqUpdateInterval","quadsDescription","idx","customCommandsConfig","setting","getBase","nextIndex","Function","useIsWidgetActive","selected","setSelected","allSignsPos","signs","signPosKey","isSelected","AddElem","FullScreenWidget","ModuleSignsViewer","gamepadUiCursorState","moveGamepadCursorByPx","isX","valueToPercentage","hasModals","usingGamepadInput","doDisplay","customKeymaps","controlOptions","contro","ControMax","updateBinds","updateDoPreventDefault","setSprinting","soleVector","gamepadIndex","emitMousemove","coordToAction","newState","coord","_coordToAction_find","mapV","lastCommandTrigger","secondActionCommands","toggleFly","xAbs","yAbs","MouseEvent","lastClickedEl","inModalCommand","pressed","setSneaking","onTriggerOrReleased","stringStartsWith","alwaysPressedHandledCommand","lockUrl","newQs","save","botVersion","lastConnectOptions","cycleHotbarSlot","newHotbarSlot","_contro_userConfig","willContinue","commandToTrigger","chatInputValueGlobal","selectItem","goFullscreen","f3Keybinds","reloadChunks","widgetNames","widgets","widget","uuid","playerPing","proxyPing","hardcodedPressedKeys","keybind","makeInterval","intervalId","cleanup","isFlying","currentFlyVector","flyingPressedKeys","startFlyLoop","patchedSetControlState","changeVec","actionPerFlyVector","toAddVec","startFlying","sendAbilities","endFlying","standardAirborneAcceleration","allowFlying","onBotCreate","wasSpectatorFlying","flags","gamemodeCheck","_getItemFromBlock","actions","addEventListener","_e_target_matches","_e_target","Event","preventDefault","touchEvent","useLongPress","onLongPress","shouldPreventDefault","longPressTriggered","setLongPressTriggered","useCallback","clear","elRef","showMobileControls","bl","select","f3Keybind","longPressEvent","KeyboardEvent","waitForPotentialRender","requestAnimationFrame","saveToBrowserMemory","saveRootPath","allRootPaths","usedServerPathsV1","allFilesToCopy","dirBase","res","pathsSplitBasic","copied","isRegionFiles","upProgress","totalSize","copyFiles","copyPaths","totalSIze","copyFileGroup","copyPath","srcPath","regionFile","splitByCopySize","regionFiles","regionFilesNumbers","xMin","zMin","xMax","zMax","playerPosRegion","maxDistantRegion","filesWithSpiral","spiral","copySize","qsParams","lockConnect","fsStateSnap","wanOpened","wanOpening","handlePointerLockChange","clickWebShareButton","clickJoinLinkButton","qr","openWorldActions","saveName","sounds","loadingSounds","convertedSounds","loadSound","loadOrPlaySound","soundVolume","cancelled","playSound","reportWarningOnce","soundName","soundBuffer","gainNode","globalObject","diggingBlock","soundsLegacyMap","allSoundsMap","allSoundsMeta","allSoundsMajor","soundsMap","soundsPerName","playGeneralSound","soundKey","_soundsPerName_soundKey","_lastPlayedSounds_lastServerPlayed","soundStaticData","soundPath","versionedSound","getVersionedSound","isMuted","getDistance","_soundKey","lastPlayedSounds","playHardcodedSound","soundId","soundIdNum","soundCategory","_loadedData_sounds_","fixOffset","_packet_soundEvent","soundResource","useBlockSound","blockName","category","fallback","getStepSound","blockUnder","lastStepSound","movementHappening","stepSound","playBlockBreak","effectId","disablePosVolume","itemsMapSortedEntries","verNumber","itemsVer","downloadSoundsIfNeeded","pos1","pos2","SoundRow","mutedSounds","showMuted","setShowMuted","setI","useInterfaceState","actionAndState","modals","css","LeftTouchArea","RightTouchArea","InnerSearch","currentTouch","displaySearchInput","getCurrentAppScaling","parseFloat","getComputedStyle","joystickPointer","handleMovementStickDelta","touchActive","setupActive","buttonsPositions","closeButtonsSetup","joystickOuter","joystickInner","pointer","newButtonPositions","buttonProps","holdDown","worldInteractions","holdUp","pointerup","pointerToggledUpdate","setupPointer","xPerc","yPerc","MineIcon","touchControlsPositions","TouchAreasControls","newPositions","toCleanup","watchUnloadForCleanup","func","ItemName","itemKey","nodeRef","show","setShow","setItemName","defaultStyle","transitionStyles","itemData","customDisplay","container","setItemKey","mouseButton","hotbarSlot","canvasManager","setSize","upHotbarItems","unsub2","setSelectedSlot","_bot_inventory_slots","heldItemChanged","itemNbt","_exec","numPressed","touchStart","Portal","_bot_game","to","createPortal","ButtonProvider","customCommands","updateCurrBind","resetBinding","userConfig","setUserConfig","useContext","Context","customConfig","setCustomConfig","addNewCommand","newKey","isNaN","newCustomConf","commandData","indexOption","CustomCommandContainer","_userConfig_custom_commandKey","_userConfig_custom_commandKey1","groupData","commandKey","keys","gamepad","inputs","setInputValue","indexInput","newConfig","ButtonWithMatchesAlert","commandToRemove","parseBindingName","binding","keyboard","layoutMap","mapKey","cut","val","isPS","bindName","setBindName","setBind","buttonsMap","createContext","controEx","bindsMap","awaitingInputType","setAwaitingInputType","setGroupName","actionName","setActionName","buttonNum","setButtonNum","BindingActionsContext","setCustomCommands","setBinding","buttonIndex","_newConfig_group","_newConfig_group_command","_newConfig","_group","_command","_type","inputType","_userConfig_group","updateBindMap","updateBinding","pressedModifiers","_userConfig_group_action","_bindsMap_current_keyboard","_userConfig_group_action1","_bindsMap_current_gamepad","_currButtons_","currKeys","currButtons","_document_activeElement","AwaitingInputOverlay","_userConfig_group_action_keys","_userConfig_group_action_gamepad","parseActionName","KeybindingsCustom","_userConfig_group_action_","buttonSign","setButtonSign","_userConfig_group_action_type","customValue","Keybinding","prop","isGamepad","bindingActions","bindActions","setBindActions","hasPsGamepad","gp","KeybindingsScreen","setDataUrl","mapDownloader","setImageConverter","imageData","updateHeldMap","_bot_heldItem_nbt_value_map","_bot_heldItem_nbt_value","_bot_mapDownloader_maps","mapNumber","componentActive","withWildCardModal","watchedModalsFromHooks","hardcodedKnownModals","_useSnapshot_at","enabled","loginLink","connectingServer","expiresEnd","setSaveToken","defaultSaveToken","onCancel","directLink","timeLeft","setTimeLeft","useUtilsEffect","QRCodeSVG","signInMessageState","expiresOn","shouldSaveToken","signInTestModal","SignInMessage","Book","textPages","editable","onSign","onEdit","onClose","author","pages","setPages","currentPage","setCurrentPage","isSinglePage","setIsSinglePage","insideImage","setInsideImage","singlePageInsideIcon","insideIcon","animateInsideIcon","setAnimateInsideIcon","animatePageIcon","setAnimatePageIcon","animateTitleIcon","setAnimateTitleIcon","signClickedOnce","setSignClickedOnce","textAreaRefs","inputRef","handleResize","isSingle","handlePageChange","direction","prevPage","updatePage","prevPages","updatedPages","handleTextChange","pageIndex","_textAreaRefs_current_nextPageIndex","_textAreaRefs_current_","nextPageIndex","_textAreaRefs_current_index","handlePaste","pasteText","currentText","selectionStart","selectionEnd","newText","remainingText","handlePasteRemainingText","focusOnTextArea","handleSign","_inputRef_current","handleEdit","handleCancel","setRef","getAnimationClass","animationState","baseClass","renderPage","modalActive","openedBook","setOpenedBook","signEditBook","openBookWithNbt","book","parsedData","page","parsedPage","_item_nbt","divs","translations","bar","bossBarStyles","setBossBarStyles","fillStyles","setFillStyles","div1Styles","setDiv1Styles","div2Styles","setDiv2Styles","prevStyles","bossBars","setBossBars","bossBar","prevBossBars","newBossBars","BossBar","setMode","useIsHashActive","RobustPortal","PerComponentErrorBoundary","DisplayQr","currentDisplayQr","InGameComponent","InGameUi","showUIRaw","displayBossBars","modalsSnapshot","showUI","DeathScreenProvider","DebugOverlay","MobileTopButtons","PlayerListOverlayProvider","ChatProvider","SoundMuffler","MinimapProvider","TitleProvider","IndicatorEffectsProvider","Crosshair","BookProvider","BossBarOverlayProvider","PauseScreen","XPBarProvider","HudBarsProvider","BedTime","HotbarRenderApp","SignEditorProvider","TouchControls","GlobalSearchInput","AllWidgets","WidgetDisplay","Component","ErrorBoundary","componentNameClean","renderToDom","ButtonAppProvider","HeldMapUi","EnterFullscreenButton","SingleplayerProvider","CreateWorldProvider","AppStatusProvider","KeybindingsScreenProvider","SelectOption","ServersListProvider","OptionsRenderApp","MainMenuRenderApp","NotificationProvider","TouchAreasControlsProvider","SignInMessageProvider","NoModalFoundProvider","GamepadUiCursor","DebugEdges","App","disableReactProfiling","parseNbt","simplifyNbt","handleDroppedFile","tempPath","chunks","versionDetected","_","k","_versions_pc_find","simplified","mapped","_e_dataTransfer","filehandle","viewWatched","watchOptionsAfterWorldViewInit","initVR","connectedVirtualGamepad","checkVRSupport","enableVr","vrButtonContainer","createVrButtonContainer","vrButton","VRButton","styleContainer","typedAssign","closeButton","createCloseButton","updateVrButtons","unsubWatchSetting","unsubWatchModals","_navigator_xr","supported","XRSession","user","controllerModelFactory","XRControllerModelFactory","GLTFLoader","controller1","controller2","manageXrInputSource","defaultHandedness","handedness","removeAction","hand1","hand2","originalGetGamepads","originalGamepads","remapAxes","remapButtons","rotSnapReset","yawOffset","tmp","_modal","xrStandardRightButtonsMap","xrStandardLeftButtonsMap","rightButtons","leftButtons","remapped","remapWithMap","buttons","map","standardName","standardButtonsMap","aliases","alias","axesRight","axesLeft","shouldDisplayPanorama","panoramaUsesResourcePack","panoramaFiles","possiblyLoadPanoramaFromResourcePack","base64Texture","updateResourcePackSupportPanorama","addPanoramaCubeMap","panorGeo","panorMaterials","panoramaBox","removePanorama","oldState","states","customCommunication","processData","CustomChannelClient","newProperty","oldProperty","reason","packets","LocalServer","customPackets","hideErrors","createMCServer","startLocalServer","serverOptions","passOptions","unsupportedLocalServerFeatures","inWater","updateInWater","waterBr","updateBackground","_inWater","sceneBg","newSceneBg","timeUpdated","timeProgress","dayColor","progressNorm","night","colorInt","registerServiceWorker","registrationError","registrations","autoSaveInterval","downloadNeededDataOnConnect","initialDataVersion","minecraftInitialDataJson","versionsByMinecraftVersion","getViewerVersionData","ws","openWebsocket","oldWrite","_parsed_clientIgnoredPackets","WebSocket","ev","getWsProtocolStream","lastMessageTime","watchFov","updateFov","fovSetting","renamedBlocksInteraction","outputInteractionShapesJson","interactionShapes","initializePacketsReplay","handleResourcePackRequest","promptMessagePacket","forced","initWithRenderer","_child","renderWrapper","ViewerWrapper","startRendering","_this_renderer","renderInterval","ua","idOrName","_loadedData_items_idOrName","textureInfo","textureThree","watchOptionsAfterViewerInit","updateTouch","isChanged","mouseMovePostHandle","updateCursor","onCameraMove","now","mouseSensX","mouseSensY","stick","loadSingleplayer","serverOverrides","flattenedServerOverrides","serverSettingsQs","serverSettingsQsRaw","connect","listeners","cleanupFunctions","registerListener","removeAllListeners","cleanupFunction","cleanConnectIp","defaultPort","hostPort","connectOptions","_connectOptions_proxy","_authData_sessionEndpoint","bot1","lastPacket","p2pMultiplayer","renderDistanceSingleplayer","multiplayerRenderDistance","ended","destroyAll","cleanFs","onPossibleErrorDisconnect","handleError","errorAbortController","net","renderDistance","updateDataAfterJoin","initialLoadingText","clientDataStream","defaultsDeep","defaultServerOptions","downloadMcData","downloadVersion","newStatus","flyingSquidEvents","newTokensCacheResult","cachedTokens","authData","microsoftAuthflow","mineflayer","protocolMicrosoftAuth","_r","updateAuthenticatedAccountData","accounts","existingAccount","_supportFeature","feature","setupConnectHandlers","curI","onPong","originalSetSocket","socket","p2pConnectTimeout","kickReason","kickReasonFormatted","kickReasonString","packetBeforePlay","__","___","endReason","spawnEarlier","virtualClickTimeout","capturedPointer","MinecraftData","PrismarineBlock","pathfinder","botPosition","dayCycle","maxPitch","minPitch","notificationProxy","cameraControlEl","virtualClickActive","screenTouches","usingJoystick","clickedEl","_joystickPointer_pointer","supportsPressure","xDiff","yDiff","pointerUpHandler","moreServerOptions","firstClickable","ignoreElem","downloadAndOpenFile","downloadAction","waitAppConfigLoad","openServerEditor","checkCanDisplay","peerOptions","viewerWsConnect","initialLoader","getProxyDetails","proxyBaseUrl","isPageSecure","onMsaCodeCallback","authEndpoint","sessionEndpoint","tokenCaches","setProgressText","setCacheResult","connectingVersion","urlWithBase","authFlow","_restoredData_certificates_profileKeys","decoder","TextDecoder","processText","processChunk","chunkStr","strings","restoredData","restoreData","tryRestorePublicKey","parent","der","pemToArrayBuffer","pem","binaryDerString","atob","pemContents","binaryDer","originalName","exportedBuffer","base","defaultBase","lastElement","_options_touchControlsPositions","defaultOptions","getDefaultTouchControlsPositions","qsOptionsRaw","saveOptions","omitObj","watchedProps","replayLogger","PacketsLogger","isFromServer","diff","guessProblem","errorMessage","isError","hideDots","lastStatus","backAction","actionsSlot","loadingDotIndex","setLoadingDotIndex","statusRunner","timer","ms","load","endExitStyle","endStyle","basicStyle","stateMap","playerChunk","regionNumbers","minX","maxX","minZ","maxZ","xChunks","zChunks","Chunk","currentPlayer","initialState","resetAppStatusState","maybeRecoverable","descriptionHint","loadingChunksData","loadingChunksDataPlayerChunk","minecraftJsonMessage","replayActive","useDidUpdateEffect","divingElem","reconnect","displayAuthButton","displayVpnButton","authReconnectAction","oldAccounts","account","DiveTransition","AppStatus","PossiblyVpnBypassProxyButton","LoadingChunks","DisplayingIndicator","vpnBypassProxy","setVpnBypassProxy","capabilities","ButtonContext","inScreen","rootRef","_args","_args1","classNames","buttonCss","MessageLine","classes","MessagePart","initialTimeout","opacity","fetchCompletionItems","opened","sendMessage","allowSelection","inputDisabled","sendHistoryRef","completePadText","setCompletePadText","completeRequestValue","completionItemsSource","setCompletionItemsSource","completionItems","setCompletionItems","chatInput","chatMessages","openedChatWasAtBottom","chatHistoryPos","inputCurrentlyEnteredValue","setSendHistory","newHistory","acceptComplete","updateInputValue","getCompleteValue","onMainInputChange","resetCompletionItems","wasAtBottom","auxInputFocus","fireKey","getDefaultCompleteValue","raw","valueParts","lastLength","fetchCompletions","implicit","inputValue","newItems","updateFilteredCompleteItems","sourceItems","compareableParts","lastWord","compareablePart","isIos","autoFocus","rootStyles","validateInput","inputProps","validationStyle","setValidationStyle","hoverItemToText","hoverEvent","clickEventToProps","clickEvent","props","italic","bold","underlined","strikethrough","obfuscated","clickProps","hoverMessageRaw","hoverItemText","applyStyles","colorF","getColorShadow","dim","messageFormatStylesMap","parseInlineStyle","rule","className","fallbackColor","messageJson","subMessage","addStyles","autoHide","Notification","iconName","backdrop","titleSelectable","titleMarginTop","initialOptions","updateOptions","getCssOnInput","onValueChange","containerStyle","placeholder","disabled","currValue","setCurrValue","inputStyle","setInputStyle","isFirstClick","setIsFirstClick","Creatable","onChange","Select","newSel","parsedsupportedVersions","parsedValue","compareVersions","v2","num1","num2","minVersion","maxVersion","minecraftJsonMessageParsed","parseResult","_resolve","showCancel","resolveClose","initialProxies","updateProxiesProp","joinServer","setUsername","onProfileClick","setQuickConnectIp","proxies","setProxies","updateProxies","newData","setServerIp","setSave","activeHighlight","setActiveHighlight","getActiveHighlightStyles","isSmallWidth","useIsSmallWidth","ip","msAuth","checked","serverName","hovered","onBack","onConfirm","initialData","parseQs","onQsConnect","placeholders","authenticatedAccounts","qsParamName","qsParamIp","qsParamVersion","qsParamProxy","qsParamUsername","qsParamLockConnect","qsIpParts","ipParts","setServerName","serverPort","setServerPort","versionOverride","setVersionOverride","proxyOverride","setProxyOverride","usernameOverride","setUsernameOverride","smallWidth","initialAccount","accountIndex","setAccountIndex","noAccountSelected","authenticatedAccountOverride","freshAccount","ipFinal","commonUseOptions","InputWithLabel","fallbackIfNotFound","ButtonWrapper","_props","span","getInitialServersList","servers","legacyServersList","legacyLastJoinedServer","serversListQs","proxyQs","setNewServersList","serversList","getInitialProxies","newAccounts","normalizeIp","hidden","customServersList","selectedProxy","setSelectedProxy","serverEditScreen","setServerEditScreen","defaultUsername","_setDefaultUsername","_setAuthenticatedAccounts","quickConnectIp","selectedIndex","setSelectedIndex","setAuthenticatedAccounts","setDefaultUsername","saveNewProxy","setServersList","additionalData","setAdditionalData","_ip","_port","serversListSorted","signal","_data_version","versionClean","old","_data_motd","_data_players","_data_players1","isEditScreenModal","useCopyKeybinding","editModalJsx","AddServerOrConnect","lastJoined","dispatchEvent","serversListJsx","ServersList","_serversListSorted_find","_server_autoLogin","authenticatedAccount","shouldSave","indexOrIp","lastJoinedUsername","newServersList","additional","setCustomServersList","isJson","hasServersListModal","modalStack","editServerModalActive","isServersListModalActive","eitherModal","times","tabs","activeTab","labels","onTabChange","fullSize","disabledTabs","tab","World","isFocused","lastPlayed","detail","onFocus","onInteraction","iconSrc","formattedTextOverride","worldNameRight","timeRelativeFormatted","formatter","Intl","hours","days","sizeFormatted","missingWorldPreview","_worldData_defaultSelectedRow","worldData","onGeneralAction","onWorldAction","firstRowChildrenOverride","serversLayout","searchRowChildrenOverride","activeProvider","setActiveProvider","providers","disabledProviders","warning","warningAction","warningActionLabel","onRowSelect","defaultSelectedRow","listStyle","setListHovered","secondRowStyles","lockedEditing","firstButton","useTypedEventListener","setSearch","focusedWorld","setFocusedWorld","onRowSelectHandler","Tabs","Fragment","interaction","_firstButton_current","useMedia","SMALL_SCREEN_MEDIA","getCopyText","_window_getSelection","activeElement","HTMLInputElement","HTMLTextAreaElement","copyText","isActive","setIsActive","checkHash","removeEventListener","isMountingRef","UAParser","_allStack_at","useIncludes","allStack","createPublicKey","signatureAlgorithm","privateKeyPem","privateKeyBuffer","privateKey","hostname","Http","willreturn","BrowserFS","JsonOptimizer","properties","arrKey","diffs","diffing","_this_keys","_this_previousValues","removed","changed","removedProps","ignoreChanges","ignoreRemoved","added","diffingObj","possiblyNewKeys","lastRootKeyId","lastItemKeyId","addDiff","prevVal","valueMapped","isItemObj","keyId","removedPropsLocal","isEqualStructured","keyMapped","sourceVal","diffVal","_id","previousKey","toRemove","diffObj","changePossiblyArrDiff","targetKey","structuredClone","keysById","propertiesById","dataByKeys","versionKey","toAdd","change","propId","removePropsId","removePropId","removeProp","_propsValueCount_key","propsValueCount","valJson","_propsValueCount","_valJson","defaults","count1","count2","noData","_noData","_key1","val1","val2","optimizedDataResolver","customResolver","resolvedData","resolver","cache","cacheTime","possiblyGetFromCache","dataTypes","allRestored","dataType","shapes","pc","Titles","sessionServer","accessToken","sessionSelectedProfileId","serverId","sharedSecret","publicKey","ignoredVersionsRegex","doToggle","_navigator_keyboard","displayBrowserProblem","requestId","callbackTriggered","DOMHighResTimeStampCollection","triggerAnimation","DOMHighResTimeStamp","fps","ver1","ver2","a1","b1","a2","b2","ourLastStatus","fromFlyingSquid","prevRenderDistance","setRenderDistance","singleplayerRenderDistance","zeroRenderDistance","addUrl","reportedWarnings"],"mappings":"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"}